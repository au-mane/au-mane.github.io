import{w as N}from"./index.E9wDjadY.js";import{s as H}from"./supabase-config.Y8iSvhNi.js";import{b as se,s as ee,e as q,t as p,d as V,j as E,k as y,m as D,f as A,i as C,n as T,L as j,o as S,p as k,I as P,H as O,q as w,w as F,y as le,M as te,F as ne,A as R,N as Q,O as K,P as oe,Q as W,R as ce,S as z,T as L,K as re,U as fe,V as ue,W as de}from"./scheduler.BCfJoXAU.js";import{S as ae,i as ie}from"./index.CXmuTnoX.js";import{e as B}from"./Header.PPgXQXh9.js";import{g as he}from"./FormSkeleton.DxANlUgC.js";const G=N([]);let U=!1;async function M(){if(U)return se(G);U=!0;const{data:t,error:e}=await H.from("accounts").select("*").order("name",{ascending:!0});if(e)throw e;const l=t||[];return G.set(l),U=!1,l}async function _e(t){const{data:e,error:l}=await H.from("accounts").insert([t]).select();if(l)throw l;return await M(),e?e[0]:void 0}async function me(t,e){const{data:l,error:a}=await H.from("accounts").update(e).eq("id",t).select();if(a)throw a;return await M(),l?l[0]:void 0}async function ge(t){const{error:e}=await H.from("accounts").delete().eq("id",t);if(e)throw e;await M()}let I=null;const be=()=>{const t=N(!1),e=N([]),l=N();return I={stores:{loading:t,targetAccount:l,data:e},actions:{reload:async()=>{t.set(!0);const g=await M();e.set(g),t.set(!1)},createAccount:async g=>{t.set(!0);try{await _e(g)}catch(_){console.error(_)}finally{t.set(!1)}},updateAccount:async(g,_)=>{t.set(!0);try{await me(g,_)}catch(d){console.error(d)}finally{t.set(!1)}},deleteAccount:async g=>{t.set(!0);try{await ge(g)}catch(_){console.error(_)}finally{t.set(!1)}}}},I},De=()=>I?.stores&&Object.keys(I.stores).length>0&&I?.actions&&Object.keys(I.actions).length>0?I:be(),we=()=>{I=null};function J(t){let e,l;return{c(){e=q("small"),l=p(t[3]),this.h()},l(a){e=E(a,"SMALL",{class:!0});var i=y(e);l=D(i,t[3]),i.forEach(A),this.h()},h(){T(e,"class","fw-lighter fst-italic"),j(e,"text-danger",t[7])},m(a,i){S(a,e,i),k(e,l)},p(a,i){i&8&&w(l,a[3]),i&128&&j(e,"text-danger",a[7])},d(a){a&&A(e)}}}function ve(t){let e,l,a,i,r,n,g,_,d,f=t[3]&&J(t);return{c(){e=q("div"),l=q("div"),a=p(t[1]),i=p(t[9]),r=V(),n=q("input"),g=V(),f&&f.c(),this.h()},l(s){e=E(s,"DIV",{class:!0});var u=y(e);l=E(u,"DIV",{});var v=y(l);a=D(v,t[1]),i=D(v,t[9]),v.forEach(A),r=C(u),n=E(u,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),g=C(u),f&&f.l(u),u.forEach(A),this.h()},h(){T(n,"name",t[2]),T(n,"type","text"),T(n,"class","form-control"),T(n,"placeholder",t[4]),n.disabled=t[5],n.required=t[6],j(n,"is-invalid",t[7]),T(e,"class","d-flex flex-column gap-1")},m(s,u){S(s,e,u),k(e,l),k(l,a),k(l,i),k(e,r),k(e,n),t[11](n),P(n,t[0]),k(e,g),f&&f.m(e,null),_||(d=[O(n,"focus",t[12]),O(n,"input",t[13]),O(n,"keyup",t[10])],_=!0)},p(s,[u]){u&2&&w(a,s[1]),u&512&&w(i,s[9]),u&4&&T(n,"name",s[2]),u&16&&T(n,"placeholder",s[4]),u&32&&(n.disabled=s[5]),u&64&&(n.required=s[6]),u&1&&n.value!==s[0]&&P(n,s[0]),u&128&&j(n,"is-invalid",s[7]),s[3]?f?f.p(s,u):(f=J(s),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i:F,o:F,d(s){s&&A(e),t[11](null),f&&f.d(),_=!1,le(d)}}}function Ae(t,e,l){let a,{label:i=""}=e,{name:r=""}=e,{helperText:n=""}=e,{placeholder:g=""}=e,{value:_}=e,{loading:d}=e,{required:f}=e,{isInvalid:s}=e,u;const v=te(),b=()=>{v("valueChanged",{value:_})};function o(h){ne[h?"unshift":"push"](()=>{u=h,l(8,u)})}const c=()=>u.select();function m(){_=this.value,l(0,_)}return t.$$set=h=>{"label"in h&&l(1,i=h.label),"name"in h&&l(2,r=h.name),"helperText"in h&&l(3,n=h.helperText),"placeholder"in h&&l(4,g=h.placeholder),"value"in h&&l(0,_=h.value),"loading"in h&&l(5,d=h.loading),"required"in h&&l(6,f=h.required),"isInvalid"in h&&l(7,s=h.isInvalid)},t.$$.update=()=>{t.$$.dirty&64&&l(9,a=f?"*":"")},[_,i,r,n,g,d,f,s,u,a,b,o,c,m]}class Oe extends ae{constructor(e){super(),ie(this,e,Ae,ve,ee,{label:1,name:2,helperText:3,placeholder:4,value:0,loading:5,required:6,isInvalid:7})}}function X(t,e,l){const a=t.slice();return a[12]=e[l],a}function Y(t){let e,l,a,i,r,n,g,_,d=t[1]&&Z(t),f=B(t[2]),s=[];for(let o=0;o<f.length;o+=1)s[o]=x(X(t,f,o));let u=[t[8],{class:"form-select"},{disabled:r=t[3]||t[4]},{"aria-label":t[1]}],v={};for(let o=0;o<u.length;o+=1)v=K(v,u[o]);let b=t[5]&&$(t);return{c(){e=q("div"),d&&d.c(),l=V(),a=q("select"),i=q("option");for(let o=0;o<s.length;o+=1)s[o].c();n=V(),b&&b.c(),this.h()},l(o){e=E(o,"DIV",{class:!0});var c=y(e);d&&d.l(c),l=C(c),a=E(c,"SELECT",{class:!0,"aria-label":!0});var m=y(a);i=E(m,"OPTION",{}),y(i).forEach(A);for(let h=0;h<s.length;h+=1)s[h].l(m);m.forEach(A),n=C(c),b&&b.l(c),c.forEach(A),this.h()},h(){i.__value="",P(i,i.__value),W(a,v),t[0]===void 0&&ce(()=>t[10].call(a)),T(e,"class","d-flex flex-column gap-1")},m(o,c){S(o,e,c),d&&d.m(e,null),k(e,l),k(e,a),k(a,i);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(a,null);"value"in v&&(v.multiple?z:L)(a,v.value),a.autofocus&&a.focus(),L(a,t[0],!0),k(e,n),b&&b.m(e,null),g||(_=[O(a,"change",t[10]),O(a,"change",t[7])],g=!0)},p(o,c){if(o[1]?d?d.p(o,c):(d=Z(o),d.c(),d.m(e,l)):d&&(d.d(1),d=null),c&4){f=B(o[2]);let m;for(m=0;m<f.length;m+=1){const h=X(o,f,m);s[m]?s[m].p(h,c):(s[m]=x(h),s[m].c(),s[m].m(a,null))}for(;m<s.length;m+=1)s[m].d(1);s.length=f.length}W(a,v=he(u,[c&256&&o[8],{class:"form-select"},c&24&&r!==(r=o[3]||o[4])&&{disabled:r},c&2&&{"aria-label":o[1]}])),c&282&&"value"in v&&(v.multiple?z:L)(a,v.value),c&5&&L(a,o[0]),o[5]?b?b.p(o,c):(b=$(o),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},d(o){o&&A(e),d&&d.d(),re(s,o),b&&b.d(),g=!1,le(_)}}}function Z(t){let e,l,a;return{c(){e=q("div"),l=p(t[1]),a=p(t[6])},l(i){e=E(i,"DIV",{});var r=y(e);l=D(r,t[1]),a=D(r,t[6]),r.forEach(A)},m(i,r){S(i,e,r),k(e,l),k(e,a)},p(i,r){r&2&&w(l,i[1]),r&64&&w(a,i[6])},d(i){i&&A(e)}}}function x(t){let e,l=t[12].key+"",a,i;return{c(){e=q("option"),a=p(l),this.h()},l(r){e=E(r,"OPTION",{});var n=y(e);a=D(n,l),n.forEach(A),this.h()},h(){e.__value=i=t[12].value,P(e,e.__value)},m(r,n){S(r,e,n),k(e,a)},p(r,n){n&4&&l!==(l=r[12].key+"")&&w(a,l),n&4&&i!==(i=r[12].value)&&(e.__value=i,P(e,e.__value))},d(r){r&&A(e)}}}function $(t){let e,l;return{c(){e=q("small"),l=new fe(!1),this.h()},l(a){e=E(a,"SMALL",{class:!0});var i=y(e);l=ue(i,!1),i.forEach(A),this.h()},h(){l.a=null,T(e,"class","fw-lighter fst-italic")},m(a,i){S(a,e,i),l.m(t[5],e)},p(a,i){i&32&&l.p(a[5])},d(a){a&&A(e)}}}function ke(t){let e,l=t[2].length>0&&Y(t);return{c(){l&&l.c(),e=R()},l(a){l&&l.l(a),e=R()},m(a,i){l&&l.m(a,i),S(a,e,i)},p(a,[i]){a[2].length>0?l?l.p(a,i):(l=Y(a),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:F,o:F,d(a){a&&A(e),l&&l.d(a)}}}function Te(t,e,l){let a;const i=["label","options","value","loading","required","disabled","helperText"];let r=Q(e,i),{label:n=""}=e,{options:g}=e,{value:_}=e,{loading:d=!1}=e,{required:f=!1}=e,{disabled:s}=e,{helperText:u=""}=e;const v=te(),b=()=>{v("change",{value:_})};function o(){_=de(this),l(0,_),l(2,g)}return t.$$set=c=>{e=K(K({},e),oe(c)),l(8,r=Q(e,i)),"label"in c&&l(1,n=c.label),"options"in c&&l(2,g=c.options),"value"in c&&l(0,_=c.value),"loading"in c&&l(3,d=c.loading),"required"in c&&l(9,f=c.required),"disabled"in c&&l(4,s=c.disabled),"helperText"in c&&l(5,u=c.helperText)},t.$$.update=()=>{t.$$.dirty&512&&l(6,a=f?"*":"")},[_,n,g,d,s,u,a,b,r,f,o]}class Pe extends ae{constructor(e){super(),ie(this,e,Te,ke,ee,{label:1,options:2,value:0,loading:3,required:9,disabled:4,helperText:5})}}export{Pe as S,Oe as T,we as d,De as g};
