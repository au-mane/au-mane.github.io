import{d as w,w as h}from"./index.nBfE35gB.js";import{K as O}from"./scheduler.BNdSUW5B.js";var e=(t=>(t.UnAuthenticated="un-authenticated",t.Authenticated="authenticated",t.Kids="kids",t.Admin="admin",t.Root="root",t))(e||{});const l={username:"User",role:e.UnAuthenticated},x={username:"Auth",role:e.Authenticated},S={username:"taatu",role:e.Authenticated},A={username:"josh",role:e.Authenticated},U={username:"Kid",role:e.Kids},y={username:"Admin",role:e.Admin},I={username:"Root",role:e.Root},T=[{label:"Home",url:"/home",roles:[e.UnAuthenticated,e.Kids,e.Authenticated,e.Admin,e.Root],index:1},{label:"Come Follow Me",url:"/come-follow-me",roles:[e.Authenticated,e.Kids,e.Admin,e.Root],index:2},{label:"Expenses",url:"/transactions",roles:[e.Authenticated,e.Admin,e.Root],index:3},{label:"Bills",url:"/bills",roles:[e.Authenticated,e.Admin,e.Root],index:4},{label:"Accounts",url:"/accounts",roles:[e.Root],index:5},{label:"Categories",url:"/categories",roles:[e.Root],index:6},{label:"Tags",url:"/tags",roles:[e.Root],index:7},{label:"Budgets",url:"/budgets",roles:[e.Authenticated,e.Admin,e.Root],index:8}];function E(t){const a=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&a==="[object Date]"?new t.constructor(+t):typeof t=="number"||a==="[object Number]"||typeof t=="string"||a==="[object String]"?new Date(t):new Date(NaN)}function k(t){return E(t).getDay()===0}const _=()=>{const{stores:{authenticated:t,currentUser:a},actions:{init:o}}=L();o();const s=O(t),f=O(a);let i=[];const b={label:"Login",url:"/auth/login",roles:[e.UnAuthenticated],index:100},N=s?[]:[b];i=[...i,...T,...N];const R=(c,r)=>c&&c.find(d=>d.role===r)?.sundayOnly?k(new Date):!0;return i.filter(c=>{const r=f.role,n=!!c.roles.find(g=>g===r),d=R(c.visibilities,r);return n&&d}).sort((c,r)=>c.index-r.index)};async function m(t){function a(i){return Array.from(new Uint8Array(i)).map(b=>b.toString(16).padStart(2,"0")).join("")}const s=new TextEncoder().encode(t),f=await crypto.subtle.digest("SHA-256",s);return a(f)}const j=(t,a="USD",o="en-US")=>t!==void 0?new Intl.NumberFormat(o,{style:"currency",currency:a}).format(t):"0.00";let u=null;const p=()=>{const t=h(!1),a=h("Home"),o=h(!1),s=h(l),f=w([s],([r])=>r.role===e.Admin),i=w([s],([r])=>r.role===e.Root);return u={stores:{darkTheme:t,pageName:a,authenticated:o,currentUser:s,currentUserIsAdmin:f,currentUserIsRoot:i},actions:{init:()=>{const r=localStorage.getItem("theme"),n=r??"light";t.set(r==="dark"),document.documentElement.setAttribute("data-bs-theme",n),localStorage.setItem("theme",n);const d=localStorage.getItem("currentUser"),g=d?JSON.parse(d):l;switch(s.set(g),localStorage.setItem("currentUser",JSON.stringify(g)),g.username){case x.username:case y.username:case A.username:case S.username:case U.username:case I.username:o.set(!0);break;case l.username:default:o.set(!1)}},toggleTheme:()=>{const r=localStorage.getItem("theme");let n="light";r==="light"&&(n="dark"),t.set(n==="dark"),document.documentElement.setAttribute("data-bs-theme",n),localStorage.setItem("theme",n)},login:async(r,n)=>!r||!n?!1:(console.log(await m(n)),r.toLowerCase().trim()==="taatu"&&await m(n)==="3821b3532602dbb515dba36e8ef7a6d28b0e1c0609f70bf2e7101083efe2a76c"?(s.set(S),o.set(!0),localStorage.setItem("currentUser",JSON.stringify(S)),!0):r.toLowerCase().trim()==="josh"&&await m(n)==="3821b3532602dbb515dba36e8ef7a6d28b0e1c0609f70bf2e7101083efe2a76c"?(s.set(A),o.set(!0),localStorage.setItem("currentUser",JSON.stringify(A)),!0):r.toLowerCase().trim()==="kid"&&await m(n)==="c183d7653e0e192a4d4e9fdb7458c5d8faf549080daf25a287e34cd20c0104ba"?(s.set(U),o.set(!0),localStorage.setItem("currentUser",JSON.stringify(U)),!0):r.toLowerCase().trim()==="admin"&&await m(n)==="edc2a5029fa275e11e60c57dd5a910b4143df66598cc0495c6220c9289132f2d"?(s.set(y),o.set(!0),localStorage.setItem("currentUser",JSON.stringify(y)),!0):r.toLowerCase().trim()==="root"&&await m(n)==="edc2a5029fa275e11e60c57dd5a910b4143df66598cc0495c6220c9289132f2d"?(s.set(I),o.set(!0),localStorage.setItem("currentUser",JSON.stringify(I)),!0):(localStorage.setItem("currentUser",JSON.stringify(l)),s.set(l),o.set(!1),!1)),logout:()=>{o.set(!1),localStorage.setItem("currentUser",JSON.stringify(l)),s.set(l)}}},u},L=()=>u?.stores&&Object.keys(u.stores).length>0&&u?.actions&&Object.keys(u.actions).length>0?u:p();export{e as U,_ as a,j as f,L as g,E as t};
