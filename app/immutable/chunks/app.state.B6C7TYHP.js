import{d as R,w as b}from"./index.2cg2wEKR.js";import{X as p}from"./scheduler.D0aYECZP.js";var t=(e=>(e.UnAuthenticated="un-authenticated",e.Authenticated="authenticated",e.Kids="kids",e.Admin="admin",e.Root="root",e))(t||{});const l={username:"User",role:t.UnAuthenticated},w={username:"Auth",role:t.Authenticated},S={username:"taatu",role:t.Authenticated},A={username:"josh",role:t.Authenticated},y={username:"Kid",role:t.Kids},U={username:"Admin",role:t.Admin},I={username:"Root",role:t.Root},x=[{label:"Dashboard",url:"/dashboard",roles:[t.Authenticated,t.Admin,t.Root],index:0},{label:"Expenses",url:"/expenses",roles:[t.Authenticated,t.Admin,t.Root],index:1},{label:"Incomes",url:"/incomes",roles:[t.Authenticated,t.Admin,t.Root],index:2},{label:"Budgets",url:"/budgets",roles:[t.Authenticated,t.Admin,t.Root],index:3},{label:"Reports",url:"/reports",roles:[t.Authenticated,t.Admin,t.Root],index:3},{label:"Settings",url:"/settings",roles:[t.Authenticated,t.Admin,t.Root],index:3}];function T(e){const a=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&a==="[object Date]"?new e.constructor(+e):typeof e=="number"||a==="[object Number]"||typeof e=="string"||a==="[object String]"?new Date(e):new Date(NaN)}function E(e){return T(e).getDay()===0}const j=()=>{const{stores:{authenticated:e,currentUser:a},actions:{init:s}}=D();s();const o=p(e),f=p(a);let i=[];const h={label:"Login",url:"/auth/login",roles:[t.UnAuthenticated],index:100},N=o?[]:[h];i=[...i,...x,...N];const O=(c,r)=>c&&c.find(d=>d.role===r)?.sundayOnly?E(new Date):!0;return i.filter(c=>{const r=f.role,n=!!c.roles.find(m=>m===r),d=O(c.visibilities,r);return n&&d}).sort((c,r)=>c.index-r.index)};async function g(e){function a(i){return Array.from(new Uint8Array(i)).map(h=>h.toString(16).padStart(2,"0")).join("")}const o=new TextEncoder().encode(e),f=await crypto.subtle.digest("SHA-256",o);return a(f)}const J=(e,a="USD",s="en-US")=>e!==void 0?new Intl.NumberFormat(s,{style:"currency",currency:a}).format(e):"0.00";let u=null;const k=()=>{const e=b(!1),a=b("Dashboard"),s=b(!1),o=b(l),f=R([o],([r])=>r.role===t.Admin),i=R([o],([r])=>r.role===t.Root);return u={stores:{darkTheme:e,pageName:a,authenticated:s,currentUser:o,currentUserIsAdmin:f,currentUserIsRoot:i},actions:{init:()=>{const r=localStorage.getItem("theme"),n=r??"light";e.set(r==="dark"),document.documentElement.setAttribute("data-bs-theme",n),localStorage.setItem("theme",n);const d=localStorage.getItem("currentUser"),m=d?JSON.parse(d):l;switch(o.set(m),localStorage.setItem("currentUser",JSON.stringify(m)),m.username){case w.username:case U.username:case A.username:case S.username:case y.username:case I.username:s.set(!0);break;case l.username:default:s.set(!1)}},toggleTheme:()=>{const r=localStorage.getItem("theme");let n="light";r==="light"&&(n="dark"),e.set(n==="dark"),document.documentElement.setAttribute("data-bs-theme",n),localStorage.setItem("theme",n)},login:async(r,n)=>!r||!n?!1:r.toLowerCase().trim()==="taatu"&&await g(n)==="3821b3532602dbb515dba36e8ef7a6d28b0e1c0609f70bf2e7101083efe2a76c"?(o.set(S),s.set(!0),localStorage.setItem("currentUser",JSON.stringify(S)),!0):r.toLowerCase().trim()==="josh"&&await g(n)==="3821b3532602dbb515dba36e8ef7a6d28b0e1c0609f70bf2e7101083efe2a76c"?(o.set(A),s.set(!0),localStorage.setItem("currentUser",JSON.stringify(A)),!0):r.toLowerCase().trim()==="kid"&&await g(n)==="c183d7653e0e192a4d4e9fdb7458c5d8faf549080daf25a287e34cd20c0104ba"?(o.set(y),s.set(!0),localStorage.setItem("currentUser",JSON.stringify(y)),!0):r.toLowerCase().trim()==="admin"&&await g(n)==="edc2a5029fa275e11e60c57dd5a910b4143df66598cc0495c6220c9289132f2d"?(o.set(U),s.set(!0),localStorage.setItem("currentUser",JSON.stringify(U)),!0):r.toLowerCase().trim()==="root"&&await g(n)==="edc2a5029fa275e11e60c57dd5a910b4143df66598cc0495c6220c9289132f2d"?(o.set(I),s.set(!0),localStorage.setItem("currentUser",JSON.stringify(I)),!0):(localStorage.setItem("currentUser",JSON.stringify(l)),o.set(l),s.set(!1),!1),logout:()=>{s.set(!1),localStorage.setItem("currentUser",JSON.stringify(l)),o.set(l)}}},u},D=()=>u?.stores&&Object.keys(u.stores).length>0&&u?.actions&&Object.keys(u.actions).length>0?u:k();export{t as U,j as a,J as f,D as g,T as t};
