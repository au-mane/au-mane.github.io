import{d as N,w as h}from"./index.CmMfxuDM.js";import{k as O}from"./scheduler.CK6sr-I7.js";var r=(e=>(e.UnAuthenticated="un-authenticated",e.Authenticated="authenticated",e.Admin="admin",e.Root="root",e))(r||{});const l={username:"User",role:r.UnAuthenticated},m={username:"Auth",role:r.Authenticated},y={username:"Admin",role:r.Admin},A={username:"Root",role:r.Root},T=[{label:"Home",url:"/home",roles:[r.UnAuthenticated,r.Authenticated,r.Admin,r.Root],index:1},{label:"Transactions",url:"/transactions",roles:[r.Authenticated,r.Admin,r.Root],index:2},{label:"Categories",url:"/categories",roles:[r.Root],index:3},{label:"Tags",url:"/tags",roles:[r.Root],index:4},{label:"Budgets",url:"/budgets",roles:[r.Authenticated,r.Admin,r.Root],index:5}];function k(e){const a=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&a==="[object Date]"?new e.constructor(+e):typeof e=="number"||a==="[object Number]"||typeof e=="string"||a==="[object String]"?new Date(e):new Date(NaN)}function w(e){return k(e).getDay()===0}const L=()=>{const{stores:{authenticated:e,currentUser:a},actions:{init:n}}=R();n();const s=O(e),f=O(a);let i=[];const b={label:"Login",url:"/auth/login",roles:[r.UnAuthenticated],index:100},U=s?[]:[b];i=[...i,...T,...U];const I=(c,t)=>c&&c.find(d=>d.role===t)?.sundayOnly?w(new Date):!0;return i.filter(c=>{const t=f.role,o=!!c.roles.find(g=>g===t),d=I(c.visibilities,t);return o&&d}).sort((c,t)=>c.index-t.index)};async function S(e){function a(i){return Array.from(new Uint8Array(i)).map(b=>b.toString(16).padStart(2,"0")).join("")}const s=new TextEncoder().encode(e),f=await crypto.subtle.digest("SHA-256",s);return a(f)}const D=(e,a="USD",n="en-US")=>e!==void 0?new Intl.NumberFormat(n,{style:"currency",currency:a}).format(e):"0.00";let u=null;const p=()=>{const e=h(!1),a=h("Home"),n=h(!1),s=h(l),f=N([s],([t])=>t.role===r.Admin),i=N([s],([t])=>t.role===r.Root);return u={stores:{darkTheme:e,pageName:a,authenticated:n,currentUser:s,currentUserIsAdmin:f,currentUserIsRoot:i},actions:{init:()=>{const t=localStorage.getItem("theme"),o=t??"light";e.set(t==="dark"),document.documentElement.setAttribute("data-bs-theme",o),localStorage.setItem("theme",o);const d=localStorage.getItem("currentUser"),g=d?JSON.parse(d):l;switch(s.set(g),localStorage.setItem("currentUser",JSON.stringify(g)),g.username){case m.username:n.set(!0);break;case y.username:n.set(!0);break;case A.username:n.set(!0);break;case l.username:default:n.set(!1)}},toggleTheme:()=>{const t=localStorage.getItem("theme");let o="light";t==="light"&&(o="dark"),e.set(o==="dark"),document.documentElement.setAttribute("data-bs-theme",o),localStorage.setItem("theme",o)},login:async(t,o)=>!t||!o?!1:t.toLowerCase()==="taatu"&&await S(o)==="3821b3532602dbb515dba36e8ef7a6d28b0e1c0609f70bf2e7101083efe2a76c"||t.toLowerCase()==="josh"&&await S(o)==="3821b3532602dbb515dba36e8ef7a6d28b0e1c0609f70bf2e7101083efe2a76c"?(s.set(m),n.set(!0),localStorage.setItem("currentUser",JSON.stringify(m)),!0):t.toLowerCase()==="admin"&&await S(o)==="87b93ee4a38ae3ad0662f4c607bd7fa4c0396e580377743391cb4dfcaec89a33"?(s.set(y),n.set(!0),localStorage.setItem("currentUser",JSON.stringify(y)),!0):t.toLowerCase()==="root"&&await S(o)==="87b93ee4a38ae3ad0662f4c607bd7fa4c0396e580377743391cb4dfcaec89a33"?(s.set(A),n.set(!0),localStorage.setItem("currentUser",JSON.stringify(A)),!0):(localStorage.setItem("currentUser",JSON.stringify(l)),s.set(l),n.set(!1),!1),logout:()=>{n.set(!1),localStorage.setItem("currentUser",JSON.stringify(l)),s.set(l)}}},u},R=()=>u?.stores&&Object.keys(u.stores).length>0&&u?.actions&&Object.keys(u.actions).length>0?u:p();export{r as U,L as a,D as f,R as g,k as t};
