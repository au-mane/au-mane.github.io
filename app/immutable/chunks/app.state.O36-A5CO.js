import{d as U,w as f}from"./index.jwm6wgPW.js";import{A as I}from"./scheduler.tWunq22O.js";var e=(t=>(t.UnAuthenticated="un-authenticated",t.Authenticated="authenticated",t.Admin="admin",t.Root="root",t))(e||{});const l={username:"User",role:e.UnAuthenticated},h={username:"Admin",role:e.Admin},b={username:"Root",role:e.Root},O=[{label:"Home",url:"/home",roles:[e.UnAuthenticated,e.Authenticated,e.Admin,e.Root],index:1},{label:"Transactions",url:"/transactions",roles:[e.UnAuthenticated,e.Authenticated,e.Admin,e.Root],index:2},{label:"Categories",url:"/categories",roles:[e.UnAuthenticated,e.Authenticated,e.Admin,e.Root],index:3},{label:"Tags",url:"/tags",roles:[e.UnAuthenticated,e.Authenticated,e.Admin,e.Root],index:3}];function T(t){const a=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&a==="[object Date]"?new t.constructor(+t):typeof t=="number"||a==="[object Number]"||typeof t=="string"||a==="[object String]"?new Date(t):new Date(NaN)}function w(t){return T(t).getDay()===0}const D=()=>{const{stores:{authenticated:t,currentUser:a},actions:{init:o}}=x();o();const s=I(t),d=I(a);let c=[];const g={label:"Login",url:"/auth/login",roles:[e.UnAuthenticated],index:100},A={label:"Logout",url:"/auth/logout",roles:[e.Authenticated,e.Admin,e.Root],index:100},S=s?[A]:[g];c=[...c,...O,...S];const y=(r,n)=>r&&r.find(i=>i.role===n)?.sundayOnly?w(new Date):!0;return c.filter(r=>{const n=d.role,m=!!r.roles.find(N=>N===n),i=y(r.visibilities,n);return m&&i}).sort((r,n)=>r.index-n.index)};async function p(t){function a(c){return Array.from(new Uint8Array(c)).map(g=>g.toString(16).padStart(2,"0")).join("")}const s=new TextEncoder().encode(t),d=await crypto.subtle.digest("SHA-256",s);return a(d)}const E=(t,a="USD",o="en-US")=>new Intl.NumberFormat(o,{style:"currency",currency:a}).format(t);let u=null;const k=()=>{const t=f(!1),a=f("Home"),o=f(!1),s=f(l),d=U([s],([r])=>r.role===e.Admin),c=U([s],([r])=>r.role===e.Root);return u={stores:{darkTheme:t,pageName:a,authenticated:o,currentUser:s,currentUserIsAdmin:d,currentUserIsRoot:c},actions:{init:()=>{const r=localStorage.getItem("theme"),n=r??"light";t.set(r==="dark"),document.documentElement.setAttribute("data-bs-theme",n),localStorage.setItem("theme",n);const m=localStorage.getItem("currentUser"),i=m?JSON.parse(m):l;switch(s.set(i),localStorage.setItem("currentUser",JSON.stringify(i)),i.username){case h.username:o.set(!0);break;case b.username:o.set(!0);break;case l.username:default:o.set(!1)}},toggleTheme:()=>{const r=localStorage.getItem("theme");let n="light";r==="light"&&(n="dark"),t.set(n==="dark"),document.documentElement.setAttribute("data-bs-theme",n),localStorage.setItem("theme",n)},login:async(r,n)=>r.toLowerCase()==="admin"&&await p(n)==="6a176086ec9c443fe159921a29c549a731faa9b1c368adbc550b3bc036256af0"?(s.set(h),o.set(!0),localStorage.setItem("currentUser",JSON.stringify(h)),!0):r.toLowerCase()==="root"&&await p(n)==="6a176086ec9c443fe159921a29c549a731faa9b1c368adbc550b3bc036256af0"?(s.set(b),o.set(!0),localStorage.setItem("currentUser",JSON.stringify(b)),!0):(localStorage.setItem("currentUser",JSON.stringify(l)),s.set(l),o.set(!1),!1),logout:()=>{o.set(!1),localStorage.setItem("currentUser",JSON.stringify(l)),s.set(l)}}},u},x=()=>u?.stores&&Object.keys(u.stores).length>0&&u?.actions&&Object.keys(u.actions).length>0?u:k();export{D as a,E as f,x as g,T as t};
