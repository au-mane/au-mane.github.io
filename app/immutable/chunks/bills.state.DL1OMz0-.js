import{w as oe,d as Ft}from"./index.nBfE35gB.js";import{s as Ye}from"./supabase-config.Y8iSvhNi.js";import{K as Bt}from"./scheduler.BNdSUW5B.js";import{t as D}from"./app.state.4AFWKtKk.js";function Y(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function vt(r,e){const t=D(r);return isNaN(e)?Y(r,NaN):(e&&t.setDate(t.getDate()+e),t)}const gt=6048e5,jt=864e5,Qt=6e4,Gt=36e5,Xt=1e3;let zt={};function he(){return zt}function V(r,e){const t=he(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,a=D(r),i=a.getDay(),s=(i<n?7:0)+i-n;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function le(r){return V(r,{weekStartsOn:1})}function kt(r){const e=D(r),t=e.getFullYear(),n=Y(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const a=le(n),i=Y(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const s=le(i);return e.getTime()>=a.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function $e(r){const e=D(r);return e.setHours(0,0,0,0),e}function xe(r){const e=D(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function Kt(r,e){const t=$e(r),n=$e(e),a=+t-xe(t),i=+n-xe(n);return Math.round((a-i)/jt)}function $t(r){const e=kt(r),t=Y(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),le(t)}function Zt(r,e){const t=D(r),n=D(e),a=t.getTime()-n.getTime();return a<0?-1:a>0?1:a}function Jt(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Vt(r){if(!Jt(r)&&typeof r!="number")return!1;const e=D(r);return!isNaN(Number(e))}function er(r){const e=D(r),t=Y(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const tr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rr=(r,e,t)=>{let n;const a=tr[r];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Pe(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const nr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ar={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ir={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sr={date:Pe({formats:nr,defaultWidth:"full"}),time:Pe({formats:ar,defaultWidth:"full"}),dateTime:Pe({formats:ir,defaultWidth:"full"})},or={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ur=(r,e,t,n)=>or[r];function me(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let a;if(n==="formatting"&&r.formattingValues){const s=r.defaultFormattingWidth||r.defaultWidth,o=t?.width?String(t.width):s;a=r.formattingValues[o]||r.formattingValues[s]}else{const s=r.defaultWidth,o=t?.width?String(t.width):r.defaultWidth;a=r.values[o]||r.values[s]}const i=r.argumentCallback?r.argumentCallback(e):e;return a[i]}}const cr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},lr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mr=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},wr={ordinalNumber:mr,era:me({values:cr,defaultWidth:"wide"}),quarter:me({values:dr,defaultWidth:"wide",argumentCallback:r=>r-1}),month:me({values:lr,defaultWidth:"wide"}),day:me({values:fr,defaultWidth:"wide"}),dayPeriod:me({values:hr,defaultWidth:"wide",formattingValues:yr,defaultFormattingWidth:"wide"})};function we(r){return(e,t={})=>{const n=t.width,a=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(a);if(!i)return null;const s=i[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(o)?br(o,d=>d.test(s)):pr(o,d=>d.test(s));let f;f=r.valueCallback?r.valueCallback(u):u,f=t.valueCallback?t.valueCallback(f):f;const c=e.slice(s.length);return{value:f,rest:c}}}function pr(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function br(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function vr(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const a=n[0],i=e.match(r.parsePattern);if(!i)return null;let s=r.valueCallback?r.valueCallback(i[0]):i[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(a.length);return{value:s,rest:o}}}const gr=/^(\d+)(th|st|nd|rd)?/i,kr=/\d+/i,xr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tr={any:[/^b/i,/^(a|c)/i]},Er={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Mr={any:[/1/i,/2/i,/3/i,/4/i]},Dr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Or={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_r={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nr={ordinalNumber:vr({matchPattern:gr,parsePattern:kr,valueCallback:r=>parseInt(r,10)}),era:we({matchPatterns:xr,defaultMatchWidth:"wide",parsePatterns:Tr,defaultParseWidth:"any"}),quarter:we({matchPatterns:Er,defaultMatchWidth:"wide",parsePatterns:Mr,defaultParseWidth:"any",valueCallback:r=>r+1}),month:we({matchPatterns:Dr,defaultMatchWidth:"wide",parsePatterns:Or,defaultParseWidth:"any"}),day:we({matchPatterns:Yr,defaultMatchWidth:"wide",parsePatterns:_r,defaultParseWidth:"any"}),dayPeriod:we({matchPatterns:Pr,defaultMatchWidth:"any",parsePatterns:Lr,defaultParseWidth:"any"})},xt={code:"en-US",formatDistance:rr,formatLong:sr,formatRelative:ur,localize:wr,match:Nr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Wr(r){const e=D(r);return Kt(e,er(e))+1}function Tt(r){const e=D(r),t=+le(e)-+$t(e);return Math.round(t/gt)+1}function Fe(r,e){const t=D(r),n=t.getFullYear(),a=he(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,s=Y(r,0);s.setFullYear(n+1,0,i),s.setHours(0,0,0,0);const o=V(s,e),u=Y(r,0);u.setFullYear(n,0,i),u.setHours(0,0,0,0);const f=V(u,e);return t.getTime()>=o.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function Ir(r,e){const t=he(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,a=Fe(r,e),i=Y(r,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),V(i,e)}function Et(r,e){const t=D(r),n=+V(t,e)-+Ir(t,e);return Math.round(n/gt)+1}function T(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const $={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return T(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):T(t+1,2)},d(r,e){return T(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return T(r.getHours()%12||12,e.length)},H(r,e){return T(r.getHours(),e.length)},m(r,e){return T(r.getMinutes(),e.length)},s(r,e){return T(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),a=Math.trunc(n*Math.pow(10,t-3));return T(a,e.length)}},ie={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ze={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),a=n>0?n:1-n;return t.ordinalNumber(a,{unit:"year"})}return $.y(r,e)},Y:function(r,e,t,n){const a=Fe(r,n),i=a>0?a:1-a;if(e==="YY"){const s=i%100;return T(s,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):T(i,e.length)},R:function(r,e){const t=kt(r);return T(t,e.length)},u:function(r,e){const t=r.getFullYear();return T(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return T(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return T(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return $.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return T(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const a=Et(r,n);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):T(a,e.length)},I:function(r,e,t){const n=Tt(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):T(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):$.d(r,e)},D:function(r,e,t){const n=Wr(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):T(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const a=r.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return T(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const a=r.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return T(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return T(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const a=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let a;switch(n===12?a=ie.noon:n===0?a=ie.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let a;switch(n>=17?a=ie.evening:n>=12?a=ie.afternoon:n>=4?a=ie.morning:a=ie.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return $.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):$.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):T(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):T(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):$.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):$.s(r,e)},S:function(r,e){return $.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Ve(n);case"XXXX":case"XX":return te(n);case"XXXXX":case"XXX":default:return te(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return Ve(n);case"xxxx":case"xx":return te(n);case"xxxxx":case"xxx":default:return te(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Je(n,":");case"OOOO":default:return"GMT"+te(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Je(n,":");case"zzzz":default:return"GMT"+te(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return T(n,e.length)},T:function(r,e,t){const n=r.getTime();return T(n,e.length)}};function Je(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=Math.trunc(n/60),i=n%60;return i===0?t+String(a):t+String(a)+e+T(i,2)}function Ve(r,e){return r%60===0?(r>0?"-":"+")+T(Math.abs(r)/60,2):te(r,e)}function te(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=T(Math.trunc(n/60),2),i=T(n%60,2);return t+a+e+i}const et=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Mt=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ar=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],a=t[2];if(!a)return et(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",et(n,e)).replace("{{time}}",Mt(a,e))},Ie={p:Mt,P:Ar},Sr=/^D+$/,Rr=/^Y+$/,Cr=["D","DD","YY","YYYY"];function Dt(r){return Sr.test(r)}function Ot(r){return Rr.test(r)}function Ae(r,e,t){const n=Ur(r,e,t);if(console.warn(n),Cr.includes(r))throw new RangeError(n)}function Ur(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Hr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fr=/^'([^]*?)'?$/,Br=/''/g,jr=/[a-zA-Z]/;function Qr(r,e,t){const n=he(),a=n.locale??xt,i=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=D(r);if(!Vt(o))throw new RangeError("Invalid time value");let u=e.match(qr).map(c=>{const d=c[0];if(d==="p"||d==="P"){const l=Ie[d];return l(c,a.formatLong)}return c}).join("").match(Hr).map(c=>{if(c==="''")return{isToken:!1,value:"'"};const d=c[0];if(d==="'")return{isToken:!1,value:Gr(c)};if(Ze[d])return{isToken:!0,value:c};if(d.match(jr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:c}});a.localize.preprocessor&&(u=a.localize.preprocessor(o,u));const f={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return u.map(c=>{if(!c.isToken)return c.value;const d=c.value;(Ot(d)||Dt(d))&&Ae(d,e,String(r));const l=Ze[d[0]];return l(o,d,a.localize,f)}).join("")}function Gr(r){const e=r.match(Fr);return e?e[1].replace(Br,"'"):r}function Xr(){return Object.assign({},he())}function zr(r){let t=D(r).getDay();return t===0&&(t=7),t}function Kr(r,e){const t=e instanceof Date?Y(e,0):new e(0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}const $r=10;class Yt{subPriority=0;validate(e,t){return!0}}class Zr extends Yt{constructor(e,t,n,a,i){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=a,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Jr extends Yt{priority=$r;subPriority=-1;set(e,t){return t.timestampIsSet?e:Y(e,Kr(e,Date))}}let x=class{run(e,t,n,a){const i=this.parse(e,t,n,a);return i?{setter:new Zr(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,n){return!0}};class Vr extends x{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const _={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},j={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function P(r,e){return r&&{value:e(r.value),rest:r.rest}}function M(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Q(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,a=t[2]?parseInt(t[2],10):0,i=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:n*(a*Gt+i*Qt+s*Xt),rest:e.slice(t[0].length)}}function _t(r){return M(_.anyDigitsSigned,r)}function O(r,e){switch(r){case 1:return M(_.singleDigit,e);case 2:return M(_.twoDigits,e);case 3:return M(_.threeDigits,e);case 4:return M(_.fourDigits,e);default:return M(new RegExp("^\\d{1,"+r+"}"),e)}}function Te(r,e){switch(r){case 1:return M(_.singleDigitSigned,e);case 2:return M(_.twoDigitsSigned,e);case 3:return M(_.threeDigitsSigned,e);case 4:return M(_.fourDigitsSigned,e);default:return M(new RegExp("^-?\\d{1,"+r+"}"),e)}}function Be(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Pt(r,e){const t=e>0,n=t?e:1-e;let a;if(n<=50)a=r||100;else{const i=n+50,s=Math.trunc(i/100)*100,o=r>=i%100;a=r+s-(o?100:0)}return t?a:1-a}function Lt(r){return r%400===0||r%4===0&&r%100!==0}class en extends x{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const a=i=>({year:i,isTwoDigitYear:t==="yy"});switch(t){case"y":return P(O(4,e),a);case"yo":return P(n.ordinalNumber(e,{unit:"year"}),a);default:return P(O(t.length,e),a)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const a=e.getFullYear();if(n.isTwoDigitYear){const s=Pt(n.year,a);return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}const i=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class tn extends x{priority=130;parse(e,t,n){const a=i=>({year:i,isTwoDigitYear:t==="YY"});switch(t){case"Y":return P(O(4,e),a);case"Yo":return P(n.ordinalNumber(e,{unit:"year"}),a);default:return P(O(t.length,e),a)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,a){const i=Fe(e,a);if(n.isTwoDigitYear){const o=Pt(n.year,i);return e.setFullYear(o,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),V(e,a)}const s=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(s,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),V(e,a)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class rn extends x{priority=130;parse(e,t){return Te(t==="R"?4:t.length,e)}set(e,t,n){const a=Y(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),le(a)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class nn extends x{priority=130;parse(e,t){return Te(t==="u"?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class an extends x{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return O(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class sn extends x{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return O(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class on extends x{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const a=i=>i-1;switch(t){case"M":return P(M(_.month,e),a);case"MM":return P(O(2,e),a);case"Mo":return P(n.ordinalNumber(e,{unit:"month"}),a);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class un extends x{priority=110;parse(e,t,n){const a=i=>i-1;switch(t){case"L":return P(M(_.month,e),a);case"LL":return P(O(2,e),a);case"Lo":return P(n.ordinalNumber(e,{unit:"month"}),a);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function cn(r,e,t){const n=D(r),a=Et(n,t)-e;return n.setDate(n.getDate()-a*7),n}class dn extends x{priority=100;parse(e,t,n){switch(t){case"w":return M(_.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return O(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,a){return V(cn(e,n,a),a)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function ln(r,e){const t=D(r),n=Tt(t)-e;return t.setDate(t.getDate()-n*7),t}class fn extends x{priority=100;parse(e,t,n){switch(t){case"I":return M(_.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return O(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return le(ln(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const hn=[31,28,31,30,31,30,31,31,30,31,30,31],yn=[31,29,31,30,31,30,31,31,30,31,30,31];class mn extends x{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return M(_.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return O(t.length,e)}}validate(e,t){const n=e.getFullYear(),a=Lt(n),i=e.getMonth();return a?t>=1&&t<=yn[i]:t>=1&&t<=hn[i]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class wn extends x{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return M(_.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return O(t.length,e)}}validate(e,t){const n=e.getFullYear();return Lt(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function je(r,e,t){const n=he(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=D(r),s=i.getDay(),u=(e%7+7)%7,f=7-a,c=e<0||e>6?e-(s+f)%7:(u+f)%7-(s+f)%7;return vt(i,c)}class pn extends x{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,a){return e=je(e,n,a),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class bn extends x{priority=90;parse(e,t,n,a){const i=s=>{const o=Math.floor((s-1)/7)*7;return(s+a.weekStartsOn+6)%7+o};switch(t){case"e":case"ee":return P(O(t.length,e),i);case"eo":return P(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,a){return e=je(e,n,a),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class vn extends x{priority=90;parse(e,t,n,a){const i=s=>{const o=Math.floor((s-1)/7)*7;return(s+a.weekStartsOn+6)%7+o};switch(t){case"c":case"cc":return P(O(t.length,e),i);case"co":return P(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,a){return e=je(e,n,a),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function gn(r,e){const t=D(r),n=zr(t),a=e-n;return vt(t,a)}class kn extends x{priority=90;parse(e,t,n){const a=i=>i===0?7:i;switch(t){case"i":case"ii":return O(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return P(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return P(n.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return P(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a);case"iiii":default:return P(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return e=gn(e,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class xn extends x{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Be(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Tn extends x{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Be(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class En extends x{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Be(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Mn extends x{priority=70;parse(e,t,n){switch(t){case"h":return M(_.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return O(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const a=e.getHours()>=12;return a&&n<12?e.setHours(n+12,0,0,0):!a&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Dn extends x{priority=70;parse(e,t,n){switch(t){case"H":return M(_.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return O(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class On extends x{priority=70;parse(e,t,n){switch(t){case"K":return M(_.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return O(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Yn extends x{priority=70;parse(e,t,n){switch(t){case"k":return M(_.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return O(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const a=n<=24?n%24:n;return e.setHours(a,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class _n extends x{priority=60;parse(e,t,n){switch(t){case"m":return M(_.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return O(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]}class Pn extends x{priority=50;parse(e,t,n){switch(t){case"s":return M(_.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return O(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]}class Ln extends x{priority=30;parse(e,t){const n=a=>Math.trunc(a*Math.pow(10,-t.length+3));return P(O(t.length,e),n)}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]}class Nn extends x{priority=10;parse(e,t){switch(t){case"X":return Q(j.basicOptionalMinutes,e);case"XX":return Q(j.basic,e);case"XXXX":return Q(j.basicOptionalSeconds,e);case"XXXXX":return Q(j.extendedOptionalSeconds,e);case"XXX":default:return Q(j.extended,e)}}set(e,t,n){return t.timestampIsSet?e:Y(e,e.getTime()-xe(e)-n)}incompatibleTokens=["t","T","x"]}class Wn extends x{priority=10;parse(e,t){switch(t){case"x":return Q(j.basicOptionalMinutes,e);case"xx":return Q(j.basic,e);case"xxxx":return Q(j.basicOptionalSeconds,e);case"xxxxx":return Q(j.extendedOptionalSeconds,e);case"xxx":default:return Q(j.extended,e)}}set(e,t,n){return t.timestampIsSet?e:Y(e,e.getTime()-xe(e)-n)}incompatibleTokens=["t","T","X"]}class In extends x{priority=40;parse(e){return _t(e)}set(e,t,n){return[Y(e,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class An extends x{priority=20;parse(e){return _t(e)}set(e,t,n){return[Y(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const Sn={G:new Vr,y:new en,Y:new tn,R:new rn,u:new nn,Q:new an,q:new sn,M:new on,L:new un,w:new dn,I:new fn,d:new mn,D:new wn,E:new pn,e:new bn,c:new vn,i:new kn,a:new xn,b:new Tn,B:new En,h:new Mn,H:new Dn,K:new On,k:new Yn,m:new _n,s:new Pn,S:new Ln,X:new Nn,x:new Wn,t:new In,T:new An},Rn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Un=/^'([^]*?)'?$/,Hn=/''/g,qn=/\S/,Fn=/[a-zA-Z]/;function ce(r,e,t,n){const a=Xr(),i=a.locale??xt,s=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,u={firstWeekContainsDate:s,weekStartsOn:o,locale:i},f=[new Jr],c=e.match(Cn).map(m=>{const p=m[0];if(p in Ie){const v=Ie[p];return v(m,i.formatLong)}return m}).join("").match(Rn),d=[];for(let m of c){Ot(m)&&Ae(m,e,r),Dt(m)&&Ae(m,e,r);const p=m[0],v=Sn[p];if(v){const{incompatibleTokens:W}=v;if(Array.isArray(W)){const K=d.find(ae=>W.includes(ae.token)||ae.token===p);if(K)throw new RangeError(`The format string mustn't contain \`${K.fullToken}\` and \`${m}\` at the same time`)}else if(v.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${m}\` and any other token at the same time`);d.push({token:p,fullToken:m});const R=v.run(r,m,i.match,u);if(!R)return Y(t,NaN);f.push(R.setter),r=R.rest}else{if(p.match(Fn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");if(m==="''"?m="'":p==="'"&&(m=Bn(m)),r.indexOf(m)===0)r=r.slice(m.length);else return Y(t,NaN)}}if(r.length>0&&qn.test(r))return Y(t,NaN);const l=f.map(m=>m.priority).sort((m,p)=>p-m).filter((m,p,v)=>v.indexOf(m)===p).map(m=>f.filter(p=>p.priority===m).sort((p,v)=>v.subPriority-p.subPriority)).map(m=>m[0]);let y=D(t);if(isNaN(y.getTime()))return Y(t,NaN);const b={};for(const m of l){if(!m.validate(y,u))return Y(t,NaN);const p=m.set(y,b,u);Array.isArray(p)?(y=p[0],Object.assign(b,p[1])):y=p}return Y(t,y)}function Bn(r){return r.match(Un)[1].replace(Hn,"'")}function jn(r,e){const t=+D(r),[n,a]=[+D(e.start),+D(e.end)].sort((i,s)=>i-s);return t>=n&&t<=a}var Se=["MO","TU","WE","TH","FR","SA","SU"],S=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Se.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Se[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}(),L=function(r){return r!=null},F=function(r){return typeof r=="number"},tt=function(r){return typeof r=="string"&&Se.includes(r)},C=Array.isArray,G=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t},g=function(r,e){var t=0,n=[];if(C(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},Qn=function(r){return C(r)?r:[r]};function se(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=g(t,e/t.length)),t.slice(0,e)+String(n))}var Gn=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},H=function(r,e){var t=r%e;return t*e<0?t+e:t},Le=function(r,e){return{div:Math.floor(r/e),mod:H(r,e)}},B=function(r){return!L(r)||r.length===0},N=function(r){return!B(r)},E=function(r,e){return N(r)&&r.indexOf(e)!==-1},ne=function(r,e,t,n,a,i){return n===void 0&&(n=0),a===void 0&&(a=0),i===void 0&&(i=0),new Date(Date.UTC(r,e-1,t,n,a,i))},Xn=[31,28,31,30,31,30,31,31,30,31,30,31],Nt=1e3*60*60*24,Wt=9999,It=ne(1970,1,1),zn=[6,0,1,2,3,4,5],ge=function(r){return r%4===0&&r%100!==0||r%400===0},At=function(r){return r instanceof Date},ve=function(r){return At(r)&&!isNaN(r.getTime())},Kn=function(r,e){var t=r.getTime(),n=e.getTime(),a=t-n;return Math.round(a/Nt)},Re=function(r){return Kn(r,It)},St=function(r){return new Date(It.getTime()+r*Nt)},$n=function(r){var e=r.getUTCMonth();return e===1&&ge(r.getUTCFullYear())?29:Xn[e]},fe=function(r){return zn[r.getUTCDay()]},rt=function(r,e){var t=ne(r,e+1,1);return[fe(t),$n(t)]},Rt=function(r,e){return e=e||r,new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},Ce=function(r){var e=new Date(r.getTime());return e},nt=function(r){for(var e=[],t=0;t<r.length;t++)e.push(Ce(r[t]));return e},ke=function(r){r.sort(function(e,t){return e.getTime()-t.getTime()})},Qe=function(r,e){e===void 0&&(e=!0);var t=new Date(r);return[se(t.getUTCFullYear().toString(),4,"0"),se(t.getUTCMonth()+1,2,"0"),se(t.getUTCDate(),2,"0"),"T",se(t.getUTCHours(),2,"0"),se(t.getUTCMinutes(),2,"0"),se(t.getUTCSeconds(),2,"0"),e?"Z":""].join("")},Ge=function(r){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,t=e.exec(r);if(!t)throw new Error("Invalid UNTIL value: ".concat(r));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},at=function(r,e){var t=r.toLocaleString("sv-SE",{timeZone:e});return t.replace(" ","T")+"Z"},Zn=function(r,e){var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(at(r,t)),a=new Date(at(r,e??"UTC")),i=a.getTime()-n.getTime();return new Date(r.getTime()-i)},de=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Ue=function(r,e){return Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},Ue(r,e)};function Xe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ue(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var U=function(){return U=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},U.apply(this,arguments)};function h(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}var it=function(r){Xe(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.iterator=a,i}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(de),Ee={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},st=function(r,e){return r.indexOf(e)!==-1},Jn=function(r){return r.toString()},Vn=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},z=function(){function r(e,t,n,a){if(t===void 0&&(t=Jn),n===void 0&&(n=Ee),a===void 0&&(a=Vn),this.text=[],this.language=n||Ee,this.gettext=t,this.dateFormatter=a,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var i=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);i.sort(function(c,d){return c-d}),s.sort(function(c,d){return d-c}),this.bymonthday=i.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(L(this.origOptions.byweekday)){var o=C(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return!!c.n}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var f=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(st(["dtstart","tzid","wkst","freq"],n))return!0;if(!st(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[w.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var a=Math.abs(e);switch(a){case 1:case 21:case 31:t=a+n("st");break;case 2:case 22:t=a+n("nd");break;case 3:case 23:t=a+n("rd");break;default:t=a+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=F(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,a){var i=this;a===void 0&&(a=","),C(e)||(e=[e]);var s=function(u,f,c){for(var d="",l=0;l<u.length;l++)l!==0&&(l===u.length-1?d+=" "+c+" ":d+=f+" "),d+=u[l];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(i,u)};return n?s(e.map(o),a,n):e.map(o).join(a+" ")},r}(),ea=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var a in this.rules){n=this.rules[a];var i=n.exec(this.text);i&&(e===null||i[0].length>e[0].length)&&(e=i,t=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Ct(r,e){e===void 0&&(e=Ee);var t={},n=new ea(e.tokens);if(!n.start(r))return null;return a(),t;function a(){n.expect("every");var l=n.acceptNumber();if(l&&(t.interval=parseInt(l[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=w.DAILY,n.nextSymbol()&&(s(),d());break;case"weekday(s)":t.freq=w.WEEKLY,t.byweekday=[w.MO,w.TU,w.WE,w.TH,w.FR],n.nextSymbol(),s(),d();break;case"week(s)":t.freq=w.WEEKLY,n.nextSymbol()&&(i(),s(),d());break;case"hour(s)":t.freq=w.HOURLY,n.nextSymbol()&&(i(),d());break;case"minute(s)":t.freq=w.MINUTELY,n.nextSymbol()&&(i(),d());break;case"month(s)":t.freq=w.MONTHLY,n.nextSymbol()&&(i(),d());break;case"year(s)":t.freq=w.YEARLY,n.nextSymbol()&&(i(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=w.WEEKLY;var y=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[w[y]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var b=u();if(!b)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(w[b]),n.nextSymbol()}s(),c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=w.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}i(),d();break;default:throw new Error("Unknown symbol")}}function i(){var l=n.accept("on"),y=n.accept("the");if(l||y)do{var b=f(),m=u(),p=o();if(b)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(w[m].nth(b))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(b),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(w[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[w.MO,w.TU,w.WE,w.TH,w.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var v=n.acceptNumber();if(!v)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(v[0],10)];n.accept("comma");){if(v=n.acceptNumber(),!v)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(v[0],10))}}else if(p)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(p);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var l=n.accept("at");if(l)do{var y=n.acceptNumber();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(y[0],10)];n.accept("comma");){if(y=n.acceptNumber(),!y)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(y[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var l=parseInt(n.value[1],10);if(l<-366||l>366)throw new Error("Nth out of range: "+l);return n.nextSymbol(),n.accept("last")?-l:l;default:return!1}}function c(){n.accept("on"),n.accept("the");var l=f();if(l)for(t.bymonthday=[l],n.nextSymbol();n.accept("comma");){if(l=f(),!l)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(l),n.nextSymbol()}}function d(){if(n.symbol==="until"){var l=Date.parse(n.text);if(!l)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(l)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var k;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(k||(k={}));function ze(r){return r<k.HOURLY}var ta=function(r,e){return e===void 0&&(e=Ee),new w(Ct(r,e)||void 0)},ye=["count","until","interval","byweekday","bymonthday","bymonth"];z.IMPLEMENTED=[];z.IMPLEMENTED[k.HOURLY]=ye;z.IMPLEMENTED[k.MINUTELY]=ye;z.IMPLEMENTED[k.DAILY]=["byhour"].concat(ye);z.IMPLEMENTED[k.WEEKLY]=ye;z.IMPLEMENTED[k.MONTHLY]=ye;z.IMPLEMENTED[k.YEARLY]=["byweekno","byyearday"].concat(ye);var ra=function(r,e,t,n){return new z(r,e,t,n).toString()},na=z.isFullyConvertible,Me=function(){function r(e,t,n,a){this.hour=e,this.minute=t,this.second=n,this.millisecond=a||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}(),aa=function(r){Xe(e,r);function e(t,n,a,i,s,o,u){var f=r.call(this,i,s,o,u)||this;return f.year=t,f.month=n,f.day=a,f}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return fe(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),a=H(this.month,12);this.month=a,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,a){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var i=Le(this.hour,24),s=i.div,o=i.mod;if(s&&(this.hour=o,this.addDaily(s)),B(a)||E(a,this.hour))break}},e.prototype.addMinutes=function(t,n,a,i){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var s=Le(this.minute,60),o=s.div,u=s.mod;if(o&&(this.minute=u,this.addHours(o,!1,a)),(B(a)||E(a,this.hour))&&(B(i)||E(i,this.minute)))break}},e.prototype.addSeconds=function(t,n,a,i,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Le(this.second,60),u=o.div,f=o.mod;if(u&&(this.second=f,this.addMinutes(u,!1,a,i)),(B(a)||E(a,this.hour))&&(B(i)||E(i,this.minute))&&(B(s)||E(s,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=rt(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Wt))return;t=rt(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var a=t.freq,i=t.interval,s=t.wkst,o=t.byhour,u=t.byminute,f=t.bysecond;switch(a){case k.YEARLY:return this.addYears(i);case k.MONTHLY:return this.addMonths(i);case k.WEEKLY:return this.addWeekly(i,s);case k.DAILY:return this.addDaily(i);case k.HOURLY:return this.addHours(i,n,o);case k.MINUTELY:return this.addMinutes(i,n,o,u);case k.SECONDLY:return this.addSeconds(i,n,o,u,f)}},e}(Me);function Ut(r){for(var e=[],t=Object.keys(r),n=0,a=t;n<a.length;n++){var i=a[n];E(Ia,i)||e.push(i),At(r[i])&&!ve(r[i])&&e.push(i)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return U({},r)}function ia(r){var e=U(U({},Ke),Ut(r));if(L(e.byeaster)&&(e.freq=w.YEARLY),!(L(e.freq)&&w.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),L(e.wkst)?F(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=w.MO.weekday,L(e.bysetpos)){F(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||N(e.byweekno)||N(e.byyearday)||e.bymonthday||N(e.bymonthday)||L(e.byweekday)||L(e.byeaster)))switch(e.freq){case w.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case w.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case w.WEEKLY:e.byweekday=[fe(e.dtstart)];break}if(L(e.bymonth)&&!C(e.bymonth)&&(e.bymonth=[e.bymonth]),L(e.byyearday)&&!C(e.byyearday)&&F(e.byyearday)&&(e.byyearday=[e.byyearday]),!L(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(C(e.bymonthday)){for(var a=[],i=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?a.push(n):n<0&&i.push(n)}e.bymonthday=a,e.bynmonthday=i}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(L(e.byweekno)&&!C(e.byweekno)&&(e.byweekno=[e.byweekno]),!L(e.byweekday))e.bynweekday=null;else if(F(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(tt(e.byweekday))e.byweekday=[S.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof S)!e.byweekday.n||e.freq>w.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var s=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(F(u)){s.push(u);continue}else if(tt(u)){s.push(S.fromStr(u).weekday);continue}!u.n||e.freq>w.MONTHLY?s.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=N(s)?s:null,e.bynweekday=N(o)?o:null}return L(e.byhour)?F(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<w.HOURLY?[e.dtstart.getUTCHours()]:null,L(e.byminute)?F(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<w.MINUTELY?[e.dtstart.getUTCMinutes()]:null,L(e.bysecond)?F(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<w.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function sa(r){var e=r.dtstart.getTime()%1e3;if(!ze(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(a){r.bysecond.forEach(function(i){t.push(new Me(n,a,i,e))})})}),t}function He(r){var e=r.split(`
`).map(oa).filter(function(t){return t!==null});return U(U({},e[0]),e[1])}function De(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],a=t[2];return n&&(e.tzid=n),e.dtstart=Ge(a),e}function oa(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return ot(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return ot(r);case"DTSTART":return De(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function ot(r){var e=r.replace(/^RRULE:/i,""),t=De(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(a){var i=a.split("="),s=i[0],o=i[1];switch(s.toUpperCase()){case"FREQ":t.freq=k[o.toUpperCase()];break;case"WKST":t.wkst=q[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=ua(o),f=s.toLowerCase();t[f]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=ca(o);break;case"DTSTART":case"TZID":var c=De(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=Ge(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),t}function ua(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(ut)}return ut(r)}function ut(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function ca(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return q[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var a=Number(n[1]),i=n[2],s=q[i].weekday;return new S(s,a)})}var Oe=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=Qe(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){return this.isUTC?this.date:Zn(this.date,this.tzid)},r}();function qe(r){for(var e=[],t="",n=Object.keys(r),a=Object.keys(Ke),i=0;i<n.length;i++)if(n[i]!=="tzid"&&E(a,n[i])){var s=n[i].toUpperCase(),o=r[n[i]],u="";if(!(!L(o)||C(o)&&!o.length)){switch(s){case"FREQ":u=w.FREQUENCIES[r.freq];break;case"WKST":F(o)?u=new S(o).toString():u=o.toString();break;case"BYWEEKDAY":s="BYDAY",u=Qn(o).map(function(y){return y instanceof S?y:C(y)?new S(y[0],y[1]):new S(y)}).toString();break;case"DTSTART":t=da(o,r.tzid);break;case"UNTIL":u=Qe(o,!r.tzid);break;default:if(C(o)){for(var f=[],c=0;c<o.length;c++)f[c]=String(o[c]);u=f.toString()}else u=String(o)}u&&e.push([s,u])}}var d=e.map(function(y){var b=y[0],m=y[1];return"".concat(b,"=").concat(m.toString())}).join(";"),l="";return d!==""&&(l="RRULE:".concat(d)),[t,l].filter(function(y){return!!y}).join(`
`)}function da(r,e){return r?"DTSTART"+new Oe(new Date(r),e).toString():""}function la(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var fa=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?Ce(t):nt(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,a=t?Object.keys(t):[],i=function(c){for(var d=0;d<a.length;d++){var l=a[d];if(!la(t[l],c[l]))return!0}return!1},s=this[e];if(e==="all")n=this.all;else if(C(s))for(var o=0;o<s.length;o++){var u=s[o];if(!(a.length&&i(u))){n=u._value;break}}if(!n&&this.all){for(var f=new de(e,t),o=0;o<this.all.length&&f.accept(this.all[o]);o++);n=f.getValue(),this._cacheAdd(e,n,t)}return C(n)?nt(n):n instanceof Date?Ce(n):n},r}(),ha=h(h(h(h(h(h(h(h(h(h(h(h(h([],g(1,31),!0),g(2,28),!0),g(3,31),!0),g(4,30),!0),g(5,31),!0),g(6,30),!0),g(7,31),!0),g(8,31),!0),g(9,30),!0),g(10,31),!0),g(11,30),!0),g(12,31),!0),g(1,7),!0),ya=h(h(h(h(h(h(h(h(h(h(h(h(h([],g(1,31),!0),g(2,29),!0),g(3,31),!0),g(4,30),!0),g(5,31),!0),g(6,30),!0),g(7,31),!0),g(8,31),!0),g(9,30),!0),g(10,31),!0),g(11,30),!0),g(12,31),!0),g(1,7),!0),ma=G(1,29),wa=G(1,30),Z=G(1,31),I=G(1,32),pa=h(h(h(h(h(h(h(h(h(h(h(h(h([],I,!0),wa,!0),I,!0),Z,!0),I,!0),Z,!0),I,!0),I,!0),Z,!0),I,!0),Z,!0),I,!0),I.slice(0,7),!0),ba=h(h(h(h(h(h(h(h(h(h(h(h(h([],I,!0),ma,!0),I,!0),Z,!0),I,!0),Z,!0),I,!0),I,!0),Z,!0),I,!0),Z,!0),I,!0),I.slice(0,7),!0),va=G(-28,0),ga=G(-29,0),J=G(-30,0),A=G(-31,0),ka=h(h(h(h(h(h(h(h(h(h(h(h(h([],A,!0),ga,!0),A,!0),J,!0),A,!0),J,!0),A,!0),A,!0),J,!0),A,!0),J,!0),A,!0),A.slice(0,7),!0),xa=h(h(h(h(h(h(h(h(h(h(h(h(h([],A,!0),va,!0),A,!0),J,!0),A,!0),J,!0),A,!0),A,!0),J,!0),A,!0),J,!0),A,!0),A.slice(0,7),!0),Ta=[0,31,60,91,121,152,182,213,244,274,305,335,366],Ea=[0,31,59,90,120,151,181,212,243,273,304,334,365],ct=function(){for(var r=[],e=0;e<55;e++)r=r.concat(G(7));return r}();function Ma(r,e){var t=ne(r,1,1),n=ge(r)?366:365,a=ge(r+1)?366:365,i=Re(t),s=fe(t),o=U(U({yearlen:n,nextyearlen:a,yearordinal:i,yearweekday:s},Da(r)),{wnomask:null});if(B(e.byweekno))return o;o.wnomask=g(0,n+7);var u,f,c=u=H(7-s+e.wkst,7);c>=4?(c=0,f=o.yearlen+H(s-e.wkst,7)):f=n-c;for(var d=Math.floor(f/7),l=H(f,7),y=Math.floor(d+l/4),b=0;b<e.byweekno.length;b++){var m=e.byweekno[b];if(m<0&&(m+=y+1),m>0&&m<=y){var p=void 0;m>1?(p=c+(m-1)*7,c!==u&&(p-=7-u)):p=c;for(var v=0;v<7&&(o.wnomask[p]=1,p++,o.wdaymask[p]!==e.wkst);v++);}}if(E(e.byweekno,1)){var p=c+y*7;if(c!==u&&(p-=7-u),p<n)for(var b=0;b<7&&(o.wnomask[p]=1,p+=1,o.wdaymask[p]!==e.wkst);b++);}if(c){var W=void 0;if(E(e.byweekno,-1))W=-1;else{var R=fe(ne(r-1,1,1)),K=H(7-R.valueOf()+e.wkst,7),ae=ge(r-1)?366:365,ee=void 0;K>=4?(K=0,ee=ae+H(R-e.wkst,7)):ee=n-c,W=Math.floor(52+H(ee,7)/4)}if(E(e.byweekno,W))for(var p=0;p<c;p++)o.wnomask[p]=1}return o}function Da(r){var e=ge(r)?366:365,t=ne(r,1,1),n=fe(t);return e===365?{mmask:ha,mdaymask:ba,nmdaymask:xa,wdaymask:ct.slice(n),mrange:Ea}:{mmask:ya,mdaymask:pa,nmdaymask:ka,wdaymask:ct.slice(n),mrange:Ta}}function Oa(r,e,t,n,a,i){var s={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(i.freq===w.YEARLY)if(B(i.bymonth))o=[[0,t]];else for(var u=0;u<i.bymonth.length;u++)e=i.bymonth[u],o.push(n.slice(e-1,e+1));else i.freq===w.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(B(o))return s;s.nwdaymask=g(0,t);for(var u=0;u<o.length;u++)for(var f=o[u],c=f[0],d=f[1]-1,l=0;l<i.bynweekday.length;l++){var y=void 0,b=i.bynweekday[l],m=b[0],p=b[1];p<0?(y=d+(p+1)*7,y-=H(a[y]-m,7)):(y=c+(p-1)*7,y+=H(7-a[y]+m,7)),c<=y&&y<=d&&(s.nwdaymask[y]=1)}return s}function Ya(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),a=r%100,i=Math.floor(n/4),s=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),f=Math.floor(19*t+n-i-u+15)%30,c=Math.floor(a/4),d=a%4,l=Math.floor(32+2*s+2*c-f-d)%7,y=Math.floor((t+11*f+22*l)/451),b=Math.floor((f+l-7*y+114)/31),m=(f+l-7*y+114)%31+1,p=Date.UTC(r,b-1,m+e),v=Date.UTC(r,0,1);return[Math.ceil((p-v)/(1e3*60*60*24))]}var _a=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Ma(e,n)),N(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var a=this.yearinfo,i=a.yearlen,s=a.mrange,o=a.wdaymask;this.monthinfo=Oa(e,t,i,s,o,n)}L(n.byeaster)&&(this.eastermask=Ya(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[G(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],a=this.mrange[t],i=g(null,this.yearlen),s=n;s<a;s++)i[s]=s;return[i,n,a]},r.prototype.wdayset=function(e,t,n){for(var a=g(null,this.yearlen+7),i=Re(ne(e,t,n))-this.yearordinal,s=i,o=0;o<7&&(a[i]=i,++i,this.wdaymask[i]!==this.options.wkst);o++);return[a,s,i]},r.prototype.ddayset=function(e,t,n){var a=g(null,this.yearlen),i=Re(ne(e,t,n))-this.yearordinal;return a[i]=i,[a,i,i+1]},r.prototype.htimeset=function(e,t,n,a){var i=this,s=[];return this.options.byminute.forEach(function(o){s=s.concat(i.mtimeset(e,o,n,a))}),ke(s),s},r.prototype.mtimeset=function(e,t,n,a){var i=this.options.bysecond.map(function(s){return new Me(e,t,s,a)});return ke(i),i},r.prototype.stimeset=function(e,t,n,a){return[new Me(e,t,n,a)]},r.prototype.getdayset=function(e){switch(e){case k.YEARLY:return this.ydayset.bind(this);case k.MONTHLY:return this.mdayset.bind(this);case k.WEEKLY:return this.wdayset.bind(this);case k.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case k.HOURLY:return this.htimeset.bind(this);case k.MINUTELY:return this.mtimeset.bind(this);case k.SECONDLY:return this.stimeset.bind(this)}},r}();function Pa(r,e,t,n,a,i){for(var s=[],o=0;o<r.length;o++){var u=void 0,f=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),f=H(c,e.length)):(u=Math.floor((c-1)/e.length),f=H(c-1,e.length));for(var d=[],l=t;l<n;l++){var y=i[l];L(y)&&d.push(y)}var b=void 0;u<0?b=d.slice(u)[0]:b=d[u];var m=e[f],p=St(a.yearordinal+b),v=Rt(p,m);E(s,v)||s.push(v)}return ke(s),s}function Ht(r,e){var t=e.dtstart,n=e.freq,a=e.interval,i=e.until,s=e.bysetpos,o=e.count;if(o===0||a===0)return X(r);var u=aa.fromDate(t),f=new _a(e);f.rebuild(u.year,u.month);for(var c=Wa(f,u,e);;){var d=f.getdayset(n)(u.year,u.month,u.day),l=d[0],y=d[1],b=d[2],m=Na(l,y,b,f,e);if(N(s))for(var p=Pa(s,c,y,b,f,l),v=0;v<p.length;v++){var W=p[v];if(i&&W>i)return X(r);if(W>=t){var R=dt(W,e);if(!r.accept(R)||o&&(--o,!o))return X(r)}}else for(var v=y;v<b;v++){var K=l[v];if(L(K))for(var ae=St(f.yearordinal+K),ee=0;ee<c.length;ee++){var qt=c[ee],W=Rt(ae,qt);if(i&&W>i)return X(r);if(W>=t){var R=dt(W,e);if(!r.accept(R)||o&&(--o,!o))return X(r)}}}if(e.interval===0||(u.add(e,m),u.year>Wt))return X(r);ze(n)||(c=f.gettimeset(n)(u.hour,u.minute,u.second,0)),f.rebuild(u.year,u.month)}}function La(r,e,t){var n=t.bymonth,a=t.byweekno,i=t.byweekday,s=t.byeaster,o=t.bymonthday,u=t.bynmonthday,f=t.byyearday;return N(n)&&!E(n,r.mmask[e])||N(a)&&!r.wnomask[e]||N(i)&&!E(i,r.wdaymask[e])||N(r.nwdaymask)&&!r.nwdaymask[e]||s!==null&&!E(r.eastermask,e)||(N(o)||N(u))&&!E(o,r.mdaymask[e])&&!E(u,r.nmdaymask[e])||N(f)&&(e<r.yearlen&&!E(f,e+1)&&!E(f,-r.yearlen+e)||e>=r.yearlen&&!E(f,e+1-r.yearlen)&&!E(f,-r.nextyearlen+e-r.yearlen))}function dt(r,e){return new Oe(r,e.tzid).rezonedDate()}function X(r){return r.getValue()}function Na(r,e,t,n,a){for(var i=!1,s=e;s<t;s++){var o=r[s];i=La(n,o,a),i&&(r[o]=null)}return i}function Wa(r,e,t){var n=t.freq,a=t.byhour,i=t.byminute,s=t.bysecond;return ze(n)?sa(t):n>=w.HOURLY&&N(a)&&!E(a,e.hour)||n>=w.MINUTELY&&N(i)&&!E(i,e.minute)||n>=w.SECONDLY&&N(s)&&!E(s,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var q={MO:new S(0),TU:new S(1),WE:new S(2),TH:new S(3),FR:new S(4),SA:new S(5),SU:new S(6)},Ke={freq:k.YEARLY,dtstart:null,interval:1,wkst:q.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Ia=Object.keys(Ke),w=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new fa,this.origOptions=Ut(e);var n=ia(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Ct(e,t)},r.fromText=function(e,t){return ta(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return Ht(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new it("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new de("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,a){if(n===void 0&&(n=!1),!ve(e)||!ve(t))throw new Error("Invalid date passed in to RRule.between");var i={before:t,after:e,inc:n};if(a)return this._iter(new it("between",i,a));var s=this._cacheGet("between",i);return s===!1&&(s=this._iter(new de("between",i)),this._cacheAdd("between",s,i)),s},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!ve(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},a=this._cacheGet("before",n);return a===!1&&(a=this._iter(new de("before",n)),this._cacheAdd("before",a,n)),a},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!ve(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},a=this._cacheGet("after",n);return a===!1&&(a=this._iter(new de("after",n)),this._cacheAdd("after",a,n)),a},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return qe(this.origOptions)},r.prototype.toText=function(e,t,n){return ra(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return na(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=k.YEARLY,r.MONTHLY=k.MONTHLY,r.WEEKLY=k.WEEKLY,r.DAILY=k.DAILY,r.HOURLY=k.HOURLY,r.MINUTELY=k.MINUTELY,r.SECONDLY=k.SECONDLY,r.MO=q.MO,r.TU=q.TU,r.WE=q.WE,r.TH=q.TH,r.FR=q.FR,r.SA=q.SA,r.SU=q.SU,r.parseString=He,r.optionsToString=qe,r}();function Aa(r,e,t,n,a,i){var s={},o=r.accept;function u(l,y){t.forEach(function(b){b.between(l,y,!0).forEach(function(m){s[Number(m)]=!0})})}a.forEach(function(l){var y=new Oe(l,i).rezonedDate();s[Number(y)]=!0}),r.accept=function(l){var y=Number(l);return isNaN(y)?o.call(this,l):!s[y]&&(u(new Date(y-1),new Date(y+1)),!s[y])?(s[y]=!0,o.call(this,l)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(l){var y=Number(l);return s[y]?!0:(s[y]=!0,o.call(this,l))});for(var f=0;f<n.length;f++){var c=new Oe(n[f],i).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(l){Ht(r,l.options)});var d=r._result;switch(ke(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var lt={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Sa(r,e){var t=[],n=[],a=[],i=[],s=De(r),o=s.dtstart,u=s.tzid,f=qa(r,e.unfold);return f.forEach(function(c){var d;if(c){var l=Ha(c),y=l.name,b=l.parms,m=l.value;switch(y.toUpperCase()){case"RRULE":if(b.length)throw new Error("unsupported RRULE parm: ".concat(b.join(",")));t.push(He(c));break;case"RDATE":var p=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],v=p[1];v&&!u&&(u=v),n=n.concat(ht(m,b));break;case"EXRULE":if(b.length)throw new Error("unsupported EXRULE parm: ".concat(b.join(",")));a.push(He(m));break;case"EXDATE":i=i.concat(ht(m,b));break;case"DTSTART":break;default:throw new Error("unsupported property: "+y)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:a,exdatevals:i}}function Ra(r,e){var t=Sa(r,e),n=t.rrulevals,a=t.rdatevals,i=t.exrulevals,s=t.exdatevals,o=t.dtstart,u=t.tzid,f=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||a.length||i.length||s.length){var c=new Ba(f);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(l){c.rrule(new w(Ne(l,o,u),f))}),a.forEach(function(l){c.rdate(l)}),i.forEach(function(l){c.exrule(new w(Ne(l,o,u),f))}),s.forEach(function(l){c.exdate(l)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new w(Ne(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),f)}function ft(r,e){return e===void 0&&(e={}),Ra(r,Ca(e))}function Ne(r,e,t){return U(U({},r),{dtstart:e,tzid:t})}function Ca(r){var e=[],t=Object.keys(r),n=Object.keys(lt);if(t.forEach(function(a){E(n,a)||e.push(a)}),e.length)throw new Error("Invalid options: "+e.join(", "));return U(U({},lt),r)}function Ua(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=Gn(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function Ha(r){var e=Ua(r),t=e.name,n=e.value,a=t.split(";");if(!a)throw new Error("empty property name");return{name:a[0].toUpperCase(),parms:a.slice(1),value:n}}function qa(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var a=t[n]=t[n].replace(/\s+$/g,"");a?n>0&&a[0]===" "?(t[n-1]+=a.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function Fa(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function ht(r,e){return Fa(e),r.split(",").map(function(t){return Ge(t)})}function yt(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var a=e._rrule[n].origOptions[r];if(a)return a}}}var Ba=function(r){Xe(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=yt.apply(n,["dtstart"]),n.tzid=yt.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return Aa(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){mt(t,this._rrule)},e.prototype.exrule=function(t){mt(t,this._exrule)},e.prototype.rdate=function(t){wt(t,this._rdate)},e.prototype.exdate=function(t){wt(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ft(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ft(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(qe({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(a){return a.replace(/^RRULE:/,"EXRULE:")}).filter(function(a){return!/^DTSTART/.test(a)}))}),this._rdate.length&&t.push(pt("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(pt("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(w);function mt(r,e){if(!(r instanceof w))throw new TypeError(String(r)+" is not RRule instance");E(e.map(String),String(r))||e.push(r)}function wt(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");E(e.map(Number),Number(r))||(e.push(r),ke(e))}function pt(r,e,t){var n=!t||t.toUpperCase()==="UTC",a=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),i=e.map(function(s){return Qe(s.valueOf(),n)}).join(",");return"".concat(a).concat(i)}const pe={Daily:({start_date:r,interval:e=1,count:t,until:n})=>new w({freq:w.DAILY,dtstart:r,interval:e,count:t,until:n}),Weekly:({start_date:r,interval:e=1,count:t,until:n})=>new w({freq:w.WEEKLY,dtstart:r,interval:e,count:t,until:n}),Monthly:({start_date:r,interval:e=1,count:t,until:n})=>new w({freq:w.MONTHLY,dtstart:r,interval:e,count:t,until:n}),Yearly:({start_date:r,interval:e=1,count:t,until:n})=>new w({freq:w.YEARLY,dtstart:r,interval:e,count:t,until:n}),EverySixMonths:({start_date:r,interval:e=6,count:t,until:n})=>new w({freq:w.MONTHLY,dtstart:r,interval:e,count:t,until:n}),Weekdays:({start_date:r,count:e,until:t})=>new w({freq:w.DAILY,dtstart:r,count:e,until:t,byweekday:[w.MO,w.TU,w.WE,w.TH,w.FR]}),Weekends:({start_date:r,count:e,until:t})=>new w({freq:w.WEEKLY,dtstart:r,count:e,until:t,byweekday:[w.SA,w.SU]})},be=(r,e)=>r(e).all(),ja={scheduled:{label:"Scheduled",value:"scheduled",sort_order:0},yes:{label:"Paid",value:"yes",sort_order:1},no:{label:"Not Paid",value:"no",sort_order:2}},ri=Object.values(ja).sort((r,e)=>r.sort_order-e.sort_order).map(r=>({key:r.label,value:r.value})),Qa={unknown:{label:"Unknown",value:"unknown",sort_order:0},fixed:{label:"Fixed",value:"fixed",sort_order:1},variable:{label:"Variable",value:"variable",sort_order:2}},ni=Object.values(Qa).sort((r,e)=>r.sort_order-e.sort_order).map(r=>({key:r.label,value:r.value})),ue={oneTime:{label:"One Time",value:"one-time",sort_order:1},daily:{label:"Daily",value:"daily",sort_order:2},weekly:{label:"Weekly",value:"weekly",sort_order:3},monthly:{label:"Monthly",value:"monthly",sort_order:4},yearly:{label:"Yearly",value:"yearly",sort_order:5},everySixMonths:{label:"Every Six Months",value:"every-six-months",sort_order:6}},ai=Object.values(ue).sort((r,e)=>r.sort_order-e.sort_order).map(r=>({key:r.label,value:r.value})),Ga=r=>{if(!r)return[];const{type:e,start_date:t,until:n}=r;if(e&&n&&t){const a={start_date:ce(t,"yyyy-MM-dd",new Date),until:ce(n,"yyyy-MM-dd",new Date)};if(e===ue.daily.value)return be(pe.Daily,a);if(e===ue.weekly.value)return be(pe.Weekly,a);if(e===ue.monthly.value)return be(pe.Monthly,a);if(e===ue.yearly.value)return be(pe.Yearly,a);if(e===ue.everySixMonths.value)return be(pe.EverySixMonths,a)}return[]},bt=oe([]);let We=!1;async function _e(){if(We)return Bt(bt);We=!0;const{data:r,error:e}=await Ye.from("bills").select("*").order("created_at",{ascending:!0});if(e)throw e;const t=r||[];return bt.set(t),We=!1,t}async function Xa(r){const{data:e,error:t}=await Ye.from("bills").insert([r]).select();if(t)throw t;return await _e(),e?e[0]:void 0}async function za(r,e){const{data:t,error:n}=await Ye.from("bills").update(e).eq("id",r).select();if(n)throw n;return await _e(),t?t[0]:void 0}async function Ka(r){const{error:e}=await Ye.from("bills").delete().eq("id",r);if(e)throw e;await _e()}let re=null;const $a=()=>{const r=oe(!1),e=oe([]),t=oe(),n=oe(""),a=oe(""),i=Ft([e,n,a],([c,d,l])=>{if(!d||!l)return[];const y=[];if(c.length){const b=ce(d,"yyyy-MM-dd",new Date),m=ce(l,"yyyy-MM-dd",new Date);c.forEach(p=>{if(p.recurrence){const v=Ga(p.recurrence).filter(R=>jn(R,{start:b,end:m})),W={...p?.meta_data?.transaction,paid:"scheduled",type:p.meta_data?.transaction?.type??"unknown",from_bill:!0,bill_id:p.id};v.forEach(R=>{y.push({type:"expense",amount:p.amount,description:p.description,source:p.source,date:Qr(R,"yyyy-MM-dd"),meta_data:W})})}})}return y.sort((b,m)=>{const p=ce(b.date,"yyyy-MM-dd",new Date),v=ce(m.date,"yyyy-MM-dd",new Date);return Zt(p,v)})});return re={stores:{loading:r,targetBill:t,data:e,billAsDBTransactions:i,billAsDBTransactionsStartDateStr:n,billAsDBTransactionsEndDateStr:a},actions:{reload:async()=>{r.set(!0);const d=(await _e()).sort((l,y)=>{if(l.recurrence?.start_date&&y.recurrence?.start_date){const b=parseInt(l.recurrence.start_date.split("-")[2],10),m=parseInt(y.recurrence.start_date.split("-")[2],10);return b-m}return 1});e.set(d),r.set(!1)},createBill:async c=>{r.set(!0);try{await Xa(c)}catch(d){console.error(d)}finally{r.set(!1)}},updateBill:async(c,d)=>{r.set(!0);try{await za(c,d)}catch(l){console.error(l)}finally{r.set(!1)}},deleteBill:async c=>{r.set(!0);try{await Ka(c)}catch(d){console.error(d)}finally{r.set(!1)}}}},re},ii=()=>re?.stores&&Object.keys(re.stores).length>0&&re?.actions&&Object.keys(re.actions).length>0?re:$a();export{ni as B,ri as P,ai as R,Y as a,Ga as b,Zt as c,Qr as f,ii as g,ce as p,$e as s};
