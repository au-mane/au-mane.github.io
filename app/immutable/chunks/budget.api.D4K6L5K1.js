import{s as tt,e as b,t as N,b as q,i as m,j as h,l as A,d as u,f as O,m as s,n as et,o as c,H as P,p as U,v as Z,x as at,K as lt}from"./scheduler.CS-wq-7V.js";import{S as nt,i as st}from"./index.URQJKAju.js";import{s as H}from"./supabase-config.Y8iSvhNi.js";import{w as ct}from"./index.DvUi5W5L.js";function ot(t){let e,a,n,d,B,S,C,r,g,f,y,k,j,l,v,L,E,Y,_,D,I,K,G;return{c(){e=b("div"),a=b("div"),n=b("div"),d=b("div"),B=b("h5"),S=N(t[0]),C=q(),r=b("button"),g=q(),f=b("div"),y=b("p"),k=N(t[1]),j=q(),l=b("div"),v=b("button"),L=N(t[2]),Y=q(),_=b("button"),D=N(t[4]),this.h()},l(o){e=m(o,"DIV",{class:!0,tabindex:!0});var i=h(e);a=m(i,"DIV",{class:!0});var J=h(a);n=m(J,"DIV",{class:!0});var w=h(n);d=m(w,"DIV",{class:!0});var T=h(d);B=m(T,"H5",{class:!0});var M=h(B);S=A(M,t[0]),M.forEach(u),C=O(T),r=m(T,"BUTTON",{type:!0,class:!0,"aria-label":!0});var $=h(r);$.forEach(u),T.forEach(u),g=O(w),f=m(w,"DIV",{class:!0});var Q=h(f);y=m(Q,"P",{});var R=h(y);k=A(R,t[1]),R.forEach(u),Q.forEach(u),j=O(w),l=m(w,"DIV",{class:!0});var V=h(l);v=m(V,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0});var W=h(v);L=A(W,t[2]),W.forEach(u),Y=O(V),_=m(V,"BUTTON",{type:!0,class:!0});var X=h(_);D=A(X,t[4]),X.forEach(u),V.forEach(u),w.forEach(u),J.forEach(u),i.forEach(u),this.h()},h(){s(B,"class","modal-title"),s(r,"type","button"),s(r,"class","btn-close"),s(r,"aria-label",t[2]),s(d,"class","modal-header"),s(f,"class","modal-body"),s(v,"type","button"),s(v,"class",E="btn "+t[3]+" svelte-ydpc16"),s(v,"data-bs-dismiss","modal"),s(_,"type","button"),s(_,"class",I="btn "+t[5]+" svelte-ydpc16"),s(l,"class","modal-footer"),s(n,"class","modal-content"),s(a,"class","modal-dialog"),s(e,"class","modal svelte-ydpc16"),s(e,"tabindex","-1")},m(o,i){et(o,e,i),c(e,a),c(a,n),c(n,d),c(d,B),c(B,S),c(d,C),c(d,r),c(n,g),c(n,f),c(f,y),c(y,k),c(n,j),c(n,l),c(l,v),c(v,L),c(l,Y),c(l,_),c(_,D),K||(G=[P(r,"click",t[8]),P(v,"click",t[9]),P(_,"click",t[10])],K=!0)},p(o,[i]){i&1&&U(S,o[0]),i&4&&s(r,"aria-label",o[2]),i&2&&U(k,o[1]),i&4&&U(L,o[2]),i&8&&E!==(E="btn "+o[3]+" svelte-ydpc16")&&s(v,"class",E),i&16&&U(D,o[4]),i&32&&I!==(I="btn "+o[5]+" svelte-ydpc16")&&s(_,"class",I)},i:Z,o:Z,d(o){o&&u(e),K=!1,at(G)}}}function rt(t,e,a){let{title:n=""}=e,{message:d=""}=e,{rejectButtonLabel:B="No"}=e,{rejectButtonCSS:S="btn-secondary"}=e,{confirmButtonLabel:C="Yes"}=e,{confirmButtonCSS:r="btn-primary"}=e,{callback:g}=e;function f(l){g(l)}const y=()=>f(!1),k=()=>f(!1),j=()=>f(!0);return t.$$set=l=>{"title"in l&&a(0,n=l.title),"message"in l&&a(1,d=l.message),"rejectButtonLabel"in l&&a(2,B=l.rejectButtonLabel),"rejectButtonCSS"in l&&a(3,S=l.rejectButtonCSS),"confirmButtonLabel"in l&&a(4,C=l.confirmButtonLabel),"confirmButtonCSS"in l&&a(5,r=l.confirmButtonCSS),"callback"in l&&a(7,g=l.callback)},[n,d,B,S,C,r,f,g,y,k,j]}class it extends nt{constructor(e){super(),st(this,e,rt,ot,tt,{title:0,message:1,rejectButtonLabel:2,rejectButtonCSS:3,confirmButtonLabel:4,confirmButtonCSS:5,callback:7})}}let x;function mt(t){const e=document.createElement("div");document.body.appendChild(e);const a={title:"Are you sure?",message:"Are you sure you want to do that?  You will not be able to undo this.",callback:()=>{console.log("callback")}};t.title&&(a.title=t.title),t.message&&(a.message=t.message),t.rejectButtonLabel&&(a.rejectButtonLabel=t.rejectButtonLabel),t.rejectButtonCSS&&(a.rejectButtonCSS=t.rejectButtonCSS),t.confirmButtonLabel&&(a.confirmButtonLabel=t.confirmButtonLabel),t.confirmButtonCSS&&(a.confirmButtonCSS=t.confirmButtonCSS),a.callback=n=>{console.log("Confirm result:",n),x.$destroy(),document.body.removeChild(e),t.callback&&typeof t.callback=="function"&&t.callback(n)},x=new it({target:e,props:a})}const p=ct([]);let z=!1;async function F(){if(z)return lt(p);z=!0;const{data:t,error:e}=await H.from("budgets").select("*").order("start_at",{ascending:!0});if(e)throw e;const a=t||[];return p.set(a),z=!1,a}async function ht(t){const{data:e,error:a}=await H.from("budgets").insert([t]).select();if(a)throw a;return await F(),e?e[0]:void 0}async function vt(t,e){const{data:a,error:n}=await H.from("budgets").update(e).eq("id",t).select();if(n)throw n;return await F(),a?a[0]:void 0}async function Bt(t){const{error:e}=await H.from("budgets").delete().eq("id",t);if(e)throw e;await F()}export{ht as a,mt as c,Bt as d,F as g,vt as u};
