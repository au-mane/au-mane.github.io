import{a8 as Qa,a9 as Ja,L as Wn,N as tr,X as vn,s as bt,z as Ct,n as U,d as x,e as I,b as W,t as tt,i as E,j as N,k as lt,f as V,l as et,m as T,J as Ht,H as Zt,P as Ko,o as _,a2 as ii,G as It,p as St,x as Bi,v as kt,E as _t,a5 as Go,r as sn,a7 as gi,aa as er,R as nr,_ as Je,a0 as ir,B as sr,$ as si,a6 as ne,C as Zo,q as Yt,K as An,Y as ce}from"../chunks/scheduler.D0aYECZP.js";import{g as Mt,a as L,e as Tt,t as A,S as yt,i as vt,c as X,b as q,m as K,d as G,f as ie}from"../chunks/index.DKSt-8--.js";import{P as or}from"../chunks/PageLayout.BGw6Kvqn.js";import{a as ss,s as os,p as te,f as he,N as ar,D as zi,g as rr}from"../chunks/NumberField.f0qAJkBy.js";import{t as me,g as Qo,f as Ft,U as vi}from"../chunks/app.state.Bsl1t_fo.js";import{c as pi,a as lr,b as cr,B as Ie,D as Jo,F as ta}from"../chunks/FormSkeleton.DOsiBcVP.js";import{S as dr,L as hr}from"../chunks/Loading.Dr_kdv6O.js";import{c as fr,e as ur,f as ea,h as gr,u as pr,i as na,j as ia,k as sa,T as oa,S as On,a as aa,g as mr}from"../chunks/categories.state.U_jQ1ggN.js";import{d as gn,w as $t}from"../chunks/index.2cg2wEKR.js";import{a as rn,R as ln}from"../chunks/recurrence-presets.C7YZIt4e.js";import{e as _e}from"../chunks/Header.B_mgBu9O.js";function as(n,t){const e=t.token={};function i(s,a,o,r){if(t.token!==e)return;t.resolved=r;let l=t.ctx;o!==void 0&&(l=l.slice(),l[o]=r);const c=s&&(t.current=s)(l);let d=!1;t.block&&(t.blocks?t.blocks.forEach((f,h)=>{h!==a&&f&&(Mt(),L(f,1,1,()=>{t.blocks[h]===f&&(t.blocks[h]=null)}),Tt())}):t.block.d(1),c.c(),A(c,1),c.m(t.mount(),t.anchor),d=!0),t.block=c,t.blocks&&(t.blocks[a]=c),d&&tr()}if(Qa(n)){const s=Ja();if(n.then(a=>{Wn(s),i(t.then,1,t.value,a),Wn(null)},a=>{if(Wn(s),i(t.catch,2,t.error,a),Wn(null),!t.hasCatch)throw a}),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,n),!0;t.resolved=n}}function _r(n,t,e){const i=t.slice(),{resolved:s}=n;n.current===n.then&&(i[n.value]=s),n.current===n.catch&&(i[n.error]=s),n.block.p(i,e)}function br(n,t){const e=me(n);if(isNaN(t))return ss(n,NaN);const i=e.getDate(),s=ss(n,e.getTime());s.setMonth(e.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(e.setFullYear(s.getFullYear(),s.getMonth(),i),e)}function ra(n,t){const e=me(n),i=me(t),s=e.getTime()-i.getTime();return s<0?-1:s>0?1:s}function rs(n,t){const e=os(n),i=os(t);return+e==+i}function yr(n,t){const e=me(n),i=me(t);return e.getTime()>i.getTime()}function vr(n,t){const e=me(n),i=me(t);return+e<+i}function wr(n,t){const e=+me(n),[i,s]=[+me(t.start),+me(t.end)].sort((a,o)=>a-o);return e>=i&&e<=s}const xr=!0,bu=Object.freeze(Object.defineProperty({__proto__:null,prerender:xr},Symbol.toStringTag,{value:"Module"}));function kr(n){const t={};return n.forEach(e=>{const i=e.date.split("T")[0];t[i]||(t[i]=[]),t[i].push(e)}),Object.entries(t).map(([e,i])=>({dateStr:e,transactions:i}))}const ls=n=>n?he(te(n,"yyyy-MM-dd",new Date),"MMM dd, EEEE"):"",Sr=n=>n.map(t=>({id:t?.id||0,start:t?.start_at?he(te(t.start_at.split("T")[0],"yyyy-MM-dd",new Date),"MMM dd"):"",end:t?.end_at?he(te(t.end_at.split("T")[0],"yyyy-MM-dd",new Date),"MMM dd"):"",max_spending_limit:t?.settings?.max_spend_limit??0}));function Cr(n){const t=new Date;return n.find(e=>{if(e.start_at&&e.end_at){const i=te(e.start_at.split("T")[0],"yyyy-MM-dd",new Date),s=te(e.end_at.split("T")[0],"yyyy-MM-dd",new Date);return rs(t,i)||rs(t,s)||yr(t,i)&&vr(t,s)}return!1})}const Mr={type:"expense",amount:0,description:"",source:"",date:""},Tr={scheduled:{label:"Scheduled",value:"scheduled",sort_order:0},yes:{label:"Yes, it is paid for.",value:"yes",sort_order:1},no:{label:"No, it is NOT paid for.",value:"no",sort_order:2}},Dr=Object.values(Tr).sort((n,t)=>n.sort_order-t.sort_order).map(n=>({key:n.label,value:n.value})),Ir={unknown:{label:"Unknown",value:"unknown",sort_order:0},fixed:{label:"Fixed",value:"fixed",sort_order:1},variable:{label:"Variable",value:"variable",sort_order:2}},Er=Object.values(Ir).sort((n,t)=>n.sort_order-t.sort_order).map(n=>({key:n.label,value:n.value})),Ge={oneTime:{label:"One Time",value:"one-time",sort_order:1},daily:{label:"Daily",value:"daily",sort_order:2},weekly:{label:"Weekly",value:"weekly",sort_order:3},monthly:{label:"Monthly",value:"monthly",sort_order:4},yearly:{label:"Yearly",value:"yearly",sort_order:5},everySixMonths:{label:"Every Six Months",value:"every-six-months",sort_order:6}},Ar=Object.values(Ge).sort((n,t)=>n.sort_order-t.sort_order).map(n=>({key:n.label,value:n.value})),Ei=n=>{if(!n)return[];const{type:t,start_date:e,until:i}=n;if(t&&i&&e){const s={start_date:te(e,"yyyy-MM-dd",new Date),until:te(i,"yyyy-MM-dd",new Date)};if(t===Ge.daily.value)return rn(ln.Daily,s);if(t===Ge.weekly.value)return rn(ln.Weekly,s);if(t===Ge.monthly.value)return rn(ln.Monthly,s);if(t===Ge.yearly.value)return rn(ln.Yearly,s);if(t===Ge.everySixMonths.value)return rn(ln.EverySixMonths,s)}return[]};let Me=null;const Or=()=>{const n=$t(!1),t=$t([]),e=$t(),i=$t(""),s=$t(""),a=gn([t,i,s],([f,h,u])=>{if(!h||!u)return[];const g=[];if(f.length){const p=te(h,"yyyy-MM-dd",new Date),m=te(u,"yyyy-MM-dd",new Date);f.forEach(y=>{if(y.recurrence){const S=Ei(y.recurrence).filter(M=>wr(M,{start:p,end:m})),D={...y?.meta_data?.transaction,paid:"scheduled",type:y.meta_data?.transaction?.type??"unknown",from_bill:!0,bill_id:y.id};S.forEach(M=>{g.push({type:"expense",amount:y.amount,description:y.description,source:y.source,date:he(M,"yyyy-MM-dd"),account_id:y.account_id,category_id:y.category_id,meta_data:D})})}})}return g.sort((p,m)=>{const y=te(p.date,"yyyy-MM-dd",new Date),S=te(m.date,"yyyy-MM-dd",new Date);return ra(y,S)})});return Me={stores:{loading:n,targetBill:e,data:t,billAsDBTransactions:a,billAsDBTransactionsStartDateStr:i,billAsDBTransactionsEndDateStr:s},actions:{reload:async()=>{n.set(!0);const h=(await fr()).sort((u,g)=>{if(u.recurrence?.start_date&&g.recurrence?.start_date){const p=parseInt(u.recurrence.start_date.split("-")[2],10),m=parseInt(g.recurrence.start_date.split("-")[2],10);return p-m}return 1});t.set(h),n.set(!1)},createBill:async f=>{n.set(!0);try{await gr(f)}catch(h){console.error(h)}finally{n.set(!1)}},updateBill:async(f,h)=>{n.set(!0);try{await pr(f,h)}catch(u){console.error(u)}finally{n.set(!1)}},canDeleteBill:async f=>{n.set(!0);try{return(await ea()).filter(g=>g?.meta_data?.bill_id&&g?.meta_data?.bill_id===f)?.length===0}catch(h){console.error(h)}finally{n.set(!1)}},deleteBill:async f=>{n.set(!0);try{await ur(f)}catch(h){console.error(h)}finally{n.set(!1)}}}},Me},tn=()=>Me?.stores&&Object.keys(Me.stores).length>0&&Me?.actions&&Object.keys(Me.actions).length>0?Me:Or(),Pr=()=>{Me=null};let Ze=null;const Rr=()=>{const n=$t(!1),t=$t([]),e=$t([]),i=$t(void 0),s=$t(void 0),a=$t([]),o=$t([]),r=$t(void 0),l=gn([o],([M])=>Sr(M)),c=gn([t],([M])=>M.reduce((C,{amount:O,meta_data:F})=>F?.paid==="yes"?C+O:C,0)),d=gn([t],([M])=>M.reduce((C,{amount:O,meta_data:F})=>F?.paid==="no"?C+O:C,0)),f=gn([t],([M])=>M.reduce((C,{amount:O,meta_data:F})=>F?.paid==="scheduled"?C+O:C,0)),h=$t(""),u=$t("");let g,p;return Ze={stores:{loading:n,data:t,dbData:e,dayTransactions:a,startDate:h,endDate:u,targetBudget:i,targetTransaction:s,budgetPeriods:l,budgetEntries:o,currentBudgetEntry:r,moneySpent:c,moneyNotSpent:d,moneyScheduled:f},actions:{reload:async(M=!1)=>{n.set(!0);const C=vn(h),O=vn(u);if(M||g!==C&&p!==O){let F=function(j){const Y=new Map;return j.filter($=>{if($.meta_data){const it=`${$.meta_data.bill_id}_${$.date.split("T")[0]}`;return Y.has(it)&&!$?.id?!1:(Y.set(it,$),!0)}return!1})};g=C,p=O;const{stores:{billAsDBTransactions:B,billAsDBTransactionsStartDateStr:P,billAsDBTransactionsEndDateStr:z},actions:{reload:R}}=tn();P.set(C),z.set(O),await R();const b=vn(B),w=[...await ea(C,O),...b].sort((j,Y)=>{const $=te(j.date,"yyyy-MM-dd",new Date),it=te(Y.date,"yyyy-MM-dd",new Date);return ra(it,$)}),v=F(w);t.set(v);const H=kr(v);a.set(H)}n.set(!1)},createTransaction:async M=>{n.set(!0);try{await ia(M)}catch(C){console.error(C)}finally{n.set(!1)}},updateTransaction:async(M,C)=>{n.set(!0);try{await sa(M,C)}catch(O){console.error(O)}finally{n.set(!1)}},deleteTransaction:async M=>{n.set(!0);try{await na(M)}catch(C){console.error(C)}finally{n.set(!1)}}}},Ze},en=()=>Ze?.stores&&Object.keys(Ze.stores).length>0?Ze:Rr(),Lr=()=>{Ze=null};function cs(n){let t,e,i,s="Date*",a,o,r,l,c,d,f="Paid*",h,u,g,p="Scheduled",m,y="Yes",S,D="No",M,C,O=`Was this expense paid for?<br/>
				Yes, if transaction has been paid.<br/>
				No, if transaction was not paid<br/>
				Scheduled, if transaction is scheduled`,F,B,P,z="Amount*",R,b,k,w,v,H="How much money was spent",j,Y,$,it="Description*",mt,Q,ut,gt,ot,rt="Expense description i.e. Groceries, Tuition, Tennis fee",At,wt,Wt,Dt="Source*",dt,pt,de,zt,st,Z="Expense source. i.e. Walmart, Costco, Cafe Trang etc.",Ot,ht,Jt,fe=n[16].message+"",Ae,be,Ve,se,oe,je,Oe,Kt,Fn,Lt,yi,ts;oe=new dr({props:{size:"xs"}});let Vt=n[8]&&ds(n);function es(J,nt){return J[8]?Br:Fr}let Bn=es(n),ye=Bn(n),Xt=n[19]&&hs();return{c(){t=I("div"),e=I("div"),i=I("div"),i.textContent=s,a=W(),o=I("input"),l=W(),c=I("div"),d=I("div"),d.textContent=f,h=W(),u=I("select"),g=I("option"),g.textContent=p,m=I("option"),m.textContent=y,S=I("option"),S.textContent=D,M=W(),C=I("small"),C.innerHTML=O,F=W(),B=I("div"),P=I("div"),P.textContent=z,R=W(),b=I("input"),w=W(),v=I("small"),v.textContent=H,j=W(),Y=I("div"),$=I("div"),$.textContent=it,mt=W(),Q=I("input"),gt=W(),ot=I("small"),ot.textContent=rt,At=W(),wt=I("div"),Wt=I("div"),Wt.textContent=Dt,dt=W(),pt=I("input"),zt=W(),st=I("small"),st.textContent=Z,Ot=W(),ht=I("div"),Jt=I("small"),Ae=tt(fe),Ve=W(),se=I("span"),X(oe.$$.fragment),je=W(),Vt&&Vt.c(),Oe=W(),Kt=I("button"),ye.c(),Fn=W(),Xt&&Xt.c(),this.h()},l(J){t=E(J,"DIV",{class:!0});var nt=N(t);e=E(nt,"DIV",{class:!0});var zn=N(e);i=E(zn,"DIV",{"data-svelte-h":!0}),lt(i)!=="svelte-1992pd0"&&(i.textContent=s),a=V(zn),o=E(zn,"INPUT",{name:!0,type:!0,class:!0}),zn.forEach(x),l=V(nt),c=E(nt,"DIV",{class:!0});var $e=N(c);d=E($e,"DIV",{"data-svelte-h":!0}),lt(d)!=="svelte-14doau6"&&(d.textContent=f),h=V($e),u=E($e,"SELECT",{class:!0,"aria-label":!0});var Hn=N(u);g=E(Hn,"OPTION",{"data-svelte-h":!0}),lt(g)!=="svelte-r29se8"&&(g.textContent=p),m=E(Hn,"OPTION",{"data-svelte-h":!0}),lt(m)!=="svelte-y2mbp4"&&(m.textContent=y),S=E(Hn,"OPTION",{"data-svelte-h":!0}),lt(S)!=="svelte-u9l2ja"&&(S.textContent=D),Hn.forEach(x),M=V($e),C=E($e,"SMALL",{class:!0,"data-svelte-h":!0}),lt(C)!=="svelte-8drpie"&&(C.innerHTML=O),$e.forEach(x),F=V(nt),B=E(nt,"DIV",{class:!0});var Ye=N(B);P=E(Ye,"DIV",{"data-svelte-h":!0}),lt(P)!=="svelte-r3jt44"&&(P.textContent=z),R=V(Ye),b=E(Ye,"INPUT",{name:!0,type:!0,class:!0}),w=V(Ye),v=E(Ye,"SMALL",{class:!0,"data-svelte-h":!0}),lt(v)!=="svelte-1kwt4h6"&&(v.textContent=H),Ye.forEach(x),j=V(nt),Y=E(nt,"DIV",{class:!0});var Ue=N(Y);$=E(Ue,"DIV",{"data-svelte-h":!0}),lt($)!=="svelte-8167a8"&&($.textContent=it),mt=V(Ue),Q=E(Ue,"INPUT",{name:!0,type:!0,class:!0}),gt=V(Ue),ot=E(Ue,"SMALL",{class:!0,"data-svelte-h":!0}),lt(ot)!=="svelte-1g8l3ub"&&(ot.textContent=rt),Ue.forEach(x),At=V(nt),wt=E(nt,"DIV",{class:!0});var Xe=N(wt);Wt=E(Xe,"DIV",{"data-svelte-h":!0}),lt(Wt)!=="svelte-1irjajf"&&(Wt.textContent=Dt),dt=V(Xe),pt=E(Xe,"INPUT",{name:!0,type:!0,class:!0}),zt=V(Xe),st=E(Xe,"SMALL",{class:!0,"data-svelte-h":!0}),lt(st)!=="svelte-tmui2k"&&(st.textContent=Z),Xe.forEach(x),Ot=V(nt),ht=E(nt,"DIV",{class:!0});var Ce=N(ht);Jt=E(Ce,"SMALL",{class:!0});var ns=N(Jt);Ae=et(ns,fe),ns.forEach(x),Ve=V(Ce),se=E(Ce,"SPAN",{});var is=N(se);q(oe.$$.fragment,is),is.forEach(x),je=V(Ce),Vt&&Vt.l(Ce),Oe=V(Ce),Kt=E(Ce,"BUTTON",{class:!0});var Nn=N(Kt);ye.l(Nn),Fn=V(Nn),Xt&&Xt.l(Nn),Nn.forEach(x),Ce.forEach(x),nt.forEach(x),this.h()},h(){T(o,"name",r=n[1]+"-date"),T(o,"type","date"),T(o,"class","form-control"),o.disabled=n[11],o.required=!0,Ht(o,"is-invalid",n[17]),T(e,"class","d-flex flex-column gap-2"),g.__value="scheduled",Zt(g,g.__value),m.__value="yes",Zt(m,m.__value),S.__value="no",Zt(S,S.__value),T(u,"class","form-select"),T(u,"aria-label","Note of transaction has been expensed"),n[3]===void 0&&Ko(()=>n[30].call(u)),T(C,"class","d-block fw-lighter fst-italic"),T(c,"class","d-flex flex-column gap-2"),T(b,"name",k=n[1]+"-amount"),T(b,"type","text"),T(b,"class","form-control text-end"),b.disabled=n[11],b.required=!0,Ht(b,"is-invalid",n[18]),T(v,"class","fw-lighter fst-italic"),T(B,"class","d-flex flex-column gap-2"),T(Q,"name",ut=n[1]+"-description"),T(Q,"type","text"),T(Q,"class","form-control"),Q.disabled=n[11],Q.required=!0,Ht(Q,"is-invalid",n[10]),T(ot,"class","fw-lighter fst-italic"),T(Y,"class","d-flex flex-column gap-2"),T(pt,"name",de=n[1]+"-source"),T(pt,"type","text"),T(pt,"class","form-control"),pt.disabled=n[11],pt.required=!0,Ht(pt,"is-invalid",n[9]),T(st,"class","fw-lighter fst-italic"),T(wt,"class","d-flex flex-column gap-2"),T(Jt,"class",be="fw-lighter fst-italic text-"+n[16].type),Ht(se,"d-none",!n[11]),T(Kt,"class","btn btn-primary position-relative"),T(ht,"class","d-flex justify-content-end align-items-center gap-2 flex-row"),T(t,"class","d-flex flex-column gap-4")},m(J,nt){U(J,t,nt),_(t,e),_(e,i),_(e,a),_(e,o),n[26](o),Zt(o,n[2]),_(t,l),_(t,c),_(c,d),_(c,h),_(c,u),_(u,g),_(u,m),_(u,S),ii(u,n[3],!0),_(c,M),_(c,C),_(t,F),_(t,B),_(B,P),_(B,R),_(B,b),n[31](b),Zt(b,n[4]),_(B,w),_(B,v),_(t,j),_(t,Y),_(Y,$),_(Y,mt),_(Y,Q),n[35](Q),Zt(Q,n[5]),_(Y,gt),_(Y,ot),_(t,At),_(t,wt),_(wt,Wt),_(wt,dt),_(wt,pt),n[39](pt),Zt(pt,n[6]),_(wt,zt),_(wt,st),_(t,Ot),_(t,ht),_(ht,Jt),_(Jt,Ae),_(ht,Ve),_(ht,se),K(oe,se,null),_(ht,je),Vt&&Vt.m(ht,null),_(ht,Oe),_(ht,Kt),ye.m(Kt,null),_(Kt,Fn),Xt&&Xt.m(Kt,null),Lt=!0,yi||(ts=[It(o,"focus",n[27]),It(o,"keyup",n[28]),It(o,"input",n[29]),It(u,"change",n[30]),It(b,"focus",n[32]),It(b,"keyup",n[33]),It(b,"input",n[34]),It(Q,"focus",n[36]),It(Q,"keyup",n[37]),It(Q,"input",n[38]),It(pt,"focus",n[40]),It(pt,"keyup",n[41]),It(pt,"input",n[42]),It(Kt,"click",n[21])],yi=!0)},p(J,nt){(!Lt||nt[0]&2&&r!==(r=J[1]+"-date"))&&T(o,"name",r),(!Lt||nt[0]&2048)&&(o.disabled=J[11]),nt[0]&4&&Zt(o,J[2]),(!Lt||nt[0]&131072)&&Ht(o,"is-invalid",J[17]),nt[0]&8&&ii(u,J[3]),(!Lt||nt[0]&2&&k!==(k=J[1]+"-amount"))&&T(b,"name",k),(!Lt||nt[0]&2048)&&(b.disabled=J[11]),nt[0]&16&&b.value!==J[4]&&Zt(b,J[4]),(!Lt||nt[0]&262144)&&Ht(b,"is-invalid",J[18]),(!Lt||nt[0]&2&&ut!==(ut=J[1]+"-description"))&&T(Q,"name",ut),(!Lt||nt[0]&2048)&&(Q.disabled=J[11]),nt[0]&32&&Q.value!==J[5]&&Zt(Q,J[5]),(!Lt||nt[0]&1024)&&Ht(Q,"is-invalid",J[10]),(!Lt||nt[0]&2&&de!==(de=J[1]+"-source"))&&T(pt,"name",de),(!Lt||nt[0]&2048)&&(pt.disabled=J[11]),nt[0]&64&&pt.value!==J[6]&&Zt(pt,J[6]),(!Lt||nt[0]&512)&&Ht(pt,"is-invalid",J[9]),(!Lt||nt[0]&65536)&&fe!==(fe=J[16].message+"")&&St(Ae,fe),(!Lt||nt[0]&65536&&be!==(be="fw-lighter fst-italic text-"+J[16].type))&&T(Jt,"class",be),(!Lt||nt[0]&2048)&&Ht(se,"d-none",!J[11]),J[8]?Vt?Vt.p(J,nt):(Vt=ds(J),Vt.c(),Vt.m(ht,Oe)):Vt&&(Vt.d(1),Vt=null),Bn!==(Bn=es(J))&&(ye.d(1),ye=Bn(J),ye&&(ye.c(),ye.m(Kt,Fn))),J[19]?Xt||(Xt=hs(),Xt.c(),Xt.m(Kt,null)):Xt&&(Xt.d(1),Xt=null)},i(J){Lt||(A(oe.$$.fragment,J),Lt=!0)},o(J){L(oe.$$.fragment,J),Lt=!1},d(J){J&&x(t),n[26](null),n[31](null),n[35](null),n[39](null),G(oe),Vt&&Vt.d(),ye.d(),Xt&&Xt.d(),yi=!1,Bi(ts)}}}function ds(n){let t,e="<span>Delete</span>",i,s;return{c(){t=I("button"),t.innerHTML=e,this.h()},l(a){t=E(a,"BUTTON",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-4hjfsp"&&(t.innerHTML=e),this.h()},h(){T(t,"class","btn btn-danger position-relative")},m(a,o){U(a,t,o),i||(s=It(t,"click",n[20]),i=!0)},p:kt,d(a){a&&x(t),i=!1,s()}}}function Fr(n){let t,e="Create";return{c(){t=I("span"),t.textContent=e},l(i){t=E(i,"SPAN",{"data-svelte-h":!0}),lt(t)!=="svelte-1wf0js6"&&(t.textContent=e)},m(i,s){U(i,t,s)},d(i){i&&x(t)}}}function Br(n){let t,e="Save";return{c(){t=I("span"),t.textContent=e},l(i){t=E(i,"SPAN",{"data-svelte-h":!0}),lt(t)!=="svelte-l126tb"&&(t.textContent=e)},m(i,s){U(i,t,s)},d(i){i&&x(t)}}}function hs(n){let t,e='<span class="visually-hidden">Item not saved</span>';return{c(){t=I("span"),t.innerHTML=e,this.h()},l(i){t=E(i,"SPAN",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-1sxrz4i"&&(t.innerHTML=e),this.h()},h(){T(t,"class","position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle")},m(i,s){U(i,t,s)},d(i){i&&x(t)}}}function zr(n){let t,e,i=n[0]&&cs(n);return{c(){i&&i.c(),t=Ct()},l(s){i&&i.l(s),t=Ct()},m(s,a){i&&i.m(s,a),U(s,t,a),e=!0},p(s,a){s[0]?i?(i.p(s,a),a[0]&1&&A(i,1)):(i=cs(s),i.c(),A(i,1),i.m(t.parentNode,t)):i&&(Mt(),L(i,1,1,()=>{i=null}),Tt())},i(s){e||(A(i),e=!0)},o(s){L(i),e=!1},d(s){s&&x(t),i&&i.d(s)}}}function Hr(n,t,e){let i,s,a,o,r,l,c,{name:d=""}=t,{drawerId:f=""}=t,{transaction:h}=t;const{actions:{reload:u}}=en();let g=!1,p=!1,m,y=0,S="yes",D=0,M="",C="",O,F,B,P,z={message:"",type:"info"},R,b={source:!1,description:!1,amount:!1,date:!1};const k=()=>{const Z=`[data-bs-target="#${f}"]`,Ot=document.querySelector(Z);Ot&&Ot.click()},w=()=>{e(7,b={source:!1,description:!1,date:!1,amount:!1}),e(0,h={...Mr}),e(11,p=!1)},v=(Z,Ot=0,ht="info")=>{e(16,z.message=Z,z),e(16,z.type=ht,z),Ot&&setTimeout(()=>{e(16,z.message="",z)},Ot)},H=async()=>{if(!i){v("ID is not defined",0,"danger");return}try{await na(i),await u(!0),setTimeout(()=>{e(11,p=!1),e(25,R={...h,id:i,date:m}),v("Transaction Deleted",3e3,"success"),k()},800)}catch(Z){setTimeout(()=>{e(11,p=!1),console.error("Save failed:",Z),v("Failed to save event. Please try again.",7e3,"danger")},800)}},j=()=>{e(11,p=!0),pi({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:Z=>{Z&&H(),w()}})},Y=async()=>{if(!s){v("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!c){let Z=[];o&&Z.push("Amount is invalid"),a&&Z.push("Date is invalid"),l&&Z.push("Description is invalid"),r&&Z.push("Source is invalid"),v(Z.join(". ")+".  Please address accordingly.",0,"danger");return}if(!p){v("Saving ..."),e(11,p=!0);try{const Z={paid:S,type:"unknown",from_bill:!1,bill_id:h?.meta_data?.bill_id},Ot={...h,description:M,source:C,amount:D,meta_data:Z,date:m};i?await sa(i,Ot):await ia(Ot),await u(!0),setTimeout(()=>{e(11,p=!1),e(25,R={...h,id:i}),v("Saved",3e3,"success"),i||w(),k()},800)}catch(Z){setTimeout(()=>{e(11,p=!1),console.error("Save failed:",Z),v("Failed to save event. Please try again.",7e3,"danger"),i||w()},800)}}};function $(Z){_t[Z?"unshift":"push"](()=>{B=Z,e(14,B)})}const it=()=>B.select(),mt=()=>e(7,b.date=!0,b);function Q(){m=this.value,e(2,m),e(23,g),e(0,h),e(24,y),e(8,i),e(25,R)}function ut(){S=Go(this),e(3,S),e(23,g),e(0,h),e(24,y),e(8,i),e(25,R),e(2,m)}function gt(Z){_t[Z?"unshift":"push"](()=>{P=Z,e(15,P)})}const ot=()=>P.select(),rt=()=>e(7,b.amount=!0,b);function At(){D=this.value,e(4,D),e(23,g),e(0,h),e(24,y),e(8,i),e(25,R),e(2,m)}function wt(Z){_t[Z?"unshift":"push"](()=>{O=Z,e(12,O)})}const Wt=()=>O.select(),Dt=()=>e(7,b.description=!0,b);function dt(){M=this.value,e(5,M),e(23,g),e(0,h),e(24,y),e(8,i),e(25,R),e(2,m)}function pt(Z){_t[Z?"unshift":"push"](()=>{F=Z,e(13,F)})}const de=()=>F.select(),zt=()=>e(7,b.source=!0,b);function st(){C=this.value,e(6,C),e(23,g),e(0,h),e(24,y),e(8,i),e(25,R),e(2,m)}return n.$$set=Z=>{"name"in Z&&e(1,d=Z.name),"drawerId"in Z&&e(22,f=Z.drawerId),"transaction"in Z&&e(0,h=Z.transaction)},n.$$.update=()=>{n.$$.dirty[0]&1&&e(8,i=h?.id),n.$$.dirty[0]&58720517&&!g&&h?.date&&(y!==i||R?.date!==m||R?.amount!==h?.amount||R?.description!==h?.description||R?.source!==h?.source)&&(e(23,g=!0),e(11,p=!0),e(25,R={...h}),e(24,y=h?.id),e(3,S=h?.meta_data?.paid??"yes"),e(4,D=h?.amount??0),e(5,M=h?.description??""),e(6,C=h?.source??""),e(2,m=h?.date?he(new Date,"yyyy-MM-dd"):h.date),e(11,p=!1)),n.$$.dirty[0]&33554557&&e(19,s=S!==h?.meta_data?.paid||R?.date!==m||D!==h?.amount||M!==h?.description||C!==h?.source),n.$$.dirty[0]&132&&e(17,a=b.date&&m===""),n.$$.dirty[0]&144&&e(18,o=b.amount&&D===0),n.$$.dirty[0]&192&&e(9,r=b.source&&C===""),n.$$.dirty[0]&160&&e(10,l=b.description&&M===""),n.$$.dirty[0]&1536&&(c=!r&&!l)},[h,d,m,S,D,M,C,b,i,r,l,p,O,F,B,P,z,a,o,s,j,Y,f,g,y,R,$,it,mt,Q,ut,gt,ot,rt,At,wt,Wt,Dt,dt,pt,de,zt,st]}class Nr extends yt{constructor(t){super(),vt(this,t,Hr,zr,bt,{name:1,drawerId:22,transaction:0},null,[-1,-1])}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pn(n){return n+.5|0}const Te=(n,t,e)=>Math.max(Math.min(n,e),t);function pn(n){return Te(Pn(n*2.55),0,255)}function De(n){return Te(Pn(n*255),0,255)}function ke(n){return Te(Pn(n/2.55)/100,0,1)}function fs(n){return Te(Pn(n*100),0,100)}const ae={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ai=[..."0123456789ABCDEF"],Wr=n=>Ai[n&15],Vr=n=>Ai[(n&240)>>4]+Ai[n&15],Vn=n=>(n&240)>>4===(n&15),jr=n=>Vn(n.r)&&Vn(n.g)&&Vn(n.b)&&Vn(n.a);function $r(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&ae[n[1]]*17,g:255&ae[n[2]]*17,b:255&ae[n[3]]*17,a:t===5?ae[n[4]]*17:255}:(t===7||t===9)&&(e={r:ae[n[1]]<<4|ae[n[2]],g:ae[n[3]]<<4|ae[n[4]],b:ae[n[5]]<<4|ae[n[6]],a:t===9?ae[n[7]]<<4|ae[n[8]]:255})),e}const Yr=(n,t)=>n<255?t(n):"";function Ur(n){var t=jr(n)?Wr:Vr;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Yr(n.a,t):void 0}const Xr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function la(n,t,e){const i=t*Math.min(e,1-e),s=(a,o=(a+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function qr(n,t,e){const i=(s,a=(s+n/60)%6)=>e-e*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function Kr(n,t,e){const i=la(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function Gr(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function Hi(n){const e=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(e,i,s),o=Math.min(e,i,s),r=(a+o)/2;let l,c,d;return a!==o&&(d=a-o,c=r>.5?d/(2-a-o):d/(a+o),l=Gr(e,i,s,d,a),l=l*60+.5),[l|0,c||0,r]}function Ni(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(De)}function Wi(n,t,e){return Ni(la,n,t,e)}function Zr(n,t,e){return Ni(Kr,n,t,e)}function Qr(n,t,e){return Ni(qr,n,t,e)}function ca(n){return(n%360+360)%360}function Jr(n){const t=Xr.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?pn(+t[5]):De(+t[5]));const s=ca(+t[2]),a=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=Zr(s,a,o):t[1]==="hsv"?i=Qr(s,a,o):i=Wi(s,a,o),{r:i[0],g:i[1],b:i[2],a:e}}function tl(n,t){var e=Hi(n);e[0]=ca(e[0]+t),e=Wi(e),n.r=e[0],n.g=e[1],n.b=e[2]}function el(n){if(!n)return;const t=Hi(n),e=t[0],i=fs(t[1]),s=fs(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${ke(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const us={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},gs={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function nl(){const n={},t=Object.keys(gs),e=Object.keys(us);let i,s,a,o,r;for(i=0;i<t.length;i++){for(o=r=t[i],s=0;s<e.length;s++)a=e[s],r=r.replace(a,us[a]);a=parseInt(gs[o],16),n[r]=[a>>16&255,a>>8&255,a&255]}return n}let jn;function il(n){jn||(jn=nl(),jn.transparent=[0,0,0,0]);const t=jn[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const sl=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ol(n){const t=sl.exec(n);let e=255,i,s,a;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?pn(o):Te(o*255,0,255)}return i=+t[1],s=+t[3],a=+t[5],i=255&(t[2]?pn(i):Te(i,0,255)),s=255&(t[4]?pn(s):Te(s,0,255)),a=255&(t[6]?pn(a):Te(a,0,255)),{r:i,g:s,b:a,a:e}}}function al(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ke(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const wi=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,qe=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function rl(n,t,e){const i=qe(ke(n.r)),s=qe(ke(n.g)),a=qe(ke(n.b));return{r:De(wi(i+e*(qe(ke(t.r))-i))),g:De(wi(s+e*(qe(ke(t.g))-s))),b:De(wi(a+e*(qe(ke(t.b))-a))),a:n.a+e*(t.a-n.a)}}function $n(n,t,e){if(n){let i=Hi(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Wi(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function da(n,t){return n&&Object.assign(t||{},n)}function ps(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=De(n[3]))):(t=da(n,{r:0,g:0,b:0,a:1}),t.a=De(t.a)),t}function ll(n){return n.charAt(0)==="r"?ol(n):Jr(n)}class Cn{constructor(t){if(t instanceof Cn)return t;const e=typeof t;let i;e==="object"?i=ps(t):e==="string"&&(i=$r(t)||il(t)||ll(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=da(this._rgb);return t&&(t.a=ke(t.a)),t}set rgb(t){this._rgb=ps(t)}rgbString(){return this._valid?al(this._rgb):void 0}hexString(){return this._valid?Ur(this._rgb):void 0}hslString(){return this._valid?el(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let a;const o=e===a?.5:e,r=2*o-1,l=i.a-s.a,c=((r*l===-1?r:(r+l)/(1+r*l))+1)/2;a=1-c,i.r=255&c*i.r+a*s.r+.5,i.g=255&c*i.g+a*s.g+.5,i.b=255&c*i.b+a*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=rl(this._rgb,t._rgb,e)),this}clone(){return new Cn(this.rgb)}alpha(t){return this._rgb.a=De(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Pn(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return $n(this._rgb,2,t),this}darken(t){return $n(this._rgb,2,-t),this}saturate(t){return $n(this._rgb,1,t),this}desaturate(t){return $n(this._rgb,1,-t),this}rotate(t){return tl(this._rgb,t),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function ve(){}const cl=(()=>{let n=0;return()=>n++})();function qt(n){return n==null}function Nt(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function at(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Se(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ue(n,t){return Se(n)?n:t}function ct(n,t){return typeof n>"u"?t:n}const dl=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,ha=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function xt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ft(n,t,e,i){let s,a,o;if(Nt(n))for(a=n.length,s=0;s<a;s++)t.call(e,n[s],s);else if(at(n))for(o=Object.keys(n),a=o.length,s=0;s<a;s++)t.call(e,n[o[s]],o[s])}function oi(n,t){let e,i,s,a;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],a=t[e],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function ai(n){if(Nt(n))return n.map(ai);if(at(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=ai(n[e[s]]);return t}return n}function fa(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function hl(n,t,e,i){if(!fa(n))return;const s=t[n],a=e[n];at(s)&&at(a)?Mn(s,a,i):t[n]=ai(a)}function Mn(n,t,e){const i=Nt(t)?t:[t],s=i.length;if(!at(n))return n;e=e||{};const a=e.merger||hl;let o;for(let r=0;r<s;++r){if(o=i[r],!at(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)a(l[c],n,o,e)}return n}function wn(n,t){return Mn(n,t,{merger:fl})}function fl(n,t,e){if(!fa(n))return;const i=t[n],s=e[n];at(i)&&at(s)?wn(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=ai(s))}const ms={"":n=>n,x:n=>n.x,y:n=>n.y};function ul(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function gl(n){const t=ul(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Tn(n,t){return(ms[t]||(ms[t]=gl(t)))(n)}function Vi(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ri=n=>typeof n<"u",Ee=n=>typeof n=="function",_s=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function pl(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Rt=Math.PI,Pt=2*Rt,li=Number.POSITIVE_INFINITY,ml=Rt/180,Bt=Rt/2,Pe=Rt/4,bs=Rt*2/3,ys=Math.log10,vs=Math.sign;function _l(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,a)=>s-a).pop(),t}function ci(n){return!isNaN(parseFloat(n))&&isFinite(n)}function He(n){return n*(Rt/180)}function bl(n){return n*(180/Rt)}function ua(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let a=Math.atan2(i,e);return a<-.5*Rt&&(a+=Pt),{angle:a,distance:s}}function yl(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Re(n){return(n%Pt+Pt)%Pt}function di(n,t,e,i){const s=Re(n),a=Re(t),o=Re(e),r=Re(a-s),l=Re(o-s),c=Re(s-a),d=Re(s-o);return s===a||s===o||i&&a===o||r>l&&c<d}function ee(n,t,e){return Math.max(t,Math.min(e,n))}function vl(n){return ee(n,-32768,32767)}function mn(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function ji(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,e(a)?s=a:i=a;return{lo:s,hi:i}}const Oi=(n,t,e,i)=>ji(n,e,i?s=>{const a=n[s][t];return a<e||a===e&&n[s+1][t]===e}:s=>n[s][t]<e),wl=(n,t,e)=>ji(n,e,i=>n[i][t]>=e);function xl(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const ga=["push","pop","shift","splice","unshift"];function kl(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ga.forEach(e=>{const i="_onData"+Vi(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){const o=s.apply(this,a);return n._chartjs.listeners.forEach(r=>{typeof r[i]=="function"&&r[i](...a)}),o}})})}function ws(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(ga.forEach(a=>{delete n[a]}),delete n._chartjs)}function Sl(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const pa=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function ma(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,pa.call(window,()=>{i=!1,n.apply(t,e)}))}}function Cl(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const $i=n=>n==="start"?"left":n==="end"?"right":"center",jt=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Ml=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,Yn=n=>n===0||n===1,xs=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Pt/e)),ks=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Pt/e)+1,xn={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Bt)+1,easeOutSine:n=>Math.sin(n*Bt),easeInOutSine:n=>-.5*(Math.cos(Rt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Yn(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Yn(n)?n:xs(n,.075,.3),easeOutElastic:n=>Yn(n)?n:ks(n,.075,.3),easeInOutElastic(n){return Yn(n)?n:n<.5?.5*xs(n*2,.1125,.45):.5+.5*ks(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-xn.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?xn.easeInBounce(n*2)*.5:xn.easeOutBounce(n*2-1)*.5+.5};function _a(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ss(n){return _a(n)?n:new Cn(n)}function xi(n){return _a(n)?n:new Cn(n).saturate(.5).darken(.1).hexString()}const Tl=["x","y","borderWidth","radius","tension"],Dl=["color","borderColor","backgroundColor"];function Il(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Dl},numbers:{type:"number",properties:Tl}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function El(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Cs=new Map;function Al(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Cs.get(e);return i||(i=new Intl.NumberFormat(n,t),Cs.set(e,i)),i}function ba(n,t,e){return Al(t,e).format(n)}const ya={values(n){return Nt(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),a=Ol(n,e)}const o=ys(Math.abs(a)),r=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),ba(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(ys(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?ya.numeric.call(this,n,t,e):""}};function Ol(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Pl={formatters:ya};function Rl(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const We=Object.create(null),Pi=Object.create(null);function kn(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const a=e[i];n=n[a]||(n[a]=Object.create(null))}return n}function ki(n,t,e){return typeof t=="string"?Mn(kn(n,t),e):Mn(kn(n,""),t)}class Ll{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>xi(s.backgroundColor),this.hoverBorderColor=(i,s)=>xi(s.borderColor),this.hoverColor=(i,s)=>xi(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ki(this,t,e)}get(t){return kn(this,t)}describe(t,e){return ki(Pi,t,e)}override(t,e){return ki(We,t,e)}route(t,e,i,s){const a=kn(this,t),o=kn(this,i),r="_"+e;Object.defineProperties(a,{[r]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[r],c=o[s];return at(l)?Object.assign({},c,l):ct(l,c)},set(l){this[r]=l}}})}apply(t){t.forEach(e=>e(this))}}var Et=new Ll({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Il,El,Rl]);function Fl(n){return!n||qt(n.size)||qt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Ms(n,t,e,i,s){let a=t[s];return a||(a=t[s]=n.measureText(s).width,e.push(s)),a>i&&(i=a),i}function Le(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function Ts(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Ds(n,t,e,i){va(n,t,e,i,null)}function va(n,t,e,i,s){let a,o,r,l,c,d,f,h;const u=t.pointStyle,g=t.rotation,p=t.radius;let m=(g||0)*ml;if(u&&typeof u=="object"&&(a=u.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(m),n.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),u){default:s?n.ellipse(e,i,s/2,p,0,0,Pt):n.arc(e,i,p,0,Pt),n.closePath();break;case"triangle":d=s?s/2:p,n.moveTo(e+Math.sin(m)*d,i-Math.cos(m)*p),m+=bs,n.lineTo(e+Math.sin(m)*d,i-Math.cos(m)*p),m+=bs,n.lineTo(e+Math.sin(m)*d,i-Math.cos(m)*p),n.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+Pe)*l,f=Math.cos(m+Pe)*(s?s/2-c:l),r=Math.sin(m+Pe)*l,h=Math.sin(m+Pe)*(s?s/2-c:l),n.arc(e-f,i-r,c,m-Rt,m-Bt),n.arc(e+h,i-o,c,m-Bt,m),n.arc(e+f,i+r,c,m,m+Bt),n.arc(e-h,i+o,c,m+Bt,m+Rt),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,d=s?s/2:l,n.rect(e-d,i-l,2*d,2*l);break}m+=Pe;case"rectRot":f=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,r=Math.sin(m)*p,h=Math.sin(m)*(s?s/2:p),n.moveTo(e-f,i-r),n.lineTo(e+h,i-o),n.lineTo(e+f,i+r),n.lineTo(e-h,i+o),n.closePath();break;case"crossRot":m+=Pe;case"cross":f=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,r=Math.sin(m)*p,h=Math.sin(m)*(s?s/2:p),n.moveTo(e-f,i-r),n.lineTo(e+f,i+r),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o);break;case"star":f=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,r=Math.sin(m)*p,h=Math.sin(m)*(s?s/2:p),n.moveTo(e-f,i-r),n.lineTo(e+f,i+r),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o),m+=Pe,f=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,r=Math.sin(m)*p,h=Math.sin(m)*(s?s/2:p),n.moveTo(e-f,i-r),n.lineTo(e+f,i+r),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o);break;case"line":o=s?s/2:Math.cos(m)*p,r=Math.sin(m)*p,n.moveTo(e-o,i-r),n.lineTo(e+o,i+r);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(m)*(s?s/2:p),i+Math.sin(m)*p);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function wa(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Yi(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Ui(n){n.restore()}function Bl(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),qt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function zl(n,t,e,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),o=t-a.actualBoundingBoxLeft,r=t+a.actualBoundingBoxRight,l=e-a.actualBoundingBoxAscent,c=e+a.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,d),n.lineTo(r,d),n.stroke()}}function Hl(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Dn(n,t,e,i,s,a={}){const o=Nt(t)?t:[t],r=a.strokeWidth>0&&a.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,Bl(n,a),l=0;l<o.length;++l)c=o[l],a.backdrop&&Hl(n,a.backdrop),r&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),qt(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(c,e,i,a.maxWidth)),n.fillText(c,e,i,a.maxWidth),zl(n,e,i,c,a),i+=Number(s.lineHeight);n.restore()}function Ri(n,t){const{x:e,y:i,w:s,h:a,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*Rt,Rt,!0),n.lineTo(e,i+a-o.bottomLeft),n.arc(e+o.bottomLeft,i+a-o.bottomLeft,o.bottomLeft,Rt,Bt,!0),n.lineTo(e+s-o.bottomRight,i+a),n.arc(e+s-o.bottomRight,i+a-o.bottomRight,o.bottomRight,Bt,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-Bt,!0),n.lineTo(e+o.topLeft,i)}const Nl=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Wl=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Vl(n,t){const e=(""+n).match(Nl);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const jl=n=>+n||0;function Xi(n,t){const e={},i=at(t),s=i?Object.keys(t):t,a=at(n)?i?o=>ct(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of s)e[o]=jl(a(o));return e}function $l(n){return Xi(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Sn(n){return Xi(n,["topLeft","topRight","bottomLeft","bottomRight"])}function le(n){const t=$l(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ut(n,t){n=n||{},t=t||Et.font;let e=ct(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=ct(n.style,t.style);i&&!(""+i).match(Wl)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ct(n.family,t.family),lineHeight:Vl(ct(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:ct(n.weight,t.weight),string:""};return s.string=Fl(s),s}function Un(n,t,e,i){let s,a,o;for(s=0,a=n.length;s<a;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function Yl(n,t,e){const{min:i,max:s}=n,a=ha(t,(s-i)/2),o=(r,l)=>e&&r===0?0:r+l;return{min:o(i,-Math.abs(a)),max:o(s,a)}}function on(n,t){return Object.assign(Object.create(n),t)}function qi(n,t=[""],e,i,s=()=>n[0]){const a=e||n;typeof i>"u"&&(i=Ca("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:r=>qi([r,...n],t,a,i)};return new Proxy(o,{deleteProperty(r,l){return delete r[l],delete r._keys,delete n[0][l],!0},get(r,l){return ka(r,l,()=>Jl(l,t,n,r))},getOwnPropertyDescriptor(r,l){return Reflect.getOwnPropertyDescriptor(r._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(r,l){return Es(r).includes(l)},ownKeys(r){return Es(r)},set(r,l,c){const d=r._storage||(r._storage=s());return r[l]=d[l]=c,delete r._keys,!0}})}function nn(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:xa(n,i),setContext:a=>nn(n,a,e,i),override:a=>nn(n.override(a),t,e,i)};return new Proxy(s,{deleteProperty(a,o){return delete a[o],delete n[o],!0},get(a,o,r){return ka(a,o,()=>Xl(a,o,r))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(a,o,r){return n[o]=r,delete a[o],!0}})}function xa(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Ee(e)?e:()=>e,isIndexable:Ee(i)?i:()=>i}}const Ul=(n,t)=>n?n+Vi(t):t,Ki=(n,t)=>at(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ka(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Xl(n,t,e){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;let r=i[t];return Ee(r)&&o.isScriptable(t)&&(r=ql(t,r,n,e)),Nt(r)&&r.length&&(r=Kl(t,r,n,o.isIndexable)),Ki(t,r)&&(r=nn(r,s,a&&a[t],o)),r}function ql(n,t,e,i){const{_proxy:s,_context:a,_subProxy:o,_stack:r}=e;if(r.has(n))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+n);r.add(n);let l=t(a,o||i);return r.delete(n),Ki(n,l)&&(l=Gi(s._scopes,s,n,l)),l}function Kl(n,t,e,i){const{_proxy:s,_context:a,_subProxy:o,_descriptors:r}=e;if(typeof a.index<"u"&&i(n))return t[a.index%t.length];if(at(t[0])){const l=t,c=s._scopes.filter(d=>d!==l);t=[];for(const d of l){const f=Gi(c,s,n,d);t.push(nn(f,a,o&&o[n],r))}}return t}function Sa(n,t,e){return Ee(n)?n(t,e):n}const Gl=(n,t)=>n===!0?t:typeof n=="string"?Tn(t,n):void 0;function Zl(n,t,e,i,s){for(const a of t){const o=Gl(e,a);if(o){n.add(o);const r=Sa(o._fallback,e,s);if(typeof r<"u"&&r!==e&&r!==i)return r}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function Gi(n,t,e,i){const s=t._rootScopes,a=Sa(t._fallback,e,i),o=[...n,...s],r=new Set;r.add(i);let l=Is(r,o,e,a||e,i);return l===null||typeof a<"u"&&a!==e&&(l=Is(r,o,a,l,i),l===null)?!1:qi(Array.from(r),[""],s,a,()=>Ql(t,e,i))}function Is(n,t,e,i,s){for(;e;)e=Zl(n,t,e,i,s);return e}function Ql(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return Nt(s)&&at(e)?e:s||{}}function Jl(n,t,e,i){let s;for(const a of t)if(s=Ca(Ul(a,n),e),typeof s<"u")return Ki(n,s)?Gi(e,i,n,s):s}function Ca(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Es(n){let t=n._keys;return t||(t=n._keys=tc(n._scopes)),t}function tc(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function Zi(){return typeof window<"u"&&typeof document<"u"}function Qi(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function hi(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const mi=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function ec(n,t){return mi(n).getPropertyValue(t)}const nc=["top","right","bottom","left"];function Ne(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const a=nc[s];i[a]=parseFloat(n[t+"-"+a+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const ic=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function sc(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:a}=i;let o=!1,r,l;if(ic(s,a,n.target))r=s,l=a;else{const c=t.getBoundingClientRect();r=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:r,y:l,box:o}}function Be(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=mi(e),a=s.boxSizing==="border-box",o=Ne(s,"padding"),r=Ne(s,"border","width"),{x:l,y:c,box:d}=sc(n,e),f=o.left+(d&&r.left),h=o.top+(d&&r.top);let{width:u,height:g}=t;return a&&(u-=o.width+r.width,g-=o.height+r.height),{x:Math.round((l-f)/u*e.width/i),y:Math.round((c-h)/g*e.height/i)}}function oc(n,t,e){let i,s;if(t===void 0||e===void 0){const a=n&&Qi(n);if(!a)t=n.clientWidth,e=n.clientHeight;else{const o=a.getBoundingClientRect(),r=mi(a),l=Ne(r,"border","width"),c=Ne(r,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=hi(r.maxWidth,a,"clientWidth"),s=hi(r.maxHeight,a,"clientHeight")}}return{width:t,height:e,maxWidth:i||li,maxHeight:s||li}}const Xn=n=>Math.round(n*10)/10;function ac(n,t,e,i){const s=mi(n),a=Ne(s,"margin"),o=hi(s.maxWidth,n,"clientWidth")||li,r=hi(s.maxHeight,n,"clientHeight")||li,l=oc(n,t,e);let{width:c,height:d}=l;if(s.boxSizing==="content-box"){const h=Ne(s,"border","width"),u=Ne(s,"padding");c-=u.width+h.width,d-=u.height+h.height}return c=Math.max(0,c-a.width),d=Math.max(0,i?c/i:d-a.height),c=Xn(Math.min(c,o,l.maxWidth)),d=Xn(Math.min(d,r,l.maxHeight)),c&&!d&&(d=Xn(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&d>l.height&&(d=l.height,c=Xn(Math.floor(d*i))),{width:c,height:d}}function As(n,t,e){const i=t||1,s=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==a?(n.currentDevicePixelRatio=i,o.height=s,o.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const rc=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Zi()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Os(n,t){const e=ec(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const lc=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},cc=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Qe(n,t,e){return n?lc(t,e):cc()}function Ma(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Ta(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class dc{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const a=e.listeners[s],o=e.duration;a.forEach(r=>r({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=pa.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let o=a.length-1,r=!1,l;for(;o>=0;--o)l=a[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),r=!0):(a[o]=a[a.length-1],a.pop());r&&(s.draw(),this._notify(s,i,t,"progress")),a.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var we=new dc;const Ps="transparent",hc={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Ss(n||Ps),s=i.valid&&Ss(t||Ps);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class fc{constructor(t,e,i,s){const a=e[i];s=Un([t.to,s,a,t.from]);const o=Un([t.from,a,s]);this._active=!0,this._fn=t.fn||hc[t.type||typeof o],this._easing=xn[t.easing]||xn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,o=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=Un([t.to,e,s,t.from]),this._from=Un([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,a=this._from,o=this._loop,r=this._to;let l;if(this._active=a!==r&&(o||e<i),!this._active){this._target[s]=r,this._notify(!0);return}if(e<0){this._target[s]=a;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(a,r,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class Da{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!at(t))return;const e=Object.keys(Et.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const a=t[s];if(!at(a))return;const o={};for(const r of e)o[r]=a[r];(Nt(a.properties)&&a.properties||[s]).forEach(r=>{(r===s||!i.has(r))&&i.set(r,o)})})}_animateOptions(t,e){const i=e.options,s=gc(t,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&uc(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,e){const i=this._properties,s=[],a=t.$animations||(t.$animations={}),o=Object.keys(e),r=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,e));continue}const d=e[c];let f=a[c];const h=i.get(c);if(f)if(h&&f.active()){f.update(h,d,r);continue}else f.cancel();if(!h||!h.duration){t[c]=d;continue}a[c]=f=new fc(h,t,c,d),s.push(f)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return we.add(this._chart,i),!0}}function uc(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function gc(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Rs(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,a=e.max===void 0?t:0;return{start:i?a:s,end:i?s:a}}function pc(n,t,e){if(e===!1)return!1;const i=Rs(n,e),s=Rs(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function mc(n){let t,e,i,s;return at(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Ia(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,a;for(s=0,a=i.length;s<a;++s)e.push(i[s].index);return e}function Ls(n,t,e,i={}){const s=n.keys,a=i.mode==="single";let o,r,l,c;if(t===null)return;let d=!1;for(o=0,r=s.length;o<r;++o){if(l=+s[o],l===e){if(d=!0,i.all)continue;break}c=n.values[l],Se(c)&&(a||t===0||vs(t)===vs(c))&&(t+=c)}return!d&&!i.all?0:t}function _c(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",o=Object.keys(n),r=new Array(o.length);let l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],r[l]={[s]:d,[a]:n[d]};return r}function Si(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function bc(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function yc(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function vc(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Fs(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(e&&a>0||!e&&a<0)return s.index}return null}function Bs(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:a,vScale:o,index:r}=i,l=a.axis,c=o.axis,d=bc(a,o,i),f=t.length;let h;for(let u=0;u<f;++u){const g=t[u],{[l]:p,[c]:m}=g,y=g._stacks||(g._stacks={});h=y[c]=vc(s,d,p),h[r]=m,h._top=Fs(h,o,!0,i.type),h._bottom=Fs(h,o,!1,i.type);const S=h._visualValues||(h._visualValues={});S[r]=m}}function Ci(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function wc(n,t){return on(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function xc(n,t,e){return on(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function cn(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const a=s._stacks;if(!a||a[i]===void 0||a[i][e]===void 0)return;delete a[i][e],a[i]._visualValues!==void 0&&a[i]._visualValues[e]!==void 0&&delete a[i]._visualValues[e]}}}const Mi=n=>n==="reset"||n==="none",zs=(n,t)=>t?n:Object.assign({},n),kc=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Ia(e,!0),values:null};class Ea{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Si(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&cn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(f,h,u,g)=>f==="x"?h:f==="r"?g:u,a=e.xAxisID=ct(i.xAxisID,Ci(t,"x")),o=e.yAxisID=ct(i.yAxisID,Ci(t,"y")),r=e.rAxisID=ct(i.rAxisID,Ci(t,"r")),l=e.indexAxis,c=e.iAxisID=s(l,a,o,r),d=e.vAxisID=s(l,o,a,r);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ws(this._data,this),t._stacked&&cn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(at(e)){const s=this._cachedMeta;this._data=_c(e,s)}else if(i!==e){if(i){ws(i,this);const s=this._cachedMeta;cn(s),s._parsed=[]}e&&Object.isExtensible(e)&&kl(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=e._stacked;e._stacked=Si(e.vScale,e),e.stack!==i.stack&&(s=!0,cn(e),e.stack=i.stack),this._resyncElements(t),(s||a!==e._stacked)&&(Bs(this,e._parsed),e._stacked=Si(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:o}=i,r=a.axis;let l=t===0&&e===s.length?!0:i._sorted,c=t>0&&i._parsed[t-1],d,f,h;if(this._parsing===!1)i._parsed=s,i._sorted=!0,h=s;else{Nt(s[t])?h=this.parseArrayData(i,s,t,e):at(s[t])?h=this.parseObjectData(i,s,t,e):h=this.parsePrimitiveData(i,s,t,e);const u=()=>f[r]===null||c&&f[r]<c[r];for(d=0;d<e;++d)i._parsed[d+t]=f=h[d],l&&(u()&&(l=!1),c=f);i._sorted=l}o&&Bs(this,h)}parsePrimitiveData(t,e,i,s){const{iScale:a,vScale:o}=t,r=a.axis,l=o.axis,c=a.getLabels(),d=a===o,f=new Array(s);let h,u,g;for(h=0,u=s;h<u;++h)g=h+i,f[h]={[r]:d||a.parse(c[g],g),[l]:o.parse(e[g],g)};return f}parseArrayData(t,e,i,s){const{xScale:a,yScale:o}=t,r=new Array(s);let l,c,d,f;for(l=0,c=s;l<c;++l)d=l+i,f=e[d],r[l]={x:a.parse(f[0],d),y:o.parse(f[1],d)};return r}parseObjectData(t,e,i,s){const{xScale:a,yScale:o}=t,{xAxisKey:r="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let d,f,h,u;for(d=0,f=s;d<f;++d)h=d+i,u=e[h],c[d]={x:a.parse(Tn(u,r),h),y:o.parse(Tn(u,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,a=this._cachedMeta,o=e[t.axis],r={keys:Ia(s,!0),values:e._stacks[t.axis]._visualValues};return Ls(r,o,a.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const a=i[e.axis];let o=a===null?NaN:a;const r=s&&i._stacks[e.axis];s&&r&&(s.values=r,o=Ls(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&t===i.iScale,o=s.length,r=this._getOtherScale(t),l=kc(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=yc(r);let h,u;function g(){u=s[h];const p=u[r.axis];return!Se(u[t.axis])||d>p||f<p}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,t,u,l),a));++h);if(a){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,u,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,a,o;for(s=0,a=e.length;s<a;++s)o=e[s][t.axis],Se(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=mc(ct(this.options.clip,pc(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],a=e.chartArea,o=[],r=this._drawStart||0,l=this._drawCount||s.length-r,c=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(t,a,r,l),d=r;d<r+l;++d){const f=s[d];f.hidden||(f.active&&c?o.push(f):f.draw(t,a))}for(d=0;d<o.length;++d)o[d].draw(t,a)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];a=o.$context||(o.$context=xc(this.getContext(),t,o)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=wc(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",a=this._cachedDataOpts,o=t+"-"+e,r=a[o],l=this.enableOptionSharing&&ri(i);if(r)return zs(r,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,t),f=s?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),d),u=Object.keys(Et.elements[t]),g=()=>this.getContext(i,s,e),p=c.resolveNamedOptions(h,u,g,f);return p.$shared&&(p.$shared=l,a[o]=Object.freeze(zs(p,l))),p}_resolveAnimations(t,e,i){const s=this.chart,a=this._cachedDataOpts,o=`animation-${e}`,r=a[o];if(r)return r;let l;if(s.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,e),h=d.getOptionScopes(this.getDataset(),f);l=d.createResolver(h,this.getContext(t,i,e))}const c=new Da(s,l&&l.animations);return l&&l._cacheable&&(a[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Mi(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,a=this.getSharedOptions(i),o=this.includeOptions(e,a)||a!==s;return this.updateSharedOptions(a,e,i),{sharedOptions:a,includeOptions:o}}updateElement(t,e,i,s){Mi(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Mi(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const a=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[r,l,c]of this._syncList)this[r](l,c);this._syncList=[];const s=i.length,a=e.length,o=Math.min(a,s);o&&this.parse(0,o),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,e,i=!0){const s=this._cachedMeta,a=s.data,o=t+e;let r;const l=c=>{for(c.length+=e,r=c.length-1;r>=o;r--)c[r]=c[r-e]};for(l(a),r=t;r<o;++r)a[r]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&cn(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Sc(n,t,e){let i=1,s=1,a=0,o=0;if(t<Pt){const r=n,l=r+t,c=Math.cos(r),d=Math.sin(r),f=Math.cos(l),h=Math.sin(l),u=(D,M,C)=>di(D,r,l,!0)?1:Math.max(M,M*e,C,C*e),g=(D,M,C)=>di(D,r,l,!0)?-1:Math.min(M,M*e,C,C*e),p=u(0,c,f),m=u(Bt,d,h),y=g(Rt,c,f),S=g(Rt+Bt,d,h);i=(p-y)/2,s=(m-S)/2,a=-(p+y)/2,o=-(m+S)/2}return{ratioX:i,ratioY:s,offsetX:a,offsetY:o}}class Cc extends Ea{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((a,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:a,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let a=l=>+i[l];if(at(i[t])){const{key:l="value"}=this._parsing;a=c=>+Tn(i[c],l)}let o,r;for(o=t,r=t+e;o<r;++o)s._parsed[o]=a(o)}}_getRotation(){return He(this.options.rotation-90)}_getCircumference(){return He(this.options.circumference)}_getRotationExtents(){let t=Pt,e=-Pt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),o=s._getCircumference();t=Math.min(t,a),e=Math.max(e,a+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,a=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(dl(this.options.cutout,r),1),c=this._getRingWeight(this.index),{circumference:d,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:u,offsetX:g,offsetY:p}=Sc(f,d,l),m=(i.width-o)/h,y=(i.height-o)/u,S=Math.max(Math.min(m,y)/2,0),D=ha(this.options.radius,S),M=Math.max(D*l,0),C=(D-M)/this._getVisibleDatasetWeightTotal();this.offsetX=g*D,this.offsetY=p*D,s.total=this.calculateTotal(),this.outerRadius=D-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*c,0),this.updateElements(a,0,a.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,a=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*a/Pt)}updateElements(t,e,i,s){const a=s==="reset",o=this.chart,r=o.chartArea,c=o.options.animation,d=(r.left+r.right)/2,f=(r.top+r.bottom)/2,h=a&&c.animateScale,u=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(e,s);let y=this._getRotation(),S;for(S=0;S<e;++S)y+=this._circumference(S,a);for(S=e;S<e+i;++S){const D=this._circumference(S,a),M=t[S],C={x:d+this.offsetX,y:f+this.offsetY,startAngle:y,endAngle:y+D,circumference:D,outerRadius:g,innerRadius:u};m&&(C.options=p||this.resolveDataElementOptions(S,M.active?"active":s)),y+=D,this.updateElement(M,S,C,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const a=t._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Pt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=ba(e._parsed[t],i.options.locale);return{label:s[t]||"",value:a}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,a,o,r,l;if(!t){for(s=0,a=i.data.datasets.length;s<a;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,r=o.controller;break}}if(!t)return 0;for(s=0,a=t.length;s<a;++s)l=r.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const a=this.resolveDataElementOptions(i);e=Math.max(e,a.offset||0,a.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(ct(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Mc extends Cc{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Fe(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ji{static override(t){Object.assign(Ji.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Fe()}parse(){return Fe()}format(){return Fe()}add(){return Fe()}diff(){return Fe()}startOf(){return Fe()}endOf(){return Fe()}}var Tc={_date:Ji};function Dc(n,t,e,i){const{controller:s,data:a,_sorted:o}=n,r=s._cachedMeta.iScale;if(r&&t===r.axis&&t!=="r"&&o&&a.length){const l=r._reversePixels?wl:Oi;if(i){if(s._sharedOptions){const c=a[0],d=typeof c.getRange=="function"&&c.getRange(t);if(d){const f=l(a,t,e-d),h=l(a,t,e+d);return{lo:f.lo,hi:h.hi}}}}else return l(a,t,e)}return{lo:0,hi:a.length-1}}function Rn(n,t,e,i,s){const a=n.getSortedVisibleDatasetMetas(),o=e[t];for(let r=0,l=a.length;r<l;++r){const{index:c,data:d}=a[r],{lo:f,hi:h}=Dc(a[r],t,o,s);for(let u=f;u<=h;++u){const g=d[u];g.skip||i(g,c,u)}}}function Ic(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const a=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function Ti(n,t,e,i,s){const a=[];return!s&&!n.isPointInArea(t)||Rn(n,e,t,function(r,l,c){!s&&!wa(r,n.chartArea,0)||r.inRange(t.x,t.y,i)&&a.push({element:r,datasetIndex:l,index:c})},!0),a}function Ec(n,t,e,i){let s=[];function a(o,r,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:f}=ua(o,{x:t.x,y:t.y});di(f,c,d)&&s.push({element:o,datasetIndex:r,index:l})}return Rn(n,e,t,a),s}function Ac(n,t,e,i,s,a){let o=[];const r=Ic(e);let l=Number.POSITIVE_INFINITY;function c(d,f,h){const u=d.inRange(t.x,t.y,s);if(i&&!u)return;const g=d.getCenterPoint(s);if(!(!!a||n.isPointInArea(g))&&!u)return;const m=r(t,g);m<l?(o=[{element:d,datasetIndex:f,index:h}],l=m):m===l&&o.push({element:d,datasetIndex:f,index:h})}return Rn(n,e,t,c),o}function Di(n,t,e,i,s,a){return!a&&!n.isPointInArea(t)?[]:e==="r"&&!i?Ec(n,t,e,s):Ac(n,t,e,i,s,a)}function Hs(n,t,e,i,s){const a=[],o=e==="x"?"inXRange":"inYRange";let r=!1;return Rn(n,e,t,(l,c,d)=>{l[o]&&l[o](t[e],s)&&(a.push({element:l,datasetIndex:c,index:d}),r=r||l.inRange(t.x,t.y,s))}),i&&!r?[]:a}var Oc={evaluateInteractionItems:Rn,modes:{index(n,t,e,i){const s=Be(t,n),a=e.axis||"x",o=e.includeInvisible||!1,r=e.intersect?Ti(n,s,a,i,o):Di(n,s,a,!1,i,o),l=[];return r.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const d=r[0].index,f=c.data[d];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:d})}),l):[]},dataset(n,t,e,i){const s=Be(t,n),a=e.axis||"xy",o=e.includeInvisible||!1;let r=e.intersect?Ti(n,s,a,i,o):Di(n,s,a,!1,i,o);if(r.length>0){const l=r[0].datasetIndex,c=n.getDatasetMeta(l).data;r=[];for(let d=0;d<c.length;++d)r.push({element:c[d],datasetIndex:l,index:d})}return r},point(n,t,e,i){const s=Be(t,n),a=e.axis||"xy",o=e.includeInvisible||!1;return Ti(n,s,a,i,o)},nearest(n,t,e,i){const s=Be(t,n),a=e.axis||"xy",o=e.includeInvisible||!1;return Di(n,s,a,e.intersect,i,o)},x(n,t,e,i){const s=Be(t,n);return Hs(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=Be(t,n);return Hs(n,s,"y",e.intersect,i)}}};const Aa=["left","top","right","bottom"];function dn(n,t){return n.filter(e=>e.pos===t)}function Ns(n,t){return n.filter(e=>Aa.indexOf(e.pos)===-1&&e.box.axis===t)}function hn(n,t){return n.sort((e,i)=>{const s=t?i:e,a=t?e:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function Pc(n){const t=[];let e,i,s,a,o,r;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:a,options:{stack:o,stackWeight:r=1}}=s,t.push({index:e,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&a+o,stackWeight:r});return t}function Rc(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:a}=e;if(!i||!Aa.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return t}function Lc(n,t){const e=Rc(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let a,o,r;for(a=0,o=n.length;a<o;++a){r=n[a];const{fullSize:l}=r.box,c=e[r.stack],d=c&&r.stackWeight/c.weight;r.horizontal?(r.width=d?d*i:l&&t.availableWidth,r.height=s):(r.width=i,r.height=d?d*s:l&&t.availableHeight)}return e}function Fc(n){const t=Pc(n),e=hn(t.filter(c=>c.box.fullSize),!0),i=hn(dn(t,"left"),!0),s=hn(dn(t,"right")),a=hn(dn(t,"top"),!0),o=hn(dn(t,"bottom")),r=Ns(t,"x"),l=Ns(t,"y");return{fullSize:e,leftAndTop:i.concat(a),rightAndBottom:s.concat(l).concat(o).concat(r),chartArea:dn(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:a.concat(o).concat(r)}}function Ws(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Oa(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Bc(n,t,e,i){const{pos:s,box:a}=e,o=n.maxPadding;if(!at(s)){e.size&&(n[s]-=e.size);const f=i[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?a.height:a.width),e.size=f.size/f.count,n[s]+=e.size}a.getPadding&&Oa(o,a.getPadding());const r=Math.max(0,t.outerWidth-Ws(o,n,"left","right")),l=Math.max(0,t.outerHeight-Ws(o,n,"top","bottom")),c=r!==n.w,d=l!==n.h;return n.w=r,n.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function zc(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Hc(n,t){const e=t.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{a[o]=Math.max(t[o],e[o])}),a}return i(n?["left","right"]:["top","bottom"])}function _n(n,t,e,i){const s=[];let a,o,r,l,c,d;for(a=0,o=n.length,c=0;a<o;++a){r=n[a],l=r.box,l.update(r.width||t.w,r.height||t.h,Hc(r.horizontal,t));const{same:f,other:h}=Bc(t,e,r,i);c|=f&&s.length,d=d||h,l.fullSize||s.push(r)}return c&&_n(s,t,e,i)||d}function qn(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function Vs(n,t,e,i){const s=e.padding;let{x:a,y:o}=t;for(const r of n){const l=r.box,c=i[r.stack]||{count:1,placed:0,weight:1},d=r.stackWeight/c.weight||1;if(r.horizontal){const f=t.w*d,h=c.size||l.height;ri(c.start)&&(o=c.start),l.fullSize?qn(l,s.left,o,e.outerWidth-s.right-s.left,h):qn(l,t.left+c.placed,o,f,h),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*d,h=c.size||l.width;ri(c.start)&&(a=c.start),l.fullSize?qn(l,a,s.top,h,e.outerHeight-s.bottom-s.top):qn(l,a,t.top+c.placed,h,f),c.start=a,c.placed+=f,a=l.right}}t.x=a,t.y=o}var re={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=le(n.options.layout.padding),a=Math.max(t-s.width,0),o=Math.max(e-s.height,0),r=Fc(n.boxes),l=r.vertical,c=r.horizontal;ft(n.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const d=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},s);Oa(h,le(i));const u=Object.assign({maxPadding:h,w:a,h:o,x:s.left,y:s.top},s),g=Lc(l.concat(c),f);_n(r.fullSize,u,f,g),_n(l,u,f,g),_n(c,u,f,g)&&_n(l,u,f,g),zc(u),Vs(r.leftAndTop,u,f,g),u.x+=u.w,u.y+=u.h,Vs(r.rightAndBottom,u,f,g),n.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h,height:u.h,width:u.w},ft(r.chartArea,p=>{const m=p.box;Object.assign(m,n.chartArea),m.update(u.w,u.h,{left:0,top:0,right:0,bottom:0})})}};class Pa{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class Nc extends Pa{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ei="$chartjs",Wc={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},js=n=>n===null||n==="";function Vc(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[ei]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",js(s)){const a=Os(n,"width");a!==void 0&&(n.width=a)}if(js(i))if(n.style.height==="")n.height=n.width/(t||2);else{const a=Os(n,"height");a!==void 0&&(n.height=a)}return n}const Ra=rc?{passive:!0}:!1;function jc(n,t,e){n&&n.addEventListener(t,e,Ra)}function $c(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Ra)}function Yc(n,t){const e=Wc[n.type]||n.type,{x:i,y:s}=Be(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function fi(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Uc(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let o=!1;for(const r of a)o=o||fi(r.addedNodes,i),o=o&&!fi(r.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function Xc(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let o=!1;for(const r of a)o=o||fi(r.removedNodes,i),o=o&&!fi(r.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const In=new Map;let $s=0;function La(){const n=window.devicePixelRatio;n!==$s&&($s=n,In.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function qc(n,t){In.size||window.addEventListener("resize",La),In.set(n,t)}function Kc(n){In.delete(n),In.size||window.removeEventListener("resize",La)}function Gc(n,t,e){const i=n.canvas,s=i&&Qi(i);if(!s)return;const a=ma((r,l)=>{const c=s.clientWidth;e(r,l),c<s.clientWidth&&e()},window),o=new ResizeObserver(r=>{const l=r[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||a(c,d)});return o.observe(s),qc(n,a),o}function Ii(n,t,e){e&&e.disconnect(),t==="resize"&&Kc(n)}function Zc(n,t,e){const i=n.canvas,s=ma(a=>{n.ctx!==null&&e(Yc(a,n))},n);return jc(i,t,s),s}class Qc extends Pa{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Vc(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[ei])return!1;const i=e[ei].initial;["height","width"].forEach(a=>{const o=i[a];qt(o)?e.removeAttribute(a):e.setAttribute(a,o)});const s=i.style||{};return Object.keys(s).forEach(a=>{e.style[a]=s[a]}),e.width=e.width,delete e[ei],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),o={attach:Uc,detach:Xc,resize:Gc}[e]||Zc;s[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Ii,detach:Ii,resize:Ii}[e]||$c)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return ac(t,e,i,s)}isAttached(t){const e=t&&Qi(t);return!!(e&&e.isConnected)}}function Jc(n){return!Zi()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Nc:Qc}let an=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ci(this.x)&&ci(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}};function td(n,t){const e=n.options.ticks,i=ed(n),s=Math.min(e.maxTicksLimit||i,i),a=e.major.enabled?id(t):[],o=a.length,r=a[0],l=a[o-1],c=[];if(o>s)return sd(t,c,a,o/s),c;const d=nd(a,t,s);if(o>0){let f,h;const u=o>1?Math.round((l-r)/(o-1)):null;for(Kn(t,c,d,qt(u)?0:r-u,r),f=0,h=o-1;f<h;f++)Kn(t,c,d,a[f],a[f+1]);return Kn(t,c,d,l,qt(u)?t.length:l+u),c}return Kn(t,c,d),c}function ed(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function nd(n,t,e){const i=od(n),s=t.length/e;if(!i)return Math.max(s,1);const a=_l(i);for(let o=0,r=a.length-1;o<r;o++){const l=a[o];if(l>s)return l}return Math.max(s,1)}function id(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function sd(n,t,e,i){let s=0,a=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===a&&(t.push(n[o]),s++,a=e[s*i])}function Kn(n,t,e,i,s){const a=ct(i,0),o=Math.min(ct(s,n.length),n.length);let r=0,l,c,d;for(e=Math.ceil(e),s&&(l=s-i,e=l/Math.floor(l/e)),d=a;d<0;)r++,d=Math.round(a+r*e);for(c=Math.max(a,0);c<o;c++)c===d&&(t.push(n[c]),r++,d=Math.round(a+r*e))}function od(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const ad=n=>n==="left"?"right":n==="right"?"left":n,Ys=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Us=(n,t)=>Math.min(t||n,n);function Xs(n,t){const e=[],i=n.length/t,s=n.length;let a=0;for(;a<s;a+=i)e.push(n[Math.floor(a)]);return e}function rd(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),a=n._startPixel,o=n._endPixel,r=1e-6;let l=n.getPixelForTick(s),c;if(!(e&&(i===1?c=Math.max(l-a,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<a-r||l>o+r)))return l}function ld(n,t){ft(n,e=>{const i=e.gc,s=i.length/2;let a;if(s>t){for(a=0;a<s;++a)delete e.data[i[a]];i.splice(0,s)}})}function fn(n){return n.drawTicks?n.tickLength:0}function qs(n,t){if(!n.display)return 0;const e=Ut(n.font,t),i=le(n.padding);return(Nt(n.text)?n.text.length:1)*e.lineHeight+i.height}function cd(n,t){return on(n,{scale:t,type:"scale"})}function dd(n,t,e){return on(n,{tick:e,index:t,type:"tick"})}function hd(n,t,e){let i=$i(n);return(e&&t!=="right"||!e&&t==="right")&&(i=ad(i)),i}function fd(n,t,e,i){const{top:s,left:a,bottom:o,right:r,chart:l}=n,{chartArea:c,scales:d}=l;let f=0,h,u,g;const p=o-s,m=r-a;if(n.isHorizontal()){if(u=jt(i,a,r),at(e)){const y=Object.keys(e)[0],S=e[y];g=d[y].getPixelForValue(S)+p-t}else e==="center"?g=(c.bottom+c.top)/2+p-t:g=Ys(n,e,t);h=r-a}else{if(at(e)){const y=Object.keys(e)[0],S=e[y];u=d[y].getPixelForValue(S)-m+t}else e==="center"?u=(c.left+c.right)/2-m+t:u=Ys(n,e,t);g=jt(i,o,s),f=e==="left"?-Bt:Bt}return{titleX:u,titleY:g,maxWidth:h,rotation:f}}class Ln extends an{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=ue(t,Number.POSITIVE_INFINITY),e=ue(e,Number.NEGATIVE_INFINITY),i=ue(i,Number.POSITIVE_INFINITY),s=ue(s,Number.NEGATIVE_INFINITY),{min:ue(t,i),max:ue(e,s),minDefined:Se(t),maxDefined:Se(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),o;if(s&&a)return{min:e,max:i};const r=this.getMatchingVisibleMetas();for(let l=0,c=r.length;l<c;++l)o=r[l].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),a||(i=Math.max(i,o.max));return e=a&&e>i?i:e,i=s&&e>i?e:i,{min:ue(e,ue(i,e)),max:ue(i,ue(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:a,ticks:o}=this.options,r=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Yl(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=r<this.ticks.length;this._convertTicksToLabels(l?Xs(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=td(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xt(this.options.afterUpdate,[this])}beforeSetDimensions(){xt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),xt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,a;for(i=0,s=t.length;i<s;i++)a=t[i],a.label=xt(e.callback,[a.value,i,t],this)}afterTickToLabelConversion(){xt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Us(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,a=e.maxRotation;let o=s,r,l,c;if(!this._isVisible()||!e.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,u=ee(this.chart.width-f,0,this.maxWidth);r=t.offset?this.maxWidth/i:u/(i-1),f+6>r&&(r=u/(i-(t.offset?.5:1)),l=this.maxHeight-fn(t.grid)-e.padding-qs(t.title,this.chart.options.font),c=Math.sqrt(f*f+h*h),o=bl(Math.min(Math.asin(ee((d.highest.height+6)/r,-1,1)),Math.asin(ee(l/c,-1,1))-Math.asin(ee(h/c,-1,1)))),o=Math.max(s,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){xt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:a}}=this,o=this._isVisible(),r=this.isHorizontal();if(o){const l=qs(s,e.options.font);if(r?(t.width=this.maxWidth,t.height=fn(a)+l):(t.height=this.maxHeight,t.width=fn(a)+l),i.display&&this.ticks.length){const{first:c,last:d,widest:f,highest:h}=this._getLabelSizes(),u=i.padding*2,g=He(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(r){const y=i.mirror?0:m*f.width+p*h.height;t.height=Math.min(this.maxHeight,t.height+y+u)}else{const y=i.mirror?0:p*f.width+m*h.height;t.width=Math.min(this.maxWidth,t.width+y+u)}this._calculatePadding(c,d,m,p)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:a,padding:o},position:r}=this.options,l=this.labelRotation!==0,c=r!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,u=0;l?c?(h=s*t.width,u=i*e.height):(h=i*t.height,u=s*e.width):a==="start"?u=e.width:a==="end"?h=t.width:a!=="inner"&&(h=t.width/2,u=e.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((u-f+o)*this.width/(this.width-f),0)}else{let d=e.height/2,f=t.height/2;a==="start"?(d=0,f=t.height):a==="end"&&(d=e.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)qt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Xs(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:a}=this,o=[],r=[],l=Math.floor(e/Us(e,i));let c=0,d=0,f,h,u,g,p,m,y,S,D,M,C;for(f=0;f<e;f+=l){if(g=t[f].label,p=this._resolveTickFontOptions(f),s.font=m=p.string,y=a[m]=a[m]||{data:{},gc:[]},S=p.lineHeight,D=M=0,!qt(g)&&!Nt(g))D=Ms(s,y.data,y.gc,D,g),M=S;else if(Nt(g))for(h=0,u=g.length;h<u;++h)C=g[h],!qt(C)&&!Nt(C)&&(D=Ms(s,y.data,y.gc,D,C),M+=S);o.push(D),r.push(M),c=Math.max(D,c),d=Math.max(M,d)}ld(a,e);const O=o.indexOf(c),F=r.indexOf(d),B=P=>({width:o[P]||0,height:r[P]||0});return{first:B(0),last:B(e-1),widest:B(O),highest:B(F),widths:o,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return vl(this._alignToPixels?Le(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=dd(this.getContext(),t,i))}return this.$context||(this.$context=cd(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=He(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),a=this._getLabelSizes(),o=t.autoSkipPadding||0,r=a?a.widest.width+o:0,l=a?a.highest.height+o:0;return this.isHorizontal()?l*i>r*s?r/i:l/s:l*s<r*i?l/i:r/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:a,position:o,border:r}=s,l=a.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=fn(a),u=[],g=r.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,y=function(H){return Le(i,H,p)};let S,D,M,C,O,F,B,P,z,R,b,k;if(o==="top")S=y(this.bottom),F=this.bottom-h,P=S-m,R=y(t.top)+m,k=t.bottom;else if(o==="bottom")S=y(this.top),R=t.top,k=y(t.bottom)-m,F=S+m,P=this.top+h;else if(o==="left")S=y(this.right),O=this.right-h,B=S-m,z=y(t.left)+m,b=t.right;else if(o==="right")S=y(this.left),z=t.left,b=y(t.right)-m,O=S+m,B=this.left+h;else if(e==="x"){if(o==="center")S=y((t.top+t.bottom)/2+.5);else if(at(o)){const H=Object.keys(o)[0],j=o[H];S=y(this.chart.scales[H].getPixelForValue(j))}R=t.top,k=t.bottom,F=S+m,P=F+h}else if(e==="y"){if(o==="center")S=y((t.left+t.right)/2);else if(at(o)){const H=Object.keys(o)[0],j=o[H];S=y(this.chart.scales[H].getPixelForValue(j))}O=S-m,B=O-h,z=t.left,b=t.right}const w=ct(s.ticks.maxTicksLimit,f),v=Math.max(1,Math.ceil(f/w));for(D=0;D<f;D+=v){const H=this.getContext(D),j=a.setContext(H),Y=r.setContext(H),$=j.lineWidth,it=j.color,mt=Y.dash||[],Q=Y.dashOffset,ut=j.tickWidth,gt=j.tickColor,ot=j.tickBorderDash||[],rt=j.tickBorderDashOffset;M=rd(this,D,l),M!==void 0&&(C=Le(i,M,$),c?O=B=z=b=C:F=P=R=k=C,u.push({tx1:O,ty1:F,tx2:B,ty2:P,x1:z,y1:R,x2:b,y2:k,width:$,color:it,borderDash:mt,borderDashOffset:Q,tickWidth:ut,tickColor:gt,tickBorderDash:ot,tickBorderDashOffset:rt}))}return this._ticksLength=f,this._borderValue=S,u}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:a}=i,o=this.isHorizontal(),r=this.ticks,{align:l,crossAlign:c,padding:d,mirror:f}=a,h=fn(i.grid),u=h+d,g=f?-d:u,p=-He(this.labelRotation),m=[];let y,S,D,M,C,O,F,B,P,z,R,b,k="middle";if(s==="top")O=this.bottom-g,F=this._getXAxisLabelAlignment();else if(s==="bottom")O=this.top+g,F=this._getXAxisLabelAlignment();else if(s==="left"){const v=this._getYAxisLabelAlignment(h);F=v.textAlign,C=v.x}else if(s==="right"){const v=this._getYAxisLabelAlignment(h);F=v.textAlign,C=v.x}else if(e==="x"){if(s==="center")O=(t.top+t.bottom)/2+u;else if(at(s)){const v=Object.keys(s)[0],H=s[v];O=this.chart.scales[v].getPixelForValue(H)+u}F=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")C=(t.left+t.right)/2-u;else if(at(s)){const v=Object.keys(s)[0],H=s[v];C=this.chart.scales[v].getPixelForValue(H)}F=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?k="top":l==="end"&&(k="bottom"));const w=this._getLabelSizes();for(y=0,S=r.length;y<S;++y){D=r[y],M=D.label;const v=a.setContext(this.getContext(y));B=this.getPixelForTick(y)+a.labelOffset,P=this._resolveTickFontOptions(y),z=P.lineHeight,R=Nt(M)?M.length:1;const H=R/2,j=v.color,Y=v.textStrokeColor,$=v.textStrokeWidth;let it=F;o?(C=B,F==="inner"&&(y===S-1?it=this.options.reverse?"left":"right":y===0?it=this.options.reverse?"right":"left":it="center"),s==="top"?c==="near"||p!==0?b=-R*z+z/2:c==="center"?b=-w.highest.height/2-H*z+z:b=-w.highest.height+z/2:c==="near"||p!==0?b=z/2:c==="center"?b=w.highest.height/2-H*z:b=w.highest.height-R*z,f&&(b*=-1),p!==0&&!v.showLabelBackdrop&&(C+=z/2*Math.sin(p))):(O=B,b=(1-R)*z/2);let mt;if(v.showLabelBackdrop){const Q=le(v.backdropPadding),ut=w.heights[y],gt=w.widths[y];let ot=b-Q.top,rt=0-Q.left;switch(k){case"middle":ot-=ut/2;break;case"bottom":ot-=ut;break}switch(F){case"center":rt-=gt/2;break;case"right":rt-=gt;break;case"inner":y===S-1?rt-=gt:y>0&&(rt-=gt/2);break}mt={left:rt,top:ot,width:gt+Q.width,height:ut+Q.height,color:v.backdropColor}}m.push({label:M,font:P,textOffset:b,options:{rotation:p,color:j,strokeColor:Y,strokeWidth:$,textAlign:it,textBaseline:k,translation:[C,O],backdrop:mt}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-He(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,o=this._getLabelSizes(),r=t+a,l=o.widest.width;let c,d;return e==="left"?s?(d=this.right+a,i==="near"?c="left":i==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-r,i==="near"?c="right":i==="center"?(c="center",d-=l/2):(c="left",d=this.left)):e==="right"?s?(d=this.left+a,i==="near"?c="right":i==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+r,i==="near"?c="left":i==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:a,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,a,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(a=>a.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,o;const r=(l,c,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(a=0,o=s.length;a<o;++a){const l=s[a];e.drawOnChartArea&&r({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&r({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),o=i.display?a.width:0;if(!o)return;const r=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,f,h;this.isHorizontal()?(c=Le(t,this.left,o)-o/2,d=Le(t,this.right,r)+r/2,f=h=l):(f=Le(t,this.top,o)-o/2,h=Le(t,this.bottom,r)+r/2,c=d=l),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(c,f),e.lineTo(d,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Yi(i,s);const a=this.getLabelItems(t);for(const o of a){const r=o.options,l=o.font,c=o.label,d=o.textOffset;Dn(i,c,0,d,l,r)}s&&Ui(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const a=Ut(i.font),o=le(i.padding),r=i.align;let l=a.lineHeight/2;e==="bottom"||e==="center"||at(e)?(l+=o.bottom,Nt(i.text)&&(l+=a.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:f,rotation:h}=fd(this,l,e,r);Dn(t,i.text,0,0,a,{color:i.color,maxWidth:f,rotation:h,textAlign:hd(r,e,s),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=ct(t.grid&&t.grid.z,-1),s=ct(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ln.prototype.draw?[{z:e,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,o;for(a=0,o=e.length;a<o;++a){const r=e[a];r[i]===this.id&&(!t||r.type===t)&&s.push(r)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ut(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Gn{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;pd(e)&&(i=this.register(e));const s=this.items,a=t.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in s||(s[a]=t,ud(t,o,i),this.override&&Et.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in Et[s]&&(delete Et[s][i],this.override&&delete We[i])}}function ud(n,t,e){const i=Mn(Object.create(null),[e?Et.get(e):{},Et.get(t),n.defaults]);Et.set(t,i),n.defaultRoutes&&gd(t,n.defaultRoutes),n.descriptors&&Et.describe(t,n.descriptors)}function gd(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),a=[n].concat(i).join("."),o=t[e].split("."),r=o.pop(),l=o.join(".");Et.route(a,s,l,r)})}function pd(n){return"id"in n&&"defaults"in n}class md{constructor(){this.controllers=new Gn(Ea,"datasets",!0),this.elements=new Gn(an,"elements"),this.plugins=new Gn(Object,"plugins"),this.scales=new Gn(Ln,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(t,a,s):ft(s,o=>{const r=i||this._getRegistryForType(o);this._exec(t,r,o)})})}_exec(t,e,i){const s=Vi(t);xt(i["before"+s],[],i),e[t](i),xt(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var pe=new md;class _d{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(a,t,e,i);return e==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const a of t){const o=a.plugin,r=o[i],l=[e,s,a.options];if(xt(r,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){qt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=ct(i.options&&i.options.plugins,{}),a=bd(i);return s===!1&&!e?[]:vd(t,a,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(a,o)=>a.filter(r=>!o.some(l=>r.plugin.id===l.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function bd(n){const t={},e=[],i=Object.keys(pe.plugins.items);for(let a=0;a<i.length;a++)e.push(pe.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const o=s[a];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function yd(n,t){return!t&&n===!1?null:n===!0?{}:n}function vd(n,{plugins:t,localIds:e},i,s){const a=[],o=n.getContext();for(const r of t){const l=r.id,c=yd(i[l],s);c!==null&&a.push({plugin:r,options:wd(n.config,{plugin:r,local:e[l]},c,o)})}return a}function wd(n,{plugin:t,local:e},i,s){const a=n.pluginScopeKeys(t),o=n.getOptionScopes(i,a);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Li(n,t){const e=Et.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function xd(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function kd(n,t){return n===t?"_index_":"_value_"}function Ks(n){if(n==="x"||n==="y"||n==="r")return n}function Sd(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Fi(n,...t){if(Ks(n))return n;for(const e of t){const i=e.axis||Sd(e.position)||n.length>1&&Ks(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Gs(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function Cd(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Gs(n,"x",e[0])||Gs(n,"y",e[0])}return{}}function Md(n,t){const e=We[n.type]||{scales:{}},i=t.scales||{},s=Li(n.type,t),a=Object.create(null);return Object.keys(i).forEach(o=>{const r=i[o];if(!at(r))return console.error(`Invalid scale configuration for scale: ${o}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Fi(o,r,Cd(o,n),Et.scales[r.type]),c=kd(l,s),d=e.scales||{};a[o]=wn(Object.create(null),[{axis:l},r,d[l],d[c]])}),n.data.datasets.forEach(o=>{const r=o.type||n.type,l=o.indexAxis||Li(r,t),d=(We[r]||{}).scales||{};Object.keys(d).forEach(f=>{const h=xd(f,l),u=o[h+"AxisID"]||h;a[u]=a[u]||Object.create(null),wn(a[u],[{axis:h},i[u],d[f]])})}),Object.keys(a).forEach(o=>{const r=a[o];wn(r,[Et.scales[r.type],Et.scale])}),a}function Fa(n){const t=n.options||(n.options={});t.plugins=ct(t.plugins,{}),t.scales=Md(n,t)}function Ba(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Td(n){return n=n||{},n.data=Ba(n.data),Fa(n),n}const Zs=new Map,za=new Set;function Zn(n,t){let e=Zs.get(n);return e||(e=t(),Zs.set(n,e),za.add(e)),e}const un=(n,t,e)=>{const i=Tn(t,e);i!==void 0&&n.add(i)};class Dd{constructor(t){this._config=Td(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ba(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Fa(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Zn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Zn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Zn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Zn(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:a}=this,o=this._cachedScopes(t,i),r=o.get(e);if(r)return r;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(f=>un(l,t,f))),d.forEach(f=>un(l,s,f)),d.forEach(f=>un(l,We[a]||{},f)),d.forEach(f=>un(l,Et,f)),d.forEach(f=>un(l,Pi,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),za.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,We[e]||{},Et.datasets[e]||{},{type:e},Et,Pi]}resolveNamedOptions(t,e,i,s=[""]){const a={$shared:!0},{resolver:o,subPrefixes:r}=Qs(this._resolverCache,t,s);let l=o;if(Ed(o,e)){a.$shared=!1,i=Ee(i)?i():i;const c=this.createResolver(t,i,r);l=nn(o,i,c)}for(const c of e)a[c]=l[c];return a}createResolver(t,e,i=[""],s){const{resolver:a}=Qs(this._resolverCache,t,i);return at(e)?nn(a,e,void 0,s):a}}function Qs(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let a=i.get(s);return a||(a={resolver:qi(t,e),subPrefixes:e.filter(r=>!r.toLowerCase().includes("hover"))},i.set(s,a)),a}const Id=n=>at(n)&&Object.getOwnPropertyNames(n).some(t=>Ee(n[t]));function Ed(n,t){const{isScriptable:e,isIndexable:i}=xa(n);for(const s of t){const a=e(s),o=i(s),r=(o||a)&&n[s];if(a&&(Ee(r)||Id(r))||o&&Nt(r))return!0}return!1}var Ad="4.4.7";const Od=["top","bottom","left","right","chartArea"];function Js(n,t){return n==="top"||n==="bottom"||Od.indexOf(n)===-1&&t==="x"}function to(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function eo(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),xt(e&&e.onComplete,[n],t)}function Pd(n){const t=n.chart,e=t.options.animation;xt(e&&e.onProgress,[n],t)}function Ha(n){return Zi()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ni={},no=n=>{const t=Ha(n);return Object.values(ni).filter(e=>e.canvas===t).pop()};function Rd(n,t,e){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=t){const o=n[s];delete n[s],(e>0||a>t)&&(n[a+e]=o)}}}function Ld(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function Qn(n,t,e){return n.options.clip?n[e]:t[e]}function Fd(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Qn(e,t,"left"),right:Qn(e,t,"right"),top:Qn(i,t,"top"),bottom:Qn(i,t,"bottom")}:t}let _i=class{static defaults=Et;static instances=ni;static overrides=We;static registry=pe;static version=Ad;static getChart=no;static register(...t){pe.add(...t),io()}static unregister(...t){pe.remove(...t),io()}constructor(t,e){const i=this.config=new Dd(e),s=Ha(t),a=no(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Jc(s)),this.platform.updateConfig(i);const r=this.platform.acquireContext(s,o.aspectRatio),l=r&&r.canvas,c=l&&l.height,d=l&&l.width;if(this.id=cl(),this.ctx=r,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _d,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Cl(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],ni[this.id]=this,!r||!l){console.error("Failed to create chart: can't acquire context from the given item");return}we.listen(this,"complete",eo),we.listen(this,"progress",Pd),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:a}=this;return qt(t)?e&&a?a:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return pe}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():As(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ts(this.canvas,this.ctx),this}stop(){return we.stop(this),this}resize(t,e){we.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,a),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,As(this,r,!0)&&(this.notifyPlugins("resize",{size:o}),xt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ft(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,r)=>(o[r]=!1,o),{});let a=[];e&&(a=a.concat(Object.keys(e).map(o=>{const r=e[o],l=Fi(o,r),c=l==="r",d=l==="x";return{options:r,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),ft(a,o=>{const r=o.options,l=r.id,c=Fi(l,r),d=ct(r.type,o.dtype);(r.position===void 0||Js(r.position,c)!==Js(o.dposition))&&(r.position=o.dposition),s[l]=!0;let f=null;if(l in i&&i[l].type===d)f=i[l];else{const h=pe.getScale(d);f=new h({id:l,type:d,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(r,t)}),ft(s,(o,r)=>{o||delete i[r]}),ft(i,o=>{re.configure(this,o,o.options),re.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,a)=>s.index-a.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(to("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const a=e[i];let o=this.getDatasetMeta(i);const r=a.type||this.config.type;if(o.type&&o.type!==r&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=r,o.indexAxis=a.indexAxis||Li(r,this.options),o.order=a.order||0,o.index=i,o.label=""+a.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=pe.getController(r),{datasetElementType:c,dataElementType:d}=Et.datasets[r];Object.assign(l,{dataElementType:pe.getElement(d),datasetElementType:c&&pe.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){ft(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:f}=this.getDatasetMeta(c),h=!s&&a.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||ft(a,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(to("z","_idx"));const{_active:r,_lastEvent:l}=this;l?this._eventHandler(l,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){ft(this.scales,t=>{re.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!_s(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of e){const o=i==="_removeElements"?-a:a;Rd(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=a=>new Set(t.filter(o=>o[0]===a).map((o,r)=>r+","+o.splice(1).join(","))),s=i(0);for(let a=1;a<e;a++)if(!_s(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;re.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ft(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Ee(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(we.has(this)?this.attached&&!we.running(this)&&we.start(this):(this.draw(),eo({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,a;for(s=0,a=e.length;s<a;++s){const o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,a=Fd(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&Yi(e,{left:i.left===!1?0:a.left-i.left,right:i.right===!1?this.width:a.right+i.right,top:i.top===!1?0:a.top-i.top,bottom:i.bottom===!1?this.height:a.bottom+i.bottom}),t.controller.draw(),s&&Ui(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return wa(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const a=Oc.modes[e];return typeof a=="function"?a(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(a=>a&&a._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=on(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",a=this.getDatasetMeta(t),o=a.controller._resolveAnimations(void 0,s);ri(e)?(a.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(a,{visible:i}),this.update(r=>r.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),we.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ts(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ni[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(a,o)=>{e.addEventListener(this,a,o),t[a]=o},s=(a,o,r)=>{a.offsetX=o,a.offsetY=r,this._eventHandler(a)};ft(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},a=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const r=()=>{s("attach",r),this.attached=!0,this.resize(),i("resize",a),i("detach",o)};o=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",r)},e.isAttached(this.canvas)?r():o()}unbindEvents(){ft(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ft(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let a,o,r,l;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),r=0,l=t.length;r<l;++r){o=t[r];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:a,index:o})=>{const r=this.getDatasetMeta(a);if(!r)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:r.data[o],index:o}});!oi(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,a=(l,c)=>l.filter(d=>!c.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=a(e,t),r=i?t:a(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),r.length&&s.mode&&this.updateHoverStyle(r,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:a}=this,o=e,r=this._getActiveElements(t,s,i,o),l=pl(t),c=Ld(t,this._lastEvent,i,l);i&&(this._lastEvent=null,xt(a.onHover,[t,r,this],this),l&&xt(a.onClick,[t,r,this],this));const d=!oi(r,s);return(d||e)&&(this._active=r,this._updateHoverStyles(r,s,e)),this._lastEvent=c,d}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}};function io(){return ft(_i.instances,n=>n._plugins.invalidate())}function Bd(n,t,e){const{startAngle:i,pixelMargin:s,x:a,y:o,outerRadius:r,innerRadius:l}=t;let c=s/r;n.beginPath(),n.arc(a,o,r,i-c,e+c),l>s?(c=s/l,n.arc(a,o,l,e+c,i-c,!0)):n.arc(a,o,s,e+Bt,i-Bt),n.closePath(),n.clip()}function zd(n){return Xi(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Hd(n,t,e,i){const s=zd(n.options.borderRadius),a=(e-t)/2,o=Math.min(a,i*t/2),r=l=>{const c=(e-Math.min(a,l))*i/2;return ee(l,0,Math.min(a,c))};return{outerStart:r(s.outerStart),outerEnd:r(s.outerEnd),innerStart:ee(s.innerStart,0,o),innerEnd:ee(s.innerEnd,0,o)}}function Ke(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function ui(n,t,e,i,s,a){const{x:o,y:r,startAngle:l,pixelMargin:c,innerRadius:d}=t,f=Math.max(t.outerRadius+i+e-c,0),h=d>0?d+i+e+c:0;let u=0;const g=s-l;if(i){const v=d>0?d-i:0,H=f>0?f-i:0,j=(v+H)/2,Y=j!==0?g*j/(j+i):g;u=(g-Y)/2}const p=Math.max(.001,g*f-e/Rt)/f,m=(g-p)/2,y=l+m+u,S=s-m-u,{outerStart:D,outerEnd:M,innerStart:C,innerEnd:O}=Hd(t,h,f,S-y),F=f-D,B=f-M,P=y+D/F,z=S-M/B,R=h+C,b=h+O,k=y+C/R,w=S-O/b;if(n.beginPath(),a){const v=(P+z)/2;if(n.arc(o,r,f,P,v),n.arc(o,r,f,v,z),M>0){const $=Ke(B,z,o,r);n.arc($.x,$.y,M,z,S+Bt)}const H=Ke(b,S,o,r);if(n.lineTo(H.x,H.y),O>0){const $=Ke(b,w,o,r);n.arc($.x,$.y,O,S+Bt,w+Math.PI)}const j=(S-O/h+(y+C/h))/2;if(n.arc(o,r,h,S-O/h,j,!0),n.arc(o,r,h,j,y+C/h,!0),C>0){const $=Ke(R,k,o,r);n.arc($.x,$.y,C,k+Math.PI,y-Bt)}const Y=Ke(F,y,o,r);if(n.lineTo(Y.x,Y.y),D>0){const $=Ke(F,P,o,r);n.arc($.x,$.y,D,y-Bt,P)}}else{n.moveTo(o,r);const v=Math.cos(P)*f+o,H=Math.sin(P)*f+r;n.lineTo(v,H);const j=Math.cos(z)*f+o,Y=Math.sin(z)*f+r;n.lineTo(j,Y)}n.closePath()}function Nd(n,t,e,i,s){const{fullCircles:a,startAngle:o,circumference:r}=t;let l=t.endAngle;if(a){ui(n,t,e,i,l,s);for(let c=0;c<a;++c)n.fill();isNaN(r)||(l=o+(r%Pt||Pt))}return ui(n,t,e,i,l,s),n.fill(),l}function Wd(n,t,e,i,s){const{fullCircles:a,startAngle:o,circumference:r,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:f,borderDashOffset:h}=l,u=l.borderAlign==="inner";if(!c)return;n.setLineDash(f||[]),n.lineDashOffset=h,u?(n.lineWidth=c*2,n.lineJoin=d||"round"):(n.lineWidth=c,n.lineJoin=d||"bevel");let g=t.endAngle;if(a){ui(n,t,e,i,g,s);for(let p=0;p<a;++p)n.stroke();isNaN(r)||(g=o+(r%Pt||Pt))}u&&Bd(n,t,g),a||(ui(n,t,e,i,g,s),n.stroke())}class Vd extends an{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=ua(s,{x:t,y:e}),{startAngle:r,endAngle:l,innerRadius:c,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,u=ct(f,l-r),g=di(a,r,l)&&r!==l,p=u>=Pt||g,m=mn(o,c+h,d+h);return p&&m}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,d=(s+a)/2,f=(o+r+c+l)/2;return{x:e+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/4,a=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>Pt?Math.floor(i/Pt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const r=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(r)*s,Math.sin(r)*s);const l=1-Math.sin(Math.min(Rt,i||0)),c=s*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,Nd(t,this,c,a,o),Wd(t,this,c,a,o),t.restore()}}const so=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},jd=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class oo extends an{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=xt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Ut(i.font),a=s.size,o=this._computeTitleHeight(),{boxWidth:r,itemHeight:l}=so(i,a);let c,d;e.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,a,r,l)+10):(d=this.maxHeight,c=this._fitCols(o,s,r,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:a,maxWidth:o,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=s+r;let f=t;a.textAlign="left",a.textBaseline="middle";let h=-1,u=-d;return this.legendItems.forEach((g,p)=>{const m=i+e/2+a.measureText(g.text).width;(p===0||c[c.length-1]+m+2*r>o)&&(f+=d,c[c.length-(p>0?0:1)]=0,u+=d,h++),l[p]={left:0,top:u,row:h,width:m,height:s},c[c.length-1]+=m+r}),f}_fitCols(t,e,i,s){const{ctx:a,maxHeight:o,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-t;let f=r,h=0,u=0,g=0,p=0;return this.legendItems.forEach((m,y)=>{const{itemWidth:S,itemHeight:D}=$d(i,e,a,m,s);y>0&&u+D+2*r>d&&(f+=h+r,c.push({width:h,height:u}),g+=h+r,p++,h=u=0),l[y]={left:g,top:u,col:p,width:S,height:D},h=Math.max(h,S),u+=D+r}),f+=h,c.push({width:h,height:u}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:a}}=this,o=Qe(a,this.left,this.width);if(this.isHorizontal()){let r=0,l=jt(i,this.left+s,this.right-this.lineWidths[r]);for(const c of e)r!==c.row&&(r=c.row,l=jt(i,this.left+s,this.right-this.lineWidths[r])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let r=0,l=jt(i,this.top+t+s,this.bottom-this.columnSizes[r].height);for(const c of e)c.col!==r&&(r=c.col,l=jt(i,this.top+t+s,this.bottom-this.columnSizes[r].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Yi(t,this),this._draw(),Ui(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:a,labels:o}=t,r=Et.color,l=Qe(t.rtl,this.left,this.width),c=Ut(o.font),{padding:d}=o,f=c.size,h=f/2;let u;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=so(o,f),y=function(O,F,B){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;s.save();const P=ct(B.lineWidth,1);if(s.fillStyle=ct(B.fillStyle,r),s.lineCap=ct(B.lineCap,"butt"),s.lineDashOffset=ct(B.lineDashOffset,0),s.lineJoin=ct(B.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=ct(B.strokeStyle,r),s.setLineDash(ct(B.lineDash,[])),o.usePointStyle){const z={radius:p*Math.SQRT2/2,pointStyle:B.pointStyle,rotation:B.rotation,borderWidth:P},R=l.xPlus(O,g/2),b=F+h;va(s,z,R,b,o.pointStyleWidth&&g)}else{const z=F+Math.max((f-p)/2,0),R=l.leftForLtr(O,g),b=Sn(B.borderRadius);s.beginPath(),Object.values(b).some(k=>k!==0)?Ri(s,{x:R,y:z,w:g,h:p,radius:b}):s.rect(R,z,g,p),s.fill(),P!==0&&s.stroke()}s.restore()},S=function(O,F,B){Dn(s,B.text,O,F+m/2,c,{strikethrough:B.hidden,textAlign:l.textAlign(B.textAlign)})},D=this.isHorizontal(),M=this._computeTitleHeight();D?u={x:jt(a,this.left+d,this.right-i[0]),y:this.top+d+M,line:0}:u={x:this.left+d,y:jt(a,this.top+M+d,this.bottom-e[0].height),line:0},Ma(this.ctx,t.textDirection);const C=m+d;this.legendItems.forEach((O,F)=>{s.strokeStyle=O.fontColor,s.fillStyle=O.fontColor;const B=s.measureText(O.text).width,P=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),z=g+h+B;let R=u.x,b=u.y;l.setWidth(this.width),D?F>0&&R+z+d>this.right&&(b=u.y+=C,u.line++,R=u.x=jt(a,this.left+d,this.right-i[u.line])):F>0&&b+C>this.bottom&&(R=u.x=R+e[u.line].width+d,u.line++,b=u.y=jt(a,this.top+M+d,this.bottom-e[u.line].height));const k=l.x(R);if(y(k,b,O),R=Ml(P,R+g+h,D?R+z:this.right,t.rtl),S(l.x(R),b,O),D)u.x+=z+d;else if(typeof O.text!="string"){const w=c.lineHeight;u.y+=Na(O,w)+d}else u.y+=C}),Ta(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ut(e.font),s=le(e.padding);if(!e.display)return;const a=Qe(t.rtl,this.left,this.width),o=this.ctx,r=e.position,l=i.size/2,c=s.top+l;let d,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+c,f=jt(t.align,f,this.right-h);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);d=c+jt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const u=jt(r,f,f+h);o.textAlign=a.textAlign($i(r)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Dn(o,e.text,u,d,i)}_computeTitleHeight(){const t=this.options.title,e=Ut(t.font),i=le(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,a;if(mn(t,this.left,this.right)&&mn(e,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],mn(t,s.left,s.left+s.width)&&mn(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!Xd(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,a=jd(s,i);s&&!a&&xt(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!a&&xt(e.onHover,[t,i,this],this)}else i&&xt(e.onClick,[t,i,this],this)}}function $d(n,t,e,i,s){const a=Yd(i,n,t,e),o=Ud(s,i,t.lineHeight);return{itemWidth:a,itemHeight:o}}function Yd(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((a,o)=>a.length>o.length?a:o)),t+e.size/2+i.measureText(s).width}function Ud(n,t,e){let i=n;return typeof t.text!="string"&&(i=Na(t,e)),i}function Na(n,t){const e=n.text?n.text.length:0;return t*e}function Xd(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var qd={id:"legend",_element:oo,start(n,t,e){const i=n.legend=new oo({ctx:n.ctx,options:e,chart:n});re.configure(n,i,e),re.addBox(n,i)},stop(n){re.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;re.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:a,useBorderRadius:o,borderRadius:r}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),d=le(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:a,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(r||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Wa extends an{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=Nt(i.text)?i.text.length:1;this._padding=le(i.padding);const a=s*Ut(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:a,options:o}=this,r=o.align;let l=0,c,d,f;return this.isHorizontal()?(d=jt(r,i,a),f=e+t,c=a-i):(o.position==="left"?(d=i+t,f=jt(r,s,e),l=Rt*-.5):(d=a-t,f=jt(r,e,s),l=Rt*.5),c=s-e),{titleX:d,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Ut(e.font),a=i.lineHeight/2+this._padding.top,{titleX:o,titleY:r,maxWidth:l,rotation:c}=this._drawArgs(a);Dn(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:$i(e.align),textBaseline:"middle",translation:[o,r]})}}function Kd(n,t){const e=new Wa({ctx:n.ctx,options:t,chart:n});re.configure(n,e,t),re.addBox(n,e),n.titleBlock=e}var Gd={id:"title",_element:Wa,start(n,t,e){Kd(n,e)},stop(n){const t=n.titleBlock;re.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;re.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bn={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,a=0;for(t=0,e=n.length;t<e;++t){const r=n[t].element;if(r&&r.hasValue()){const l=r.tooltipPosition();i.add(l.x),s+=l.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((r,l)=>r+l)/i.size,y:s/a}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,a,o,r;for(a=0,o=n.length;a<o;++a){const l=n[a].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=yl(t,c);d<s&&(s=d,r=l)}}if(r){const l=r.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function ge(n,t){return t&&(Nt(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function xe(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Zd(n,t){const{element:e,datasetIndex:i,index:s}=t,a=n.getDatasetMeta(i).controller,{label:o,value:r}=a.getLabelAndValue(s);return{chart:n,label:o,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:r,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function ao(n,t){const e=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:o,boxHeight:r}=t,l=Ut(t.bodyFont),c=Ut(t.titleFont),d=Ut(t.footerFont),f=a.length,h=s.length,u=i.length,g=le(t.padding);let p=g.height,m=0,y=i.reduce((M,C)=>M+C.before.length+C.lines.length+C.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,f&&(p+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),y){const M=t.displayColors?Math.max(r,l.lineHeight):l.lineHeight;p+=u*M+(y-u)*l.lineHeight+(y-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let S=0;const D=function(M){m=Math.max(m,e.measureText(M).width+S)};return e.save(),e.font=c.string,ft(n.title,D),e.font=l.string,ft(n.beforeBody.concat(n.afterBody),D),S=t.displayColors?o+2+t.boxPadding:0,ft(i,M=>{ft(M.before,D),ft(M.lines,D),ft(M.after,D)}),S=0,e.font=d.string,ft(n.footer,D),e.restore(),m+=g.width,{width:m,height:p}}function Qd(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function Jd(n,t,e,i){const{x:s,width:a}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+a+o>t.width||n==="right"&&s-a-o<0)return!0}function th(n,t,e,i){const{x:s,width:a}=e,{width:o,chartArea:{left:r,right:l}}=n;let c="center";return i==="center"?c=s<=(r+l)/2?"left":"right":s<=a/2?c="left":s>=o-a/2&&(c="right"),Jd(c,n,t,e)&&(c="center"),c}function ro(n,t,e){const i=e.yAlign||t.yAlign||Qd(n,e);return{xAlign:e.xAlign||t.xAlign||th(n,t,e,i),yAlign:i}}function eh(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function nh(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function lo(n,t,e,i){const{caretSize:s,caretPadding:a,cornerRadius:o}=n,{xAlign:r,yAlign:l}=e,c=s+a,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:u}=Sn(o);let g=eh(t,r);const p=nh(t,l,c);return l==="center"?r==="left"?g+=c:r==="right"&&(g-=c):r==="left"?g-=Math.max(d,h)+s:r==="right"&&(g+=Math.max(f,u)+s),{x:ee(g,0,i.width-t.width),y:ee(p,0,i.height-t.height)}}function Jn(n,t,e){const i=le(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function co(n){return ge([],xe(n))}function ih(n,t,e){return on(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function ho(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Va={beforeTitle:ve,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:ve,beforeBody:ve,beforeLabel:ve,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return qt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ve,afterBody:ve,beforeFooter:ve,footer:ve,afterFooter:ve};function Gt(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?Va[t].call(e,i):s}class fo extends an{static positioners=bn;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,a=new Da(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=ih(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Gt(i,"beforeTitle",this,t),a=Gt(i,"title",this,t),o=Gt(i,"afterTitle",this,t);let r=[];return r=ge(r,xe(s)),r=ge(r,xe(a)),r=ge(r,xe(o)),r}getBeforeBody(t,e){return co(Gt(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return ft(t,a=>{const o={before:[],lines:[],after:[]},r=ho(i,a);ge(o.before,xe(Gt(r,"beforeLabel",this,a))),ge(o.lines,Gt(r,"label",this,a)),ge(o.after,xe(Gt(r,"afterLabel",this,a))),s.push(o)}),s}getAfterBody(t,e){return co(Gt(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Gt(i,"beforeFooter",this,t),a=Gt(i,"footer",this,t),o=Gt(i,"afterFooter",this,t);let r=[];return r=ge(r,xe(s)),r=ge(r,xe(a)),r=ge(r,xe(o)),r}_createItems(t){const e=this._active,i=this.chart.data,s=[],a=[],o=[];let r=[],l,c;for(l=0,c=e.length;l<c;++l)r.push(Zd(this.chart,e[l]));return t.filter&&(r=r.filter((d,f,h)=>t.filter(d,f,h,i))),t.itemSort&&(r=r.sort((d,f)=>t.itemSort(d,f,i))),ft(r,d=>{const f=ho(t.callbacks,d);s.push(Gt(f,"labelColor",this,d)),a.push(Gt(f,"labelPointStyle",this,d)),o.push(Gt(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=r,r}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let a,o=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const r=bn[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=ao(this,i),c=Object.assign({},r,l),d=ro(this.chart,i,c),f=lo(i,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,a={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:r.x,caretY:r.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const a=this.getCaretPosition(t,i,s);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:a}=this,{caretSize:o,cornerRadius:r}=i,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:f}=Sn(r),{x:h,y:u}=t,{width:g,height:p}=e;let m,y,S,D,M,C;return a==="center"?(M=u+p/2,s==="left"?(m=h,y=m-o,D=M+o,C=M-o):(m=h+g,y=m+o,D=M-o,C=M+o),S=m):(s==="left"?y=h+Math.max(l,d)+o:s==="right"?y=h+g-Math.max(c,f)-o:y=this.caretX,a==="top"?(D=u,M=D-o,m=y-o,S=y+o):(D=u+p,M=D+o,m=y+o,S=y-o),C=D),{x1:m,x2:y,x3:S,y1:D,y2:M,y3:C}}drawTitle(t,e,i){const s=this.title,a=s.length;let o,r,l;if(a){const c=Qe(i.rtl,this.x,this.width);for(t.x=Jn(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",o=Ut(i.titleFont),r=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,l=0;l<a;++l)e.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r,l+1===a&&(t.y+=i.titleMarginBottom-r)}}_drawColorBox(t,e,i,s,a){const o=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=a,d=Ut(a.bodyFont),f=Jn(this,"left",a),h=s.x(f),u=l<d.lineHeight?(d.lineHeight-l)/2:0,g=e.y+u;if(a.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},m=s.leftForLtr(h,c)+c/2,y=g+l/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,Ds(t,p,m,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ds(t,p,m,y)}else{t.lineWidth=at(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const p=s.leftForLtr(h,c),m=s.leftForLtr(s.xPlus(h,1),c-2),y=Sn(o.borderRadius);Object.values(y).some(S=>S!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,Ri(t,{x:p,y:g,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ri(t,{x:m,y:g+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(p,g,c,l),t.strokeRect(p,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(m,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:a,bodyAlign:o,displayColors:r,boxHeight:l,boxWidth:c,boxPadding:d}=i,f=Ut(i.bodyFont);let h=f.lineHeight,u=0;const g=Qe(i.rtl,this.x,this.width),p=function(B){e.fillText(B,g.x(t.x+u),t.y+h/2),t.y+=h+a},m=g.textAlign(o);let y,S,D,M,C,O,F;for(e.textAlign=o,e.textBaseline="middle",e.font=f.string,t.x=Jn(this,m,i),e.fillStyle=i.bodyColor,ft(this.beforeBody,p),u=r&&m!=="right"?o==="center"?c/2+d:c+2+d:0,M=0,O=s.length;M<O;++M){for(y=s[M],S=this.labelTextColors[M],e.fillStyle=S,ft(y.before,p),D=y.lines,r&&D.length&&(this._drawColorBox(e,t,M,g,i),h=Math.max(f.lineHeight,l)),C=0,F=D.length;C<F;++C)p(D[C]),h=f.lineHeight;ft(y.after,p)}u=0,h=f.lineHeight,ft(this.afterBody,p),t.y-=a}drawFooter(t,e,i){const s=this.footer,a=s.length;let o,r;if(a){const l=Qe(i.rtl,this.x,this.width);for(t.x=Jn(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",o=Ut(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,r=0;r<a;++r)e.fillText(s[r],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:a,yAlign:o}=this,{x:r,y:l}=t,{width:c,height:d}=i,{topLeft:f,topRight:h,bottomLeft:u,bottomRight:g}=Sn(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(r+f,l),o==="top"&&this.drawCaret(t,e,i,s),e.lineTo(r+c-h,l),e.quadraticCurveTo(r+c,l,r+c,l+h),o==="center"&&a==="right"&&this.drawCaret(t,e,i,s),e.lineTo(r+c,l+d-g),e.quadraticCurveTo(r+c,l+d,r+c-g,l+d),o==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(r+u,l+d),e.quadraticCurveTo(r,l+d,r,l+d-u),o==="center"&&a==="left"&&this.drawCaret(t,e,i,s),e.lineTo(r,l+f),e.quadraticCurveTo(r,l,r+f,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const o=bn[t.position].call(this,this._active,this._eventPosition);if(!o)return;const r=this._size=ao(this,t),l=Object.assign({},o,this._size),c=ro(e,t,l),d=lo(t,l,c,e);(s._to!==d.x||a._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=r.width,this.height=r.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=le(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,s,e),Ma(t,e.textDirection),a.y+=o.top,this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),Ta(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:r,index:l})=>{const c=this.chart.getDatasetMeta(r);if(!c)throw new Error("Cannot find a dataset at index "+r);return{datasetIndex:r,element:c.data[l],index:l}}),a=!oi(i,s),o=this._positionChanged(s,e);(a||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],o=this._getActiveElements(t,a,e,i),r=this._positionChanged(o,t),l=e||!oi(o,a)||r;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,s){const a=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(r=>this.chart.data.datasets[r.datasetIndex]&&this.chart.getDatasetMeta(r.datasetIndex).controller.getParsed(r.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:a}=this,o=bn[a.position].call(this,t,e);return o!==!1&&(i!==o.x||s!==o.y)}}var sh={id:"tooltip",_element:fo,positioners:bn,afterInit(n,t,e){e&&(n.tooltip=new fo({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Va},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const oh=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function ah(n,t,e,i){const s=n.indexOf(t);if(s===-1)return oh(n,t,e,i);const a=n.lastIndexOf(t);return s!==a?e:s}const rh=(n,t)=>n===null?null:ee(Math.round(n),0,t);function uo(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class lh extends Ln{static id="category";static defaults={ticks:{callback:uo}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:a}of e)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(qt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:ah(i,t,ct(e,t),this._addedLabels),rh(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=t===0&&e===a.length-1?a:a.slice(t,e+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return uo.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}const bi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Qt=Object.keys(bi);function go(n,t){return n-t}function po(n,t){if(qt(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),Se(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(ci(a)||a===!0)?e.startOf(o,"isoWeek",a):e.startOf(o,s)),+o)}function mo(n,t,e,i){const s=Qt.length;for(let a=Qt.indexOf(n);a<s-1;++a){const o=bi[Qt[a]],r=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(r*o.size))<=i)return Qt[a]}return Qt[s-1]}function ch(n,t,e,i,s){for(let a=Qt.length-1;a>=Qt.indexOf(e);a--){const o=Qt[a];if(bi[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return Qt[e?Qt.indexOf(e):0]}function dh(n){for(let t=Qt.indexOf(n)+1,e=Qt.length;t<e;++t)if(bi[Qt[t]].common)return Qt[t]}function _o(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=ji(e,t),a=e[i]>=t?e[i]:e[s];n[a]=!0}}function hh(n,t,e,i){const s=n._adapter,a=+s.startOf(t[0].value,i),o=t[t.length-1].value;let r,l;for(r=a;r<=o;r=+s.add(r,1,i))l=e[r],l>=0&&(t[l].major=!0);return t}function bo(n,t,e){const i=[],s={},a=t.length;let o,r;for(o=0;o<a;++o)r=t[o],s[r]=o,i.push({value:r,major:!1});return a===0||!e?i:hh(n,i,s,e)}class yo extends Ln{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Tc._date(t.adapters.date);s.init(e),wn(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:po(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:a,minDefined:o,maxDefined:r}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!r&&!isNaN(c.max)&&(a=Math.max(a,c.max))}(!o||!r)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Se(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),a=Se(a)&&!isNaN(a)?a:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,o=this.max,r=xl(s,a,o);return this._unit=e.unit||(i.autoSkip?mo(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):ch(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:dh(this._unit),this.initOffsets(s),t.reverse&&r.reverse(),bo(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,a;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=ee(e,0,o),i=ee(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,a=s.time,o=a.unit||mo(a.minUnit,e,i,this._getLabelCapacity(e)),r=ct(s.ticks.stepSize,1),l=o==="week"?a.isoWeekday:!1,c=ci(l)||l===!0,d={};let f=e,h,u;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":o),t.diff(i,e,o)>1e5*r)throw new Error(e+" and "+i+" are too far apart with stepSize of "+r+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(h=f,u=0;h<i;h=+t.add(h,r,o),u++)_o(d,h,g);return(h===i||s.bounds==="ticks"||u===1)&&_o(d,h,g),Object.keys(d).sort(go).map(p=>+p)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,a=this._unit,o=e||s[a];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,s){const a=this.options,o=a.ticks.callback;if(o)return xt(o,[t,e,i],this);const r=a.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&r[l],f=c&&r[c],h=i[e],u=c&&f&&h&&h.major;return this._adapter.format(t,s||(u?f:d))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=He(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(s),o=Math.sin(s),r=this._resolveTickFontOptions(0).size;return{w:i*a+r*o,h:i*o+r*a}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,a=this._tickFormatFunction(t,0,bo(this,[t],this._majorUnit),s),o=this._getLabelSize(a),r=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return r>0?r:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(po(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Sl(t.sort(go))}}function ti(n,t,e){let i=0,s=n.length-1,a,o,r,l;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Oi(n,"pos",t)),{pos:a,time:r}=n[i],{pos:o,time:l}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Oi(n,"time",t)),{time:a,pos:r}=n[i],{time:o,pos:l}=n[s]);const c=o-a;return c?r+(l-r)*(t-a)/c:r}class wu extends yo{static id="timeseries";static defaults=yo.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ti(e,this.min),this._tableRange=ti(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],a=[];let o,r,l,c,d;for(o=0,r=t.length;o<r;++o)c=t[o],c>=e&&c<=i&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,r=s.length;o<r;++o)d=s[o+1],l=s[o-1],c=s[o],Math.round((d+l)/2)!==c&&a.push({time:c,pos:o/(r-1)});return a}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ti(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ti(this._table,i*this._tableRange+this._minPos,!0)}}const vo=/^on/,ja=[];Object.keys(globalThis).forEach(n=>{vo.test(n)&&ja.push(n.replace(vo,""))});function $a(n){const t=nr,e=[];function i(s){er(t,s)}sn(()=>{const s=n();ja.forEach(s instanceof Element?a=>e.push(It(s,a,i)):a=>e.push(s.$on(a,i)))}),gi(()=>{for(;e.length;)e.pop()()})}function fh(n){let t,e=[n[1]],i={};for(let s=0;s<e.length;s+=1)i=Je(i,e[s]);return{c(){t=I("canvas"),this.h()},l(s){t=E(s,"CANVAS",{}),N(t).forEach(x),this.h()},h(){ir(t,i)},m(s,a){U(s,t,a),n[8](t)},p:kt,i:kt,o:kt,d(s){s&&x(t),n[8](null)}}}function uh(n){let{data:t,type:e,options:i,plugins:s,children:a,$$scope:o,$$slots:r,...l}=n;return l}function gh(n,t,e){let{type:i}=t,{data:s={datasets:[]}}=t,{options:a={}}=t,{plugins:o=[]}=t,{updateMode:r=void 0}=t,{chart:l=null}=t,c,d=uh(t);sn(()=>{e(2,l=new _i(c,{type:i,data:s,options:a,plugins:o}))}),sr(()=>{l&&(e(2,l.data=s,l),Object.assign(l.options,a),l.update(r))}),gi(()=>{l&&l.destroy(),e(2,l=null)}),$a(()=>c);function f(h){_t[h?"unshift":"push"](()=>{c=h,e(0,c)})}return n.$$set=h=>{e(9,t=Je(Je({},t),si(h))),"type"in h&&e(3,i=h.type),"data"in h&&e(4,s=h.data),"options"in h&&e(5,a=h.options),"plugins"in h&&e(6,o=h.plugins),"updateMode"in h&&e(7,r=h.updateMode),"chart"in h&&e(2,l=h.chart)},t=si(t),[c,d,l,i,s,a,o,r,f]}class ph extends yt{constructor(t){super(),vt(this,t,gh,fh,bt,{type:3,data:4,options:5,plugins:6,updateMode:7,chart:2})}}function mh(n){let t,e,i;const s=[{type:"pie"},n[1]];function a(r){n[4](r)}let o={};for(let r=0;r<s.length;r+=1)o=Je(o,s[r]);return n[0]!==void 0&&(o.chart=n[0]),t=new ph({props:o}),n[3](t),_t.push(()=>ie(t,"chart",a)),{c(){X(t.$$.fragment)},l(r){q(t.$$.fragment,r)},m(r,l){K(t,r,l),i=!0},p(r,[l]){const c=l&2?lr(s,[s[0],cr(r[1])]):{};!e&&l&1&&(e=!0,c.chart=r[0],ne(()=>e=!1)),t.$set(c)},i(r){i||(A(t.$$.fragment,r),i=!0)},o(r){L(t.$$.fragment,r),i=!1},d(r){n[3](null),G(t,r)}}}function _h(n,t,e){_i.register(Mc);let{chart:i=null}=t,s,a;$a(()=>a);function o(l){_t[l?"unshift":"push"](()=>{a=l,e(2,a)})}function r(l){i=l,e(0,i)}return n.$$set=l=>{e(5,t=Je(Je({},t),si(l))),"chart"in l&&e(0,i=l.chart)},n.$$.update=()=>{e(1,s=t)},t=si(t),[i,s,a,o,r]}class bh extends yt{constructor(t){super(),vt(this,t,_h,mh,bt,{chart:0})}}function yh(n){let t,e,i="Chart",s,a,o;return a=new bh({props:{data:n[1],options:n[0]}}),{c(){t=I("div"),e=I("h2"),e.textContent=i,s=W(),X(a.$$.fragment),this.h()},l(r){t=E(r,"DIV",{style:!0});var l=N(t);e=E(l,"H2",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-1yyp2oc"&&(e.textContent=i),s=V(l),q(a.$$.fragment,l),l.forEach(x),this.h()},h(){T(e,"class","h5 border-bottom border-1 pb-3"),Zo(t,"max-width","400px")},m(r,l){U(r,t,l),_(t,e),_(t,s),K(a,t,null),o=!0},p(r,[l]){const c={};l&2&&(c.data=r[1]),l&1&&(c.options=r[0]),a.$set(c)},i(r){o||(A(a.$$.fragment,r),o=!0)},o(r){L(a.$$.fragment,r),o=!1},d(r){r&&x(t),G(a)}}}function vh(n,t,e){let i,s,a;const{stores:{darkTheme:o}}=Qo();Yt(n,o,h=>e(8,a=h));let{budget:r=0}=t,{moneySpent:l=0}=t,{moneyScheduled:c=0}=t,d=0,f;return _i.register(Gd,sh,qd,Vd,lh),n.$$set=h=>{"budget"in h&&e(3,r=h.budget),"moneySpent"in h&&e(4,l=h.moneySpent),"moneyScheduled"in h&&e(5,c=h.moneyScheduled)},n.$$.update=()=>{n.$$.dirty&56&&e(6,d=r-(l+c)),n.$$.dirty&112&&e(7,f={moneySpent:{label:`Spent ${Ft(l)}`,data:l,bgColor:"white",hoverBgColor:"white"},moneyRemaining:{label:`Remaining ${Ft(d)}`,data:d,bgColor:"#6ea8fe",hoverBgColor:"#6ea8fe"},moneyScheduled:{label:`Scheduled ${Ft(c)}`,data:c,bgColor:"orange",hoverBgColor:"orange"}}),n.$$.dirty&384&&e(1,i={labels:[f.moneySpent.label,f.moneyRemaining.label,f.moneyScheduled.label],datasets:[{data:[f.moneySpent.data,f.moneyRemaining.data,f.moneyScheduled.data],borderColor:a?"#FFFFFF":"#404244",backgroundColor:[f.moneySpent.bgColor,f.moneyRemaining.bgColor,f.moneyScheduled.bgColor],hoverBackgroundColor:[f.moneySpent.hoverBgColor,f.moneyRemaining.hoverBgColor,f.moneyScheduled.hoverBgColor]}]}),n.$$.dirty&256&&e(0,s={responsive:!0,plugins:{legend:{display:!0,labels:{color:a?"white":"black"}}}})},[s,i,o,r,l,c,d,f,a]}class wh extends yt{constructor(t){super(),vt(this,t,vh,yh,bt,{budget:3,moneySpent:4,moneyScheduled:5})}}function xh(n){let t,e,i="Summary",s,a,o,r,l,c=n[1].moneySpent.label+"",d,f,h,u=Ft(n[1].moneySpent.data)+"",g,p,m,y,S=n[1].moneyScheduled.label+"",D,M,C,O=Ft(n[1].moneyScheduled.data)+"",F,B,P,z,R=n[1].moneyRemaining.label+"",b,k,w,v=Ft(n[1].moneyRemaining.data)+"",H,j,Y,$,it="Budget (total)",mt,Q,ut=Ft(n[0])+"",gt;return{c(){t=I("div"),e=I("h2"),e.textContent=i,s=W(),a=I("table"),o=I("tbody"),r=I("tr"),l=I("td"),d=tt(c),f=W(),h=I("td"),g=tt(u),p=W(),m=I("tr"),y=I("td"),D=tt(S),M=W(),C=I("td"),F=tt(O),B=W(),P=I("tr"),z=I("td"),b=tt(R),k=W(),w=I("td"),H=tt(v),j=W(),Y=I("tr"),$=I("td"),$.textContent=it,mt=W(),Q=I("td"),gt=tt(ut),this.h()},l(ot){t=E(ot,"DIV",{class:!0,style:!0});var rt=N(t);e=E(rt,"H2",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-dugfm4"&&(e.textContent=i),s=V(rt),a=E(rt,"TABLE",{class:!0});var At=N(a);o=E(At,"TBODY",{});var wt=N(o);r=E(wt,"TR",{});var Wt=N(r);l=E(Wt,"TD",{class:!0});var Dt=N(l);d=et(Dt,c),Dt.forEach(x),f=V(Wt),h=E(Wt,"TD",{class:!0});var dt=N(h);g=et(dt,u),dt.forEach(x),Wt.forEach(x),p=V(wt),m=E(wt,"TR",{});var pt=N(m);y=E(pt,"TD",{class:!0});var de=N(y);D=et(de,S),de.forEach(x),M=V(pt),C=E(pt,"TD",{class:!0});var zt=N(C);F=et(zt,O),zt.forEach(x),pt.forEach(x),B=V(wt),P=E(wt,"TR",{});var st=N(P);z=E(st,"TD",{class:!0});var Z=N(z);b=et(Z,R),Z.forEach(x),k=V(st),w=E(st,"TD",{class:!0});var Ot=N(w);H=et(Ot,v),Ot.forEach(x),st.forEach(x),j=V(wt),Y=E(wt,"TR",{});var ht=N(Y);$=E(ht,"TD",{class:!0,"data-svelte-h":!0}),lt($)!=="svelte-wkacyq"&&($.textContent=it),mt=V(ht),Q=E(ht,"TD",{class:!0});var Jt=N(Q);gt=et(Jt,ut),Jt.forEach(x),ht.forEach(x),wt.forEach(x),At.forEach(x),rt.forEach(x),this.h()},h(){T(e,"class","h5 border-bottom border-1 pb-3"),T(l,"class","fw-lighter small"),T(h,"class","text-end fw-lighter small"),T(y,"class","fw-lighter small"),T(C,"class","text-end fw-lighter small"),T(z,"class","fw-lighter small"),T(w,"class","text-end fw-lighter small"),T($,"class","fw-lighter"),T(Q,"class","text-end"),T(a,"class","table table-striped table-hover"),T(t,"class","d-flex flex-column gap-3"),Zo(t,"max-width","400px")},m(ot,rt){U(ot,t,rt),_(t,e),_(t,s),_(t,a),_(a,o),_(o,r),_(r,l),_(l,d),_(r,f),_(r,h),_(h,g),_(o,p),_(o,m),_(m,y),_(y,D),_(m,M),_(m,C),_(C,F),_(o,B),_(o,P),_(P,z),_(z,b),_(P,k),_(P,w),_(w,H),_(o,j),_(o,Y),_(Y,$),_(Y,mt),_(Y,Q),_(Q,gt)},p(ot,[rt]){rt&2&&c!==(c=ot[1].moneySpent.label+"")&&St(d,c),rt&2&&u!==(u=Ft(ot[1].moneySpent.data)+"")&&St(g,u),rt&2&&S!==(S=ot[1].moneyScheduled.label+"")&&St(D,S),rt&2&&O!==(O=Ft(ot[1].moneyScheduled.data)+"")&&St(F,O),rt&2&&R!==(R=ot[1].moneyRemaining.label+"")&&St(b,R),rt&2&&v!==(v=Ft(ot[1].moneyRemaining.data)+"")&&St(H,v),rt&1&&ut!==(ut=Ft(ot[0])+"")&&St(gt,ut)},i:kt,o:kt,d(ot){ot&&x(t)}}}function kh(n,t,e){let{budget:i=0}=t,{moneySpent:s=0}=t,{moneyScheduled:a=0}=t,o=0,r;return n.$$set=l=>{"budget"in l&&e(0,i=l.budget),"moneySpent"in l&&e(2,s=l.moneySpent),"moneyScheduled"in l&&e(3,a=l.moneyScheduled)},n.$$.update=()=>{n.$$.dirty&13&&e(4,o=i-(s+a)),n.$$.dirty&28&&e(1,r={moneySpent:{label:"Spent",data:s,bgColor:"white",hoverBgColor:"white"},moneyRemaining:{label:"Remaining",data:o,bgColor:"#6ea8fe",hoverBgColor:"#6ea8fe"},moneyScheduled:{label:"Scheduled",data:a,bgColor:"orange",hoverBgColor:"orange"}})},[i,r,s,a,o]}class Sh extends yt{constructor(t){super(),vt(this,t,kh,xh,bt,{budget:0,moneySpent:2,moneyScheduled:3})}}function wo(n,t,e){const i=n.slice();return i[11]=t[e],i}function xo(n){let t,e=n[11].start+"",i,s,a=n[11].end+"",o,r,l=Ft(n[11].max_spending_limit)+"",c,d,f;return{c(){t=I("option"),i=tt(e),s=tt(" to "),o=tt(a),r=tt(" ("),c=tt(l),d=tt(`)
			`),this.h()},l(h){t=E(h,"OPTION",{});var u=N(t);i=et(u,e),s=et(u," to "),o=et(u,a),r=et(u," ("),c=et(u,l),d=et(u,`)
			`),u.forEach(x),this.h()},h(){t.__value=f=n[11].id,Zt(t,t.__value)},m(h,u){U(h,t,u),_(t,i),_(t,s),_(t,o),_(t,r),_(t,c),_(t,d)},p(h,u){u&2&&e!==(e=h[11].start+"")&&St(i,e),u&2&&a!==(a=h[11].end+"")&&St(o,a),u&2&&l!==(l=Ft(h[11].max_spending_limit)+"")&&St(c,l),u&2&&f!==(f=h[11].id)&&(t.__value=f,Zt(t,t.__value))},d(h){h&&x(t)}}}function Ch(n){let t,e,i,s="Range",a,o,r,l,c,d,f=_e(n[1]),h=[];for(let u=0;u<f.length;u+=1)h[u]=xo(wo(n,f,u));return{c(){t=I("div"),e=I("select"),i=I("option"),i.textContent=s;for(let u=0;u<h.length;u+=1)h[u].c();a=W(),o=I("button"),r=I("i"),this.h()},l(u){t=E(u,"DIV",{class:!0});var g=N(t);e=E(g,"SELECT",{class:!0,"aria-label":!0});var p=N(e);i=E(p,"OPTION",{"data-svelte-h":!0}),lt(i)!=="svelte-1k3fjyk"&&(i.textContent=s);for(let y=0;y<h.length;y+=1)h[y].l(p);p.forEach(x),a=V(g),o=E(g,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var m=N(o);r=E(m,"I",{class:!0}),N(r).forEach(x),m.forEach(x),g.forEach(x),this.h()},h(){i.selected=!0,i.__value="Range",Zt(i,i.__value),T(e,"class","form-select"),T(e,"aria-label","Default select example"),n[2]===void 0&&Ko(()=>n[8].call(e)),T(r,"class","bi bi-plus"),T(o,"class","btn btn-sm btn-secondary"),T(o,"type","button"),T(o,"data-bs-toggle","offcanvas"),T(o,"data-bs-target",l="#"+n[0]),T(o,"aria-controls",n[0]),T(t,"class","transaction-page d-flex justify-content-between gap-3")},m(u,g){U(u,t,g),_(t,e),_(e,i);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(e,null);ii(e,n[2],!0),_(t,a),_(t,o),_(o,r),c||(d=[It(e,"change",n[8]),It(e,"change",n[5]),It(o,"click",n[9])],c=!0)},p(u,[g]){if(g&2){f=_e(u[1]);let p;for(p=0;p<f.length;p+=1){const m=wo(u,f,p);h[p]?h[p].p(m,g):(h[p]=xo(m),h[p].c(),h[p].m(e,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}g&6&&ii(e,u[2]),g&1&&l!==(l="#"+u[0])&&T(o,"data-bs-target",l),g&1&&T(o,"aria-controls",u[0])},i:kt,o:kt,d(u){u&&x(t),An(h,u),c=!1,Bi(d)}}}function Mh(n,t,e){let{budgetId:i}=t,{drawerId:s}=t,{budgetPeriods:a=[]}=t;const{stores:{targetTransaction:o}}=en();let r=!1,l;const c={type:"expense",amount:0,description:"",source:"",date:he(new Date,"yyyy-MM-dd")},d=ce(),f=()=>{d("budgetIdChange",{value:l})};function h(){l=Go(this),e(2,l),e(7,r),e(6,i),e(1,a)}const u=()=>o.set({...c});return n.$$set=g=>{"budgetId"in g&&e(6,i=g.budgetId),"drawerId"in g&&e(0,s=g.drawerId),"budgetPeriods"in g&&e(1,a=g.budgetPeriods)},n.$$.update=()=>{n.$$.dirty&192&&(r||(e(2,l=i),e(7,r=!0)))},[s,a,l,o,c,f,i,r,h,u]}class Th extends yt{constructor(t){super(),vt(this,t,Mh,Ch,bt,{budgetId:6,drawerId:0,budgetPeriods:1})}}function ko(n){let t,e="fixed";return{c(){t=I("span"),t.textContent=e,this.h()},l(i){t=E(i,"SPAN",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-69m7p6"&&(t.textContent=e),this.h()},h(){T(t,"class","badge text-bg-info fw-light")},m(i,s){U(i,t,s)},d(i){i&&x(t)}}}function So(n){let t,e="variable";return{c(){t=I("span"),t.textContent=e,this.h()},l(i){t=E(i,"SPAN",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-1pgpk85"&&(t.textContent=e),this.h()},h(){T(t,"class","badge text-bg-danger fw-light")},m(i,s){U(i,t,s)},d(i){i&&x(t)}}}function Dh(n){let t,e,i=n[0]==="fixed"&&ko(),s=n[0]==="variable"&&So();return{c(){i&&i.c(),t=W(),s&&s.c(),e=Ct()},l(a){i&&i.l(a),t=V(a),s&&s.l(a),e=Ct()},m(a,o){i&&i.m(a,o),U(a,t,o),s&&s.m(a,o),U(a,e,o)},p(a,[o]){a[0]==="fixed"?i||(i=ko(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),a[0]==="variable"?s||(s=So(),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:kt,o:kt,d(a){a&&(x(t),x(e)),i&&i.d(a),s&&s.d(a)}}}function Ih(n,t,e){let{type:i="fixed"}=t;return n.$$set=s=>{"type"in s&&e(0,i=s.type)},[i]}class Ya extends yt{constructor(t){super(),vt(this,t,Ih,Dh,bt,{type:0})}}function Co(n,t,e){const i=n.slice();return i[9]=t[e],i}function Mo(n,t,e){const i=n.slice();return i[12]=t[e],i}function Eh(n){let t,e="Transactions",i,s,a,o=_e(n[2]),r=[];for(let c=0;c<o.length;c+=1)r[c]=Oo(Co(n,o,c));const l=c=>L(r[c],1,1,()=>{r[c]=null});return{c(){t=I("h2"),t.textContent=e,i=W();for(let c=0;c<r.length;c+=1)r[c].c();s=Ct(),this.h()},l(c){t=E(c,"H2",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-w81o9z"&&(t.textContent=e),i=V(c);for(let d=0;d<r.length;d+=1)r[d].l(c);s=Ct(),this.h()},h(){T(t,"class","h5 border-bottom border-1 pb-3")},m(c,d){U(c,t,d),U(c,i,d);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(c,d);U(c,s,d),a=!0},p(c,d){if(d&69){o=_e(c[2]);let f;for(f=0;f<o.length;f+=1){const h=Co(c,o,f);r[f]?(r[f].p(h,d),A(r[f],1)):(r[f]=Oo(h),r[f].c(),A(r[f],1),r[f].m(s.parentNode,s))}for(Mt(),f=o.length;f<r.length;f+=1)l(f);Tt()}},i(c){if(!a){for(let d=0;d<o.length;d+=1)A(r[d]);a=!0}},o(c){r=r.filter(Boolean);for(let d=0;d<r.length;d+=1)L(r[d]);a=!1},d(c){c&&(x(t),x(i),x(s)),An(r,c)}}}function Ah(n){let t,e;return t=new hr({}),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p:kt,i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function To(n){let t,e;return t=new Ya({props:{type:n[12]?.meta_data.type}}),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&4&&(a.type=i[12]?.meta_data.type),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function Do(n){let t,e="generated";return{c(){t=I("span"),t.textContent=e,this.h()},l(i){t=E(i,"SPAN",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-hgdo7v"&&(t.textContent=e),this.h()},h(){T(t,"class","badge text-bg-secondary fw-light")},m(i,s){U(i,t,s)},d(i){i&&x(t)}}}function Io(n){let t,e="scheduled";return{c(){t=I("span"),t.textContent=e,this.h()},l(i){t=E(i,"SPAN",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-12safzn"&&(t.textContent=e),this.h()},h(){T(t,"class","badge text-bg-warning fw-light")},m(i,s){U(i,t,s)},d(i){i&&x(t)}}}function Eo(n){let t,e="not paid";return{c(){t=I("span"),t.textContent=e,this.h()},l(i){t=E(i,"SPAN",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-3oq0nx"&&(t.textContent=e),this.h()},h(){T(t,"class","badge text-bg-secondary fw-light")},m(i,s){U(i,t,s)},d(i){i&&x(t)}}}function Oh(n){let t,e=Ft(n[12].amount)+"",i;return{c(){t=I("span"),i=tt(e),this.h()},l(s){t=E(s,"SPAN",{});var a=N(t);i=et(a,e),a.forEach(x),this.h()},h(){Ht(t,"text-decoration-line-through",n[12]?.meta_data?.paid==="no")},m(s,a){U(s,t,a),_(t,i)},p(s,a){a&4&&e!==(e=Ft(s[12].amount)+"")&&St(i,e),a&4&&Ht(t,"text-decoration-line-through",s[12]?.meta_data?.paid==="no")},d(s){s&&x(t)}}}function Ao(n){let t,e,i,s,a=n[12].description+"",o,r,l,c,d,f=n[12].source+"",h,u,g,p,m,y,S,D,M,C,O=n[12]?.meta_data&&n[12]?.meta_data?.type&&n[12]?.meta_data?.type!=="unknown"&&To(n),F=n[12]?.meta_data?.from_bill&&Do(),B=n[12]?.meta_data?.paid==="scheduled"&&Io(),P=n[12]?.meta_data?.paid==="no"&&Eo();function z(){return n[8](n[12])}return D=new Ie({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+n[0],"aria-controls":n[0],$$slots:{default:[Oh]},$$scope:{ctx:n}}}),D.$on("click",z),{c(){t=I("div"),e=I("div"),i=I("div"),s=I("div"),o=tt(a),r=W(),l=I("div"),c=I("div"),d=I("div"),h=tt(f),u=W(),g=I("div"),O&&O.c(),p=W(),F&&F.c(),m=W(),B&&B.c(),y=W(),P&&P.c(),S=W(),X(D.$$.fragment),M=W(),this.h()},l(R){t=E(R,"DIV",{class:!0});var b=N(t);e=E(b,"DIV",{});var k=N(e);i=E(k,"DIV",{class:!0});var w=N(i);s=E(w,"DIV",{});var v=N(s);o=et(v,a),v.forEach(x),w.forEach(x),r=V(k),l=E(k,"DIV",{class:!0});var H=N(l);c=E(H,"DIV",{});var j=N(c);d=E(j,"DIV",{class:!0});var Y=N(d);h=et(Y,f),Y.forEach(x),u=V(j),g=E(j,"DIV",{class:!0});var $=N(g);O&&O.l($),p=V($),F&&F.l($),m=V($),B&&B.l($),y=V($),P&&P.l($),$.forEach(x),j.forEach(x),S=V(H),q(D.$$.fragment,H),H.forEach(x),k.forEach(x),M=V(b),b.forEach(x),this.h()},h(){T(i,"class","d-flex align-items-center fw-bold"),Ht(i,"text-warning-emphasis",n[12]?.meta_data?.paid==="scheduled"),Ht(i,"text-secondary-emphasis",n[12]?.meta_data?.paid==="no"),T(d,"class","fw-light small"),T(g,"class","d-flex gap-1 text-end"),T(l,"class","d-flex justify-content-between"),Ht(e,"text-decoration-line-through",n[12]?.meta_data?.paid==="no"),T(t,"class","p-2")},m(R,b){U(R,t,b),_(t,e),_(e,i),_(i,s),_(s,o),_(e,r),_(e,l),_(l,c),_(c,d),_(d,h),_(c,u),_(c,g),O&&O.m(g,null),_(g,p),F&&F.m(g,null),_(g,m),B&&B.m(g,null),_(g,y),P&&P.m(g,null),_(l,S),K(D,l,null),_(t,M),C=!0},p(R,b){n=R,(!C||b&4)&&a!==(a=n[12].description+"")&&St(o,a),(!C||b&4)&&Ht(i,"text-warning-emphasis",n[12]?.meta_data?.paid==="scheduled"),(!C||b&4)&&Ht(i,"text-secondary-emphasis",n[12]?.meta_data?.paid==="no"),(!C||b&4)&&f!==(f=n[12].source+"")&&St(h,f),n[12]?.meta_data&&n[12]?.meta_data?.type&&n[12]?.meta_data?.type!=="unknown"?O?(O.p(n,b),b&4&&A(O,1)):(O=To(n),O.c(),A(O,1),O.m(g,p)):O&&(Mt(),L(O,1,1,()=>{O=null}),Tt()),n[12]?.meta_data?.from_bill?F||(F=Do(),F.c(),F.m(g,m)):F&&(F.d(1),F=null),n[12]?.meta_data?.paid==="scheduled"?B||(B=Io(),B.c(),B.m(g,y)):B&&(B.d(1),B=null),n[12]?.meta_data?.paid==="no"?P||(P=Eo(),P.c(),P.m(g,null)):P&&(P.d(1),P=null);const k={};b&1&&(k["data-bs-target"]="#"+n[0]),b&1&&(k["aria-controls"]=n[0]),b&32772&&(k.$$scope={dirty:b,ctx:n}),D.$set(k),(!C||b&4)&&Ht(e,"text-decoration-line-through",n[12]?.meta_data?.paid==="no")},i(R){C||(A(O),A(D.$$.fragment,R),C=!0)},o(R){L(O),L(D.$$.fragment,R),C=!1},d(R){R&&x(t),O&&O.d(),F&&F.d(),B&&B.d(),P&&P.d(),G(D)}}}function Oo(n){let t,e,i=ls(n[9]?.dateStr)+"",s,a,o,r,l,c=_e(n[9].transactions),d=[];for(let h=0;h<c.length;h+=1)d[h]=Ao(Mo(n,c,h));const f=h=>L(d[h],1,1,()=>{d[h]=null});return{c(){t=I("div"),e=I("div"),s=tt(i),a=W(),o=I("div");for(let h=0;h<d.length;h+=1)d[h].c();r=W(),this.h()},l(h){t=E(h,"DIV",{});var u=N(t);e=E(u,"DIV",{class:!0});var g=N(e);s=et(g,i),g.forEach(x),a=V(u),o=E(u,"DIV",{});var p=N(o);for(let m=0;m<d.length;m+=1)d[m].l(p);p.forEach(x),r=V(u),u.forEach(x),this.h()},h(){T(e,"class","fw-bolder text-uppercase p-2 border-bottom")},m(h,u){U(h,t,u),_(t,e),_(e,s),_(t,a),_(t,o);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(o,null);_(t,r),l=!0},p(h,u){if((!l||u&4)&&i!==(i=ls(h[9]?.dateStr)+"")&&St(s,i),u&69){c=_e(h[9].transactions);let g;for(g=0;g<c.length;g+=1){const p=Mo(h,c,g);d[g]?(d[g].p(p,u),A(d[g],1)):(d[g]=Ao(p),d[g].c(),A(d[g],1),d[g].m(o,null))}for(Mt(),g=c.length;g<d.length;g+=1)f(g);Tt()}},i(h){if(!l){for(let u=0;u<c.length;u+=1)A(d[u]);l=!0}},o(h){d=d.filter(Boolean);for(let u=0;u<d.length;u+=1)L(d[u]);l=!1},d(h){h&&x(t),An(d,h)}}}function Ph(n){let t,e,i,s;const a=[Ah,Eh],o=[];function r(l,c){return l[1]?0:l[2].length&&l[3]?1:-1}return~(t=r(n))&&(e=o[t]=a[t](n)),{c(){e&&e.c(),i=Ct()},l(l){e&&e.l(l),i=Ct()},m(l,c){~t&&o[t].m(l,c),U(l,i,c),s=!0},p(l,[c]){let d=t;t=r(l),t===d?~t&&o[t].p(l,c):(e&&(Mt(),L(o[d],1,1,()=>{o[d]=null}),Tt()),~t?(e=o[t],e?e.p(l,c):(e=o[t]=a[t](l),e.c()),A(e,1),e.m(i.parentNode,i)):e=null)},i(l){s||(A(e),s=!0)},o(l){L(e),s=!1},d(l){l&&x(i),~t&&o[t].d(l)}}}function Rh(n,t,e){let i,s,a,{drawerId:o=""}=t;const{stores:{loading:r,targetBudget:l,targetTransaction:c,dayTransactions:d}}=en();Yt(n,r,h=>e(1,i=h)),Yt(n,l,h=>e(3,a=h)),Yt(n,d,h=>e(2,s=h));const f=h=>c.set(h);return n.$$set=h=>{"drawerId"in h&&e(0,o=h.drawerId)},[o,i,s,a,r,l,c,d,f]}class Lh extends yt{constructor(t){super(),vt(this,t,Rh,Ph,bt,{drawerId:0})}}var Ua=(n=>(n.UseNewTransactionsForm="use-new-transactions-form",n))(Ua||{});const Fh=[{name:"use-new-transactions-form",roles:[vi.Root,vi.Admin,vi.Authenticated],on:!0}];function Bh(n){let t,e,i;function s(o){n[7](o)}let a={min:0,label:"Amount",name:"bill-amount",placeholder:"",helperText:n[3],loading:n[1],required:!0,isInvalid:n[2]};return n[0]!==void 0&&(a.value=n[0]),t=new ar({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("valueChanged",n[4]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&8&&(l.helperText=o[3]),r&2&&(l.loading=o[1]),r&4&&(l.isInvalid=o[2]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}function zh(n,t,e){let i,s,{value:a}=t,{loading:o}=t;async function r(){return new Promise(h=>{setTimeout(()=>{e(6,d=!0),h(d&&(!a||a===0||a>1e12))})})}const l=ce(),c=()=>{l("valueChanged",{value:a}),e(6,d=!0)};let d=!1;function f(h){a=h,e(0,a)}return n.$$set=h=>{"value"in h&&e(0,a=h.value),"loading"in h&&e(1,o=h.loading)},n.$$.update=()=>{n.$$.dirty&65&&e(2,i=d&&(!a||a===0||a>1e12)),n.$$.dirty&4&&e(3,s=i?"Value should be greater 0":"")},[a,o,i,s,c,r,d,f]}class Xa extends yt{constructor(t){super(),vt(this,t,zh,Bh,bt,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}function Hh(n){let t,e,i;function s(o){n[7](o)}let a={label:"Vendor",name:"bill-source",placeholder:"",helperText:n[3],loading:n[1],required:!0,isInvalid:n[2]};return n[0]!==void 0&&(a.value=n[0]),t=new oa({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("valueChanged",n[4]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&8&&(l.helperText=o[3]),r&2&&(l.loading=o[1]),r&4&&(l.isInvalid=o[2]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}const Nh="Who was money paid to? i.e. Walmart, Costco, Cafe Trang etc.",Wh="This field is required";function Vh(n,t,e){let i,s,{value:a}=t,{loading:o}=t;async function r(){return new Promise(h=>{setTimeout(()=>{e(6,d=!0),h(d&&a.trim()==="")})})}const l=ce(),c=()=>{l("valueChanged",{value:a}),e(6,d=!0)};let d=!1;function f(h){a=h,e(0,a)}return n.$$set=h=>{"value"in h&&e(0,a=h.value),"loading"in h&&e(1,o=h.loading)},n.$$.update=()=>{n.$$.dirty&65&&e(2,i=d&&a.trim()===""),n.$$.dirty&4&&e(3,s=i?Wh:Nh)},[a,o,i,s,c,r,d,f]}class qa extends yt{constructor(t){super(),vt(this,t,Vh,Hh,bt,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}function jh(n){let t,e,i;function s(o){n[7](o)}let a={label:"Description",name:"bill-description",placeholder:"",helperText:n[3],loading:n[1],required:!0,isInvalid:n[2]};return n[0]!==void 0&&(a.value=n[0]),t=new oa({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("valueChanged",n[4]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&8&&(l.helperText=o[3]),r&2&&(l.loading=o[1]),r&4&&(l.isInvalid=o[2]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}const $h="Expense description i.e. Groceries, Tuition, Tennis fee",Yh="This field is required";function Uh(n,t,e){let i,s,{value:a}=t,{loading:o}=t;async function r(){return new Promise(h=>{setTimeout(()=>{e(6,d=!0),h(d&&!a.trim())})})}const l=ce(),c=()=>{l("valueChanged",{value:a}),e(6,d=!0)};let d=!1;function f(h){a=h,e(0,a)}return n.$$set=h=>{"value"in h&&e(0,a=h.value),"loading"in h&&e(1,o=h.loading)},n.$$.update=()=>{n.$$.dirty&65&&e(2,i=d&&a.trim()===""),n.$$.dirty&4&&e(3,s=i?Yh:$h)},[a,o,i,s,c,r,d,f]}class Ka extends yt{constructor(t){super(),vt(this,t,Uh,jh,bt,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}function Xh(n){let t,e,i;function s(o){n[6](o)}let a={label:"Date",name:"transaction-date",placeholder:"",helperText:"",loading:n[1],required:!0,isInvalid:n[2]};return n[0]!==void 0&&(a.value=n[0]),t=new zi({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("valueChanged",n[3]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&2&&(l.loading=o[1]),r&4&&(l.isInvalid=o[2]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}function qh(n,t,e){let i,{value:s}=t,{loading:a}=t;async function o(){return new Promise(f=>{setTimeout(()=>{e(5,r=!0),f(r&&(!s.trim()||s.trim()===""))})})}let r=!1;const l=ce(),c=()=>{l("valueChanged",{value:s})};function d(f){s=f,e(0,s)}return n.$$set=f=>{"value"in f&&e(0,s=f.value),"loading"in f&&e(1,a=f.loading)},n.$$.update=()=>{n.$$.dirty&33&&e(2,i=r&&(!s.trim()||s.trim()===""))},[s,a,i,c,o,r,d]}class Kh extends yt{constructor(t){super(),vt(this,t,qh,Xh,bt,{value:0,loading:1,validateFieldIsInvalid:4})}get validateFieldIsInvalid(){return this.$$.ctx[4]}}function Gh(n){let t,e,i;function s(o){n[4](o)}let a={label:"Paid",name:"repeat-type",helperText:`Was this expense paid for?<br />
<code>Paid</code>, if expense has been paid.<br />
<code>Not Paid</code>, if expense was not paid<br />
<code>Scheduled</code>, if expense is scheduled to be paid`,loading:n[1],required:!0,isInvalid:!1,disabled:!1,options:n[3]};return n[0]!==void 0&&(a.value=n[0]),t=new On({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("change",n[2]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&2&&(l.loading=o[1]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}function Zh(n,t,e){let{value:i}=t,{loading:s}=t;const a=ce(),o=()=>{a("valueChanged",{value:i})},r=Dr;function l(c){i=c,e(0,i)}return n.$$set=c=>{"value"in c&&e(0,i=c.value),"loading"in c&&e(1,s=c.loading)},[i,s,o,r,l]}class Qh extends yt{constructor(t){super(),vt(this,t,Zh,Gh,bt,{value:0,loading:1})}}function Jh(n){let t,e,i;function s(o){n[6](o)}let a={label:"Payment method",name:"account-id",helperText:tf,loading:n[1],required:!0,isInvalid:!1,disabled:!1,options:n[2]};return n[0]!==void 0&&(a.value=n[0]),t=new On({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("change",n[4]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&2&&(l.loading=o[1]),r&4&&(l.options=o[2]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}const tf="Payment method. i.e. credit-card, check, cash";function ef(n,t,e){let i,{value:s}=t,{loading:a}=t;const{stores:{data:o},actions:{reload:r}}=aa();Yt(n,o,h=>e(5,i=h));const l=ce(),c=()=>{l("valueChanged",{value:s})};let d=[];sn(r);function f(h){s=h,e(0,s)}return n.$$set=h=>{"value"in h&&e(0,s=h.value),"loading"in h&&e(1,a=h.loading)},n.$$.update=()=>{n.$$.dirty&32&&e(2,d=i.map(h=>({key:h.name,value:h?.id??0})))},[s,a,d,o,c,i,f]}class Ga extends yt{constructor(t){super(),vt(this,t,ef,Jh,bt,{value:0,loading:1})}}function nf(n){let t,e,i;function s(o){n[6](o)}let a={label:"Category",name:"category-id",helperText:sf,loading:n[1],required:!0,isInvalid:!1,disabled:!1,options:n[2]};return n[0]!==void 0&&(a.value=n[0]),t=new On({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("change",n[4]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&2&&(l.loading=o[1]),r&4&&(l.options=o[2]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}const sf="Pick a name for the category. i.e. Grocery, Subscriptions";function of(n,t,e){let i,{value:s}=t,{loading:a}=t;const{stores:{data:o},actions:{reload:r}}=mr();Yt(n,o,h=>e(5,i=h));const l=ce(),c=()=>{l("valueChanged",{value:s})};let d=[];sn(r);function f(h){s=h,e(0,s)}return n.$$set=h=>{"value"in h&&e(0,s=h.value),"loading"in h&&e(1,a=h.loading)},n.$$.update=()=>{n.$$.dirty&32&&e(2,d=i.map(h=>({key:h.name,value:h?.id??0})))},[s,a,d,o,c,i,f]}class Za extends yt{constructor(t){super(),vt(this,t,of,nf,bt,{value:0,loading:1})}}function Po(n){let t,e,i,s,a,o,r,l,c,d,f,h,u,g,p,m,y,S,D,M,C,O,F={loading:n[0],value:n[1].description};e=new Ka({props:F}),n[14](e),e.$on("valueChanged",n[15]);let B={loading:n[0],value:n[1].amount};s=new Xa({props:B}),n[16](s),s.$on("valueChanged",n[17]);let P={loading:n[0],value:n[1].date};o=new Kh({props:P}),n[18](o),o.$on("valueChanged",n[19]);let z={loading:n[0],value:n[1].source};l=new qa({props:z}),n[20](l),l.$on("valueChanged",n[21]);let R={loading:n[0],value:n[1].category_id};d=new Za({props:R}),n[22](d),d.$on("valueChanged",n[23]),h=new Ga({props:{loading:n[0],value:n[1].account_id}}),h.$on("valueChanged",n[24]);let b=n[1]?.meta_data?.paid&&Ro(n),k=n[1].id&&Lo(n);return D=new Ie({props:{loading:n[0],variant:"secondary",$$slots:{default:[rf]},$$scope:{ctx:n}}}),D.$on("click",n[8]),C=new Ie({props:{loading:n[0],variant:"primary",$$slots:{default:[lf]},$$scope:{ctx:n}}}),C.$on("click",n[9]),{c(){t=I("div"),X(e.$$.fragment),i=W(),X(s.$$.fragment),a=W(),X(o.$$.fragment),r=W(),X(l.$$.fragment),c=W(),X(d.$$.fragment),f=W(),X(h.$$.fragment),u=W(),b&&b.c(),g=W(),p=I("div"),m=I("div"),k&&k.c(),y=W(),S=I("div"),X(D.$$.fragment),M=W(),X(C.$$.fragment),this.h()},l(w){t=E(w,"DIV",{class:!0});var v=N(t);q(e.$$.fragment,v),i=V(v),q(s.$$.fragment,v),a=V(v),q(o.$$.fragment,v),r=V(v),q(l.$$.fragment,v),c=V(v),q(d.$$.fragment,v),f=V(v),q(h.$$.fragment,v),u=V(v),b&&b.l(v),g=V(v),p=E(v,"DIV",{class:!0});var H=N(p);m=E(H,"DIV",{});var j=N(m);k&&k.l(j),j.forEach(x),y=V(H),S=E(H,"DIV",{});var Y=N(S);q(D.$$.fragment,Y),M=V(Y),q(C.$$.fragment,Y),Y.forEach(x),H.forEach(x),v.forEach(x),this.h()},h(){T(p,"class","d-flex justify-content-between"),T(t,"class","d-flex flex-column gap-3")},m(w,v){U(w,t,v),K(e,t,null),_(t,i),K(s,t,null),_(t,a),K(o,t,null),_(t,r),K(l,t,null),_(t,c),K(d,t,null),_(t,f),K(h,t,null),_(t,u),b&&b.m(t,null),_(t,g),_(t,p),_(p,m),k&&k.m(m,null),_(p,y),_(p,S),K(D,S,null),_(S,M),K(C,S,null),O=!0},p(w,v){const H={};v&1&&(H.loading=w[0]),v&2&&(H.value=w[1].description),e.$set(H);const j={};v&1&&(j.loading=w[0]),v&2&&(j.value=w[1].amount),s.$set(j);const Y={};v&1&&(Y.loading=w[0]),v&2&&(Y.value=w[1].date),o.$set(Y);const $={};v&1&&($.loading=w[0]),v&2&&($.value=w[1].source),l.$set($);const it={};v&1&&(it.loading=w[0]),v&2&&(it.value=w[1].category_id),d.$set(it);const mt={};v&1&&(mt.loading=w[0]),v&2&&(mt.value=w[1].account_id),h.$set(mt),w[1]?.meta_data?.paid?b?(b.p(w,v),v&2&&A(b,1)):(b=Ro(w),b.c(),A(b,1),b.m(t,g)):b&&(Mt(),L(b,1,1,()=>{b=null}),Tt()),w[1].id?k?(k.p(w,v),v&2&&A(k,1)):(k=Lo(w),k.c(),A(k,1),k.m(m,null)):k&&(Mt(),L(k,1,1,()=>{k=null}),Tt());const Q={};v&1&&(Q.loading=w[0]),v&134217728&&(Q.$$scope={dirty:v,ctx:w}),D.$set(Q);const ut={};v&1&&(ut.loading=w[0]),v&134217728&&(ut.$$scope={dirty:v,ctx:w}),C.$set(ut)},i(w){O||(A(e.$$.fragment,w),A(s.$$.fragment,w),A(o.$$.fragment,w),A(l.$$.fragment,w),A(d.$$.fragment,w),A(h.$$.fragment,w),A(b),A(k),A(D.$$.fragment,w),A(C.$$.fragment,w),O=!0)},o(w){L(e.$$.fragment,w),L(s.$$.fragment,w),L(o.$$.fragment,w),L(l.$$.fragment,w),L(d.$$.fragment,w),L(h.$$.fragment,w),L(b),L(k),L(D.$$.fragment,w),L(C.$$.fragment,w),O=!1},d(w){w&&x(t),n[14](null),G(e),n[16](null),G(s),n[18](null),G(o),n[20](null),G(l),n[22](null),G(d),G(h),b&&b.d(),k&&k.d(),G(D),G(C)}}}function Ro(n){let t,e;return t=new Qh({props:{loading:n[0],value:n[1].meta_data.paid}}),t.$on("valueChanged",n[25]),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&1&&(a.loading=i[0]),s&2&&(a.value=i[1].meta_data.paid),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function Lo(n){let t,e;return t=new Ie({props:{loading:n[0],variant:"danger",$$slots:{default:[af]},$$scope:{ctx:n}}}),t.$on("click",n[10]),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&1&&(a.loading=i[0]),s&134217728&&(a.$$scope={dirty:s,ctx:i}),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function af(n){let t;return{c(){t=tt("Delete")},l(e){t=et(e,"Delete")},m(e,i){U(e,t,i)},d(e){e&&x(t)}}}function rf(n){let t;return{c(){t=tt("Cancel")},l(e){t=et(e,"Cancel")},m(e,i){U(e,t,i)},d(e){e&&x(t)}}}function lf(n){let t;return{c(){t=tt("Save")},l(e){t=et(e,"Save")},m(e,i){U(e,t,i)},d(e){e&&x(t)}}}function cf(n){let t,e,i=n[1]&&Po(n);return{c(){i&&i.c(),t=Ct()},l(s){i&&i.l(s),t=Ct()},m(s,a){i&&i.m(s,a),U(s,t,a),e=!0},p(s,[a]){s[1]?i?(i.p(s,a),a&2&&A(i,1)):(i=Po(s),i.c(),A(i,1),i.m(t.parentNode,t)):i&&(Mt(),L(i,1,1,()=>{i=null}),Tt())},i(s){e||(A(i),e=!0)},o(s){L(i),e=!1},d(s){s&&x(t),i&&i.d(s)}}}function df(n,t,e){let{loading:i=!1}=t,{transaction:s}=t,{drawerId:a}=t,o=0,r={paid:"yes",type:"unknown",from_bill:!0},l={date:he(new Date,"yyyy-MM-dd"),description:"",type:"expense",source:"",amount:0,account_id:1,meta_data:r},c,d,f,h,u;const g=(w,v)=>{const{value:H}=w.detail;if(l&&l.meta_data)switch(v){case"date":e(1,l.date=H,l);break;case"description":e(1,l.description=H,l);break;case"source":e(1,l.source=H,l);break;case"amount":e(1,l.amount=H,l);break;case"account-id":e(1,l.account_id=H,l);break;case"category-id":e(1,l.category_id=H,l);break;case"meta-data-type":e(1,l.meta_data.type=H,l);break;case"meta-data-paid":e(1,l.meta_data.paid=H,l);break}},p=()=>{const w=`[data-bs-target="#${a}"]`,v=document.querySelector(w);v&&(v.click(),e(11,s=void 0),e(13,o=void 0),e(1,l={source:"",amount:10,description:"",date:"",type:"expense"}))},m=async()=>{const w=await c.validateFieldIsInvalid(),v=await d.validateFieldIsInvalid(),H=await f.validateFieldIsInvalid(),j=await u.validateFieldIsInvalid();if(w||v||H||j)return;const{actions:{reload:$,createTransaction:it,updateTransaction:mt}}=en();l.id?await mt(l.id,l):await it(l),await $(!0),p()},y=async()=>{if(!l?.id)return;const{actions:{reload:w,deleteTransaction:v}}=en();pi({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async H=>{l?.id&&(H&&await v(l.id),await w(!0),p())}})};function S(w){_t[w?"unshift":"push"](()=>{d=w,e(3,d)})}const D=w=>g(w,"description");function M(w){_t[w?"unshift":"push"](()=>{u=w,e(6,u)})}const C=w=>g(w,"amount");function O(w){_t[w?"unshift":"push"](()=>{c=w,e(2,c)})}const F=w=>g(w,"date");function B(w){_t[w?"unshift":"push"](()=>{f=w,e(4,f)})}const P=w=>g(w,"source");function z(w){_t[w?"unshift":"push"](()=>{h=w,e(5,h)})}const R=w=>g(w,"category-id"),b=w=>g(w,"account-id"),k=w=>g(w,"meta-data-paid");return n.$$set=w=>{"loading"in w&&e(0,i=w.loading),"transaction"in w&&e(11,s=w.transaction),"drawerId"in w&&e(12,a=w.drawerId)},n.$$.update=()=>{n.$$.dirty&10242&&(!s||o!==s?.id)&&(e(1,l=s?{...l,...s,meta_data:{...r,...s.meta_data,from_bill:!1}}:l),e(13,o=l?.id))},[i,l,c,d,f,h,u,g,p,m,y,s,a,o,S,D,M,C,O,F,B,P,z,R,b,k]}class hf extends yt{constructor(t){super(),vt(this,t,df,cf,bt,{loading:0,transaction:11,drawerId:12})}}const{stores:{currentUser:ff}}=Qo();let ze=null;const uf=()=>{const n=$t(Fh);return ze={stores:{featureFlags:n},actions:{featureIsEnabled:e=>{const s=vn(n).find(l=>l.name===e);if(!s)return!1;const o=vn(ff).role;return!!s.roles.find(l=>l===o)&&s.on}}},ze},gf=()=>ze?.stores&&Object.keys(ze.stores).length>0&&ze?.actions&&Object.keys(ze.actions).length>0?ze:uf();function pf(n){let t,e;return t=new ta({}),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p:kt,i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function mf(n){let t,e,i,s;const a=[bf,_f],o=[];function r(l,c){return l[7]?0:1}return t=r(n),e=o[t]=a[t](n),{c(){e.c(),i=Ct()},l(l){e.l(l),i=Ct()},m(l,c){o[t].m(l,c),U(l,i,c),s=!0},p(l,c){let d=t;t=r(l),t===d?o[t].p(l,c):(Mt(),L(o[d],1,1,()=>{o[d]=null}),Tt(),e=o[t],e?e.p(l,c):(e=o[t]=a[t](l),e.c()),A(e,1),e.m(i.parentNode,i))},i(l){s||(A(e),s=!0)},o(l){L(e),s=!1},d(l){l&&x(i),o[t].d(l)}}}function _f(n){let t,e;return t=new Nr({props:{name:"member-list-item-form-new",drawerId:En,transaction:n[5]}}),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&32&&(a.transaction=i[5]),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function bf(n){let t,e;return t=new hf({props:{loading:n[6],drawerId:En,transaction:n[5]}}),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&64&&(a.loading=i[6]),s&32&&(a.transaction=i[5]),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function yf(n){let t,e,i,s;const a=[mf,pf],o=[];function r(l,c){return!l[6]&&l[5]&&!l[2]?0:1}return t=r(n),e=o[t]=a[t](n),{c(){e.c(),i=Ct()},l(l){e.l(l),i=Ct()},m(l,c){o[t].m(l,c),U(l,i,c),s=!0},p(l,c){let d=t;t=r(l),t===d?o[t].p(l,c):(Mt(),L(o[d],1,1,()=>{o[d]=null}),Tt(),e=o[t],e?e.p(l,c):(e=o[t]=a[t](l),e.c()),A(e,1),e.m(i.parentNode,i))},i(l){s||(A(e),s=!0)},o(l){L(e),s=!1},d(l){l&&x(i),o[t].d(l)}}}function Fo(n){let t,e;return t=new Th({props:{budgetPeriods:n[10],drawerId:En,budgetId:n[1]}}),t.$on("budgetIdChange",n[18]),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&1024&&(a.budgetPeriods=i[10]),s&2&&(a.budgetId=i[1]),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function vf(n){let t,e,i=Ft(n[8]*-1)+"",s,a;return{c(){t=I("div"),e=tt("You have spent "),s=tt(i),a=tt(" over budget"),this.h()},l(o){t=E(o,"DIV",{class:!0});var r=N(t);e=et(r,"You have spent "),s=et(r,i),a=et(r," over budget"),r.forEach(x),this.h()},h(){T(t,"class","bg-danger p-3")},m(o,r){U(o,t,r),_(t,e),_(t,s),_(t,a)},p(o,r){r&256&&i!==(i=Ft(o[8]*-1)+"")&&St(s,i)},i:kt,o:kt,d(o){o&&x(t)}}}function wf(n){let t,e,i,s,a;return e=new wh({props:{budget:n[0],moneySpent:n[4],moneyScheduled:n[3]}}),s=new Sh({props:{budget:n[0],moneySpent:n[4],moneyScheduled:n[3]}}),{c(){t=I("div"),X(e.$$.fragment),i=W(),X(s.$$.fragment),this.h()},l(o){t=E(o,"DIV",{class:!0});var r=N(t);q(e.$$.fragment,r),i=V(r),q(s.$$.fragment,r),r.forEach(x),this.h()},h(){T(t,"class","d-flex flex-column gap-3")},m(o,r){U(o,t,r),K(e,t,null),_(t,i),K(s,t,null),a=!0},p(o,r){const l={};r&1&&(l.budget=o[0]),r&16&&(l.moneySpent=o[4]),r&8&&(l.moneyScheduled=o[3]),e.$set(l);const c={};r&1&&(c.budget=o[0]),r&16&&(c.moneySpent=o[4]),r&8&&(c.moneyScheduled=o[3]),s.$set(c)},i(o){a||(A(e.$$.fragment,o),A(s.$$.fragment,o),a=!0)},o(o){L(e.$$.fragment,o),L(s.$$.fragment,o),a=!1},d(o){o&&x(t),G(e),G(s)}}}function xf(n){let t,e,i,s,a,o,r,l,c;t=new Jo({props:{title:n[9],id:En,$$slots:{default:[yf]},$$scope:{ctx:n}}});let d=n[1]&&Fo(n);const f=[wf,vf],h=[];function u(g,p){return g[8]>=0?0:1}return a=u(n),o=h[a]=f[a](n),l=new Lh({props:{drawerId:En}}),{c(){X(t.$$.fragment),e=W(),i=I("div"),d&&d.c(),s=W(),o.c(),r=W(),X(l.$$.fragment),this.h()},l(g){q(t.$$.fragment,g),e=V(g),i=E(g,"DIV",{class:!0});var p=N(i);d&&d.l(p),s=V(p),o.l(p),r=V(p),q(l.$$.fragment,p),p.forEach(x),this.h()},h(){T(i,"class","d-flex flex-column gap-3")},m(g,p){K(t,g,p),U(g,e,p),U(g,i,p),d&&d.m(i,null),_(i,s),h[a].m(i,null),_(i,r),K(l,i,null),c=!0},p(g,[p]){const m={};p&512&&(m.title=g[9]),p&67109092&&(m.$$scope={dirty:p,ctx:g}),t.$set(m),g[1]?d?(d.p(g,p),p&2&&A(d,1)):(d=Fo(g),d.c(),A(d,1),d.m(i,s)):d&&(Mt(),L(d,1,1,()=>{d=null}),Tt());let y=a;a=u(g),a===y?h[a].p(g,p):(Mt(),L(h[y],1,1,()=>{h[y]=null}),Tt(),o=h[a],o?o.p(g,p):(o=h[a]=f[a](g),o.c()),A(o,1),o.m(i,r))},i(g){c||(A(t.$$.fragment,g),A(d),A(o),A(l.$$.fragment,g),c=!0)},o(g){L(t.$$.fragment,g),L(d),L(o),L(l.$$.fragment,g),c=!1},d(g){g&&(x(e),x(i)),G(t,g),d&&d.d(),h[a].d(),G(l)}}}const En="transactions-form";function kf(n,t,e){let i,s,a,o,r,l,c,d,f;const{stores:{targetBudget:h,targetTransaction:u,budgetPeriods:g,budgetEntries:p,currentBudgetEntry:m,moneyScheduled:y,moneySpent:S,startDate:D,endDate:M},actions:{reload:C}}=en();Yt(n,h,k=>e(22,c=k)),Yt(n,u,k=>e(5,d=k)),Yt(n,g,k=>e(10,f=k)),Yt(n,p,k=>e(21,l=k)),Yt(n,m,k=>e(20,r=k)),Yt(n,y,k=>e(3,a=k)),Yt(n,S,k=>e(4,o=k));let O=!1,F=!1,B=0,P,z=!1;const R=k=>{const{value:w}=k.detail;e(1,P=w)};let b=!1;return sn(async()=>{const k=await rr();p.set(k),m.set(Cr(k)),e(1,P=r?.id),e(19,F=!0);const{actions:{featureIsEnabled:w}}=gf();e(7,b=w(Ua.UseNewTransactionsForm))}),gi(Lr),n.$$.update=()=>{if(n.$$.dirty&32&&d&&(e(6,O=!0),setTimeout(()=>{e(6,O=!1)},800)),n.$$.dirty&32&&e(9,i=d?.id?"Edit Expense":"Create Expense"),n.$$.dirty&6291462&&P&&!z&&c?.id!==P&&(h.set(l.find(k=>k.id===P)),c&&c.start_at&&c.end_at)){e(2,z=!0);const k=c.start_at.split("T")[0],w=c.end_at.split("T")[0];D.set(k),M.set(w),C(),e(2,z=!1)}n.$$.dirty&3670018&&F&&l&&P&&(m.set(l.find(k=>k.id===P)),e(0,B=r?.settings?.max_spend_limit??0)),n.$$.dirty&25&&e(8,s=B-(o+a))},[B,P,z,a,o,d,O,b,s,i,f,h,u,g,p,m,y,S,R,F,r,l,c]}class Sf extends yt{constructor(t){super(),vt(this,t,kf,xf,bt,{})}}function Cf(n){let t,e,i;function s(o){n[4](o)}let a={label:"Type",name:"repeat-type",helperText:"",loading:n[1],required:!0,isInvalid:!1,disabled:!1,options:n[3]};return n[0]!==void 0&&(a.value=n[0]),t=new On({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("change",n[2]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&2&&(l.loading=o[1]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}function Mf(n,t,e){let{value:i}=t,{loading:s}=t;const a=ce(),o=()=>{a("valueChanged",{value:i})},r=Er;function l(c){i=c,e(0,i)}return n.$$set=c=>{"value"in c&&e(0,i=c.value),"loading"in c&&e(1,s=c.loading)},[i,s,o,r,l]}class Tf extends yt{constructor(t){super(),vt(this,t,Mf,Cf,bt,{value:0,loading:1})}}function Df(n){let t,e,i;function s(o){n[4](o)}let a={label:"Repeat type",name:"repeat-type",helperText:"",loading:n[1],required:!0,isInvalid:!1,disabled:!1,options:n[3]};return n[0]!==void 0&&(a.value=n[0]),t=new On({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("change",n[2]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&2&&(l.loading=o[1]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}function If(n,t,e){let{value:i}=t,{loading:s}=t;const a=ce(),o=()=>{a("valueChanged",{value:i})},r=Ar;function l(c){i=c,e(0,i)}return n.$$set=c=>{"value"in c&&e(0,i=c.value),"loading"in c&&e(1,s=c.loading)},[i,s,o,r,l]}class Ef extends yt{constructor(t){super(),vt(this,t,If,Df,bt,{value:0,loading:1})}}function Af(n){let t,e,i;function s(o){n[3](o)}let a={label:"Date",name:"repeat-start-date",placeholder:"",helperText:"",loading:n[1],required:!0,isInvalid:!1};return n[0]!==void 0&&(a.value=n[0]),t=new zi({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("valueChanged",n[2]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&2&&(l.loading=o[1]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}function Of(n,t,e){let{value:i}=t,{loading:s}=t;const a=ce(),o=()=>{a("valueChanged",{value:i})};function r(l){i=l,e(0,i)}return n.$$set=l=>{"value"in l&&e(0,i=l.value),"loading"in l&&e(1,s=l.loading)},[i,s,o,r]}class Pf extends yt{constructor(t){super(),vt(this,t,Of,Af,bt,{value:0,loading:1})}}function Rf(n){let t,e,i;function s(o){n[3](o)}let a={label:"End date",name:"repeat-end-date",placeholder:"",helperText:"",loading:n[1],required:!0,isInvalid:!1};return n[0]!==void 0&&(a.value=n[0]),t=new zi({props:a}),_t.push(()=>ie(t,"value",s)),t.$on("valueChanged",n[2]),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,[r]){const l={};r&2&&(l.loading=o[1]),!e&&r&1&&(e=!0,l.value=o[0],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}function Lf(n,t,e){let{value:i}=t,{loading:s}=t;const a=ce(),o=()=>{a("valueChanged",{value:i})};function r(l){i=l,e(0,i)}return n.$$set=l=>{"value"in l&&e(0,i=l.value),"loading"in l&&e(1,s=l.loading)},[i,s,o,r]}class Ff extends yt{constructor(t){super(),vt(this,t,Lf,Rf,bt,{value:0,loading:1})}}function Bo(n,t,e){const i=n.slice();return i[1]=t[e],i[3]=e,i}function zo(n){let t,e,i,s=n[0].length+"",a,o,r,l,c,d=_e(n[0]),f=[];for(let h=0;h<d.length;h+=1)f[h]=Ho(Bo(n,d,h));return{c(){t=I("div"),e=I("div"),i=tt("Dates Preview ("),a=tt(s),o=tt(" entries)"),r=W(),l=I("div"),c=I("ul");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){t=E(h,"DIV",{class:!0});var u=N(t);e=E(u,"DIV",{});var g=N(e);i=et(g,"Dates Preview ("),a=et(g,s),o=et(g," entries)"),g.forEach(x),r=V(u),l=E(u,"DIV",{class:!0});var p=N(l);c=E(p,"UL",{class:!0});var m=N(c);for(let y=0;y<f.length;y+=1)f[y].l(m);m.forEach(x),p.forEach(x),u.forEach(x),this.h()},h(){T(c,"class","list-group list-group-flush"),T(l,"class","preview border border-light-subtle svelte-1qbwz3y"),T(t,"class","d-flex flex-column gap-1")},m(h,u){U(h,t,u),_(t,e),_(e,i),_(e,a),_(e,o),_(t,r),_(t,l),_(l,c);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(c,null)},p(h,u){if(u&1&&s!==(s=h[0].length+"")&&St(a,s),u&1){d=_e(h[0]);let g;for(g=0;g<d.length;g+=1){const p=Bo(h,d,g);f[g]?f[g].p(p,u):(f[g]=Ho(p),f[g].c(),f[g].m(c,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=d.length}},d(h){h&&x(t),An(f,h)}}}function Ho(n){let t,e=n[3]+1+"",i,s,a=he(n[1],"EEE - dd MMM yyyy")+"",o,r;return{c(){t=I("li"),i=tt(e),s=tt(". "),o=tt(a),r=W(),this.h()},l(l){t=E(l,"LI",{class:!0});var c=N(t);i=et(c,e),s=et(c,". "),o=et(c,a),r=V(c),c.forEach(x),this.h()},h(){T(t,"class","list-group-item")},m(l,c){U(l,t,c),_(t,i),_(t,s),_(t,o),_(t,r)},p(l,c){c&1&&a!==(a=he(l[1],"EEE - dd MMM yyyy")+"")&&St(o,a)},d(l){l&&x(t)}}}function Bf(n){let t,e=n[0].length>0&&zo(n);return{c(){e&&e.c(),t=Ct()},l(i){e&&e.l(i),t=Ct()},m(i,s){e&&e.m(i,s),U(i,t,s)},p(i,[s]){i[0].length>0?e?e.p(i,s):(e=zo(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:kt,o:kt,d(i){i&&x(t),e&&e.d(i)}}}function zf(n,t,e){let{dates:i}=t;return n.$$set=s=>{"dates"in s&&e(0,i=s.dates)},[i]}class Hf extends yt{constructor(t){super(),vt(this,t,zf,Bf,bt,{dates:0})}}function No(n){let t,e,i,s,a,o,r,l,c,d,f,h,u,g,p,m,y,S,D,M,C,O={loading:n[0],value:n[1].description};e=new Ka({props:O}),n[13](e),e.$on("valueChanged",n[14]);let F={loading:n[0],value:n[1].amount};s=new Xa({props:F}),n[15](s),s.$on("valueChanged",n[16]);let B={loading:n[0],value:n[1].source};o=new qa({props:B}),n[17](o),o.$on("valueChanged",n[18]),l=new Za({props:{loading:n[0],value:n[1].category_id}}),l.$on("valueChanged",n[19]),d=new Ga({props:{loading:n[0],value:n[1].account_id}}),d.$on("valueChanged",n[20]);let P=n[1]?.meta_data?.transaction?.type&&Wo(n),z=n[1].recurrence&&Vo(n),R=n[1].id&&$o(n);return S=new Ie({props:{loading:n[0],variant:"secondary",$$slots:{default:[Wf]},$$scope:{ctx:n}}}),S.$on("click",n[7]),M=new Ie({props:{loading:n[0],variant:"primary",$$slots:{default:[Vf]},$$scope:{ctx:n}}}),M.$on("click",n[8]),{c(){t=I("div"),X(e.$$.fragment),i=W(),X(s.$$.fragment),a=W(),X(o.$$.fragment),r=W(),X(l.$$.fragment),c=W(),X(d.$$.fragment),f=W(),P&&P.c(),h=W(),z&&z.c(),u=W(),g=I("div"),p=I("div"),R&&R.c(),m=W(),y=I("div"),X(S.$$.fragment),D=W(),X(M.$$.fragment),this.h()},l(b){t=E(b,"DIV",{class:!0});var k=N(t);q(e.$$.fragment,k),i=V(k),q(s.$$.fragment,k),a=V(k),q(o.$$.fragment,k),r=V(k),q(l.$$.fragment,k),c=V(k),q(d.$$.fragment,k),f=V(k),P&&P.l(k),h=V(k),z&&z.l(k),u=V(k),g=E(k,"DIV",{class:!0});var w=N(g);p=E(w,"DIV",{});var v=N(p);R&&R.l(v),v.forEach(x),m=V(w),y=E(w,"DIV",{});var H=N(y);q(S.$$.fragment,H),D=V(H),q(M.$$.fragment,H),H.forEach(x),w.forEach(x),k.forEach(x),this.h()},h(){T(g,"class","d-flex justify-content-between"),T(t,"class","d-flex flex-column gap-3")},m(b,k){U(b,t,k),K(e,t,null),_(t,i),K(s,t,null),_(t,a),K(o,t,null),_(t,r),K(l,t,null),_(t,c),K(d,t,null),_(t,f),P&&P.m(t,null),_(t,h),z&&z.m(t,null),_(t,u),_(t,g),_(g,p),R&&R.m(p,null),_(g,m),_(g,y),K(S,y,null),_(y,D),K(M,y,null),C=!0},p(b,k){const w={};k&1&&(w.loading=b[0]),k&2&&(w.value=b[1].description),e.$set(w);const v={};k&1&&(v.loading=b[0]),k&2&&(v.value=b[1].amount),s.$set(v);const H={};k&1&&(H.loading=b[0]),k&2&&(H.value=b[1].source),o.$set(H);const j={};k&1&&(j.loading=b[0]),k&2&&(j.value=b[1].category_id),l.$set(j);const Y={};k&1&&(Y.loading=b[0]),k&2&&(Y.value=b[1].account_id),d.$set(Y),b[1]?.meta_data?.transaction?.type?P?(P.p(b,k),k&2&&A(P,1)):(P=Wo(b),P.c(),A(P,1),P.m(t,h)):P&&(Mt(),L(P,1,1,()=>{P=null}),Tt()),b[1].recurrence?z?(z.p(b,k),k&2&&A(z,1)):(z=Vo(b),z.c(),A(z,1),z.m(t,u)):z&&(Mt(),L(z,1,1,()=>{z=null}),Tt()),b[1].id?R?(R.p(b,k),k&2&&A(R,1)):(R=$o(b),R.c(),A(R,1),R.m(p,null)):R&&(Mt(),L(R,1,1,()=>{R=null}),Tt());const $={};k&1&&($.loading=b[0]),k&268435456&&($.$$scope={dirty:k,ctx:b}),S.$set($);const it={};k&1&&(it.loading=b[0]),k&268435456&&(it.$$scope={dirty:k,ctx:b}),M.$set(it)},i(b){C||(A(e.$$.fragment,b),A(s.$$.fragment,b),A(o.$$.fragment,b),A(l.$$.fragment,b),A(d.$$.fragment,b),A(P),A(z),A(R),A(S.$$.fragment,b),A(M.$$.fragment,b),C=!0)},o(b){L(e.$$.fragment,b),L(s.$$.fragment,b),L(o.$$.fragment,b),L(l.$$.fragment,b),L(d.$$.fragment,b),L(P),L(z),L(R),L(S.$$.fragment,b),L(M.$$.fragment,b),C=!1},d(b){b&&x(t),n[13](null),G(e),n[15](null),G(s),n[17](null),G(o),G(l),G(d),P&&P.d(),z&&z.d(),R&&R.d(),G(S),G(M)}}}function Wo(n){let t,e;return t=new Tf({props:{loading:n[0],value:n[1].meta_data.transaction.type}}),t.$on("valueChanged",n[21]),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&1&&(a.loading=i[0]),s&2&&(a.value=i[1].meta_data.transaction.type),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function Vo(n){let t,e="Repeats",i,s,a,o,r,l,c,d;s=new Ef({props:{loading:n[0],value:n[1].recurrence.type}}),s.$on("valueChanged",n[22]),o=new Pf({props:{loading:n[0],value:n[1].recurrence.start_date}}),o.$on("valueChanged",n[23]);let f=n[1].recurrence.until&&jo(n);return c=new Hf({props:{dates:n[2]}}),{c(){t=I("h5"),t.textContent=e,i=W(),X(s.$$.fragment),a=W(),X(o.$$.fragment),r=W(),f&&f.c(),l=W(),X(c.$$.fragment)},l(h){t=E(h,"H5",{"data-svelte-h":!0}),lt(t)!=="svelte-13f0n3i"&&(t.textContent=e),i=V(h),q(s.$$.fragment,h),a=V(h),q(o.$$.fragment,h),r=V(h),f&&f.l(h),l=V(h),q(c.$$.fragment,h)},m(h,u){U(h,t,u),U(h,i,u),K(s,h,u),U(h,a,u),K(o,h,u),U(h,r,u),f&&f.m(h,u),U(h,l,u),K(c,h,u),d=!0},p(h,u){const g={};u&1&&(g.loading=h[0]),u&2&&(g.value=h[1].recurrence.type),s.$set(g);const p={};u&1&&(p.loading=h[0]),u&2&&(p.value=h[1].recurrence.start_date),o.$set(p),h[1].recurrence.until?f?(f.p(h,u),u&2&&A(f,1)):(f=jo(h),f.c(),A(f,1),f.m(l.parentNode,l)):f&&(Mt(),L(f,1,1,()=>{f=null}),Tt());const m={};u&4&&(m.dates=h[2]),c.$set(m)},i(h){d||(A(s.$$.fragment,h),A(o.$$.fragment,h),A(f),A(c.$$.fragment,h),d=!0)},o(h){L(s.$$.fragment,h),L(o.$$.fragment,h),L(f),L(c.$$.fragment,h),d=!1},d(h){h&&(x(t),x(i),x(a),x(r),x(l)),G(s,h),G(o,h),f&&f.d(h),G(c,h)}}}function jo(n){let t,e;return t=new Ff({props:{loading:n[0],value:n[1].recurrence.until}}),t.$on("valueChanged",n[24]),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&1&&(a.loading=i[0]),s&2&&(a.value=i[1].recurrence.until),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function $o(n){let t,e;return t=new Ie({props:{loading:n[0],variant:"danger",$$slots:{default:[Nf]},$$scope:{ctx:n}}}),t.$on("click",n[9]),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&1&&(a.loading=i[0]),s&268435456&&(a.$$scope={dirty:s,ctx:i}),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function Nf(n){let t;return{c(){t=tt("Delete")},l(e){t=et(e,"Delete")},m(e,i){U(e,t,i)},d(e){e&&x(t)}}}function Wf(n){let t;return{c(){t=tt("Cancel")},l(e){t=et(e,"Cancel")},m(e,i){U(e,t,i)},d(e){e&&x(t)}}}function Vf(n){let t;return{c(){t=tt("Save")},l(e){t=et(e,"Save")},m(e,i){U(e,t,i)},d(e){e&&x(t)}}}function jf(n){let t,e,i=n[1]&&No(n);return{c(){i&&i.c(),t=Ct()},l(s){i&&i.l(s),t=Ct()},m(s,a){i&&i.m(s,a),U(s,t,a),e=!0},p(s,[a]){s[1]?i?(i.p(s,a),a&2&&A(i,1)):(i=No(s),i.c(),A(i,1),i.m(t.parentNode,t)):i&&(Mt(),L(i,1,1,()=>{i=null}),Tt())},i(s){e||(A(i),e=!0)},o(s){L(i),e=!1},d(s){s&&x(t),i&&i.d(s)}}}function $f(n,t,e){let{loading:i=!1}=t,{bill:s}=t,{drawerId:a}=t,o=[],r=0,l={type:"monthly",start_date:he(new Date,"yyyy-MM-dd"),until:he(br(new Date,12),"yyyy-MM-dd")},d={transaction:{paid:"scheduled",type:"unknown",from_bill:!0}},f={source:"",amount:10,description:"",recurrence:l,meta_data:d},h,u,g;const p=(v,H)=>{const{value:j}=v.detail;if(f&&f.recurrence){switch(H){case"description":e(1,f.description=j,f);break;case"source":e(1,f.source=j,f);break;case"amount":e(1,f.amount=j,f);break;case"category-id":e(1,f.category_id=j,f);break;case"account-id":e(1,f.account_id=j,f);break;case"repeat-type":e(1,f.recurrence.type=j,f);break;case"repeat-start-date":e(1,f.recurrence.start_date=j,f);break;case"repeat-until-date":e(1,f.recurrence.until=j,f);break;case"meta-data-transaction-type":f?.meta_data?.transaction?.type&&e(1,f.meta_data.transaction.type=j,f);break}e(2,o=Ei(f.recurrence))}},m=()=>{const v=`[data-bs-target="#${a}"]`,H=document.querySelector(v);H&&(H.click(),e(10,s=void 0),e(12,r=void 0),e(1,f={source:"",amount:10,description:"",recurrence:l}))},y=async()=>{const v=await h.validateFieldIsInvalid(),H=await u.validateFieldIsInvalid(),j=await g.validateFieldIsInvalid();if(v||H||j)return;const{actions:{reload:$,createBill:it,updateBill:mt}}=tn();f.id?await mt(f.id,f):await it(f),await $(),m()},S=async()=>{if(!f?.id)return;const{actions:{reload:v,deleteBill:H}}=tn();pi({title:"Delete Confirmation",message:"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async j=>{f?.id&&(j&&await H(f.id),await v(),m())}})};function D(v){_t[v?"unshift":"push"](()=>{h=v,e(3,h)})}const M=v=>p(v,"description");function C(v){_t[v?"unshift":"push"](()=>{g=v,e(5,g)})}const O=v=>p(v,"amount");function F(v){_t[v?"unshift":"push"](()=>{u=v,e(4,u)})}const B=v=>p(v,"source"),P=v=>p(v,"category-id"),z=v=>p(v,"account-id"),R=v=>p(v,"meta-data-transaction-type"),b=v=>p(v,"repeat-type"),k=v=>p(v,"repeat-start-date"),w=v=>p(v,"repeat-until-date");return n.$$set=v=>{"loading"in v&&e(0,i=v.loading),"bill"in v&&e(10,s=v.bill),"drawerId"in v&&e(11,a=v.drawerId)},n.$$.update=()=>{if(n.$$.dirty&5122&&(!s||r!==s?.id)){e(1,f=s?{...f,...s,recurrence:{...l,...s.recurrence},meta_data:{...d,...s.meta_data}}:f);const{recurrence:v}=f;e(2,o=v?Ei(v):[]),e(12,r=s?.id)}},[i,f,o,h,u,g,p,m,y,S,s,a,r,D,M,C,O,F,B,P,z,R,b,k,w]}class Yf extends yt{constructor(t){super(),vt(this,t,$f,jf,bt,{loading:0,bill:10,drawerId:11})}}function Yo(n,t,e){const i=n.slice();return i[8]=t[e],i}function Uo(n){let t,e,i=_e(n[1]),s=[];for(let o=0;o<i.length;o+=1)s[o]=qo(Yo(n,i,o));const a=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();t=Ct()},l(o){for(let r=0;r<s.length;r+=1)s[r].l(o);t=Ct()},m(o,r){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(o,r);U(o,t,r),e=!0},p(o,r){if(r&31){i=_e(o[1]);let l;for(l=0;l<i.length;l+=1){const c=Yo(o,i,l);s[l]?(s[l].p(c,r),A(s[l],1)):(s[l]=qo(c),s[l].c(),A(s[l],1),s[l].m(t.parentNode,t))}for(Mt(),l=i.length;l<s.length;l+=1)a(l);Tt()}},i(o){if(!e){for(let r=0;r<i.length;r+=1)A(s[r]);e=!0}},o(o){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)L(s[r]);e=!1},d(o){o&&x(t),An(s,o)}}}function Uf(n){return{c:kt,l:kt,m:kt,p:kt,d:kt}}function Xf(n){let t,e=n[1]+"",i;return{c(){t=I("span"),i=tt(e),this.h()},l(s){t=E(s,"SPAN",{class:!0});var a=N(t);i=et(a,e),a.forEach(x),this.h()},h(){T(t,"class","d-block text-warning")},m(s,a){U(s,t,a),_(t,i)},p(s,a){a&2&&e!==(e=s[1]+"")&&St(i,e)},d(s){s&&x(t)}}}function qf(n){let t;return{c(){t=tt("loading ...")},l(e){t=et(e,"loading ...")},m(e,i){U(e,t,i)},p:kt,d(e){e&&x(t)}}}function Xo(n){let t,e;return t=new Ya({props:{type:n[8].meta_data.transaction.type}}),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,s){const a={};s&2&&(a.type=i[8].meta_data.transaction.type),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function qo(n){let t,e,i=n[8].description+"",s,a,o,r,l,c=n[8].source+"",d,f,h,u,g=n[8]?.recurrence?.type+"",p,m,y=n[8]?.recurrence?.start_date+"",S,D,M,C,O,F,B,P=Ft(n[8].amount)+"",z,R,b,k,w='<i class="bi bi-three-dots-vertical"></i>',v,H,j,Y,$,it='<span>Edit</span> <i class="bi bi-pencil-fill"></i>',mt,Q,ut,gt,ot='<span class="d-flex justify-content-between"><span>Delete</span> <i class="bi bi-trash-fill"></i></span>',rt,At,wt,Wt,Dt={ctx:n,current:null,token:null,hasCatch:!1,pending:qf,then:Xf,catch:Uf,value:1};as(M=n[4](n[8]?.account_id),Dt);let dt=n[8]?.meta_data?.transaction&&Xo(n);function pt(){return n[5](n[8])}function de(){return n[6](n[8])}return{c(){t=I("div"),e=I("div"),s=tt(i),a=W(),o=I("div"),r=I("div"),l=I("div"),d=tt(c),f=W(),h=I("div"),u=I("span"),p=tt(g),m=tt(`
						Bill starting `),S=tt(y),D=W(),Dt.block.c(),C=W(),dt&&dt.c(),O=W(),F=I("div"),B=I("span"),z=tt(P),R=W(),b=I("div"),k=I("span"),k.innerHTML=w,v=W(),H=I("ul"),j=I("li"),Y=I("button"),$=I("span"),$.innerHTML=it,Q=W(),ut=I("li"),gt=I("button"),gt.innerHTML=ot,rt=W(),this.h()},l(zt){t=E(zt,"DIV",{});var st=N(t);e=E(st,"DIV",{class:!0});var Z=N(e);s=et(Z,i),Z.forEach(x),a=V(st),o=E(st,"DIV",{class:!0});var Ot=N(o);r=E(Ot,"DIV",{class:!0});var ht=N(r);l=E(ht,"DIV",{class:!0});var Jt=N(l);d=et(Jt,c),Jt.forEach(x),f=V(ht),h=E(ht,"DIV",{class:!0});var fe=N(h);u=E(fe,"SPAN",{class:!0});var Ae=N(u);p=et(Ae,g),Ae.forEach(x),m=et(fe,`
						Bill starting `),S=et(fe,y),fe.forEach(x),D=V(ht),Dt.block.l(ht),C=V(ht),dt&&dt.l(ht),ht.forEach(x),O=V(Ot),F=E(Ot,"DIV",{class:!0});var be=N(F);B=E(be,"SPAN",{});var Ve=N(B);z=et(Ve,P),Ve.forEach(x),R=V(be),b=E(be,"DIV",{class:!0});var se=N(b);k=E(se,"SPAN",{"data-bs-toggle":!0,"aria-expanded":!0,"data-svelte-h":!0}),lt(k)!=="svelte-8w8uzy"&&(k.innerHTML=w),v=V(se),H=E(se,"UL",{class:!0});var oe=N(H);j=E(oe,"LI",{});var je=N(j);Y=E(je,"BUTTON",{type:!0,class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var Oe=N(Y);$=E(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),lt($)!=="svelte-1rb2cm0"&&($.innerHTML=it),Oe.forEach(x),je.forEach(x),Q=V(oe),ut=E(oe,"LI",{});var Kt=N(ut);gt=E(Kt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),lt(gt)!=="svelte-1bk09ub"&&(gt.innerHTML=ot),Kt.forEach(x),oe.forEach(x),se.forEach(x),be.forEach(x),Ot.forEach(x),rt=V(st),st.forEach(x),this.h()},h(){T(e,"class","fw-bold"),T(l,"class","fw-light"),T(u,"class","text-capitalize"),T(h,"class","fw-lighter text-muted small"),T(r,"class","small"),T(k,"data-bs-toggle","dropdown"),T(k,"aria-expanded","false"),T($,"class","d-flex justify-content-between"),T(Y,"type","button"),T(Y,"class","dropdown-item"),T(Y,"data-bs-toggle","offcanvas"),T(Y,"data-bs-target",mt="#"+n[0]),T(Y,"aria-controls",n[0]),T(gt,"type","button"),T(gt,"class","dropdown-item"),T(H,"class","dropdown-menu dropdown-menu-dark"),T(b,"class","dropdown"),T(F,"class","d-flex align-items-end gap-2"),T(o,"class","d-flex justify-content-between")},m(zt,st){U(zt,t,st),_(t,e),_(e,s),_(t,a),_(t,o),_(o,r),_(r,l),_(l,d),_(r,f),_(r,h),_(h,u),_(u,p),_(h,m),_(h,S),_(r,D),Dt.block.m(r,Dt.anchor=null),Dt.mount=()=>r,Dt.anchor=C,_(r,C),dt&&dt.m(r,null),_(o,O),_(o,F),_(F,B),_(B,z),_(F,R),_(F,b),_(b,k),_(b,v),_(b,H),_(H,j),_(j,Y),_(Y,$),_(H,Q),_(H,ut),_(ut,gt),_(t,rt),At=!0,wt||(Wt=[It(Y,"click",pt),It(gt,"click",de)],wt=!0)},p(zt,st){n=zt,(!At||st&2)&&i!==(i=n[8].description+"")&&St(s,i),(!At||st&2)&&c!==(c=n[8].source+"")&&St(d,c),(!At||st&2)&&g!==(g=n[8]?.recurrence?.type+"")&&St(p,g),(!At||st&2)&&y!==(y=n[8]?.recurrence?.start_date+"")&&St(S,y),Dt.ctx=n,st&2&&M!==(M=n[4](n[8]?.account_id))&&as(M,Dt)||_r(Dt,n,st),n[8]?.meta_data?.transaction?dt?(dt.p(n,st),st&2&&A(dt,1)):(dt=Xo(n),dt.c(),A(dt,1),dt.m(r,null)):dt&&(Mt(),L(dt,1,1,()=>{dt=null}),Tt()),(!At||st&2)&&P!==(P=Ft(n[8].amount)+"")&&St(z,P),(!At||st&1&&mt!==(mt="#"+n[0]))&&T(Y,"data-bs-target",mt),(!At||st&1)&&T(Y,"aria-controls",n[0])},i(zt){At||(A(dt),At=!0)},o(zt){L(dt),At=!1},d(zt){zt&&x(t),Dt.block.d(),Dt.token=null,Dt=null,dt&&dt.d(),wt=!1,Bi(Wt)}}}function Kf(n){let t,e,i=n[1].length&&Uo(n);return{c(){i&&i.c(),t=Ct()},l(s){i&&i.l(s),t=Ct()},m(s,a){i&&i.m(s,a),U(s,t,a),e=!0},p(s,[a]){s[1].length?i?(i.p(s,a),a&2&&A(i,1)):(i=Uo(s),i.c(),A(i,1),i.m(t.parentNode,t)):i&&(Mt(),L(i,1,1,()=>{i=null}),Tt())},i(s){e||(A(i),e=!0)},o(s){L(i),e=!1},d(s){s&&x(t),i&&i.d(s)}}}function Gf(n,t,e){let{data:i=[]}=t,{drawerId:s=""}=t;const{actions:{getAccount:a}}=aa(),o=async f=>{if(!f)return;const{actions:{canDeleteBill:h,deleteBill:u,reload:g}}=tn(),p=await h(f);pi({title:"Delete Confirmation",message:p?"Are you sure you want to do this? You won't be able to undo this.":"There are uses of this bill in transactions. You cannot delete it",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",confirmButtonHide:!p,rejectButtonLabel:p?"No":"Close",callback:async y=>{f&&y&&p&&(await u(f),await g())}})},r=f=>{const{stores:{targetBill:h,loading:u}}=tn();u.set(!0),setTimeout(()=>{h.set(f),u.set(!1)},800)},l=async f=>f?(await a(f))?.name??"":"",c=f=>r(f),d=f=>o(f.id);return n.$$set=f=>{"data"in f&&e(1,i=f.data),"drawerId"in f&&e(0,s=f.drawerId)},[s,i,o,r,l,c,d]}class Zf extends yt{constructor(t){super(),vt(this,t,Gf,Kf,bt,{data:1,drawerId:0})}}function Qf(n){let t,e;return t=new ta({}),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p:kt,i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}function Jf(n){let t,e,i;function s(o){n[8](o)}let a={bill:n[0],drawerId:yn};return n[2]!==void 0&&(a.loading=n[2]),t=new Yf({props:a}),_t.push(()=>ie(t,"loading",s)),{c(){X(t.$$.fragment)},l(o){q(t.$$.fragment,o)},m(o,r){K(t,o,r),i=!0},p(o,r){const l={};r&1&&(l.bill=o[0]),!e&&r&4&&(e=!0,l.loading=o[2],ne(()=>e=!1)),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){G(t,o)}}}function tu(n){let t,e,i,s;const a=[Jf,Qf],o=[];function r(l,c){return l[2]?1:0}return t=r(n),e=o[t]=a[t](n),{c(){e.c(),i=Ct()},l(l){e.l(l),i=Ct()},m(l,c){o[t].m(l,c),U(l,i,c),s=!0},p(l,c){let d=t;t=r(l),t===d?o[t].p(l,c):(Mt(),L(o[d],1,1,()=>{o[d]=null}),Tt(),e=o[t],e?e.p(l,c):(e=o[t]=a[t](l),e.c()),A(e,1),e.m(i.parentNode,i))},i(l){s||(A(e),s=!0)},o(l){L(e),s=!1},d(l){l&&x(i),o[t].d(l)}}}function eu(n){let t;return{c(){t=I("i"),this.h()},l(e){t=E(e,"I",{class:!0}),N(t).forEach(x),this.h()},h(){T(t,"class","bi bi-plus")},m(e,i){U(e,t,i)},p:kt,d(e){e&&x(t)}}}function nu(n){let t,e,i,s,a,o,r,l,c;return t=new Jo({props:{title:n[1],id:yn,$$slots:{default:[tu]},$$scope:{ctx:n}}}),o=new Ie({props:{variant:"primary",size:"sm","data-bs-toggle":"offcanvas","data-bs-target":"#"+yn,"aria-controls":yn,$$slots:{default:[eu]},$$scope:{ctx:n}}}),o.$on("click",n[7]),l=new Zf({props:{drawerId:yn,data:n[3]}}),{c(){X(t.$$.fragment),e=W(),i=I("div"),s=I("div"),a=I("div"),X(o.$$.fragment),r=W(),X(l.$$.fragment),this.h()},l(d){q(t.$$.fragment,d),e=V(d),i=E(d,"DIV",{class:!0});var f=N(i);s=E(f,"DIV",{class:!0});var h=N(s);a=E(h,"DIV",{});var u=N(a);q(o.$$.fragment,u),u.forEach(x),h.forEach(x),r=V(f),q(l.$$.fragment,f),f.forEach(x),this.h()},h(){T(s,"class","d-flex justify-content-end align-items-center"),T(i,"class","d-flex flex-column gap-3")},m(d,f){K(t,d,f),U(d,e,f),U(d,i,f),_(i,s),_(s,a),K(o,a,null),_(i,r),K(l,i,null),c=!0},p(d,[f]){const h={};f&2&&(h.title=d[1]),f&2053&&(h.$$scope={dirty:f,ctx:d}),t.$set(h);const u={};f&2048&&(u.$$scope={dirty:f,ctx:d}),o.$set(u);const g={};f&8&&(g.data=d[3]),l.$set(g)},i(d){c||(A(t.$$.fragment,d),A(o.$$.fragment,d),A(l.$$.fragment,d),c=!0)},o(d){L(t.$$.fragment,d),L(o.$$.fragment,d),L(l.$$.fragment,d),c=!1},d(d){d&&(x(e),x(i)),G(t,d),G(o),G(l)}}}const yn="bill-form";function iu(n,t,e){let i,s,a,o;const{stores:{data:r,targetBill:l,loading:c},actions:{reload:d}}=tn();Yt(n,r,g=>e(3,o=g)),Yt(n,l,g=>e(0,s=g)),Yt(n,c,g=>e(2,a=g));const f={description:"",source:"",amount:0},h=()=>{c.set(!0),setTimeout(()=>{l.set(f),c.set(!1)},1500)};sn(d),gi(Pr);function u(g){a=g,c.set(a)}return n.$$.update=()=>{n.$$.dirty&1&&e(1,i=s?.id?"Edit Bill":"Create Bill")},[s,i,a,o,r,l,c,h,u]}class su extends yt{constructor(t){super(),vt(this,t,iu,nu,bt,{})}}function ou(n){let t,e='<div class="nav nav-tabs" id="nav-tab" role="tablist"><button class="nav-link active" id="nav-expenses-tab" data-bs-toggle="tab" data-bs-target="#nav-expenses" type="button" role="tab" aria-controls="nav-expenses" aria-selected="false">Expenses</button> <button class="nav-link" id="nav-bills-tab" data-bs-toggle="tab" data-bs-target="#nav-bills" type="button" role="tab" aria-controls="nav-bills" aria-selected="true">Bills</button></div>',i,s,a,o,r,l,c,d,f;return r=new Sf({}),d=new su({}),{c(){t=I("nav"),t.innerHTML=e,i=W(),s=I("div"),a=I("div"),o=I("div"),X(r.$$.fragment),l=W(),c=I("div"),X(d.$$.fragment),this.h()},l(h){t=E(h,"NAV",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-10sq6lc"&&(t.innerHTML=e),i=V(h),s=E(h,"DIV",{class:!0,id:!0});var u=N(s);a=E(u,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var g=N(a);o=E(g,"DIV",{class:!0});var p=N(o);q(r.$$.fragment,p),p.forEach(x),g.forEach(x),l=V(u),c=E(u,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var m=N(c);q(d.$$.fragment,m),m.forEach(x),u.forEach(x),this.h()},h(){T(t,"class","d-print-none"),T(o,"class","d-flex flex-column gap-4"),T(a,"class","tab-pane fade active show"),T(a,"id","nav-expenses"),T(a,"role","tabpanel"),T(a,"aria-labelledby","nav-expenses-tab"),T(a,"tabindex","0"),T(c,"class","tab-pane fade"),T(c,"id","nav-bills"),T(c,"role","tabpanel"),T(c,"aria-labelledby","nav-bills-tab"),T(c,"tabindex","0"),T(s,"class","tab-content"),T(s,"id","nav-tab-content")},m(h,u){U(h,t,u),U(h,i,u),U(h,s,u),_(s,a),_(a,o),K(r,o,null),_(s,l),_(s,c),K(d,c,null),f=!0},p:kt,i(h){f||(A(r.$$.fragment,h),A(d.$$.fragment,h),f=!0)},o(h){L(r.$$.fragment,h),L(d.$$.fragment,h),f=!1},d(h){h&&(x(t),x(i),x(s)),G(r),G(d)}}}function au(n){let t,e;return t=new or({props:{pageTitle:"Expenses",$$slots:{default:[ou]},$$scope:{ctx:n}}}),{c(){X(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,s){K(t,i,s),e=!0},p(i,[s]){const a={};s&1&&(a.$$scope={dirty:s,ctx:i}),t.$set(a)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){L(t.$$.fragment,i),e=!1},d(i){G(t,i)}}}class xu extends yt{constructor(t){super(),vt(this,t,null,au,bt,{})}}export{xu as component,bu as universal};
