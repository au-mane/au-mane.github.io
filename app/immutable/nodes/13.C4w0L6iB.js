import{s as q,E as x,a6 as de,Y as we,z as j,n as E,d as v,e as k,b as D,i as I,j as C,f as A,m as p,o as b,t as Y,l as R,v as U,K as ke,k as J,G as be,p as ce,x as qe,q as ne,r as Ie,a7 as ze,X as Je}from"../chunks/scheduler.D0aYECZP.js";import{S as z,i as X,f as ge,c as L,b as S,m as N,t as T,a as y,d as V,g as re,e as se}from"../chunks/index.DKSt-8--.js";import{P as Qe}from"../chunks/PageLayout.BGw6Kvqn.js";import{B as Q,c as pe,D as Xe,F as Ge,s as We}from"../chunks/FormSkeleton.DOsiBcVP.js";import{T as Ke,g as ue,d as Ze,S as xe,a as fe,b as et}from"../chunks/categories.state.U_jQ1ggN.js";import{e as le}from"../chunks/Header.B_mgBu9O.js";import{w as tt}from"../chunks/index.2cg2wEKR.js";const at=!0,ua=Object.freeze(Object.defineProperty({__proto__:null,prerender:at},Symbol.toStringTag,{value:"Module"}));function nt(r){let e,a,t;function l(n){r[7](n)}let s={label:"Name",name:"category-name",placeholder:"",helperText:r[3],loading:r[1],required:!0,isInvalid:r[2]};return r[0]!==void 0&&(s.value=r[0]),e=new Ke({props:s}),x.push(()=>ge(e,"value",l)),e.$on("valueChanged",r[4]),{c(){L(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,i){N(e,n,i),t=!0},p(n,[i]){const o={};i&8&&(o.helperText=n[3]),i&2&&(o.loading=n[1]),i&4&&(o.isInvalid=n[2]),!a&&i&1&&(a=!0,o.value=n[0],de(()=>a=!1)),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}const lt="Pick a name for the category. i.e. Grocery, Subscriptions",rt="This field is required";function st(r,e,a){let t,l,{value:s}=e,{loading:n}=e;async function i(){return new Promise(g=>{setTimeout(()=>{a(6,u=!0),g(u&&!s.trim())})})}const o=we(),c=()=>{o("valueChanged",{value:s}),a(6,u=!0)};let u=!1;function f(g){s=g,a(0,s)}return r.$$set=g=>{"value"in g&&a(0,s=g.value),"loading"in g&&a(1,n=g.loading)},r.$$.update=()=>{r.$$.dirty&65&&a(2,t=u&&s.trim()===""),r.$$.dirty&4&&a(3,l=t?rt:lt)},[s,n,t,l,c,i,u,f]}class it extends z{constructor(e){super(),X(this,e,st,nt,q,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}function Le(r){let e,a,t,l,s,n,i,o,c,u,f,g={loading:r[0],value:r[1].name};a=new it({props:g}),r[10](a),a.$on("valueChanged",r[11]);let _=r[1].id&&Se(r);return o=new Q({props:{loading:r[0],variant:"secondary",$$slots:{default:[ct]},$$scope:{ctx:r}}}),o.$on("click",r[4]),u=new Q({props:{loading:r[0],variant:"primary",$$slots:{default:[ut]},$$scope:{ctx:r}}}),u.$on("click",r[5]),{c(){e=k("div"),L(a.$$.fragment),t=D(),l=k("div"),s=k("div"),_&&_.c(),n=D(),i=k("div"),L(o.$$.fragment),c=D(),L(u.$$.fragment),this.h()},l(h){e=I(h,"DIV",{class:!0});var d=C(e);S(a.$$.fragment,d),t=A(d),l=I(d,"DIV",{class:!0});var m=C(l);s=I(m,"DIV",{});var $=C(s);_&&_.l($),$.forEach(v),n=A(m),i=I(m,"DIV",{});var w=C(i);S(o.$$.fragment,w),c=A(w),S(u.$$.fragment,w),w.forEach(v),m.forEach(v),d.forEach(v),this.h()},h(){p(l,"class","d-flex justify-content-between"),p(e,"class","d-flex flex-column gap-3")},m(h,d){E(h,e,d),N(a,e,null),b(e,t),b(e,l),b(l,s),_&&_.m(s,null),b(l,n),b(l,i),N(o,i,null),b(i,c),N(u,i,null),f=!0},p(h,d){const m={};d&1&&(m.loading=h[0]),d&2&&(m.value=h[1].name),a.$set(m),h[1].id?_?(_.p(h,d),d&2&&T(_,1)):(_=Se(h),_.c(),T(_,1),_.m(s,null)):_&&(re(),y(_,1,1,()=>{_=null}),se());const $={};d&1&&($.loading=h[0]),d&4096&&($.$$scope={dirty:d,ctx:h}),o.$set($);const w={};d&1&&(w.loading=h[0]),d&4096&&(w.$$scope={dirty:d,ctx:h}),u.$set(w)},i(h){f||(T(a.$$.fragment,h),T(_),T(o.$$.fragment,h),T(u.$$.fragment,h),f=!0)},o(h){y(a.$$.fragment,h),y(_),y(o.$$.fragment,h),y(u.$$.fragment,h),f=!1},d(h){h&&v(e),r[10](null),V(a),_&&_.d(),V(o),V(u)}}}function Se(r){let e,a;return e=new Q({props:{loading:r[0],variant:"danger",$$slots:{default:[ot]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){N(e,t,l),a=!0},p(t,l){const s={};l&1&&(s.loading=t[0]),l&4096&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function ot(r){let e;return{c(){e=Y("Delete")},l(a){e=R(a,"Delete")},m(a,t){E(a,e,t)},d(a){a&&v(e)}}}function ct(r){let e;return{c(){e=Y("Cancel")},l(a){e=R(a,"Cancel")},m(a,t){E(a,e,t)},d(a){a&&v(e)}}}function ut(r){let e;return{c(){e=Y("Save")},l(a){e=R(a,"Save")},m(a,t){E(a,e,t)},d(a){a&&v(e)}}}function ft(r){let e,a,t=r[1]&&Le(r);return{c(){t&&t.c(),e=j()},l(l){t&&t.l(l),e=j()},m(l,s){t&&t.m(l,s),E(l,e,s),a=!0},p(l,[s]){l[1]?t?(t.p(l,s),s&2&&T(t,1)):(t=Le(l),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(re(),y(t,1,1,()=>{t=null}),se())},i(l){a||(T(t),a=!0)},o(l){y(t),a=!1},d(l){l&&v(e),t&&t.d(l)}}}function dt(r,e,a){let{loading:t=!1}=e,{category:l}=e,{drawerId:s}=e,n=0,i={name:""},o;const c=(d,m)=>{const{value:$}=d.detail;if(i)switch(m){case"name":a(1,i.name=$,i);break}},u=()=>{const d=`[data-bs-target="#${s}"]`,m=document.querySelector(d);m&&(m.click(),a(7,l=void 0),a(9,n=void 0),a(1,i={name:""}))},f=async()=>{if(await o.validateFieldIsInvalid())return;const{actions:{reload:m,createCategory:$,updateCategory:w}}=ue();i.id?await w(i.id,i):await $(i),await m(),u()},g=async()=>{if(!i?.id)return;const{actions:{reload:d,deleteCategory:m}}=ue();pe({title:"Delete Confirmation",message:"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async $=>{i?.id&&($&&await m(i.id),await d(),u())}})};function _(d){x[d?"unshift":"push"](()=>{o=d,a(2,o)})}const h=d=>c(d,"name");return r.$$set=d=>{"loading"in d&&a(0,t=d.loading),"category"in d&&a(7,l=d.category),"drawerId"in d&&a(8,s=d.drawerId)},r.$$.update=()=>{r.$$.dirty&642&&(!l||n!==l?.id)&&(a(1,i=l?{...i,...l}:i),a(9,n=l?.id))},[t,i,o,c,u,f,g,l,s,n,_,h]}class gt extends z{constructor(e){super(),X(this,e,dt,ft,q,{loading:0,category:7,drawerId:8})}}function Ne(r,e,a){const t=r.slice();return t[6]=e[a],t}function Ve(r){let e,a=le(r[0]),t=[];for(let l=0;l<a.length;l+=1)t[l]=He(Ne(r,a,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=j()},l(l){for(let s=0;s<t.length;s+=1)t[s].l(l);e=j()},m(l,s){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(l,s);E(l,e,s)},p(l,s){if(s&15){a=le(l[0]);let n;for(n=0;n<a.length;n+=1){const i=Ne(l,a,n);t[n]?t[n].p(i,s):(t[n]=He(i),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=a.length}},d(l){l&&v(e),ke(t,l)}}}function He(r){let e,a,t=r[6].name+"",l,s,n,i,o='<i class="bi bi-three-dots-vertical"></i>',c,u,f,g,_,h='<span>Edit</span> <i class="bi bi-pencil-fill"></i>',d,m,$,w,H='<span class="d-flex justify-content-between"><span>Delete</span> <i class="bi bi-trash-fill"></i></span>',B,P,ee;function W(){return r[4](r[6])}function O(){return r[5](r[6])}return{c(){e=k("div"),a=k("div"),l=Y(t),s=D(),n=k("div"),i=k("span"),i.innerHTML=o,c=D(),u=k("ul"),f=k("li"),g=k("button"),_=k("span"),_.innerHTML=h,m=D(),$=k("li"),w=k("button"),w.innerHTML=H,B=D(),this.h()},l(G){e=I(G,"DIV",{class:!0});var F=C(e);a=I(F,"DIV",{class:!0});var te=C(a);l=R(te,t),te.forEach(v),s=A(F),n=I(F,"DIV",{class:!0});var Z=C(n);i=I(Z,"SPAN",{"data-bs-toggle":!0,"aria-expanded":!0,"data-svelte-h":!0}),J(i)!=="svelte-r1z1n6"&&(i.innerHTML=o),c=A(Z),u=I(Z,"UL",{class:!0});var ae=C(u);f=I(ae,"LI",{});var me=C(f);g=I(me,"BUTTON",{type:!0,class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var K=C(g);_=I(K,"SPAN",{class:!0,"data-svelte-h":!0}),J(_)!=="svelte-16nxiu"&&(_.innerHTML=h),K.forEach(v),me.forEach(v),m=A(ae),$=I(ae,"LI",{});var M=C($);w=I(M,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(w)!=="svelte-bnsm9c"&&(w.innerHTML=H),M.forEach(v),ae.forEach(v),Z.forEach(v),B=A(F),F.forEach(v),this.h()},h(){p(a,"class","fw-bold"),p(i,"data-bs-toggle","dropdown"),p(i,"aria-expanded","false"),p(_,"class","d-flex justify-content-between"),p(g,"type","button"),p(g,"class","dropdown-item"),p(g,"data-bs-toggle","offcanvas"),p(g,"data-bs-target",d="#"+r[1]),p(g,"aria-controls",r[1]),p(w,"type","button"),p(w,"class","dropdown-item"),p(u,"class","dropdown-menu dropdown-menu-dark"),p(n,"class","dropdown"),p(e,"class","d-flex justify-content-between")},m(G,F){E(G,e,F),b(e,a),b(a,l),b(e,s),b(e,n),b(n,i),b(n,c),b(n,u),b(u,f),b(f,g),b(g,_),b(u,m),b(u,$),b($,w),b(e,B),P||(ee=[be(g,"click",W),be(w,"click",O)],P=!0)},p(G,F){r=G,F&1&&t!==(t=r[6].name+"")&&ce(l,t),F&2&&d!==(d="#"+r[1])&&p(g,"data-bs-target",d),F&2&&p(g,"aria-controls",r[1])},d(G){G&&v(e),P=!1,qe(ee)}}}function mt(r){let e,a=r[0].length&&Ve(r);return{c(){a&&a.c(),e=j()},l(t){a&&a.l(t),e=j()},m(t,l){a&&a.m(t,l),E(t,e,l)},p(t,[l]){t[0].length?a?a.p(t,l):(a=Ve(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:U,o:U,d(t){t&&v(e),a&&a.d(t)}}}function _t(r,e,a){let{data:t=[]}=e,{drawerId:l=""}=e;const s=async c=>{if(!c)return;const{actions:{canDeleteCategory:u,deleteCategory:f,reload:g}}=ue(),_=await u(c);pe({title:"Delete Confirmation",message:_?"Are you sure you want to do this? You won't be able to undo this.":"There are uses of this category in transactions. You cannot delete it",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",confirmButtonHide:!_,rejectButtonLabel:_?"No":"Close",callback:async d=>{c&&d&&_&&(await f(c),await g())}})},n=c=>{const{stores:{targetCategory:u,loading:f}}=ue();f.set(!0),setTimeout(()=>{u.set(c),f.set(!1)},800)},i=c=>n(c),o=c=>s(c.id);return r.$$set=c=>{"data"in c&&a(0,t=c.data),"drawerId"in c&&a(1,l=c.drawerId)},[t,l,s,n,i,o]}class ht extends z{constructor(e){super(),X(this,e,_t,mt,q,{data:0,drawerId:1})}}function vt(r){let e,a;return e=new Ge({}),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){N(e,t,l),a=!0},p:U,i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function bt(r){let e,a,t;function l(n){r[8](n)}let s={category:r[0],drawerId:ie};return r[2]!==void 0&&(s.loading=r[2]),e=new gt({props:s}),x.push(()=>ge(e,"loading",l)),{c(){L(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,i){N(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.category=n[0]),!a&&i&4&&(a=!0,o.loading=n[2],de(()=>a=!1)),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function pt(r){let e,a,t,l;const s=[bt,vt],n=[];function i(o,c){return o[2]?1:0}return e=i(r),a=n[e]=s[e](r),{c(){a.c(),t=j()},l(o){a.l(o),t=j()},m(o,c){n[e].m(o,c),E(o,t,c),l=!0},p(o,c){let u=e;e=i(o),e===u?n[e].p(o,c):(re(),y(n[u],1,1,()=>{n[u]=null}),se(),a=n[e],a?a.p(o,c):(a=n[e]=s[e](o),a.c()),T(a,1),a.m(t.parentNode,t))},i(o){l||(T(a),l=!0)},o(o){y(a),l=!1},d(o){o&&v(t),n[e].d(o)}}}function $t(r){let e;return{c(){e=k("i"),this.h()},l(a){e=I(a,"I",{class:!0}),C(e).forEach(v),this.h()},h(){p(e,"class","bi bi-plus")},m(a,t){E(a,e,t)},p:U,d(a){a&&v(e)}}}function wt(r){let e,a,t,l,s,n,i,o,c;return e=new Xe({props:{title:r[1],id:ie,$$slots:{default:[pt]},$$scope:{ctx:r}}}),n=new Q({props:{variant:"primary",size:"sm","data-bs-toggle":"offcanvas","data-bs-target":"#"+ie,"aria-controls":ie,$$slots:{default:[$t]},$$scope:{ctx:r}}}),n.$on("click",r[7]),o=new ht({props:{drawerId:ie,data:r[3]}}),{c(){L(e.$$.fragment),a=D(),t=k("div"),l=k("div"),s=k("div"),L(n.$$.fragment),i=D(),L(o.$$.fragment),this.h()},l(u){S(e.$$.fragment,u),a=A(u),t=I(u,"DIV",{class:!0});var f=C(t);l=I(f,"DIV",{class:!0});var g=C(l);s=I(g,"DIV",{});var _=C(s);S(n.$$.fragment,_),_.forEach(v),g.forEach(v),i=A(f),S(o.$$.fragment,f),f.forEach(v),this.h()},h(){p(l,"class","d-flex justify-content-end align-items-center"),p(t,"class","d-flex flex-column gap-3")},m(u,f){N(e,u,f),E(u,a,f),E(u,t,f),b(t,l),b(l,s),N(n,s,null),b(t,i),N(o,t,null),c=!0},p(u,[f]){const g={};f&2&&(g.title=u[1]),f&2053&&(g.$$scope={dirty:f,ctx:u}),e.$set(g);const _={};f&2048&&(_.$$scope={dirty:f,ctx:u}),n.$set(_);const h={};f&8&&(h.data=u[3]),o.$set(h)},i(u){c||(T(e.$$.fragment,u),T(n.$$.fragment,u),T(o.$$.fragment,u),c=!0)},o(u){y(e.$$.fragment,u),y(n.$$.fragment,u),y(o.$$.fragment,u),c=!1},d(u){u&&(v(a),v(t)),V(e,u),V(n),V(o)}}}const ie="category-form";function kt(r,e,a){let t,l,s,n;const{stores:{data:i,targetCategory:o,loading:c},actions:{reload:u}}=ue();ne(r,i,h=>a(3,n=h)),ne(r,o,h=>a(0,l=h)),ne(r,c,h=>a(2,s=h));const f={name:""},g=()=>{c.set(!0),setTimeout(()=>{o.set(f),c.set(!1)},1500)};Ie(u),ze(Ze);function _(h){s=h,c.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&a(1,t=l?.id?"Edit Category":"Create Category")},[l,t,s,n,i,o,c,g,_]}class It extends z{constructor(e){super(),X(this,e,kt,wt,q,{})}}function Ct(r){let e,a,t;function l(n){r[7](n)}let s={label:"Name",name:"account-name-field",placeholder:"",helperText:r[3],loading:r[1],required:!0,isInvalid:r[2]};return r[0]!==void 0&&(s.value=r[0]),e=new Ke({props:s}),x.push(()=>ge(e,"value",l)),e.$on("valueChanged",r[4]),{c(){L(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,i){N(e,n,i),t=!0},p(n,[i]){const o={};i&8&&(o.helperText=n[3]),i&2&&(o.loading=n[1]),i&4&&(o.isInvalid=n[2]),!a&&i&1&&(a=!0,o.value=n[0],de(()=>a=!1)),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}const Tt="Account name i.e. Chase, American Express, America First",yt="This field is required";function Et(r,e,a){let t,l,{value:s}=e,{loading:n}=e;async function i(){return new Promise(g=>{setTimeout(()=>{a(6,u=!0),g(u&&!s.trim())})})}const o=we(),c=()=>{o("valueChanged",{value:s}),a(6,u=!0)};let u=!1;function f(g){s=g,a(0,s)}return r.$$set=g=>{"value"in g&&a(0,s=g.value),"loading"in g&&a(1,n=g.loading)},r.$$.update=()=>{r.$$.dirty&65&&a(2,t=u&&!s.trim()),r.$$.dirty&4&&a(3,l=t?yt:Tt)},[s,n,t,l,c,i,u,f]}class Dt extends z{constructor(e){super(),X(this,e,Et,Ct,q,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}const At={creditCard:{label:"Credit Card",value:"credit-card",sort_order:0},checkings:{label:"Checkings",value:"checkings",sort_order:1},savings:{label:"Savings",value:"savings",sort_order:2},cash:{label:"Cash",value:"cash",sort_order:3},check:{label:"Check",value:"check",sort_order:4},other:{label:"Other",value:"other",sort_order:5}},Lt=Object.values(At).sort((r,e)=>r.sort_order-e.sort_order).map(r=>({key:r.label,value:r.value}));function St(r){let e,a,t;function l(n){r[4](n)}let s={label:"Account type",name:"account-type",helperText:Nt,loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(s.value=r[0]),e=new xe({props:s}),x.push(()=>ge(e,"value",l)),e.$on("change",r[2]),{c(){L(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,i){N(e,n,i),t=!0},p(n,[i]){const o={};i&2&&(o.loading=n[1]),!a&&i&1&&(a=!0,o.value=n[0],de(()=>a=!1)),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}const Nt="Specify the account type as follows Credit Card, Savings, Checking etc";function Vt(r,e,a){let{value:t}=e,{loading:l}=e;const s=we(),n=()=>{s("valueChanged",{value:t})},i=Lt;function o(c){t=c,a(0,t)}return r.$$set=c=>{"value"in c&&a(0,t=c.value),"loading"in c&&a(1,l=c.loading)},[t,l,n,i,o]}class Ht extends z{constructor(e){super(),X(this,e,Vt,St,q,{value:0,loading:1})}}function Be(r){let e,a,t,l,s,n,i,o,c,u,f,g,_,h={loading:r[0],value:r[1].name};a=new Dt({props:h}),r[10](a),a.$on("valueChanged",r[11]),l=new Ht({props:{loading:r[0],value:r[1].type}}),l.$on("valueChanged",r[12]);let d=r[1].id&&je(r);return u=new Q({props:{loading:r[0],variant:"secondary",$$slots:{default:[jt]},$$scope:{ctx:r}}}),u.$on("click",r[4]),g=new Q({props:{loading:r[0],variant:"primary",$$slots:{default:[Ft]},$$scope:{ctx:r}}}),g.$on("click",r[5]),{c(){e=k("div"),L(a.$$.fragment),t=D(),L(l.$$.fragment),s=D(),n=k("div"),i=k("div"),d&&d.c(),o=D(),c=k("div"),L(u.$$.fragment),f=D(),L(g.$$.fragment),this.h()},l(m){e=I(m,"DIV",{class:!0});var $=C(e);S(a.$$.fragment,$),t=A($),S(l.$$.fragment,$),s=A($),n=I($,"DIV",{class:!0});var w=C(n);i=I(w,"DIV",{});var H=C(i);d&&d.l(H),H.forEach(v),o=A(w),c=I(w,"DIV",{});var B=C(c);S(u.$$.fragment,B),f=A(B),S(g.$$.fragment,B),B.forEach(v),w.forEach(v),$.forEach(v),this.h()},h(){p(n,"class","d-flex justify-content-between"),p(e,"class","d-flex flex-column gap-3")},m(m,$){E(m,e,$),N(a,e,null),b(e,t),N(l,e,null),b(e,s),b(e,n),b(n,i),d&&d.m(i,null),b(n,o),b(n,c),N(u,c,null),b(c,f),N(g,c,null),_=!0},p(m,$){const w={};$&1&&(w.loading=m[0]),$&2&&(w.value=m[1].name),a.$set(w);const H={};$&1&&(H.loading=m[0]),$&2&&(H.value=m[1].type),l.$set(H),m[1].id?d?(d.p(m,$),$&2&&T(d,1)):(d=je(m),d.c(),T(d,1),d.m(i,null)):d&&(re(),y(d,1,1,()=>{d=null}),se());const B={};$&1&&(B.loading=m[0]),$&8192&&(B.$$scope={dirty:$,ctx:m}),u.$set(B);const P={};$&1&&(P.loading=m[0]),$&8192&&(P.$$scope={dirty:$,ctx:m}),g.$set(P)},i(m){_||(T(a.$$.fragment,m),T(l.$$.fragment,m),T(d),T(u.$$.fragment,m),T(g.$$.fragment,m),_=!0)},o(m){y(a.$$.fragment,m),y(l.$$.fragment,m),y(d),y(u.$$.fragment,m),y(g.$$.fragment,m),_=!1},d(m){m&&v(e),r[10](null),V(a),V(l),d&&d.d(),V(u),V(g)}}}function je(r){let e,a;return e=new Q({props:{loading:r[0],variant:"danger",$$slots:{default:[Bt]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){N(e,t,l),a=!0},p(t,l){const s={};l&1&&(s.loading=t[0]),l&8192&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function Bt(r){let e;return{c(){e=Y("Delete")},l(a){e=R(a,"Delete")},m(a,t){E(a,e,t)},d(a){a&&v(e)}}}function jt(r){let e;return{c(){e=Y("Cancel")},l(a){e=R(a,"Cancel")},m(a,t){E(a,e,t)},d(a){a&&v(e)}}}function Ft(r){let e;return{c(){e=Y("Save")},l(a){e=R(a,"Save")},m(a,t){E(a,e,t)},d(a){a&&v(e)}}}function Mt(r){let e,a,t=r[1]&&Be(r);return{c(){t&&t.c(),e=j()},l(l){t&&t.l(l),e=j()},m(l,s){t&&t.m(l,s),E(l,e,s),a=!0},p(l,[s]){l[1]?t?(t.p(l,s),s&2&&T(t,1)):(t=Be(l),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(re(),y(t,1,1,()=>{t=null}),se())},i(l){a||(T(t),a=!0)},o(l){y(t),a=!1},d(l){l&&v(e),t&&t.d(l)}}}function Pt(r,e,a){let{loading:t=!1}=e,{account:l}=e,{drawerId:s}=e,n=0,i={name:"",type:"credit-card"},o;const c=(m,$)=>{const{value:w}=m.detail;if(i)switch($){case"name":a(1,i.name=w,i);break;case"type":a(1,i.type=w,i);break}},u=()=>{const m=`[data-bs-target="#${s}"]`,$=document.querySelector(m);$&&($.click(),a(7,l=void 0),a(9,n=void 0),a(1,i={name:"",type:"credit-card"}))},f=async()=>{if(await o.validateFieldIsInvalid())return;const{actions:{reload:$,createAccount:w,updateAccount:H}}=fe();i.id?await H(i.id,i):await w(i),await $(),u()},g=async()=>{if(!i?.id)return;const{actions:{reload:m,deleteAccount:$}}=fe();pe({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async w=>{i?.id&&(w&&await $(i.id),await m(),u())}})};function _(m){x[m?"unshift":"push"](()=>{o=m,a(2,o)})}const h=m=>c(m,"name"),d=m=>c(m,"type");return r.$$set=m=>{"loading"in m&&a(0,t=m.loading),"account"in m&&a(7,l=m.account),"drawerId"in m&&a(8,s=m.drawerId)},r.$$.update=()=>{r.$$.dirty&642&&(!l||n!==l?.id)&&(a(1,i=l?{...i,...l}:i),a(9,n=l?.id))},[t,i,o,c,u,f,g,l,s,n,_,h,d]}class Ot extends z{constructor(e){super(),X(this,e,Pt,Mt,q,{loading:0,account:7,drawerId:8})}}function Fe(r,e,a){const t=r.slice();return t[8]=e[a],t}function Me(r){let e,a=le(r[0]),t=[];for(let l=0;l<a.length;l+=1)t[l]=Pe(Fe(r,a,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=j()},l(l){for(let s=0;s<t.length;s+=1)t[s].l(l);e=j()},m(l,s){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(l,s);E(l,e,s)},p(l,s){if(s&15){a=le(l[0]);let n;for(n=0;n<a.length;n+=1){const i=Fe(l,a,n);t[n]?t[n].p(i,s):(t[n]=Pe(i),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=a.length}},d(l){l&&v(e),ke(t,l)}}}function Pe(r){let e,a,t,l=r[8].name+"",s,n,i,o=r[8].type+"",c,u,f,g,_,h='<i class="bi bi-three-dots-vertical"></i>',d,m,$,w,H,B='<span>Edit</span> <i class="bi bi-pencil-fill"></i>',P,ee,W,O,G='<span class="d-flex justify-content-between"><span>Delete</span> <i class="bi bi-trash-fill"></i></span>',F,te,Z;function ae(){return r[4](r[8])}function me(){return r[5](r[8])}return{c(){e=k("div"),a=k("div"),t=k("div"),s=Y(l),n=D(),i=k("div"),c=Y(o),u=D(),f=k("div"),g=k("div"),_=k("span"),_.innerHTML=h,d=D(),m=k("ul"),$=k("li"),w=k("button"),H=k("span"),H.innerHTML=B,ee=D(),W=k("li"),O=k("button"),O.innerHTML=G,F=D(),this.h()},l(K){e=I(K,"DIV",{class:!0});var M=C(e);a=I(M,"DIV",{});var _e=C(a);t=I(_e,"DIV",{class:!0});var Ce=C(t);s=R(Ce,l),Ce.forEach(v),n=A(_e),i=I(_e,"DIV",{class:!0});var Te=C(i);c=R(Te,o),Te.forEach(v),_e.forEach(v),u=A(M),f=I(M,"DIV",{class:!0});var ye=C(f);g=I(ye,"DIV",{class:!0});var he=C(g);_=I(he,"SPAN",{"data-bs-toggle":!0,"aria-expanded":!0,"data-svelte-h":!0}),J(_)!=="svelte-ed95na"&&(_.innerHTML=h),d=A(he),m=I(he,"UL",{class:!0});var ve=C(m);$=I(ve,"LI",{});var Ee=C($);w=I(Ee,"BUTTON",{type:!0,class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var De=C(w);H=I(De,"SPAN",{class:!0,"data-svelte-h":!0}),J(H)!=="svelte-13gbkkl"&&(H.innerHTML=B),De.forEach(v),Ee.forEach(v),ee=A(ve),W=I(ve,"LI",{});var Ae=C(W);O=I(Ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(O)!=="svelte-ihji2t"&&(O.innerHTML=G),Ae.forEach(v),ve.forEach(v),he.forEach(v),ye.forEach(v),F=A(M),M.forEach(v),this.h()},h(){p(t,"class","fw-bold"),p(i,"class","small fw-light"),p(_,"data-bs-toggle","dropdown"),p(_,"aria-expanded","false"),p(H,"class","d-flex justify-content-between"),p(w,"type","button"),p(w,"class","dropdown-item"),p(w,"data-bs-toggle","offcanvas"),p(w,"data-bs-target",P="#"+r[1]),p(w,"aria-controls",r[1]),p(O,"type","button"),p(O,"class","dropdown-item"),p(m,"class","dropdown-menu dropdown-menu-dark"),p(g,"class","dropdown"),p(f,"class","d-flex align-items-start gap-2"),p(e,"class","d-flex justify-content-between")},m(K,M){E(K,e,M),b(e,a),b(a,t),b(t,s),b(a,n),b(a,i),b(i,c),b(e,u),b(e,f),b(f,g),b(g,_),b(g,d),b(g,m),b(m,$),b($,w),b(w,H),b(m,ee),b(m,W),b(W,O),b(e,F),te||(Z=[be(w,"click",ae),be(O,"click",me)],te=!0)},p(K,M){r=K,M&1&&l!==(l=r[8].name+"")&&ce(s,l),M&1&&o!==(o=r[8].type+"")&&ce(c,o),M&2&&P!==(P="#"+r[1])&&p(w,"data-bs-target",P),M&2&&p(w,"aria-controls",r[1])},d(K){K&&v(e),te=!1,qe(Z)}}}function Yt(r){let e,a=r[0].length&&Me(r);return{c(){a&&a.c(),e=j()},l(t){a&&a.l(t),e=j()},m(t,l){a&&a.m(t,l),E(t,e,l)},p(t,[l]){t[0].length?a?a.p(t,l):(a=Me(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:U,o:U,d(t){t&&v(e),a&&a.d(t)}}}function Rt(r,e,a){let{data:t=[]}=e,{drawerId:l=""}=e;const{stores:{targetAccount:s,loading:n}}=fe(),i=async f=>{if(!f)return;const{actions:{canDeleteAccount:g,reload:_,deleteAccount:h}}=fe(),d=await g(f);pe({title:"Delete Confirmation",message:d?"Are you sure you want to do this?  You won't be able to undo this.":"There are uses of this account in bills and transactions.  You cannot delete it",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",confirmButtonHide:!d,rejectButtonLabel:d?"No":"Close",callback:async $=>{f&&$&&d&&(await h(f),await _())}})},o=f=>{n.set(!0),setTimeout(()=>{s.set(f),n.set(!1)},800)},c=f=>o(f),u=f=>i(f.id);return r.$$set=f=>{"data"in f&&a(0,t=f.data),"drawerId"in f&&a(1,l=f.drawerId)},[t,l,i,o,c,u]}class Ut extends z{constructor(e){super(),X(this,e,Rt,Yt,q,{data:0,drawerId:1})}}function qt(r){let e,a;return e=new Ge({}),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){N(e,t,l),a=!0},p:U,i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function zt(r){let e,a,t;function l(n){r[8](n)}let s={account:r[0],drawerId:oe};return r[2]!==void 0&&(s.loading=r[2]),e=new Ot({props:s}),x.push(()=>ge(e,"loading",l)),{c(){L(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,i){N(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.account=n[0]),!a&&i&4&&(a=!0,o.loading=n[2],de(()=>a=!1)),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Xt(r){let e,a,t,l;const s=[zt,qt],n=[];function i(o,c){return o[2]?1:0}return e=i(r),a=n[e]=s[e](r),{c(){a.c(),t=j()},l(o){a.l(o),t=j()},m(o,c){n[e].m(o,c),E(o,t,c),l=!0},p(o,c){let u=e;e=i(o),e===u?n[e].p(o,c):(re(),y(n[u],1,1,()=>{n[u]=null}),se(),a=n[e],a?a.p(o,c):(a=n[e]=s[e](o),a.c()),T(a,1),a.m(t.parentNode,t))},i(o){l||(T(a),l=!0)},o(o){y(a),l=!1},d(o){o&&v(t),n[e].d(o)}}}function Gt(r){let e;return{c(){e=k("i"),this.h()},l(a){e=I(a,"I",{class:!0}),C(e).forEach(v),this.h()},h(){p(e,"class","bi bi-plus")},m(a,t){E(a,e,t)},p:U,d(a){a&&v(e)}}}function Kt(r){let e,a,t,l,s,n,i,o;return e=new Xe({props:{title:r[1],id:oe,$$slots:{default:[Xt]},$$scope:{ctx:r}}}),s=new Q({props:{variant:"primary",size:"sm","data-bs-toggle":"offcanvas","data-bs-target":"#"+oe,"aria-controls":oe,$$slots:{default:[Gt]},$$scope:{ctx:r}}}),s.$on("click",r[7]),i=new Ut({props:{drawerId:oe,data:r[3]}}),{c(){L(e.$$.fragment),a=D(),t=k("div"),l=k("div"),L(s.$$.fragment),n=D(),L(i.$$.fragment),this.h()},l(c){S(e.$$.fragment,c),a=A(c),t=I(c,"DIV",{class:!0});var u=C(t);l=I(u,"DIV",{class:!0});var f=C(l);S(s.$$.fragment,f),f.forEach(v),n=A(u),S(i.$$.fragment,u),u.forEach(v),this.h()},h(){p(l,"class","d-flex justify-content-end align-items-center"),p(t,"class","d-flex flex-column gap-3")},m(c,u){N(e,c,u),E(c,a,u),E(c,t,u),b(t,l),N(s,l,null),b(t,n),N(i,t,null),o=!0},p(c,[u]){const f={};u&2&&(f.title=c[1]),u&2053&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const g={};u&2048&&(g.$$scope={dirty:u,ctx:c}),s.$set(g);const _={};u&8&&(_.data=c[3]),i.$set(_)},i(c){o||(T(e.$$.fragment,c),T(s.$$.fragment,c),T(i.$$.fragment,c),o=!0)},o(c){y(e.$$.fragment,c),y(s.$$.fragment,c),y(i.$$.fragment,c),o=!1},d(c){c&&(v(a),v(t)),V(e,c),V(s),V(i)}}}const oe="account-form";function Jt(r,e,a){let t,l,s,n;const{stores:{data:i,targetAccount:o,loading:c},actions:{reload:u}}=fe();ne(r,i,h=>a(3,n=h)),ne(r,o,h=>a(0,l=h)),ne(r,c,h=>a(2,s=h));const f={name:"",type:"credit-card"},g=()=>{c.set(!0),setTimeout(()=>{o.set(f),c.set(!1)},1500)};Ie(u),ze(et);function _(h){s=h,c.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&a(1,t=l?.id?"Edit Account":"Create Account")},[l,t,s,n,i,o,c,g,_]}class Qt extends z{constructor(e){super(),X(this,e,Jt,Kt,q,{})}}const Oe=tt([]);let $e=!1;async function Wt(){if($e)return Je(Oe);$e=!0;const{data:r,error:e}=await We.from("tags").select("*");if(e)throw e;const a=r||[];return Oe.set(a),$e=!1,a}function Ye(r,e,a){const t=r.slice();return t[1]=e[a],t}function Re(r){let e,a,t,l='<tr><th scope="col">ID</th> <th scope="col">Name</th> <th scope="col"></th></tr>',s,n,i=le(r[0]),o=[];for(let c=0;c<i.length;c+=1)o[c]=Ue(Ye(r,i,c));return{c(){e=k("div"),a=k("table"),t=k("thead"),t.innerHTML=l,s=D(),n=k("tbody");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){e=I(c,"DIV",{class:!0});var u=C(e);a=I(u,"TABLE",{class:!0});var f=C(a);t=I(f,"THEAD",{"data-svelte-h":!0}),J(t)!=="svelte-h6kjuj"&&(t.innerHTML=l),s=A(f),n=I(f,"TBODY",{});var g=C(n);for(let _=0;_<o.length;_+=1)o[_].l(g);g.forEach(v),f.forEach(v),u.forEach(v),this.h()},h(){p(a,"class","table"),p(e,"class","table-responsive")},m(c,u){E(c,e,u),b(e,a),b(a,t),b(a,s),b(a,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(n,null)},p(c,u){if(u&1){i=le(c[0]);let f;for(f=0;f<i.length;f+=1){const g=Ye(c,i,f);o[f]?o[f].p(g,u):(o[f]=Ue(g),o[f].c(),o[f].m(n,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&v(e),ke(o,c)}}}function Ue(r){let e,a,t=r[1].id+"",l,s,n,i=r[1].name+"",o,c,u,f='<button class="btn btn-sm btn-primary"><i class="bi bi-pencil"></i></button>',g;return{c(){e=k("tr"),a=k("td"),l=Y(t),s=D(),n=k("td"),o=Y(i),c=D(),u=k("td"),u.innerHTML=f,g=D(),this.h()},l(_){e=I(_,"TR",{});var h=C(e);a=I(h,"TD",{});var d=C(a);l=R(d,t),d.forEach(v),s=A(h),n=I(h,"TD",{});var m=C(n);o=R(m,i),m.forEach(v),c=A(h),u=I(h,"TD",{class:!0,"data-svelte-h":!0}),J(u)!=="svelte-kctraj"&&(u.innerHTML=f),g=A(h),h.forEach(v),this.h()},h(){p(u,"class","d-flex justify-content-end")},m(_,h){E(_,e,h),b(e,a),b(a,l),b(e,s),b(e,n),b(n,o),b(e,c),b(e,u),b(e,g)},p(_,h){h&1&&t!==(t=_[1].id+"")&&ce(l,t),h&1&&i!==(i=_[1].name+"")&&ce(o,i)},d(_){_&&v(e)}}}function Zt(r){let e,a='<button class="btn btn-sm btn-primary"><i class="bi bi-plus"></i></button>',t,l,s=r[0].length&&Re(r);return{c(){e=k("div"),e.innerHTML=a,t=D(),s&&s.c(),l=j(),this.h()},l(n){e=I(n,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1bwv5dg"&&(e.innerHTML=a),t=A(n),s&&s.l(n),l=j(),this.h()},h(){p(e,"class","d-flex justify-content-end")},m(n,i){E(n,e,i),E(n,t,i),s&&s.m(n,i),E(n,l,i)},p(n,[i]){n[0].length?s?s.p(n,i):(s=Re(n),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},i:U,o:U,d(n){n&&(v(e),v(t),v(l)),s&&s.d(n)}}}function xt(r,e,a){let t=[];return Ie(async()=>{a(0,t=await Wt())}),[t]}class ea extends z{constructor(e){super(),X(this,e,xt,Zt,q,{})}}function ta(r){let e,a='<div class="nav nav-tabs" id="nav-tab" role="tablist"><button class="nav-link active" id="nav-accounts-tab" data-bs-toggle="tab" data-bs-target="#nav-accounts" type="button" role="tab" aria-controls="nav-accounts" aria-selected="false">Accounts</button> <button class="nav-link" id="nav-categories-tab" data-bs-toggle="tab" data-bs-target="#nav-categories" type="button" role="tab" aria-controls="nav-categories" aria-selected="true">Categories</button> <button class="nav-link" id="nav-tags-tab" data-bs-toggle="tab" data-bs-target="#nav-tags" type="button" role="tab" aria-controls="nav-tags" aria-selected="true">Tags</button></div>',t,l,s,n,i,o,c,u,f,g,_,h;return i=new Qt({}),u=new It({}),_=new ea({}),{c(){e=k("nav"),e.innerHTML=a,t=D(),l=k("div"),s=k("div"),n=k("div"),L(i.$$.fragment),o=D(),c=k("div"),L(u.$$.fragment),f=D(),g=k("div"),L(_.$$.fragment),this.h()},l(d){e=I(d,"NAV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-11sqbu0"&&(e.innerHTML=a),t=A(d),l=I(d,"DIV",{class:!0,id:!0});var m=C(l);s=I(m,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var $=C(s);n=I($,"DIV",{class:!0});var w=C(n);S(i.$$.fragment,w),w.forEach(v),$.forEach(v),o=A(m),c=I(m,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var H=C(c);S(u.$$.fragment,H),H.forEach(v),f=A(m),g=I(m,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var B=C(g);S(_.$$.fragment,B),B.forEach(v),m.forEach(v),this.h()},h(){p(e,"class","d-print-none"),p(n,"class","d-flex flex-column gap-4"),p(s,"class","tab-pane fade active show"),p(s,"id","nav-accounts"),p(s,"role","tabpanel"),p(s,"aria-labelledby","nav-accounts-tab"),p(s,"tabindex","0"),p(c,"class","tab-pane fade"),p(c,"id","nav-categories"),p(c,"role","tabpanel"),p(c,"aria-labelledby","nav-categories-tab"),p(c,"tabindex","0"),p(g,"class","tab-pane fade"),p(g,"id","nav-tags"),p(g,"role","tabpanel"),p(g,"aria-labelledby","nav-tags-tab"),p(g,"tabindex","0"),p(l,"class","tab-content"),p(l,"id","nav-tab-content")},m(d,m){E(d,e,m),E(d,t,m),E(d,l,m),b(l,s),b(s,n),N(i,n,null),b(l,o),b(l,c),N(u,c,null),b(l,f),b(l,g),N(_,g,null),h=!0},p:U,i(d){h||(T(i.$$.fragment,d),T(u.$$.fragment,d),T(_.$$.fragment,d),h=!0)},o(d){y(i.$$.fragment,d),y(u.$$.fragment,d),y(_.$$.fragment,d),h=!1},d(d){d&&(v(e),v(t),v(l)),V(i),V(u),V(_)}}}function aa(r){let e,a;return e=new Qe({props:{pageTitle:"Settings",$$slots:{default:[ta]},$$scope:{ctx:r}}}),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){N(e,t,l),a=!0},p(t,[l]){const s={};l&1&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}class fa extends z{constructor(e){super(),X(this,e,null,aa,q,{})}}export{fa as component,ua as universal};
