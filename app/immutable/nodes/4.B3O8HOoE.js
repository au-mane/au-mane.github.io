import{s as R,G as z,Y as W,Z as ne,z as q,n as O,d as $,e as D,b as P,i as F,j as y,f as B,m as N,o as k,t as H,l as J,L as ue,p as ae,k as fe,I as de,q as te,r as ge,v as me}from"../chunks/scheduler.C4kY8riC.js";import{S as U,i as Y,f as x,c as T,b as A,m as E,t as p,a as b,d as S,g as G,e as K}from"../chunks/index.DQNbkBmu.js";import{P as _e}from"../chunks/PageLayout.BpZ6L2h5.js";import{c as he,D as ve,F as pe}from"../chunks/FormSkeleton.l4ArI2-e.js";import{g as Z}from"../chunks/accounts.state.YV70XDXT.js";import{T as $e,N as be,S as Ie,B as Q}from"../chunks/Button.DjLxTdvl.js";import{e as le}from"../chunks/Header.BwQV1-mq.js";const ke=!0,st=Object.freeze(Object.defineProperty({__proto__:null,prerender:ke},Symbol.toStringTag,{value:"Module"}));function we(l){let e,n,t;function r(a){l[7](a)}let s={label:"Name",name:"account-name-field",placeholder:"",helperText:l[3],loading:l[1],required:!0,isInvalid:l[2]};return l[0]!==void 0&&(s.value=l[0]),e=new $e({props:s}),z.push(()=>x(e,"value",r)),e.$on("valueChanged",l[4]),{c(){T(e.$$.fragment)},l(a){A(e.$$.fragment,a)},m(a,i){E(e,a,i),t=!0},p(a,[i]){const o={};i&8&&(o.helperText=a[3]),i&2&&(o.loading=a[1]),i&4&&(o.isInvalid=a[2]),!n&&i&1&&(n=!0,o.value=a[0],W(()=>n=!1)),e.$set(o)},i(a){t||(p(e.$$.fragment,a),t=!0)},o(a){b(e.$$.fragment,a),t=!1},d(a){S(e,a)}}}const Ce="Account name i.e. Chase, American Express, America First",Te="This field is required";function Ae(l,e,n){let t,r,{value:s}=e,{loading:a}=e;async function i(){return new Promise(f=>{setTimeout(()=>{n(6,m=!0),f(m&&!s.trim())})})}const o=ne(),u=()=>{o("valueChanged",{value:s}),n(6,m=!0)};let m=!1;function I(f){s=f,n(0,s)}return l.$$set=f=>{"value"in f&&n(0,s=f.value),"loading"in f&&n(1,a=f.loading)},l.$$.update=()=>{l.$$.dirty&65&&n(2,t=m&&!s.trim()),l.$$.dirty&4&&n(3,r=t?Te:Ce)},[s,a,t,r,u,i,m,I]}class Ee extends U{constructor(e){super(),Y(this,e,Ae,we,R,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}function Se(l){let e,n,t;function r(a){l[7](a)}let s={min:0,label:"Sort Index",name:"account-sort-index-field",placeholder:"",helperText:l[3],loading:l[1],required:!0,isInvalid:l[2]};return l[0]!==void 0&&(s.value=l[0]),e=new be({props:s}),z.push(()=>x(e,"value",r)),e.$on("valueChanged",l[4]),{c(){T(e.$$.fragment)},l(a){A(e.$$.fragment,a)},m(a,i){E(e,a,i),t=!0},p(a,[i]){const o={};i&8&&(o.helperText=a[3]),i&2&&(o.loading=a[1]),i&4&&(o.isInvalid=a[2]),!n&&i&1&&(n=!0,o.value=a[0],W(()=>n=!1)),e.$set(o)},i(a){t||(p(e.$$.fragment,a),t=!0)},o(a){b(e.$$.fragment,a),t=!1},d(a){S(e,a)}}}function De(l,e,n){let t,r,{value:s}=e,{loading:a}=e;async function i(){return new Promise(f=>{setTimeout(()=>{n(6,m=!0),f(m&&s<0)})})}const o=ne(),u=()=>{o("valueChanged",{value:s}),n(6,m=!0)};let m=!1;function I(f){s=f,n(0,s)}return l.$$set=f=>{"value"in f&&n(0,s=f.value),"loading"in f&&n(1,a=f.loading)},l.$$.update=()=>{l.$$.dirty&65&&n(2,t=m&&s<0),l.$$.dirty&4&&n(3,r=t?"Value should be 0 or more":"")},[s,a,t,r,u,i,m,I]}class Fe extends U{constructor(e){super(),Y(this,e,De,Se,R,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}const ye={creditCard:{label:"Credit Card",value:"credit-card",sort_order:0},checkings:{label:"Checkings",value:"checkings",sort_order:1},savings:{label:"Savings",value:"savings",sort_order:2},cash:{label:"Cash",value:"cash",sort_order:3},check:{label:"Check",value:"check",sort_order:4},other:{label:"Other",value:"other",sort_order:5}},Ne=Object.values(ye).sort((l,e)=>l.sort_order-e.sort_order).map(l=>({key:l.label,value:l.value}));function Oe(l){let e,n,t;function r(a){l[4](a)}let s={label:"Account type",name:"account-type",helperText:Ve,loading:l[1],required:!0,isInvalid:!1,disabled:!1,options:l[3]};return l[0]!==void 0&&(s.value=l[0]),e=new Ie({props:s}),z.push(()=>x(e,"value",r)),e.$on("change",l[2]),{c(){T(e.$$.fragment)},l(a){A(e.$$.fragment,a)},m(a,i){E(e,a,i),t=!0},p(a,[i]){const o={};i&2&&(o.loading=a[1]),!n&&i&1&&(n=!0,o.value=a[0],W(()=>n=!1)),e.$set(o)},i(a){t||(p(e.$$.fragment,a),t=!0)},o(a){b(e.$$.fragment,a),t=!1},d(a){S(e,a)}}}const Ve="Specify the account type as follows Credit Card, Savings, Checking etc";function Pe(l,e,n){let{value:t}=e,{loading:r}=e;const s=ne(),a=()=>{s("valueChanged",{value:t})},i=Ne;function o(u){t=u,n(0,t)}return l.$$set=u=>{"value"in u&&n(0,t=u.value),"loading"in u&&n(1,r=u.loading)},[t,r,a,i,o]}class Be extends U{constructor(e){super(),Y(this,e,Pe,Oe,R,{value:0,loading:1})}}function re(l){let e,n,t,r,s,a,i,o,u,m,I,f,C,v,V,_={loading:l[0],value:l[1].name};n=new Ee({props:_}),l[11](n),n.$on("valueChanged",l[12]),r=new Be({props:{loading:l[0],value:l[1].type}}),r.$on("valueChanged",l[13]);let h={loading:l[0],value:l[1].sort_index};a=new Fe({props:h}),l[14](a),a.$on("valueChanged",l[15]);let g=l[1].id&&oe(l);return f=new Q({props:{loading:l[0],variant:"secondary",$$slots:{default:[je]},$$scope:{ctx:l}}}),f.$on("click",l[5]),v=new Q({props:{loading:l[0],variant:"primary",$$slots:{default:[qe]},$$scope:{ctx:l}}}),v.$on("click",l[6]),{c(){e=D("div"),T(n.$$.fragment),t=P(),T(r.$$.fragment),s=P(),T(a.$$.fragment),i=P(),o=D("div"),u=D("div"),g&&g.c(),m=P(),I=D("div"),T(f.$$.fragment),C=P(),T(v.$$.fragment),this.h()},l(c){e=F(c,"DIV",{class:!0});var d=y(e);A(n.$$.fragment,d),t=B(d),A(r.$$.fragment,d),s=B(d),A(a.$$.fragment,d),i=B(d),o=F(d,"DIV",{class:!0});var w=y(o);u=F(w,"DIV",{});var j=y(u);g&&g.l(j),j.forEach($),m=B(w),I=F(w,"DIV",{});var L=y(I);A(f.$$.fragment,L),C=B(L),A(v.$$.fragment,L),L.forEach($),w.forEach($),d.forEach($),this.h()},h(){N(o,"class","d-flex justify-content-between"),N(e,"class","d-flex flex-column gap-3")},m(c,d){O(c,e,d),E(n,e,null),k(e,t),E(r,e,null),k(e,s),E(a,e,null),k(e,i),k(e,o),k(o,u),g&&g.m(u,null),k(o,m),k(o,I),E(f,I,null),k(I,C),E(v,I,null),V=!0},p(c,d){const w={};d&1&&(w.loading=c[0]),d&2&&(w.value=c[1].name),n.$set(w);const j={};d&1&&(j.loading=c[0]),d&2&&(j.value=c[1].type),r.$set(j);const L={};d&1&&(L.loading=c[0]),d&2&&(L.value=c[1].sort_index),a.$set(L),c[1].id?g?(g.p(c,d),d&2&&p(g,1)):(g=oe(c),g.c(),p(g,1),g.m(u,null)):g&&(G(),b(g,1,1,()=>{g=null}),K());const M={};d&1&&(M.loading=c[0]),d&65536&&(M.$$scope={dirty:d,ctx:c}),f.$set(M);const ee={};d&1&&(ee.loading=c[0]),d&65536&&(ee.$$scope={dirty:d,ctx:c}),v.$set(ee)},i(c){V||(p(n.$$.fragment,c),p(r.$$.fragment,c),p(a.$$.fragment,c),p(g),p(f.$$.fragment,c),p(v.$$.fragment,c),V=!0)},o(c){b(n.$$.fragment,c),b(r.$$.fragment,c),b(a.$$.fragment,c),b(g),b(f.$$.fragment,c),b(v.$$.fragment,c),V=!1},d(c){c&&$(e),l[11](null),S(n),S(r),l[14](null),S(a),g&&g.d(),S(f),S(v)}}}function oe(l){let e,n;return e=new Q({props:{loading:l[0],variant:"danger",$$slots:{default:[Le]},$$scope:{ctx:l}}}),e.$on("click",l[7]),{c(){T(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){E(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.loading=t[0]),r&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Le(l){let e;return{c(){e=H("Delete")},l(n){e=J(n,"Delete")},m(n,t){O(n,e,t)},d(n){n&&$(e)}}}function je(l){let e;return{c(){e=H("Cancel")},l(n){e=J(n,"Cancel")},m(n,t){O(n,e,t)},d(n){n&&$(e)}}}function qe(l){let e;return{c(){e=H("Save")},l(n){e=J(n,"Save")},m(n,t){O(n,e,t)},d(n){n&&$(e)}}}function Re(l){let e,n,t=l[1]&&re(l);return{c(){t&&t.c(),e=q()},l(r){t&&t.l(r),e=q()},m(r,s){t&&t.m(r,s),O(r,e,s),n=!0},p(r,[s]){r[1]?t?(t.p(r,s),s&2&&p(t,1)):(t=re(r),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(G(),b(t,1,1,()=>{t=null}),K())},i(r){n||(p(t),n=!0)},o(r){b(t),n=!1},d(r){r&&$(e),t&&t.d(r)}}}function Ue(l,e,n){let{loading:t=!1}=e,{account:r}=e,{drawerId:s}=e,a=0,i={name:"",type:"credit-card",sort_index:1},o,u;const m=(c,d)=>{const{value:w}=c.detail;if(i)switch(d){case"name":n(1,i.name=w,i);break;case"type":n(1,i.type=w,i);break;case"sort_index":n(1,i.sort_index=w,i);break}},I=()=>{const c=`[data-bs-target="#${s}"]`,d=document.querySelector(c);d&&(d.click(),n(8,r=void 0),n(10,a=void 0),n(1,i={name:"",type:"credit-card",sort_index:1}))},f=async()=>{const c=await o.validateFieldIsInvalid(),d=await u.validateFieldIsInvalid();if(c||d)return;const{actions:{reload:j,createAccount:L,updateAccount:M}}=Z();i.id?await M(i.id,i):await L(i),await j(),I()},C=async()=>{if(!i?.id)return;const{actions:{reload:c,deleteAccount:d}}=Z();he({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async w=>{i?.id&&(w&&await d(i.id),await c(),I())}})};function v(c){z[c?"unshift":"push"](()=>{o=c,n(2,o)})}const V=c=>m(c,"name"),_=c=>m(c,"type");function h(c){z[c?"unshift":"push"](()=>{u=c,n(3,u)})}const g=c=>m(c,"sort_index");return l.$$set=c=>{"loading"in c&&n(0,t=c.loading),"account"in c&&n(8,r=c.account),"drawerId"in c&&n(9,s=c.drawerId)},l.$$.update=()=>{l.$$.dirty&1282&&(!r||a!==r?.id)&&(n(1,i=r?{...i,...r}:i),n(10,a=r?.id))},[t,i,o,u,m,I,f,C,r,s,a,v,V,_,h,g]}class Ye extends U{constructor(e){super(),Y(this,e,Ue,Re,R,{loading:0,account:8,drawerId:9})}}function ie(l,e,n){const t=l.slice();return t[6]=e[n],t}function se(l){let e,n,t=le(l[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=ce(ie(l,t,a));const s=a=>b(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=q()},l(a){for(let i=0;i<r.length;i+=1)r[i].l(a);e=q()},m(a,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(a,i);O(a,e,i),n=!0},p(a,i){if(i&7){t=le(a[0]);let o;for(o=0;o<t.length;o+=1){const u=ie(a,t,o);r[o]?(r[o].p(u,i),p(r[o],1)):(r[o]=ce(u),r[o].c(),p(r[o],1),r[o].m(e.parentNode,e))}for(G(),o=t.length;o<r.length;o+=1)s(o);K()}},i(a){if(!n){for(let i=0;i<t.length;i+=1)p(r[i]);n=!0}},o(a){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)b(r[i]);n=!1},d(a){a&&$(e),ue(r,a)}}}function ze(l){let e;return{c(){e=H("edit")},l(n){e=J(n,"edit")},m(n,t){O(n,e,t)},d(n){n&&$(e)}}}function ce(l){let e,n,t=l[6].name+"",r,s,a,i,o,u=l[6].type+"",m,I,f,C,v;function V(){return l[3](l[6])}return f=new Q({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+l[1],"aria-controls":l[1],$$slots:{default:[ze]},$$scope:{ctx:l}}}),f.$on("click",V),{c(){e=D("div"),n=D("div"),r=H(t),s=P(),a=D("div"),i=D("div"),o=D("div"),m=H(u),I=P(),T(f.$$.fragment),C=P(),this.h()},l(_){e=F(_,"DIV",{});var h=y(e);n=F(h,"DIV",{class:!0});var g=y(n);r=J(g,t),g.forEach($),s=B(h),a=F(h,"DIV",{class:!0});var c=y(a);i=F(c,"DIV",{class:!0});var d=y(i);o=F(d,"DIV",{class:!0});var w=y(o);m=J(w,u),w.forEach($),d.forEach($),I=B(c),A(f.$$.fragment,c),c.forEach($),C=B(h),h.forEach($),this.h()},h(){N(n,"class","fw-bold"),N(o,"class","fw-light"),N(i,"class","small"),N(a,"class","d-flex justify-content-between")},m(_,h){O(_,e,h),k(e,n),k(n,r),k(e,s),k(e,a),k(a,i),k(i,o),k(o,m),k(a,I),E(f,a,null),k(e,C),v=!0},p(_,h){l=_,(!v||h&1)&&t!==(t=l[6].name+"")&&ae(r,t),(!v||h&1)&&u!==(u=l[6].type+"")&&ae(m,u);const g={};h&2&&(g["data-bs-target"]="#"+l[1]),h&2&&(g["aria-controls"]=l[1]),h&512&&(g.$$scope={dirty:h,ctx:l}),f.$set(g)},i(_){v||(p(f.$$.fragment,_),v=!0)},o(_){b(f.$$.fragment,_),v=!1},d(_){_&&$(e),S(f)}}}function He(l){let e,n,t=l[0].length&&se(l);return{c(){t&&t.c(),e=q()},l(r){t&&t.l(r),e=q()},m(r,s){t&&t.m(r,s),O(r,e,s),n=!0},p(r,[s]){r[0].length?t?(t.p(r,s),s&1&&p(t,1)):(t=se(r),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(G(),b(t,1,1,()=>{t=null}),K())},i(r){n||(p(t),n=!0)},o(r){b(t),n=!1},d(r){r&&$(e),t&&t.d(r)}}}function Je(l,e,n){let{data:t=[]}=e,{drawerId:r=""}=e;const{stores:{targetAccount:s,loading:a}}=Z(),i=u=>{a.set(!0),setTimeout(()=>{s.set(u),a.set(!1)},800)},o=u=>i(u);return l.$$set=u=>{"data"in u&&n(0,t=u.data),"drawerId"in u&&n(1,r=u.drawerId)},[t,r,i,o]}class Me extends U{constructor(e){super(),Y(this,e,Je,He,R,{data:0,drawerId:1})}}function Xe(l){let e,n;return e=new pe({}),{c(){T(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){E(e,t,r),n=!0},p:me,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Ge(l){let e,n,t;function r(a){l[8](a)}let s={account:l[0],drawerId:X};return l[2]!==void 0&&(s.loading=l[2]),e=new Ye({props:s}),z.push(()=>x(e,"loading",r)),{c(){T(e.$$.fragment)},l(a){A(e.$$.fragment,a)},m(a,i){E(e,a,i),t=!0},p(a,i){const o={};i&1&&(o.account=a[0]),!n&&i&4&&(n=!0,o.loading=a[2],W(()=>n=!1)),e.$set(o)},i(a){t||(p(e.$$.fragment,a),t=!0)},o(a){b(e.$$.fragment,a),t=!1},d(a){S(e,a)}}}function Ke(l){let e,n,t,r;const s=[Ge,Xe],a=[];function i(o,u){return o[2]?1:0}return e=i(l),n=a[e]=s[e](l),{c(){n.c(),t=q()},l(o){n.l(o),t=q()},m(o,u){a[e].m(o,u),O(o,t,u),r=!0},p(o,u){let m=e;e=i(o),e===m?a[e].p(o,u):(G(),b(a[m],1,1,()=>{a[m]=null}),K(),n=a[e],n?n.p(o,u):(n=a[e]=s[e](o),n.c()),p(n,1),n.m(t.parentNode,t))},i(o){r||(p(n),r=!0)},o(o){b(n),r=!1},d(o){o&&$(t),a[e].d(o)}}}function Ze(l){let e,n,t,r,s,a="Accounts",i,o,u,m,I,f,C,v,V;return e=new ve({props:{title:l[1],id:X,$$slots:{default:[Ke]},$$scope:{ctx:l}}}),f=new Me({props:{drawerId:X,data:l[3]}}),{c(){T(e.$$.fragment),n=P(),t=D("div"),r=D("div"),s=D("h2"),s.textContent=a,i=P(),o=D("div"),u=D("button"),m=D("i"),I=P(),T(f.$$.fragment),this.h()},l(_){A(e.$$.fragment,_),n=B(_),t=F(_,"DIV",{class:!0});var h=y(t);r=F(h,"DIV",{class:!0});var g=y(r);s=F(g,"H2",{"data-svelte-h":!0}),fe(s)!=="svelte-f8ypd2"&&(s.textContent=a),i=B(g),o=F(g,"DIV",{});var c=y(o);u=F(c,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var d=y(u);m=F(d,"I",{class:!0}),y(m).forEach($),d.forEach($),c.forEach($),g.forEach($),I=B(h),A(f.$$.fragment,h),h.forEach($),this.h()},h(){N(m,"class","bi bi-plus"),N(u,"class","btn btn-sm btn-secondary"),N(u,"data-bs-toggle","offcanvas"),N(u,"data-bs-target","#"+X),N(u,"aria-controls",X),N(r,"class","d-flex justify-content-between align-items-center"),N(t,"class","d-flex flex-column gap-3")},m(_,h){E(e,_,h),O(_,n,h),O(_,t,h),k(t,r),k(r,s),k(r,i),k(r,o),k(o,u),k(u,m),k(t,I),E(f,t,null),C=!0,v||(V=de(u,"click",l[7]),v=!0)},p(_,[h]){const g={};h&2&&(g.title=_[1]),h&2053&&(g.$$scope={dirty:h,ctx:_}),e.$set(g);const c={};h&8&&(c.data=_[3]),f.$set(c)},i(_){C||(p(e.$$.fragment,_),p(f.$$.fragment,_),C=!0)},o(_){b(e.$$.fragment,_),b(f.$$.fragment,_),C=!1},d(_){_&&($(n),$(t)),S(e,_),S(f),v=!1,V()}}}const X="account-form";function Qe(l,e,n){let t,r,s,a;const{stores:{data:i,targetAccount:o,loading:u},actions:{reload:m}}=Z();te(l,i,v=>n(3,a=v)),te(l,o,v=>n(0,r=v)),te(l,u,v=>n(2,s=v));const I={name:"",type:"credit-card",sort_index:1};ge(()=>m());const f=()=>{u.set(!0),setTimeout(()=>{o.set(I),u.set(!1)},1500)};function C(v){s=v,u.set(s)}return l.$$.update=()=>{l.$$.dirty&1&&n(1,t=r?.id?"Edit Account":"Create Account")},[r,t,s,a,i,o,u,f,C]}class We extends U{constructor(e){super(),Y(this,e,Qe,Ze,R,{})}}function xe(l){let e,n;return e=new We({}),{c(){T(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){E(e,t,r),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function et(l){let e,n;return e=new _e({props:{pageTitle:"Accounts",$$slots:{default:[xe]},$$scope:{ctx:l}}}),{c(){T(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){E(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}class ct extends U{constructor(e){super(),Y(this,e,null,et,R,{})}}export{ct as component,st as universal};
