import{s as j,F as X,a6 as Q,M as re,A as B,o as F,f as $,e as I,d as P,j as C,k as A,i as V,n as D,p as k,t as Y,m as H,K as se,q as Z,w as oe,H as ie,r as G,v as ce,a7 as ue}from"../chunks/scheduler.BCfJoXAU.js";import{S as q,i as R,f as W,c as T,b as E,m as S,t as _,a as b,d as y,g as M,e as z}from"../chunks/index.CXmuTnoX.js";import{P as fe}from"../chunks/PageLayout.JCq68uuh.js";import{B as J,c as de,D as ge,F as me}from"../chunks/FormSkeleton.DxANlUgC.js";import{T as _e,S as he,g as K,d as pe}from"../chunks/SelectField.ChufMBg4.js";import{e as x}from"../chunks/Header.PPgXQXh9.js";const $e=!0,et=Object.freeze(Object.defineProperty({__proto__:null,prerender:$e},Symbol.toStringTag,{value:"Module"}));function ve(r){let e,n,t;function a(l){r[7](l)}let i={label:"Name",name:"account-name-field",placeholder:"",helperText:r[3],loading:r[1],required:!0,isInvalid:r[2]};return r[0]!==void 0&&(i.value=r[0]),e=new _e({props:i}),X.push(()=>W(e,"value",a)),e.$on("valueChanged",r[4]),{c(){T(e.$$.fragment)},l(l){E(e.$$.fragment,l)},m(l,o){S(e,l,o),t=!0},p(l,[o]){const s={};o&8&&(s.helperText=l[3]),o&2&&(s.loading=l[1]),o&4&&(s.isInvalid=l[2]),!n&&o&1&&(n=!0,s.value=l[0],Q(()=>n=!1)),e.$set(s)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){y(e,l)}}}const be="Account name i.e. Chase, American Express, America First",ke="This field is required";function we(r,e,n){let t,a,{value:i}=e,{loading:l}=e;async function o(){return new Promise(f=>{setTimeout(()=>{n(6,g=!0),f(g&&!i.trim())})})}const s=re(),u=()=>{s("valueChanged",{value:i}),n(6,g=!0)};let g=!1;function w(f){i=f,n(0,i)}return r.$$set=f=>{"value"in f&&n(0,i=f.value),"loading"in f&&n(1,l=f.loading)},r.$$.update=()=>{r.$$.dirty&65&&n(2,t=g&&!i.trim()),r.$$.dirty&4&&n(3,a=t?ke:be)},[i,l,t,a,u,o,g,w]}class Ie extends q{constructor(e){super(),R(this,e,we,ve,j,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}const Ce={creditCard:{label:"Credit Card",value:"credit-card",sort_order:0},checkings:{label:"Checkings",value:"checkings",sort_order:1},savings:{label:"Savings",value:"savings",sort_order:2},cash:{label:"Cash",value:"cash",sort_order:3},check:{label:"Check",value:"check",sort_order:4},other:{label:"Other",value:"other",sort_order:5}},Ae=Object.values(Ce).sort((r,e)=>r.sort_order-e.sort_order).map(r=>({key:r.label,value:r.value}));function Te(r){let e,n,t;function a(l){r[4](l)}let i={label:"Account type",name:"account-type",helperText:Ee,loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(i.value=r[0]),e=new he({props:i}),X.push(()=>W(e,"value",a)),e.$on("change",r[2]),{c(){T(e.$$.fragment)},l(l){E(e.$$.fragment,l)},m(l,o){S(e,l,o),t=!0},p(l,[o]){const s={};o&2&&(s.loading=l[1]),!n&&o&1&&(n=!0,s.value=l[0],Q(()=>n=!1)),e.$set(s)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){y(e,l)}}}const Ee="Specify the account type as follows Credit Card, Savings, Checking etc";function Se(r,e,n){let{value:t}=e,{loading:a}=e;const i=re(),l=()=>{i("valueChanged",{value:t})},o=Ae;function s(u){t=u,n(0,t)}return r.$$set=u=>{"value"in u&&n(0,t=u.value),"loading"in u&&n(1,a=u.loading)},[t,a,l,o,s]}class ye extends q{constructor(e){super(),R(this,e,Se,Te,j,{value:0,loading:1})}}function ee(r){let e,n,t,a,i,l,o,s,u,g,w,f,h,v={loading:r[0],value:r[1].name};n=new Ie({props:v}),r[10](n),n.$on("valueChanged",r[11]),a=new ye({props:{loading:r[0],value:r[1].type}}),a.$on("valueChanged",r[12]);let m=r[1].id&&te(r);return g=new J({props:{loading:r[0],variant:"secondary",$$slots:{default:[Fe]},$$scope:{ctx:r}}}),g.$on("click",r[4]),f=new J({props:{loading:r[0],variant:"primary",$$slots:{default:[Oe]},$$scope:{ctx:r}}}),f.$on("click",r[5]),{c(){e=I("div"),T(n.$$.fragment),t=P(),T(a.$$.fragment),i=P(),l=I("div"),o=I("div"),m&&m.c(),s=P(),u=I("div"),T(g.$$.fragment),w=P(),T(f.$$.fragment),this.h()},l(c){e=C(c,"DIV",{class:!0});var d=A(e);E(n.$$.fragment,d),t=V(d),E(a.$$.fragment,d),i=V(d),l=C(d,"DIV",{class:!0});var p=A(l);o=C(p,"DIV",{});var O=A(o);m&&m.l(O),O.forEach($),s=V(p),u=C(p,"DIV",{});var N=A(u);E(g.$$.fragment,N),w=V(N),E(f.$$.fragment,N),N.forEach($),p.forEach($),d.forEach($),this.h()},h(){D(l,"class","d-flex justify-content-between"),D(e,"class","d-flex flex-column gap-3")},m(c,d){F(c,e,d),S(n,e,null),k(e,t),S(a,e,null),k(e,i),k(e,l),k(l,o),m&&m.m(o,null),k(l,s),k(l,u),S(g,u,null),k(u,w),S(f,u,null),h=!0},p(c,d){const p={};d&1&&(p.loading=c[0]),d&2&&(p.value=c[1].name),n.$set(p);const O={};d&1&&(O.loading=c[0]),d&2&&(O.value=c[1].type),a.$set(O),c[1].id?m?(m.p(c,d),d&2&&_(m,1)):(m=te(c),m.c(),_(m,1),m.m(o,null)):m&&(M(),b(m,1,1,()=>{m=null}),z());const N={};d&1&&(N.loading=c[0]),d&8192&&(N.$$scope={dirty:d,ctx:c}),g.$set(N);const L={};d&1&&(L.loading=c[0]),d&8192&&(L.$$scope={dirty:d,ctx:c}),f.$set(L)},i(c){h||(_(n.$$.fragment,c),_(a.$$.fragment,c),_(m),_(g.$$.fragment,c),_(f.$$.fragment,c),h=!0)},o(c){b(n.$$.fragment,c),b(a.$$.fragment,c),b(m),b(g.$$.fragment,c),b(f.$$.fragment,c),h=!1},d(c){c&&$(e),r[10](null),y(n),y(a),m&&m.d(),y(g),y(f)}}}function te(r){let e,n;return e=new J({props:{loading:r[0],variant:"danger",$$slots:{default:[De]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){T(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p(t,a){const i={};a&1&&(i.loading=t[0]),a&8192&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function De(r){let e;return{c(){e=Y("Delete")},l(n){e=H(n,"Delete")},m(n,t){F(n,e,t)},d(n){n&&$(e)}}}function Fe(r){let e;return{c(){e=Y("Cancel")},l(n){e=H(n,"Cancel")},m(n,t){F(n,e,t)},d(n){n&&$(e)}}}function Oe(r){let e;return{c(){e=Y("Save")},l(n){e=H(n,"Save")},m(n,t){F(n,e,t)},d(n){n&&$(e)}}}function Ne(r){let e,n,t=r[1]&&ee(r);return{c(){t&&t.c(),e=B()},l(a){t&&t.l(a),e=B()},m(a,i){t&&t.m(a,i),F(a,e,i),n=!0},p(a,[i]){a[1]?t?(t.p(a,i),i&2&&_(t,1)):(t=ee(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(M(),b(t,1,1,()=>{t=null}),z())},i(a){n||(_(t),n=!0)},o(a){b(t),n=!1},d(a){a&&$(e),t&&t.d(a)}}}function Pe(r,e,n){let{loading:t=!1}=e,{account:a}=e,{drawerId:i}=e,l=0,o={name:"",type:"credit-card",sort_index:1},s;const u=(c,d)=>{const{value:p}=c.detail;if(o)switch(d){case"name":n(1,o.name=p,o);break;case"type":n(1,o.type=p,o);break;case"sort_index":n(1,o.sort_index=p,o);break}},g=()=>{const c=`[data-bs-target="#${i}"]`,d=document.querySelector(c);d&&(d.click(),n(7,a=void 0),n(9,l=void 0),n(1,o={name:"",type:"credit-card",sort_index:1}))},w=async()=>{if(await s.validateFieldIsInvalid())return;const{actions:{reload:d,createAccount:p,updateAccount:O}}=K();o.id?await O(o.id,o):await p(o),await d(),g()},f=async()=>{if(!o?.id)return;const{actions:{reload:c,deleteAccount:d}}=K();de({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async p=>{o?.id&&(p&&await d(o.id),await c(),g())}})};function h(c){X[c?"unshift":"push"](()=>{s=c,n(2,s)})}const v=c=>u(c,"name"),m=c=>u(c,"type");return r.$$set=c=>{"loading"in c&&n(0,t=c.loading),"account"in c&&n(7,a=c.account),"drawerId"in c&&n(8,i=c.drawerId)},r.$$.update=()=>{r.$$.dirty&642&&(!a||l!==a?.id)&&(n(1,o=a?{...o,...a}:o),n(9,l=a?.id))},[t,o,s,u,g,w,f,a,i,l,h,v,m]}class Ve extends q{constructor(e){super(),R(this,e,Pe,Ne,j,{loading:0,account:7,drawerId:8})}}function ne(r,e,n){const t=r.slice();return t[6]=e[n],t}function ae(r){let e,n,t=x(r[0]),a=[];for(let l=0;l<t.length;l+=1)a[l]=le(ne(r,t,l));const i=l=>b(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=B()},l(l){for(let o=0;o<a.length;o+=1)a[o].l(l);e=B()},m(l,o){for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(l,o);F(l,e,o),n=!0},p(l,o){if(o&7){t=x(l[0]);let s;for(s=0;s<t.length;s+=1){const u=ne(l,t,s);a[s]?(a[s].p(u,o),_(a[s],1)):(a[s]=le(u),a[s].c(),_(a[s],1),a[s].m(e.parentNode,e))}for(M(),s=t.length;s<a.length;s+=1)i(s);z()}},i(l){if(!n){for(let o=0;o<t.length;o+=1)_(a[o]);n=!0}},o(l){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)b(a[o]);n=!1},d(l){l&&$(e),se(a,l)}}}function Be(r){let e;return{c(){e=I("i"),this.h()},l(n){e=C(n,"I",{class:!0}),A(e).forEach($),this.h()},h(){D(e,"class","bi bi-pencil-fill")},m(n,t){F(n,e,t)},p:oe,d(n){n&&$(e)}}}function le(r){let e,n,t,a=r[6].name+"",i,l,o,s=r[6].type+"",u,g,w,f,h,v;function m(){return r[3](r[6])}return f=new J({props:{variant:"primary",size:"sm","data-bs-toggle":"offcanvas","data-bs-target":"#"+r[1],"aria-controls":r[1],$$slots:{default:[Be]},$$scope:{ctx:r}}}),f.$on("click",m),{c(){e=I("div"),n=I("div"),t=I("div"),i=Y(a),l=P(),o=I("div"),u=Y(s),g=P(),w=I("div"),T(f.$$.fragment),h=P(),this.h()},l(c){e=C(c,"DIV",{class:!0});var d=A(e);n=C(d,"DIV",{});var p=A(n);t=C(p,"DIV",{class:!0});var O=A(t);i=H(O,a),O.forEach($),l=V(p),o=C(p,"DIV",{class:!0});var N=A(o);u=H(N,s),N.forEach($),p.forEach($),g=V(d),w=C(d,"DIV",{});var L=A(w);E(f.$$.fragment,L),L.forEach($),h=V(d),d.forEach($),this.h()},h(){D(t,"class","fw-bold"),D(o,"class","small fw-light"),D(e,"class","d-flex justify-content-between")},m(c,d){F(c,e,d),k(e,n),k(n,t),k(t,i),k(n,l),k(n,o),k(o,u),k(e,g),k(e,w),S(f,w,null),k(e,h),v=!0},p(c,d){r=c,(!v||d&1)&&a!==(a=r[6].name+"")&&Z(i,a),(!v||d&1)&&s!==(s=r[6].type+"")&&Z(u,s);const p={};d&2&&(p["data-bs-target"]="#"+r[1]),d&2&&(p["aria-controls"]=r[1]),d&512&&(p.$$scope={dirty:d,ctx:r}),f.$set(p)},i(c){v||(_(f.$$.fragment,c),v=!0)},o(c){b(f.$$.fragment,c),v=!1},d(c){c&&$(e),y(f)}}}function Le(r){let e,n,t=r[0].length&&ae(r);return{c(){t&&t.c(),e=B()},l(a){t&&t.l(a),e=B()},m(a,i){t&&t.m(a,i),F(a,e,i),n=!0},p(a,[i]){a[0].length?t?(t.p(a,i),i&1&&_(t,1)):(t=ae(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(M(),b(t,1,1,()=>{t=null}),z())},i(a){n||(_(t),n=!0)},o(a){b(t),n=!1},d(a){a&&$(e),t&&t.d(a)}}}function je(r,e,n){let{data:t=[]}=e,{drawerId:a=""}=e;const{stores:{targetAccount:i,loading:l}}=K(),o=u=>{l.set(!0),setTimeout(()=>{i.set(u),l.set(!1)},800)},s=u=>o(u);return r.$$set=u=>{"data"in u&&n(0,t=u.data),"drawerId"in u&&n(1,a=u.drawerId)},[t,a,o,s]}class qe extends q{constructor(e){super(),R(this,e,je,Le,j,{data:0,drawerId:1})}}function Re(r){let e,n;return e=new me({}),{c(){T(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p:oe,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ue(r){let e,n,t;function a(l){r[8](l)}let i={account:r[0],drawerId:U};return r[2]!==void 0&&(i.loading=r[2]),e=new Ve({props:i}),X.push(()=>W(e,"loading",a)),{c(){T(e.$$.fragment)},l(l){E(e.$$.fragment,l)},m(l,o){S(e,l,o),t=!0},p(l,o){const s={};o&1&&(s.account=l[0]),!n&&o&4&&(n=!0,s.loading=l[2],Q(()=>n=!1)),e.$set(s)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){y(e,l)}}}function Ye(r){let e,n,t,a;const i=[Ue,Re],l=[];function o(s,u){return s[2]?1:0}return e=o(r),n=l[e]=i[e](r),{c(){n.c(),t=B()},l(s){n.l(s),t=B()},m(s,u){l[e].m(s,u),F(s,t,u),a=!0},p(s,u){let g=e;e=o(s),e===g?l[e].p(s,u):(M(),b(l[g],1,1,()=>{l[g]=null}),z(),n=l[e],n?n.p(s,u):(n=l[e]=i[e](s),n.c()),_(n,1),n.m(t.parentNode,t))},i(s){a||(_(n),a=!0)},o(s){b(n),a=!1},d(s){s&&$(t),l[e].d(s)}}}function He(r){let e,n,t,a,i,l,o,s,u,g,w;return e=new ge({props:{title:r[1],id:U,$$slots:{default:[Ye]},$$scope:{ctx:r}}}),s=new qe({props:{drawerId:U,data:r[3]}}),{c(){T(e.$$.fragment),n=P(),t=I("div"),a=I("div"),i=I("button"),l=I("i"),o=P(),T(s.$$.fragment),this.h()},l(f){E(e.$$.fragment,f),n=V(f),t=C(f,"DIV",{class:!0});var h=A(t);a=C(h,"DIV",{class:!0});var v=A(a);i=C(v,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var m=A(i);l=C(m,"I",{class:!0}),A(l).forEach($),m.forEach($),v.forEach($),o=V(h),E(s.$$.fragment,h),h.forEach($),this.h()},h(){D(l,"class","bi bi-plus"),D(i,"class","btn btn-sm btn-secondary"),D(i,"data-bs-toggle","offcanvas"),D(i,"data-bs-target","#"+U),D(i,"aria-controls",U),D(a,"class","d-flex justify-content-end align-items-center"),D(t,"class","d-flex flex-column gap-3")},m(f,h){S(e,f,h),F(f,n,h),F(f,t,h),k(t,a),k(a,i),k(i,l),k(t,o),S(s,t,null),u=!0,g||(w=ie(i,"click",r[7]),g=!0)},p(f,[h]){const v={};h&2&&(v.title=f[1]),h&2053&&(v.$$scope={dirty:h,ctx:f}),e.$set(v);const m={};h&8&&(m.data=f[3]),s.$set(m)},i(f){u||(_(e.$$.fragment,f),_(s.$$.fragment,f),u=!0)},o(f){b(e.$$.fragment,f),b(s.$$.fragment,f),u=!1},d(f){f&&($(n),$(t)),y(e,f),y(s),g=!1,w()}}}const U="account-form";function Me(r,e,n){let t,a,i,l;const{stores:{data:o,targetAccount:s,loading:u},actions:{reload:g}}=K();G(r,o,v=>n(3,l=v)),G(r,s,v=>n(0,a=v)),G(r,u,v=>n(2,i=v));const w={name:"",type:"credit-card",sort_index:1},f=()=>{u.set(!0),setTimeout(()=>{s.set(w),u.set(!1)},1500)};ce(g),ue(pe);function h(v){i=v,u.set(i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?.id?"Edit Account":"Create Account")},[a,t,i,l,o,s,u,f,h]}class ze extends q{constructor(e){super(),R(this,e,Me,He,j,{})}}function Je(r){let e,n;return e=new ze({}),{c(){T(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ke(r){let e,n;return e=new fe({props:{pageTitle:"Accounts",$$slots:{default:[Je]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p(t,[a]){const i={};a&1&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}class tt extends q{constructor(e){super(),R(this,e,null,Ke,j,{})}}export{tt as component,et as universal};
