import{s as q,F as K,X as Q,E as re,z as L,n as O,d as p,e as A,b as V,i as E,j as T,f as P,m as N,o as b,t as j,l as R,N as se,p as Z,k as ie,D as ce,q as G,r as ue,a7 as fe,v as de}from"../chunks/scheduler.Ban6yQD2.js";import{S as U,i as Y,f as W,c as D,b as S,m as y,t as _,a as $,d as F,g as H,e as X}from"../chunks/index.B0J71FU7.js";import{P as ge}from"../chunks/PageLayout.DrwRgWwh.js";import{B as J,c as me,D as _e,F as he}from"../chunks/FormSkeleton.BCqY7h9s.js";import{g as M,d as pe}from"../chunks/accounts.state.DuobWJR2.js";import{T as ve,S as $e}from"../chunks/SelectField.8IRG-K9L.js";import{e as x}from"../chunks/Header.BVCvG74Q.js";const be=!0,at=Object.freeze(Object.defineProperty({__proto__:null,prerender:be},Symbol.toStringTag,{value:"Module"}));function Ie(r){let e,n,t;function a(l){r[7](l)}let c={label:"Name",name:"account-name-field",placeholder:"",helperText:r[3],loading:r[1],required:!0,isInvalid:r[2]};return r[0]!==void 0&&(c.value=r[0]),e=new ve({props:c}),K.push(()=>W(e,"value",a)),e.$on("valueChanged",r[4]),{c(){D(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){y(e,l,o),t=!0},p(l,[o]){const s={};o&8&&(s.helperText=l[3]),o&2&&(s.loading=l[1]),o&4&&(s.isInvalid=l[2]),!n&&o&1&&(n=!0,s.value=l[0],Q(()=>n=!1)),e.$set(s)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}const ke="Account name i.e. Chase, American Express, America First",we="This field is required";function Ce(r,e,n){let t,a,{value:c}=e,{loading:l}=e;async function o(){return new Promise(d=>{setTimeout(()=>{n(6,g=!0),d(g&&!c.trim())})})}const s=re(),f=()=>{s("valueChanged",{value:c}),n(6,g=!0)};let g=!1;function k(d){c=d,n(0,c)}return r.$$set=d=>{"value"in d&&n(0,c=d.value),"loading"in d&&n(1,l=d.loading)},r.$$.update=()=>{r.$$.dirty&65&&n(2,t=g&&!c.trim()),r.$$.dirty&4&&n(3,a=t?we:ke)},[c,l,t,a,f,o,g,k]}class Ae extends U{constructor(e){super(),Y(this,e,Ce,Ie,q,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}const Ee={creditCard:{label:"Credit Card",value:"credit-card",sort_order:0},checkings:{label:"Checkings",value:"checkings",sort_order:1},savings:{label:"Savings",value:"savings",sort_order:2},cash:{label:"Cash",value:"cash",sort_order:3},check:{label:"Check",value:"check",sort_order:4},other:{label:"Other",value:"other",sort_order:5}},Te=Object.values(Ee).sort((r,e)=>r.sort_order-e.sort_order).map(r=>({key:r.label,value:r.value}));function De(r){let e,n,t;function a(l){r[4](l)}let c={label:"Account type",name:"account-type",helperText:Se,loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(c.value=r[0]),e=new $e({props:c}),K.push(()=>W(e,"value",a)),e.$on("change",r[2]),{c(){D(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){y(e,l,o),t=!0},p(l,[o]){const s={};o&2&&(s.loading=l[1]),!n&&o&1&&(n=!0,s.value=l[0],Q(()=>n=!1)),e.$set(s)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}const Se="Specify the account type as follows Credit Card, Savings, Checking etc";function ye(r,e,n){let{value:t}=e,{loading:a}=e;const c=re(),l=()=>{c("valueChanged",{value:t})},o=Te;function s(f){t=f,n(0,t)}return r.$$set=f=>{"value"in f&&n(0,t=f.value),"loading"in f&&n(1,a=f.loading)},[t,a,l,o,s]}class Fe extends U{constructor(e){super(),Y(this,e,ye,De,q,{value:0,loading:1})}}function ee(r){let e,n,t,a,c,l,o,s,f,g,k,d,w,I={loading:r[0],value:r[1].name};n=new Ae({props:I}),r[10](n),n.$on("valueChanged",r[11]),a=new Fe({props:{loading:r[0],value:r[1].type}}),a.$on("valueChanged",r[12]);let h=r[1].id&&te(r);return g=new J({props:{loading:r[0],variant:"secondary",$$slots:{default:[Oe]},$$scope:{ctx:r}}}),g.$on("click",r[4]),d=new J({props:{loading:r[0],variant:"primary",$$slots:{default:[Ve]},$$scope:{ctx:r}}}),d.$on("click",r[5]),{c(){e=A("div"),D(n.$$.fragment),t=V(),D(a.$$.fragment),c=V(),l=A("div"),o=A("div"),h&&h.c(),s=V(),f=A("div"),D(g.$$.fragment),k=V(),D(d.$$.fragment),this.h()},l(u){e=E(u,"DIV",{class:!0});var i=T(e);S(n.$$.fragment,i),t=P(i),S(a.$$.fragment,i),c=P(i),l=E(i,"DIV",{class:!0});var m=T(l);o=E(m,"DIV",{});var v=T(o);h&&h.l(v),v.forEach(p),s=P(m),f=E(m,"DIV",{});var C=T(f);S(g.$$.fragment,C),k=P(C),S(d.$$.fragment,C),C.forEach(p),m.forEach(p),i.forEach(p),this.h()},h(){N(l,"class","d-flex justify-content-between"),N(e,"class","d-flex flex-column gap-3")},m(u,i){O(u,e,i),y(n,e,null),b(e,t),y(a,e,null),b(e,c),b(e,l),b(l,o),h&&h.m(o,null),b(l,s),b(l,f),y(g,f,null),b(f,k),y(d,f,null),w=!0},p(u,i){const m={};i&1&&(m.loading=u[0]),i&2&&(m.value=u[1].name),n.$set(m);const v={};i&1&&(v.loading=u[0]),i&2&&(v.value=u[1].type),a.$set(v),u[1].id?h?(h.p(u,i),i&2&&_(h,1)):(h=te(u),h.c(),_(h,1),h.m(o,null)):h&&(H(),$(h,1,1,()=>{h=null}),X());const C={};i&1&&(C.loading=u[0]),i&16384&&(C.$$scope={dirty:i,ctx:u}),g.$set(C);const B={};i&1&&(B.loading=u[0]),i&16384&&(B.$$scope={dirty:i,ctx:u}),d.$set(B)},i(u){w||(_(n.$$.fragment,u),_(a.$$.fragment,u),_(h),_(g.$$.fragment,u),_(d.$$.fragment,u),w=!0)},o(u){$(n.$$.fragment,u),$(a.$$.fragment,u),$(h),$(g.$$.fragment,u),$(d.$$.fragment,u),w=!1},d(u){u&&p(e),r[10](null),F(n),F(a),h&&h.d(),F(g),F(d)}}}function te(r){let e,n;return e=new J({props:{loading:r[0],variant:"danger",$$slots:{default:[Ne]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){D(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){y(e,t,a),n=!0},p(t,a){const c={};a&1&&(c.loading=t[0]),a&16384&&(c.$$scope={dirty:a,ctx:t}),e.$set(c)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function Ne(r){let e;return{c(){e=j("Delete")},l(n){e=R(n,"Delete")},m(n,t){O(n,e,t)},d(n){n&&p(e)}}}function Oe(r){let e;return{c(){e=j("Cancel")},l(n){e=R(n,"Cancel")},m(n,t){O(n,e,t)},d(n){n&&p(e)}}}function Ve(r){let e;return{c(){e=j("Save")},l(n){e=R(n,"Save")},m(n,t){O(n,e,t)},d(n){n&&p(e)}}}function Pe(r){let e,n,t=r[1]&&ee(r);return{c(){t&&t.c(),e=L()},l(a){t&&t.l(a),e=L()},m(a,c){t&&t.m(a,c),O(a,e,c),n=!0},p(a,[c]){a[1]?t?(t.p(a,c),c&2&&_(t,1)):(t=ee(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(H(),$(t,1,1,()=>{t=null}),X())},i(a){n||(_(t),n=!0)},o(a){$(t),n=!1},d(a){a&&p(e),t&&t.d(a)}}}function Be(r,e,n){let{loading:t=!1}=e,{account:a}=e,{drawerId:c}=e,l=0,o={name:"",type:"credit-card",sort_index:1},s,f;const g=(i,m)=>{const{value:v}=i.detail;if(o)switch(m){case"name":n(1,o.name=v,o);break;case"type":n(1,o.type=v,o);break;case"sort_index":n(1,o.sort_index=v,o);break}},k=()=>{const i=`[data-bs-target="#${c}"]`,m=document.querySelector(i);m&&(m.click(),n(7,a=void 0),n(9,l=void 0),n(1,o={name:"",type:"credit-card",sort_index:1}))},d=async()=>{const i=await s.validateFieldIsInvalid(),m=await f.validateFieldIsInvalid();if(i||m)return;const{actions:{reload:C,createAccount:B,updateAccount:oe}}=M();o.id?await oe(o.id,o):await B(o),await C(),k()},w=async()=>{if(!o?.id)return;const{actions:{reload:i,deleteAccount:m}}=M();me({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async v=>{o?.id&&(v&&await m(o.id),await i(),k())}})};function I(i){K[i?"unshift":"push"](()=>{s=i,n(2,s)})}const h=i=>g(i,"name"),u=i=>g(i,"type");return r.$$set=i=>{"loading"in i&&n(0,t=i.loading),"account"in i&&n(7,a=i.account),"drawerId"in i&&n(8,c=i.drawerId)},r.$$.update=()=>{r.$$.dirty&642&&(!a||l!==a?.id)&&(n(1,o=a?{...o,...a}:o),n(9,l=a?.id))},[t,o,s,g,k,d,w,a,c,l,I,h,u]}class Le extends U{constructor(e){super(),Y(this,e,Be,Pe,q,{loading:0,account:7,drawerId:8})}}function ne(r,e,n){const t=r.slice();return t[6]=e[n],t}function ae(r){let e,n,t=x(r[0]),a=[];for(let l=0;l<t.length;l+=1)a[l]=le(ne(r,t,l));const c=l=>$(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=L()},l(l){for(let o=0;o<a.length;o+=1)a[o].l(l);e=L()},m(l,o){for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(l,o);O(l,e,o),n=!0},p(l,o){if(o&7){t=x(l[0]);let s;for(s=0;s<t.length;s+=1){const f=ne(l,t,s);a[s]?(a[s].p(f,o),_(a[s],1)):(a[s]=le(f),a[s].c(),_(a[s],1),a[s].m(e.parentNode,e))}for(H(),s=t.length;s<a.length;s+=1)c(s);X()}},i(l){if(!n){for(let o=0;o<t.length;o+=1)_(a[o]);n=!0}},o(l){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)$(a[o]);n=!1},d(l){l&&p(e),se(a,l)}}}function je(r){let e;return{c(){e=j("edit")},l(n){e=R(n,"edit")},m(n,t){O(n,e,t)},d(n){n&&p(e)}}}function le(r){let e,n,t=r[6].name+"",a,c,l,o,s,f=r[6].type+"",g,k,d,w,I;function h(){return r[3](r[6])}return d=new J({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+r[1],"aria-controls":r[1],$$slots:{default:[je]},$$scope:{ctx:r}}}),d.$on("click",h),{c(){e=A("div"),n=A("div"),a=j(t),c=V(),l=A("div"),o=A("div"),s=A("div"),g=j(f),k=V(),D(d.$$.fragment),w=V(),this.h()},l(u){e=E(u,"DIV",{});var i=T(e);n=E(i,"DIV",{class:!0});var m=T(n);a=R(m,t),m.forEach(p),c=P(i),l=E(i,"DIV",{class:!0});var v=T(l);o=E(v,"DIV",{class:!0});var C=T(o);s=E(C,"DIV",{class:!0});var B=T(s);g=R(B,f),B.forEach(p),C.forEach(p),k=P(v),S(d.$$.fragment,v),v.forEach(p),w=P(i),i.forEach(p),this.h()},h(){N(n,"class","fw-bold"),N(s,"class","fw-light"),N(o,"class","small"),N(l,"class","d-flex justify-content-between")},m(u,i){O(u,e,i),b(e,n),b(n,a),b(e,c),b(e,l),b(l,o),b(o,s),b(s,g),b(l,k),y(d,l,null),b(e,w),I=!0},p(u,i){r=u,(!I||i&1)&&t!==(t=r[6].name+"")&&Z(a,t),(!I||i&1)&&f!==(f=r[6].type+"")&&Z(g,f);const m={};i&2&&(m["data-bs-target"]="#"+r[1]),i&2&&(m["aria-controls"]=r[1]),i&512&&(m.$$scope={dirty:i,ctx:r}),d.$set(m)},i(u){I||(_(d.$$.fragment,u),I=!0)},o(u){$(d.$$.fragment,u),I=!1},d(u){u&&p(e),F(d)}}}function Re(r){let e,n,t=r[0].length&&ae(r);return{c(){t&&t.c(),e=L()},l(a){t&&t.l(a),e=L()},m(a,c){t&&t.m(a,c),O(a,e,c),n=!0},p(a,[c]){a[0].length?t?(t.p(a,c),c&1&&_(t,1)):(t=ae(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(H(),$(t,1,1,()=>{t=null}),X())},i(a){n||(_(t),n=!0)},o(a){$(t),n=!1},d(a){a&&p(e),t&&t.d(a)}}}function qe(r,e,n){let{data:t=[]}=e,{drawerId:a=""}=e;const{stores:{targetAccount:c,loading:l}}=M(),o=f=>{l.set(!0),setTimeout(()=>{c.set(f),l.set(!1)},800)},s=f=>o(f);return r.$$set=f=>{"data"in f&&n(0,t=f.data),"drawerId"in f&&n(1,a=f.drawerId)},[t,a,o,s]}class Ue extends U{constructor(e){super(),Y(this,e,qe,Re,q,{data:0,drawerId:1})}}function Ye(r){let e,n;return e=new he({}),{c(){D(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){y(e,t,a),n=!0},p:de,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function ze(r){let e,n,t;function a(l){r[8](l)}let c={account:r[0],drawerId:z};return r[2]!==void 0&&(c.loading=r[2]),e=new Le({props:c}),K.push(()=>W(e,"loading",a)),{c(){D(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){y(e,l,o),t=!0},p(l,o){const s={};o&1&&(s.account=l[0]),!n&&o&4&&(n=!0,s.loading=l[2],Q(()=>n=!1)),e.$set(s)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function He(r){let e,n,t,a;const c=[ze,Ye],l=[];function o(s,f){return s[2]?1:0}return e=o(r),n=l[e]=c[e](r),{c(){n.c(),t=L()},l(s){n.l(s),t=L()},m(s,f){l[e].m(s,f),O(s,t,f),a=!0},p(s,f){let g=e;e=o(s),e===g?l[e].p(s,f):(H(),$(l[g],1,1,()=>{l[g]=null}),X(),n=l[e],n?n.p(s,f):(n=l[e]=c[e](s),n.c()),_(n,1),n.m(t.parentNode,t))},i(s){a||(_(n),a=!0)},o(s){$(n),a=!1},d(s){s&&p(t),l[e].d(s)}}}function Xe(r){let e,n,t,a,c,l="Accounts",o,s,f,g,k,d,w,I,h;return e=new _e({props:{title:r[1],id:z,$$slots:{default:[He]},$$scope:{ctx:r}}}),d=new Ue({props:{drawerId:z,data:r[3]}}),{c(){D(e.$$.fragment),n=V(),t=A("div"),a=A("div"),c=A("h2"),c.textContent=l,o=V(),s=A("div"),f=A("button"),g=A("i"),k=V(),D(d.$$.fragment),this.h()},l(u){S(e.$$.fragment,u),n=P(u),t=E(u,"DIV",{class:!0});var i=T(t);a=E(i,"DIV",{class:!0});var m=T(a);c=E(m,"H2",{"data-svelte-h":!0}),ie(c)!=="svelte-f8ypd2"&&(c.textContent=l),o=P(m),s=E(m,"DIV",{});var v=T(s);f=E(v,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var C=T(f);g=E(C,"I",{class:!0}),T(g).forEach(p),C.forEach(p),v.forEach(p),m.forEach(p),k=P(i),S(d.$$.fragment,i),i.forEach(p),this.h()},h(){N(g,"class","bi bi-plus"),N(f,"class","btn btn-sm btn-secondary"),N(f,"data-bs-toggle","offcanvas"),N(f,"data-bs-target","#"+z),N(f,"aria-controls",z),N(a,"class","d-flex justify-content-between align-items-center"),N(t,"class","d-flex flex-column gap-3")},m(u,i){y(e,u,i),O(u,n,i),O(u,t,i),b(t,a),b(a,c),b(a,o),b(a,s),b(s,f),b(f,g),b(t,k),y(d,t,null),w=!0,I||(h=ce(f,"click",r[7]),I=!0)},p(u,[i]){const m={};i&2&&(m.title=u[1]),i&2053&&(m.$$scope={dirty:i,ctx:u}),e.$set(m);const v={};i&8&&(v.data=u[3]),d.$set(v)},i(u){w||(_(e.$$.fragment,u),_(d.$$.fragment,u),w=!0)},o(u){$(e.$$.fragment,u),$(d.$$.fragment,u),w=!1},d(u){u&&(p(n),p(t)),F(e,u),F(d),I=!1,h()}}}const z="account-form";function Je(r,e,n){let t,a,c,l;const{stores:{data:o,targetAccount:s,loading:f},actions:{reload:g}}=M();G(r,o,I=>n(3,l=I)),G(r,s,I=>n(0,a=I)),G(r,f,I=>n(2,c=I));const k={name:"",type:"credit-card",sort_index:1},d=()=>{f.set(!0),setTimeout(()=>{s.set(k),f.set(!1)},1500)};ue(g),fe(pe);function w(I){c=I,f.set(c)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?.id?"Edit Account":"Create Account")},[a,t,c,l,o,s,f,d,w]}class Me extends U{constructor(e){super(),Y(this,e,Je,Xe,q,{})}}function Ke(r){let e,n;return e=new Me({}),{c(){D(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){y(e,t,a),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function Ge(r){let e,n;return e=new ge({props:{pageTitle:"Accounts",$$slots:{default:[Ke]},$$scope:{ctx:r}}}),{c(){D(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){y(e,t,a),n=!0},p(t,[a]){const c={};a&1&&(c.$$scope={dirty:a,ctx:t}),e.$set(c)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}class lt extends U{constructor(e){super(),Y(this,e,null,Ge,q,{})}}export{lt as component,at as universal};
