import{s as R,F as X,a6 as Q,M as re,A as B,o as O,f as $,e as y,d as P,j as D,k as F,i as V,n as S,p as k,t as j,m as q,K as oe,q as Z,H as se,r as G,v as ie,a7 as ce,w as ue}from"../chunks/scheduler.BCfJoXAU.js";import{S as U,i as Y,f as W,c as I,b as C,m as A,t as _,a as b,d as T,g as M,e as z}from"../chunks/index.CXmuTnoX.js";import{P as fe}from"../chunks/PageLayout.JCq68uuh.js";import{B as J,c as de,D as ge,F as me}from"../chunks/FormSkeleton.DxANlUgC.js";import{T as _e,S as pe,g as K,d as he}from"../chunks/SelectField.ChufMBg4.js";import{e as x}from"../chunks/Header.PPgXQXh9.js";const $e=!0,et=Object.freeze(Object.defineProperty({__proto__:null,prerender:$e},Symbol.toStringTag,{value:"Module"}));function ve(r){let e,n,t;function a(l){r[7](l)}let i={label:"Name",name:"account-name-field",placeholder:"",helperText:r[3],loading:r[1],required:!0,isInvalid:r[2]};return r[0]!==void 0&&(i.value=r[0]),e=new _e({props:i}),X.push(()=>W(e,"value",a)),e.$on("valueChanged",r[4]),{c(){I(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,s){A(e,l,s),t=!0},p(l,[s]){const o={};s&8&&(o.helperText=l[3]),s&2&&(o.loading=l[1]),s&4&&(o.isInvalid=l[2]),!n&&s&1&&(n=!0,o.value=l[0],Q(()=>n=!1)),e.$set(o)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}const be="Account name i.e. Chase, American Express, America First",ke="This field is required";function we(r,e,n){let t,a,{value:i}=e,{loading:l}=e;async function s(){return new Promise(f=>{setTimeout(()=>{n(6,g=!0),f(g&&!i.trim())})})}const o=re(),u=()=>{o("valueChanged",{value:i}),n(6,g=!0)};let g=!1;function w(f){i=f,n(0,i)}return r.$$set=f=>{"value"in f&&n(0,i=f.value),"loading"in f&&n(1,l=f.loading)},r.$$.update=()=>{r.$$.dirty&65&&n(2,t=g&&!i.trim()),r.$$.dirty&4&&n(3,a=t?ke:be)},[i,l,t,a,u,s,g,w]}class Ie extends U{constructor(e){super(),Y(this,e,we,ve,R,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}const Ce={creditCard:{label:"Credit Card",value:"credit-card",sort_order:0},checkings:{label:"Checkings",value:"checkings",sort_order:1},savings:{label:"Savings",value:"savings",sort_order:2},cash:{label:"Cash",value:"cash",sort_order:3},check:{label:"Check",value:"check",sort_order:4},other:{label:"Other",value:"other",sort_order:5}},Ae=Object.values(Ce).sort((r,e)=>r.sort_order-e.sort_order).map(r=>({key:r.label,value:r.value}));function Te(r){let e,n,t;function a(l){r[4](l)}let i={label:"Account type",name:"account-type",helperText:Ee,loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(i.value=r[0]),e=new pe({props:i}),X.push(()=>W(e,"value",a)),e.$on("change",r[2]),{c(){I(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,s){A(e,l,s),t=!0},p(l,[s]){const o={};s&2&&(o.loading=l[1]),!n&&s&1&&(n=!0,o.value=l[0],Q(()=>n=!1)),e.$set(o)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}const Ee="Specify the account type as follows Credit Card, Savings, Checking etc";function Se(r,e,n){let{value:t}=e,{loading:a}=e;const i=re(),l=()=>{i("valueChanged",{value:t})},s=Ae;function o(u){t=u,n(0,t)}return r.$$set=u=>{"value"in u&&n(0,t=u.value),"loading"in u&&n(1,a=u.loading)},[t,a,l,s,o]}class ye extends U{constructor(e){super(),Y(this,e,Se,Te,R,{value:0,loading:1})}}function ee(r){let e,n,t,a,i,l,s,o,u,g,w,f,p,h={loading:r[0],value:r[1].name};n=new Ie({props:h}),r[10](n),n.$on("valueChanged",r[11]),a=new ye({props:{loading:r[0],value:r[1].type}}),a.$on("valueChanged",r[12]);let m=r[1].id&&te(r);return g=new J({props:{loading:r[0],variant:"secondary",$$slots:{default:[Fe]},$$scope:{ctx:r}}}),g.$on("click",r[4]),f=new J({props:{loading:r[0],variant:"primary",$$slots:{default:[Oe]},$$scope:{ctx:r}}}),f.$on("click",r[5]),{c(){e=y("div"),I(n.$$.fragment),t=P(),I(a.$$.fragment),i=P(),l=y("div"),s=y("div"),m&&m.c(),o=P(),u=y("div"),I(g.$$.fragment),w=P(),I(f.$$.fragment),this.h()},l(c){e=D(c,"DIV",{class:!0});var d=F(e);C(n.$$.fragment,d),t=V(d),C(a.$$.fragment,d),i=V(d),l=D(d,"DIV",{class:!0});var v=F(l);s=D(v,"DIV",{});var E=F(s);m&&m.l(E),E.forEach($),o=V(v),u=D(v,"DIV",{});var N=F(u);C(g.$$.fragment,N),w=V(N),C(f.$$.fragment,N),N.forEach($),v.forEach($),d.forEach($),this.h()},h(){S(l,"class","d-flex justify-content-between"),S(e,"class","d-flex flex-column gap-3")},m(c,d){O(c,e,d),A(n,e,null),k(e,t),A(a,e,null),k(e,i),k(e,l),k(l,s),m&&m.m(s,null),k(l,o),k(l,u),A(g,u,null),k(u,w),A(f,u,null),p=!0},p(c,d){const v={};d&1&&(v.loading=c[0]),d&2&&(v.value=c[1].name),n.$set(v);const E={};d&1&&(E.loading=c[0]),d&2&&(E.value=c[1].type),a.$set(E),c[1].id?m?(m.p(c,d),d&2&&_(m,1)):(m=te(c),m.c(),_(m,1),m.m(s,null)):m&&(M(),b(m,1,1,()=>{m=null}),z());const N={};d&1&&(N.loading=c[0]),d&8192&&(N.$$scope={dirty:d,ctx:c}),g.$set(N);const L={};d&1&&(L.loading=c[0]),d&8192&&(L.$$scope={dirty:d,ctx:c}),f.$set(L)},i(c){p||(_(n.$$.fragment,c),_(a.$$.fragment,c),_(m),_(g.$$.fragment,c),_(f.$$.fragment,c),p=!0)},o(c){b(n.$$.fragment,c),b(a.$$.fragment,c),b(m),b(g.$$.fragment,c),b(f.$$.fragment,c),p=!1},d(c){c&&$(e),r[10](null),T(n),T(a),m&&m.d(),T(g),T(f)}}}function te(r){let e,n;return e=new J({props:{loading:r[0],variant:"danger",$$slots:{default:[De]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){I(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,a){A(e,t,a),n=!0},p(t,a){const i={};a&1&&(i.loading=t[0]),a&8192&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function De(r){let e;return{c(){e=j("Delete")},l(n){e=q(n,"Delete")},m(n,t){O(n,e,t)},d(n){n&&$(e)}}}function Fe(r){let e;return{c(){e=j("Cancel")},l(n){e=q(n,"Cancel")},m(n,t){O(n,e,t)},d(n){n&&$(e)}}}function Oe(r){let e;return{c(){e=j("Save")},l(n){e=q(n,"Save")},m(n,t){O(n,e,t)},d(n){n&&$(e)}}}function Ne(r){let e,n,t=r[1]&&ee(r);return{c(){t&&t.c(),e=B()},l(a){t&&t.l(a),e=B()},m(a,i){t&&t.m(a,i),O(a,e,i),n=!0},p(a,[i]){a[1]?t?(t.p(a,i),i&2&&_(t,1)):(t=ee(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(M(),b(t,1,1,()=>{t=null}),z())},i(a){n||(_(t),n=!0)},o(a){b(t),n=!1},d(a){a&&$(e),t&&t.d(a)}}}function Pe(r,e,n){let{loading:t=!1}=e,{account:a}=e,{drawerId:i}=e,l=0,s={name:"",type:"credit-card",sort_index:1},o;const u=(c,d)=>{const{value:v}=c.detail;if(s)switch(d){case"name":n(1,s.name=v,s);break;case"type":n(1,s.type=v,s);break;case"sort_index":n(1,s.sort_index=v,s);break}},g=()=>{const c=`[data-bs-target="#${i}"]`,d=document.querySelector(c);d&&(d.click(),n(7,a=void 0),n(9,l=void 0),n(1,s={name:"",type:"credit-card",sort_index:1}))},w=async()=>{if(await o.validateFieldIsInvalid())return;const{actions:{reload:d,createAccount:v,updateAccount:E}}=K();s.id?await E(s.id,s):await v(s),await d(),g()},f=async()=>{if(!s?.id)return;const{actions:{reload:c,deleteAccount:d}}=K();de({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async v=>{s?.id&&(v&&await d(s.id),await c(),g())}})};function p(c){X[c?"unshift":"push"](()=>{o=c,n(2,o)})}const h=c=>u(c,"name"),m=c=>u(c,"type");return r.$$set=c=>{"loading"in c&&n(0,t=c.loading),"account"in c&&n(7,a=c.account),"drawerId"in c&&n(8,i=c.drawerId)},r.$$.update=()=>{r.$$.dirty&642&&(!a||l!==a?.id)&&(n(1,s=a?{...s,...a}:s),n(9,l=a?.id))},[t,s,o,u,g,w,f,a,i,l,p,h,m]}class Ve extends U{constructor(e){super(),Y(this,e,Pe,Ne,R,{loading:0,account:7,drawerId:8})}}function ne(r,e,n){const t=r.slice();return t[6]=e[n],t}function ae(r){let e,n,t=x(r[0]),a=[];for(let l=0;l<t.length;l+=1)a[l]=le(ne(r,t,l));const i=l=>b(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=B()},l(l){for(let s=0;s<a.length;s+=1)a[s].l(l);e=B()},m(l,s){for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(l,s);O(l,e,s),n=!0},p(l,s){if(s&7){t=x(l[0]);let o;for(o=0;o<t.length;o+=1){const u=ne(l,t,o);a[o]?(a[o].p(u,s),_(a[o],1)):(a[o]=le(u),a[o].c(),_(a[o],1),a[o].m(e.parentNode,e))}for(M(),o=t.length;o<a.length;o+=1)i(o);z()}},i(l){if(!n){for(let s=0;s<t.length;s+=1)_(a[s]);n=!0}},o(l){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)b(a[s]);n=!1},d(l){l&&$(e),oe(a,l)}}}function Be(r){let e;return{c(){e=j("edit")},l(n){e=q(n,"edit")},m(n,t){O(n,e,t)},d(n){n&&$(e)}}}function le(r){let e,n,t=r[6].name+"",a,i,l,s,o,u=r[6].type+"",g,w,f,p,h;function m(){return r[3](r[6])}return f=new J({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+r[1],"aria-controls":r[1],$$slots:{default:[Be]},$$scope:{ctx:r}}}),f.$on("click",m),{c(){e=y("div"),n=y("div"),a=j(t),i=P(),l=y("div"),s=y("div"),o=y("div"),g=j(u),w=P(),I(f.$$.fragment),p=P(),this.h()},l(c){e=D(c,"DIV",{});var d=F(e);n=D(d,"DIV",{class:!0});var v=F(n);a=q(v,t),v.forEach($),i=V(d),l=D(d,"DIV",{class:!0});var E=F(l);s=D(E,"DIV",{class:!0});var N=F(s);o=D(N,"DIV",{class:!0});var L=F(o);g=q(L,u),L.forEach($),N.forEach($),w=V(E),C(f.$$.fragment,E),E.forEach($),p=V(d),d.forEach($),this.h()},h(){S(n,"class","fw-bold"),S(o,"class","fw-light"),S(s,"class","small"),S(l,"class","d-flex justify-content-between")},m(c,d){O(c,e,d),k(e,n),k(n,a),k(e,i),k(e,l),k(l,s),k(s,o),k(o,g),k(l,w),A(f,l,null),k(e,p),h=!0},p(c,d){r=c,(!h||d&1)&&t!==(t=r[6].name+"")&&Z(a,t),(!h||d&1)&&u!==(u=r[6].type+"")&&Z(g,u);const v={};d&2&&(v["data-bs-target"]="#"+r[1]),d&2&&(v["aria-controls"]=r[1]),d&512&&(v.$$scope={dirty:d,ctx:r}),f.$set(v)},i(c){h||(_(f.$$.fragment,c),h=!0)},o(c){b(f.$$.fragment,c),h=!1},d(c){c&&$(e),T(f)}}}function Le(r){let e,n,t=r[0].length&&ae(r);return{c(){t&&t.c(),e=B()},l(a){t&&t.l(a),e=B()},m(a,i){t&&t.m(a,i),O(a,e,i),n=!0},p(a,[i]){a[0].length?t?(t.p(a,i),i&1&&_(t,1)):(t=ae(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(M(),b(t,1,1,()=>{t=null}),z())},i(a){n||(_(t),n=!0)},o(a){b(t),n=!1},d(a){a&&$(e),t&&t.d(a)}}}function je(r,e,n){let{data:t=[]}=e,{drawerId:a=""}=e;const{stores:{targetAccount:i,loading:l}}=K(),s=u=>{l.set(!0),setTimeout(()=>{i.set(u),l.set(!1)},800)},o=u=>s(u);return r.$$set=u=>{"data"in u&&n(0,t=u.data),"drawerId"in u&&n(1,a=u.drawerId)},[t,a,s,o]}class qe extends U{constructor(e){super(),Y(this,e,je,Le,R,{data:0,drawerId:1})}}function Re(r){let e,n;return e=new me({}),{c(){I(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,a){A(e,t,a),n=!0},p:ue,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Ue(r){let e,n,t;function a(l){r[8](l)}let i={account:r[0],drawerId:H};return r[2]!==void 0&&(i.loading=r[2]),e=new Ve({props:i}),X.push(()=>W(e,"loading",a)),{c(){I(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,s){A(e,l,s),t=!0},p(l,s){const o={};s&1&&(o.account=l[0]),!n&&s&4&&(n=!0,o.loading=l[2],Q(()=>n=!1)),e.$set(o)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function Ye(r){let e,n,t,a;const i=[Ue,Re],l=[];function s(o,u){return o[2]?1:0}return e=s(r),n=l[e]=i[e](r),{c(){n.c(),t=B()},l(o){n.l(o),t=B()},m(o,u){l[e].m(o,u),O(o,t,u),a=!0},p(o,u){let g=e;e=s(o),e===g?l[e].p(o,u):(M(),b(l[g],1,1,()=>{l[g]=null}),z(),n=l[e],n?n.p(o,u):(n=l[e]=i[e](o),n.c()),_(n,1),n.m(t.parentNode,t))},i(o){a||(_(n),a=!0)},o(o){b(n),a=!1},d(o){o&&$(t),l[e].d(o)}}}function He(r){let e,n,t,a,i,l,s,o,u,g,w;return e=new ge({props:{title:r[1],id:H,$$slots:{default:[Ye]},$$scope:{ctx:r}}}),o=new qe({props:{drawerId:H,data:r[3]}}),{c(){I(e.$$.fragment),n=P(),t=y("div"),a=y("div"),i=y("button"),l=y("i"),s=P(),I(o.$$.fragment),this.h()},l(f){C(e.$$.fragment,f),n=V(f),t=D(f,"DIV",{class:!0});var p=F(t);a=D(p,"DIV",{class:!0});var h=F(a);i=D(h,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var m=F(i);l=D(m,"I",{class:!0}),F(l).forEach($),m.forEach($),h.forEach($),s=V(p),C(o.$$.fragment,p),p.forEach($),this.h()},h(){S(l,"class","bi bi-plus"),S(i,"class","btn btn-sm btn-secondary"),S(i,"data-bs-toggle","offcanvas"),S(i,"data-bs-target","#"+H),S(i,"aria-controls",H),S(a,"class","d-flex justify-content-end align-items-center"),S(t,"class","d-flex flex-column gap-3")},m(f,p){A(e,f,p),O(f,n,p),O(f,t,p),k(t,a),k(a,i),k(i,l),k(t,s),A(o,t,null),u=!0,g||(w=se(i,"click",r[7]),g=!0)},p(f,[p]){const h={};p&2&&(h.title=f[1]),p&2053&&(h.$$scope={dirty:p,ctx:f}),e.$set(h);const m={};p&8&&(m.data=f[3]),o.$set(m)},i(f){u||(_(e.$$.fragment,f),_(o.$$.fragment,f),u=!0)},o(f){b(e.$$.fragment,f),b(o.$$.fragment,f),u=!1},d(f){f&&($(n),$(t)),T(e,f),T(o),g=!1,w()}}}const H="account-form";function Me(r,e,n){let t,a,i,l;const{stores:{data:s,targetAccount:o,loading:u},actions:{reload:g}}=K();G(r,s,h=>n(3,l=h)),G(r,o,h=>n(0,a=h)),G(r,u,h=>n(2,i=h));const w={name:"",type:"credit-card",sort_index:1},f=()=>{u.set(!0),setTimeout(()=>{o.set(w),u.set(!1)},1500)};ie(g),ce(he);function p(h){i=h,u.set(i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?.id?"Edit Account":"Create Account")},[a,t,i,l,s,o,u,f,p]}class ze extends U{constructor(e){super(),Y(this,e,Me,He,R,{})}}function Je(r){let e,n;return e=new ze({}),{c(){I(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,a){A(e,t,a),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Ke(r){let e,n;return e=new fe({props:{pageTitle:"Accounts",$$slots:{default:[Je]},$$scope:{ctx:r}}}),{c(){I(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,a){A(e,t,a),n=!0},p(t,[a]){const i={};a&1&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}class tt extends U{constructor(e){super(),Y(this,e,null,Ke,R,{})}}export{tt as component,et as universal};
