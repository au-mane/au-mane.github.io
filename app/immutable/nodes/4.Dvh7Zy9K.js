import{s as q,F as X,a6 as Q,M as re,A as L,o as N,f as v,e as C,d as V,j as A,k as T,i as P,n as O,p as I,t as j,m as R,K as se,q as Z,H as ie,r as G,v as ce,a7 as ue,w as fe}from"../chunks/scheduler.BCfJoXAU.js";import{S as U,i as Y,f as W,c as E,b as S,m as D,t as h,a as b,d as y,g as M,e as z}from"../chunks/index.CXmuTnoX.js";import{P as de}from"../chunks/PageLayout.JCq68uuh.js";import{B as J,c as ge,D as me,F as _e}from"../chunks/FormSkeleton.DxANlUgC.js";import{T as pe,S as he,g as K,d as ve}from"../chunks/SelectField.ChufMBg4.js";import{e as x}from"../chunks/Header.PPgXQXh9.js";const $e=!0,tt=Object.freeze(Object.defineProperty({__proto__:null,prerender:$e},Symbol.toStringTag,{value:"Module"}));function be(r){let e,n,t;function l(a){r[7](a)}let i={label:"Name",name:"account-name-field",placeholder:"",helperText:r[3],loading:r[1],required:!0,isInvalid:r[2]};return r[0]!==void 0&&(i.value=r[0]),e=new pe({props:i}),X.push(()=>W(e,"value",l)),e.$on("valueChanged",r[4]),{c(){E(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,o){D(e,a,o),t=!0},p(a,[o]){const s={};o&8&&(s.helperText=a[3]),o&2&&(s.loading=a[1]),o&4&&(s.isInvalid=a[2]),!n&&o&1&&(n=!0,s.value=a[0],Q(()=>n=!1)),e.$set(s)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){b(e.$$.fragment,a),t=!1},d(a){y(e,a)}}}const Ie="Account name i.e. Chase, American Express, America First",ke="This field is required";function we(r,e,n){let t,l,{value:i}=e,{loading:a}=e;async function o(){return new Promise(g=>{setTimeout(()=>{n(6,d=!0),g(d&&!i.trim())})})}const s=re(),u=()=>{s("valueChanged",{value:i}),n(6,d=!0)};let d=!1;function k(g){i=g,n(0,i)}return r.$$set=g=>{"value"in g&&n(0,i=g.value),"loading"in g&&n(1,a=g.loading)},r.$$.update=()=>{r.$$.dirty&65&&n(2,t=d&&!i.trim()),r.$$.dirty&4&&n(3,l=t?ke:Ie)},[i,a,t,l,u,o,d,k]}class Ce extends U{constructor(e){super(),Y(this,e,we,be,q,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}const Ae={creditCard:{label:"Credit Card",value:"credit-card",sort_order:0},checkings:{label:"Checkings",value:"checkings",sort_order:1},savings:{label:"Savings",value:"savings",sort_order:2},cash:{label:"Cash",value:"cash",sort_order:3},check:{label:"Check",value:"check",sort_order:4},other:{label:"Other",value:"other",sort_order:5}},Te=Object.values(Ae).sort((r,e)=>r.sort_order-e.sort_order).map(r=>({key:r.label,value:r.value}));function Ee(r){let e,n,t;function l(a){r[4](a)}let i={label:"Account type",name:"account-type",helperText:Se,loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(i.value=r[0]),e=new he({props:i}),X.push(()=>W(e,"value",l)),e.$on("change",r[2]),{c(){E(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,o){D(e,a,o),t=!0},p(a,[o]){const s={};o&2&&(s.loading=a[1]),!n&&o&1&&(n=!0,s.value=a[0],Q(()=>n=!1)),e.$set(s)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){b(e.$$.fragment,a),t=!1},d(a){y(e,a)}}}const Se="Specify the account type as follows Credit Card, Savings, Checking etc";function De(r,e,n){let{value:t}=e,{loading:l}=e;const i=re(),a=()=>{i("valueChanged",{value:t})},o=Te;function s(u){t=u,n(0,t)}return r.$$set=u=>{"value"in u&&n(0,t=u.value),"loading"in u&&n(1,l=u.loading)},[t,l,a,o,s]}class ye extends U{constructor(e){super(),Y(this,e,De,Ee,q,{value:0,loading:1})}}function ee(r){let e,n,t,l,i,a,o,s,u,d,k,g,m,_={loading:r[0],value:r[1].name};n=new Ce({props:_}),r[10](n),n.$on("valueChanged",r[11]),l=new ye({props:{loading:r[0],value:r[1].type}}),l.$on("valueChanged",r[12]);let p=r[1].id&&te(r);return d=new J({props:{loading:r[0],variant:"secondary",$$slots:{default:[Oe]},$$scope:{ctx:r}}}),d.$on("click",r[4]),g=new J({props:{loading:r[0],variant:"primary",$$slots:{default:[Ne]},$$scope:{ctx:r}}}),g.$on("click",r[5]),{c(){e=C("div"),E(n.$$.fragment),t=V(),E(l.$$.fragment),i=V(),a=C("div"),o=C("div"),p&&p.c(),s=V(),u=C("div"),E(d.$$.fragment),k=V(),E(g.$$.fragment),this.h()},l(f){e=A(f,"DIV",{class:!0});var c=T(e);S(n.$$.fragment,c),t=P(c),S(l.$$.fragment,c),i=P(c),a=A(c,"DIV",{class:!0});var $=T(a);o=A($,"DIV",{});var w=T(o);p&&p.l(w),w.forEach(v),s=P($),u=A($,"DIV",{});var F=T(u);S(d.$$.fragment,F),k=P(F),S(g.$$.fragment,F),F.forEach(v),$.forEach(v),c.forEach(v),this.h()},h(){O(a,"class","d-flex justify-content-between"),O(e,"class","d-flex flex-column gap-3")},m(f,c){N(f,e,c),D(n,e,null),I(e,t),D(l,e,null),I(e,i),I(e,a),I(a,o),p&&p.m(o,null),I(a,s),I(a,u),D(d,u,null),I(u,k),D(g,u,null),m=!0},p(f,c){const $={};c&1&&($.loading=f[0]),c&2&&($.value=f[1].name),n.$set($);const w={};c&1&&(w.loading=f[0]),c&2&&(w.value=f[1].type),l.$set(w),f[1].id?p?(p.p(f,c),c&2&&h(p,1)):(p=te(f),p.c(),h(p,1),p.m(o,null)):p&&(M(),b(p,1,1,()=>{p=null}),z());const F={};c&1&&(F.loading=f[0]),c&16384&&(F.$$scope={dirty:c,ctx:f}),d.$set(F);const B={};c&1&&(B.loading=f[0]),c&16384&&(B.$$scope={dirty:c,ctx:f}),g.$set(B)},i(f){m||(h(n.$$.fragment,f),h(l.$$.fragment,f),h(p),h(d.$$.fragment,f),h(g.$$.fragment,f),m=!0)},o(f){b(n.$$.fragment,f),b(l.$$.fragment,f),b(p),b(d.$$.fragment,f),b(g.$$.fragment,f),m=!1},d(f){f&&v(e),r[10](null),y(n),y(l),p&&p.d(),y(d),y(g)}}}function te(r){let e,n;return e=new J({props:{loading:r[0],variant:"danger",$$slots:{default:[Fe]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){E(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){D(e,t,l),n=!0},p(t,l){const i={};l&1&&(i.loading=t[0]),l&16384&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Fe(r){let e;return{c(){e=j("Delete")},l(n){e=R(n,"Delete")},m(n,t){N(n,e,t)},d(n){n&&v(e)}}}function Oe(r){let e;return{c(){e=j("Cancel")},l(n){e=R(n,"Cancel")},m(n,t){N(n,e,t)},d(n){n&&v(e)}}}function Ne(r){let e;return{c(){e=j("Save")},l(n){e=R(n,"Save")},m(n,t){N(n,e,t)},d(n){n&&v(e)}}}function Ve(r){let e,n,t=r[1]&&ee(r);return{c(){t&&t.c(),e=L()},l(l){t&&t.l(l),e=L()},m(l,i){t&&t.m(l,i),N(l,e,i),n=!0},p(l,[i]){l[1]?t?(t.p(l,i),i&2&&h(t,1)):(t=ee(l),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(M(),b(t,1,1,()=>{t=null}),z())},i(l){n||(h(t),n=!0)},o(l){b(t),n=!1},d(l){l&&v(e),t&&t.d(l)}}}function Pe(r,e,n){let{loading:t=!1}=e,{account:l}=e,{drawerId:i}=e,a=0,o={name:"",type:"credit-card",sort_index:1},s,u;const d=(c,$)=>{const{value:w}=c.detail;if(o)switch($){case"name":n(1,o.name=w,o);break;case"type":n(1,o.type=w,o);break;case"sort_index":n(1,o.sort_index=w,o);break}},k=()=>{const c=`[data-bs-target="#${i}"]`,$=document.querySelector(c);$&&($.click(),n(7,l=void 0),n(9,a=void 0),n(1,o={name:"",type:"credit-card",sort_index:1}))},g=async()=>{const c=await s.validateFieldIsInvalid(),$=await u.validateFieldIsInvalid();if(c||$)return;const{actions:{reload:F,createAccount:B,updateAccount:oe}}=K();o.id?await oe(o.id,o):await B(o),await F(),k()},m=async()=>{if(!o?.id)return;const{actions:{reload:c,deleteAccount:$}}=K();ge({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async w=>{o?.id&&(w&&await $(o.id),await c(),k())}})};function _(c){X[c?"unshift":"push"](()=>{s=c,n(2,s)})}const p=c=>d(c,"name"),f=c=>d(c,"type");return r.$$set=c=>{"loading"in c&&n(0,t=c.loading),"account"in c&&n(7,l=c.account),"drawerId"in c&&n(8,i=c.drawerId)},r.$$.update=()=>{r.$$.dirty&642&&(!l||a!==l?.id)&&(n(1,o=l?{...o,...l}:o),n(9,a=l?.id))},[t,o,s,d,k,g,m,l,i,a,_,p,f]}class Be extends U{constructor(e){super(),Y(this,e,Pe,Ve,q,{loading:0,account:7,drawerId:8})}}function ne(r,e,n){const t=r.slice();return t[6]=e[n],t}function ae(r){let e,n,t=x(r[0]),l=[];for(let a=0;a<t.length;a+=1)l[a]=le(ne(r,t,a));const i=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=L()},l(a){for(let o=0;o<l.length;o+=1)l[o].l(a);e=L()},m(a,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(a,o);N(a,e,o),n=!0},p(a,o){if(o&7){t=x(a[0]);let s;for(s=0;s<t.length;s+=1){const u=ne(a,t,s);l[s]?(l[s].p(u,o),h(l[s],1)):(l[s]=le(u),l[s].c(),h(l[s],1),l[s].m(e.parentNode,e))}for(M(),s=t.length;s<l.length;s+=1)i(s);z()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)h(l[o]);n=!0}},o(a){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)b(l[o]);n=!1},d(a){a&&v(e),se(l,a)}}}function Le(r){let e;return{c(){e=j("edit")},l(n){e=R(n,"edit")},m(n,t){N(n,e,t)},d(n){n&&v(e)}}}function le(r){let e,n,t=r[6].name+"",l,i,a,o,s,u=r[6].type+"",d,k,g,m,_;function p(){return r[3](r[6])}return g=new J({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+r[1],"aria-controls":r[1],$$slots:{default:[Le]},$$scope:{ctx:r}}}),g.$on("click",p),{c(){e=C("div"),n=C("div"),l=j(t),i=V(),a=C("div"),o=C("div"),s=C("div"),d=j(u),k=V(),E(g.$$.fragment),m=V(),this.h()},l(f){e=A(f,"DIV",{});var c=T(e);n=A(c,"DIV",{class:!0});var $=T(n);l=R($,t),$.forEach(v),i=P(c),a=A(c,"DIV",{class:!0});var w=T(a);o=A(w,"DIV",{class:!0});var F=T(o);s=A(F,"DIV",{class:!0});var B=T(s);d=R(B,u),B.forEach(v),F.forEach(v),k=P(w),S(g.$$.fragment,w),w.forEach(v),m=P(c),c.forEach(v),this.h()},h(){O(n,"class","fw-bold"),O(s,"class","fw-light"),O(o,"class","small"),O(a,"class","d-flex justify-content-between")},m(f,c){N(f,e,c),I(e,n),I(n,l),I(e,i),I(e,a),I(a,o),I(o,s),I(s,d),I(a,k),D(g,a,null),I(e,m),_=!0},p(f,c){r=f,(!_||c&1)&&t!==(t=r[6].name+"")&&Z(l,t),(!_||c&1)&&u!==(u=r[6].type+"")&&Z(d,u);const $={};c&2&&($["data-bs-target"]="#"+r[1]),c&2&&($["aria-controls"]=r[1]),c&512&&($.$$scope={dirty:c,ctx:r}),g.$set($)},i(f){_||(h(g.$$.fragment,f),_=!0)},o(f){b(g.$$.fragment,f),_=!1},d(f){f&&v(e),y(g)}}}function je(r){let e,n,t=r[0].length&&ae(r);return{c(){t&&t.c(),e=L()},l(l){t&&t.l(l),e=L()},m(l,i){t&&t.m(l,i),N(l,e,i),n=!0},p(l,[i]){l[0].length?t?(t.p(l,i),i&1&&h(t,1)):(t=ae(l),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(M(),b(t,1,1,()=>{t=null}),z())},i(l){n||(h(t),n=!0)},o(l){b(t),n=!1},d(l){l&&v(e),t&&t.d(l)}}}function Re(r,e,n){let{data:t=[]}=e,{drawerId:l=""}=e;const{stores:{targetAccount:i,loading:a}}=K(),o=u=>{a.set(!0),setTimeout(()=>{i.set(u),a.set(!1)},800)},s=u=>o(u);return r.$$set=u=>{"data"in u&&n(0,t=u.data),"drawerId"in u&&n(1,l=u.drawerId)},[t,l,o,s]}class qe extends U{constructor(e){super(),Y(this,e,Re,je,q,{data:0,drawerId:1})}}function Ue(r){let e,n;return e=new _e({}),{c(){E(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){D(e,t,l),n=!0},p:fe,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ye(r){let e,n,t;function l(a){r[8](a)}let i={account:r[0],drawerId:H};return r[2]!==void 0&&(i.loading=r[2]),e=new Be({props:i}),X.push(()=>W(e,"loading",l)),{c(){E(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,o){D(e,a,o),t=!0},p(a,o){const s={};o&1&&(s.account=a[0]),!n&&o&4&&(n=!0,s.loading=a[2],Q(()=>n=!1)),e.$set(s)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){b(e.$$.fragment,a),t=!1},d(a){y(e,a)}}}function He(r){let e,n,t,l;const i=[Ye,Ue],a=[];function o(s,u){return s[2]?1:0}return e=o(r),n=a[e]=i[e](r),{c(){n.c(),t=L()},l(s){n.l(s),t=L()},m(s,u){a[e].m(s,u),N(s,t,u),l=!0},p(s,u){let d=e;e=o(s),e===d?a[e].p(s,u):(M(),b(a[d],1,1,()=>{a[d]=null}),z(),n=a[e],n?n.p(s,u):(n=a[e]=i[e](s),n.c()),h(n,1),n.m(t.parentNode,t))},i(s){l||(h(n),l=!0)},o(s){b(n),l=!1},d(s){s&&v(t),a[e].d(s)}}}function Me(r){let e,n,t,l,i,a,o,s,u,d,k,g;return e=new me({props:{title:r[1],id:H,$$slots:{default:[He]},$$scope:{ctx:r}}}),u=new qe({props:{drawerId:H,data:r[3]}}),{c(){E(e.$$.fragment),n=V(),t=C("div"),l=C("div"),i=C("div"),a=C("button"),o=C("i"),s=V(),E(u.$$.fragment),this.h()},l(m){S(e.$$.fragment,m),n=P(m),t=A(m,"DIV",{class:!0});var _=T(t);l=A(_,"DIV",{class:!0});var p=T(l);i=A(p,"DIV",{});var f=T(i);a=A(f,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var c=T(a);o=A(c,"I",{class:!0}),T(o).forEach(v),c.forEach(v),f.forEach(v),p.forEach(v),s=P(_),S(u.$$.fragment,_),_.forEach(v),this.h()},h(){O(o,"class","bi bi-plus"),O(a,"class","btn btn-sm btn-secondary"),O(a,"data-bs-toggle","offcanvas"),O(a,"data-bs-target","#"+H),O(a,"aria-controls",H),O(l,"class","d-flex justify-content-between align-items-center"),O(t,"class","d-flex flex-column gap-3")},m(m,_){D(e,m,_),N(m,n,_),N(m,t,_),I(t,l),I(l,i),I(i,a),I(a,o),I(t,s),D(u,t,null),d=!0,k||(g=ie(a,"click",r[7]),k=!0)},p(m,[_]){const p={};_&2&&(p.title=m[1]),_&2053&&(p.$$scope={dirty:_,ctx:m}),e.$set(p);const f={};_&8&&(f.data=m[3]),u.$set(f)},i(m){d||(h(e.$$.fragment,m),h(u.$$.fragment,m),d=!0)},o(m){b(e.$$.fragment,m),b(u.$$.fragment,m),d=!1},d(m){m&&(v(n),v(t)),y(e,m),y(u),k=!1,g()}}}const H="account-form";function ze(r,e,n){let t,l,i,a;const{stores:{data:o,targetAccount:s,loading:u},actions:{reload:d}}=K();G(r,o,_=>n(3,a=_)),G(r,s,_=>n(0,l=_)),G(r,u,_=>n(2,i=_));const k={name:"",type:"credit-card",sort_index:1},g=()=>{u.set(!0),setTimeout(()=>{s.set(k),u.set(!1)},1500)};ce(d),ue(ve);function m(_){i=_,u.set(i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?.id?"Edit Account":"Create Account")},[l,t,i,a,o,s,u,g,m]}class Je extends U{constructor(e){super(),Y(this,e,ze,Me,q,{})}}function Ke(r){let e,n;return e=new Je({}),{c(){E(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){D(e,t,l),n=!0},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Xe(r){let e,n;return e=new de({props:{pageTitle:"Accounts",$$slots:{default:[Ke]},$$scope:{ctx:r}}}),{c(){E(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){D(e,t,l),n=!0},p(t,[l]){const i={};l&1&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}class nt extends U{constructor(e){super(),Y(this,e,null,Xe,q,{})}}export{nt as component,tt as universal};
