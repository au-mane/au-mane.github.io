import{s as Y,F as ee,a6 as se,Y as Ae,A as H,o as F,f as h,e as k,d as B,j as C,k as T,i as P,n as $,p as v,t as J,m as K,w as Z,K as Se,l as le,H as ve,q as $e,y as Le,r as re,v as Ne,a7 as Fe}from"../chunks/scheduler.BFgUDm8F.js";import{S as U,i as q,f as oe,c as y,b as D,m as S,t as w,a as I,d as L,g as ie,e as ce}from"../chunks/index.C_nnBD4N.js";import{P as Oe}from"../chunks/PageLayout.BDbRnaxs.js";import{B as x,c as Ee,D as Be,F as Pe}from"../chunks/FormSkeleton.DZ_7keFb.js";import{T as Ve,S as je,g as X,d as He}from"../chunks/SelectField.DR9X1sv-.js";import{e as be}from"../chunks/Header.b0Pgc6OE.js";const Me=!0,kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Me},Symbol.toStringTag,{value:"Module"}));function Ye(a){let e,n,t;function l(r){a[7](r)}let o={label:"Name",name:"account-name-field",placeholder:"",helperText:a[3],loading:a[1],required:!0,isInvalid:a[2]};return a[0]!==void 0&&(o.value=a[0]),e=new Ve({props:o}),ee.push(()=>oe(e,"value",l)),e.$on("valueChanged",a[4]),{c(){y(e.$$.fragment)},l(r){D(e.$$.fragment,r)},m(r,s){S(e,r,s),t=!0},p(r,[s]){const c={};s&8&&(c.helperText=r[3]),s&2&&(c.loading=r[1]),s&4&&(c.isInvalid=r[2]),!n&&s&1&&(n=!0,c.value=r[0],se(()=>n=!1)),e.$set(c)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){L(e,r)}}}const Ue="Account name i.e. Chase, American Express, America First",qe="This field is required";function Re(a,e,n){let t,l,{value:o}=e,{loading:r}=e;async function s(){return new Promise(m=>{setTimeout(()=>{n(6,f=!0),m(f&&!o.trim())})})}const c=Ae(),i=()=>{c("valueChanged",{value:o}),n(6,f=!0)};let f=!1;function d(m){o=m,n(0,o)}return a.$$set=m=>{"value"in m&&n(0,o=m.value),"loading"in m&&n(1,r=m.loading)},a.$$.update=()=>{a.$$.dirty&65&&n(2,t=f&&!o.trim()),a.$$.dirty&4&&n(3,l=t?qe:Ue)},[o,r,t,l,i,s,f,d]}class ze extends U{constructor(e){super(),q(this,e,Re,Ye,Y,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}const Je={creditCard:{label:"Credit Card",value:"credit-card",sort_order:0},checkings:{label:"Checkings",value:"checkings",sort_order:1},savings:{label:"Savings",value:"savings",sort_order:2},cash:{label:"Cash",value:"cash",sort_order:3},check:{label:"Check",value:"check",sort_order:4},other:{label:"Other",value:"other",sort_order:5}},Ke=Object.values(Je).sort((a,e)=>a.sort_order-e.sort_order).map(a=>({key:a.label,value:a.value}));function Xe(a){let e,n,t;function l(r){a[4](r)}let o={label:"Account type",name:"account-type",helperText:Ge,loading:a[1],required:!0,isInvalid:!1,disabled:!1,options:a[3]};return a[0]!==void 0&&(o.value=a[0]),e=new je({props:o}),ee.push(()=>oe(e,"value",l)),e.$on("change",a[2]),{c(){y(e.$$.fragment)},l(r){D(e.$$.fragment,r)},m(r,s){S(e,r,s),t=!0},p(r,[s]){const c={};s&2&&(c.loading=r[1]),!n&&s&1&&(n=!0,c.value=r[0],se(()=>n=!1)),e.$set(c)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){L(e,r)}}}const Ge="Specify the account type as follows Credit Card, Savings, Checking etc";function Qe(a,e,n){let{value:t}=e,{loading:l}=e;const o=Ae(),r=()=>{o("valueChanged",{value:t})},s=Ke;function c(i){t=i,n(0,t)}return a.$$set=i=>{"value"in i&&n(0,t=i.value),"loading"in i&&n(1,l=i.loading)},[t,l,r,s,c]}class We extends U{constructor(e){super(),q(this,e,Qe,Xe,Y,{value:0,loading:1})}}function we(a){let e,n,t,l,o,r,s,c,i,f,d,m,b,A={loading:a[0],value:a[1].name};n=new ze({props:A}),a[10](n),n.$on("valueChanged",a[11]),l=new We({props:{loading:a[0],value:a[1].type}}),l.$on("valueChanged",a[12]);let _=a[1].id&&ke(a);return f=new x({props:{loading:a[0],variant:"secondary",$$slots:{default:[xe]},$$scope:{ctx:a}}}),f.$on("click",a[4]),m=new x({props:{loading:a[0],variant:"primary",$$slots:{default:[et]},$$scope:{ctx:a}}}),m.$on("click",a[5]),{c(){e=k("div"),y(n.$$.fragment),t=B(),y(l.$$.fragment),o=B(),r=k("div"),s=k("div"),_&&_.c(),c=B(),i=k("div"),y(f.$$.fragment),d=B(),y(m.$$.fragment),this.h()},l(u){e=C(u,"DIV",{class:!0});var g=T(e);D(n.$$.fragment,g),t=P(g),D(l.$$.fragment,g),o=P(g),r=C(g,"DIV",{class:!0});var p=T(r);s=C(p,"DIV",{});var E=T(s);_&&_.l(E),E.forEach(h),c=P(p),i=C(p,"DIV",{});var O=T(i);D(f.$$.fragment,O),d=P(O),D(m.$$.fragment,O),O.forEach(h),p.forEach(h),g.forEach(h),this.h()},h(){$(r,"class","d-flex justify-content-between"),$(e,"class","d-flex flex-column gap-3")},m(u,g){F(u,e,g),S(n,e,null),v(e,t),S(l,e,null),v(e,o),v(e,r),v(r,s),_&&_.m(s,null),v(r,c),v(r,i),S(f,i,null),v(i,d),S(m,i,null),b=!0},p(u,g){const p={};g&1&&(p.loading=u[0]),g&2&&(p.value=u[1].name),n.$set(p);const E={};g&1&&(E.loading=u[0]),g&2&&(E.value=u[1].type),l.$set(E),u[1].id?_?(_.p(u,g),g&2&&w(_,1)):(_=ke(u),_.c(),w(_,1),_.m(s,null)):_&&(ie(),I(_,1,1,()=>{_=null}),ce());const O={};g&1&&(O.loading=u[0]),g&8192&&(O.$$scope={dirty:g,ctx:u}),f.$set(O);const j={};g&1&&(j.loading=u[0]),g&8192&&(j.$$scope={dirty:g,ctx:u}),m.$set(j)},i(u){b||(w(n.$$.fragment,u),w(l.$$.fragment,u),w(_),w(f.$$.fragment,u),w(m.$$.fragment,u),b=!0)},o(u){I(n.$$.fragment,u),I(l.$$.fragment,u),I(_),I(f.$$.fragment,u),I(m.$$.fragment,u),b=!1},d(u){u&&h(e),a[10](null),L(n),L(l),_&&_.d(),L(f),L(m)}}}function ke(a){let e,n;return e=new x({props:{loading:a[0],variant:"danger",$$slots:{default:[Ze]},$$scope:{ctx:a}}}),e.$on("click",a[6]),{c(){y(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.loading=t[0]),l&8192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ze(a){let e;return{c(){e=J("Delete")},l(n){e=K(n,"Delete")},m(n,t){F(n,e,t)},d(n){n&&h(e)}}}function xe(a){let e;return{c(){e=J("Cancel")},l(n){e=K(n,"Cancel")},m(n,t){F(n,e,t)},d(n){n&&h(e)}}}function et(a){let e;return{c(){e=J("Save")},l(n){e=K(n,"Save")},m(n,t){F(n,e,t)},d(n){n&&h(e)}}}function tt(a){let e,n,t=a[1]&&we(a);return{c(){t&&t.c(),e=H()},l(l){t&&t.l(l),e=H()},m(l,o){t&&t.m(l,o),F(l,e,o),n=!0},p(l,[o]){l[1]?t?(t.p(l,o),o&2&&w(t,1)):(t=we(l),t.c(),w(t,1),t.m(e.parentNode,e)):t&&(ie(),I(t,1,1,()=>{t=null}),ce())},i(l){n||(w(t),n=!0)},o(l){I(t),n=!1},d(l){l&&h(e),t&&t.d(l)}}}function nt(a,e,n){let{loading:t=!1}=e,{account:l}=e,{drawerId:o}=e,r=0,s={name:"",type:"credit-card",sort_index:1},c;const i=(u,g)=>{const{value:p}=u.detail;if(s)switch(g){case"name":n(1,s.name=p,s);break;case"type":n(1,s.type=p,s);break;case"sort_index":n(1,s.sort_index=p,s);break}},f=()=>{const u=`[data-bs-target="#${o}"]`,g=document.querySelector(u);g&&(g.click(),n(7,l=void 0),n(9,r=void 0),n(1,s={name:"",type:"credit-card",sort_index:1}))},d=async()=>{if(await c.validateFieldIsInvalid())return;const{actions:{reload:g,createAccount:p,updateAccount:E}}=X();s.id?await E(s.id,s):await p(s),await g(),f()},m=async()=>{if(!s?.id)return;const{actions:{reload:u,deleteAccount:g}}=X();Ee({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async p=>{s?.id&&(p&&await g(s.id),await u(),f())}})};function b(u){ee[u?"unshift":"push"](()=>{c=u,n(2,c)})}const A=u=>i(u,"name"),_=u=>i(u,"type");return a.$$set=u=>{"loading"in u&&n(0,t=u.loading),"account"in u&&n(7,l=u.account),"drawerId"in u&&n(8,o=u.drawerId)},a.$$.update=()=>{a.$$.dirty&642&&(!l||r!==l?.id)&&(n(1,s=l?{...s,...l}:s),n(9,r=l?.id))},[t,s,c,i,f,d,m,l,o,r,b,A,_]}class at extends U{constructor(e){super(),q(this,e,nt,tt,Y,{loading:0,account:7,drawerId:8})}}function Ce(a,e,n){const t=a.slice();return t[8]=e[n],t}function Ie(a){let e,n=be(a[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Te(Ce(a,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=H()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);e=H()},m(l,o){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(l,o);F(l,e,o)},p(l,o){if(o&15){n=be(l[0]);let r;for(r=0;r<n.length;r+=1){const s=Ce(l,n,r);t[r]?t[r].p(s,o):(t[r]=Te(s),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},d(l){l&&h(e),Se(t,l)}}}function Te(a){let e,n,t,l=a[8].name+"",o,r,s,c=a[8].type+"",i,f,d,m,b,A='<i class="bi bi-three-dots-vertical"></i>',_,u,g,p,E,O='<span>Edit</span> <i class="bi bi-pencil-fill"></i>',j,te,R,V,ue='<span class="d-flex justify-content-between"><span>Delete</span> <i class="bi bi-trash-fill"></i></span>',ne,ae,fe;function ye(){return a[4](a[8])}function De(){return a[5](a[8])}return{c(){e=k("div"),n=k("div"),t=k("div"),o=J(l),r=B(),s=k("div"),i=J(c),f=B(),d=k("div"),m=k("div"),b=k("span"),b.innerHTML=A,_=B(),u=k("ul"),g=k("li"),p=k("button"),E=k("span"),E.innerHTML=O,te=B(),R=k("li"),V=k("button"),V.innerHTML=ue,ne=B(),this.h()},l(M){e=C(M,"DIV",{class:!0});var N=T(e);n=C(N,"DIV",{});var G=T(n);t=C(G,"DIV",{class:!0});var de=T(t);o=K(de,l),de.forEach(h),r=P(G),s=C(G,"DIV",{class:!0});var ge=T(s);i=K(ge,c),ge.forEach(h),G.forEach(h),f=P(N),d=C(N,"DIV",{class:!0});var me=T(d);m=C(me,"DIV",{class:!0});var Q=T(m);b=C(Q,"SPAN",{"data-bs-toggle":!0,"aria-expanded":!0,"data-svelte-h":!0}),le(b)!=="svelte-ed95na"&&(b.innerHTML=A),_=P(Q),u=C(Q,"UL",{class:!0});var W=T(u);g=C(W,"LI",{});var _e=T(g);p=C(_e,"BUTTON",{type:!0,class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var pe=T(p);E=C(pe,"SPAN",{class:!0,"data-svelte-h":!0}),le(E)!=="svelte-13gbkkl"&&(E.innerHTML=O),pe.forEach(h),_e.forEach(h),te=P(W),R=C(W,"LI",{});var he=T(R);V=C(he,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(V)!=="svelte-ihji2t"&&(V.innerHTML=ue),he.forEach(h),W.forEach(h),Q.forEach(h),me.forEach(h),ne=P(N),N.forEach(h),this.h()},h(){$(t,"class","fw-bold"),$(s,"class","small fw-light"),$(b,"data-bs-toggle","dropdown"),$(b,"aria-expanded","false"),$(E,"class","d-flex justify-content-between"),$(p,"type","button"),$(p,"class","dropdown-item"),$(p,"data-bs-toggle","offcanvas"),$(p,"data-bs-target",j="#"+a[1]),$(p,"aria-controls",a[1]),$(V,"type","button"),$(V,"class","dropdown-item"),$(u,"class","dropdown-menu dropdown-menu-dark"),$(m,"class","dropdown"),$(d,"class","d-flex align-items-start gap-2"),$(e,"class","d-flex justify-content-between")},m(M,N){F(M,e,N),v(e,n),v(n,t),v(t,o),v(n,r),v(n,s),v(s,i),v(e,f),v(e,d),v(d,m),v(m,b),v(m,_),v(m,u),v(u,g),v(g,p),v(p,E),v(u,te),v(u,R),v(R,V),v(e,ne),ae||(fe=[ve(p,"click",ye),ve(V,"click",De)],ae=!0)},p(M,N){a=M,N&1&&l!==(l=a[8].name+"")&&$e(o,l),N&1&&c!==(c=a[8].type+"")&&$e(i,c),N&2&&j!==(j="#"+a[1])&&$(p,"data-bs-target",j),N&2&&$(p,"aria-controls",a[1])},d(M){M&&h(e),ae=!1,Le(fe)}}}function lt(a){let e,n=a[0].length&&Ie(a);return{c(){n&&n.c(),e=H()},l(t){n&&n.l(t),e=H()},m(t,l){n&&n.m(t,l),F(t,e,l)},p(t,[l]){t[0].length?n?n.p(t,l):(n=Ie(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Z,o:Z,d(t){t&&h(e),n&&n.d(t)}}}function rt(a,e,n){let{data:t=[]}=e,{drawerId:l=""}=e;const{stores:{targetAccount:o,loading:r}}=X(),s=async d=>{if(!d)return;const{actions:{canDeleteAccount:m,reload:b,deleteAccount:A}}=X(),_=await m(d);Ee({title:"Delete Confirmation",message:_?"Are you sure you want to do this?  You won't be able to undo this.":"There are uses of this account in bills and transactions.  You cannot delete it",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",confirmButtonHide:!_,rejectButtonLabel:_?"No":"Close",callback:async g=>{d&&g&&_&&(await A(d),await b())}})},c=d=>{r.set(!0),setTimeout(()=>{o.set(d),r.set(!1)},800)},i=d=>c(d),f=d=>s(d.id);return a.$$set=d=>{"data"in d&&n(0,t=d.data),"drawerId"in d&&n(1,l=d.drawerId)},[t,l,s,c,i,f]}class st extends U{constructor(e){super(),q(this,e,rt,lt,Y,{data:0,drawerId:1})}}function ot(a){let e,n;return e=new Pe({}),{c(){y(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,l){S(e,t,l),n=!0},p:Z,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function it(a){let e,n,t;function l(r){a[8](r)}let o={account:a[0],drawerId:z};return a[2]!==void 0&&(o.loading=a[2]),e=new at({props:o}),ee.push(()=>oe(e,"loading",l)),{c(){y(e.$$.fragment)},l(r){D(e.$$.fragment,r)},m(r,s){S(e,r,s),t=!0},p(r,s){const c={};s&1&&(c.account=r[0]),!n&&s&4&&(n=!0,c.loading=r[2],se(()=>n=!1)),e.$set(c)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){L(e,r)}}}function ct(a){let e,n,t,l;const o=[it,ot],r=[];function s(c,i){return c[2]?1:0}return e=s(a),n=r[e]=o[e](a),{c(){n.c(),t=H()},l(c){n.l(c),t=H()},m(c,i){r[e].m(c,i),F(c,t,i),l=!0},p(c,i){let f=e;e=s(c),e===f?r[e].p(c,i):(ie(),I(r[f],1,1,()=>{r[f]=null}),ce(),n=r[e],n?n.p(c,i):(n=r[e]=o[e](c),n.c()),w(n,1),n.m(t.parentNode,t))},i(c){l||(w(n),l=!0)},o(c){I(n),l=!1},d(c){c&&h(t),r[e].d(c)}}}function ut(a){let e;return{c(){e=k("i"),this.h()},l(n){e=C(n,"I",{class:!0}),T(e).forEach(h),this.h()},h(){$(e,"class","bi bi-plus")},m(n,t){F(n,e,t)},p:Z,d(n){n&&h(e)}}}function ft(a){let e,n,t,l,o,r,s,c;return e=new Be({props:{title:a[1],id:z,$$slots:{default:[ct]},$$scope:{ctx:a}}}),o=new x({props:{variant:"primary",size:"sm","data-bs-toggle":"offcanvas","data-bs-target":"#"+z,"aria-controls":z,$$slots:{default:[ut]},$$scope:{ctx:a}}}),o.$on("click",a[7]),s=new st({props:{drawerId:z,data:a[3]}}),{c(){y(e.$$.fragment),n=B(),t=k("div"),l=k("div"),y(o.$$.fragment),r=B(),y(s.$$.fragment),this.h()},l(i){D(e.$$.fragment,i),n=P(i),t=C(i,"DIV",{class:!0});var f=T(t);l=C(f,"DIV",{class:!0});var d=T(l);D(o.$$.fragment,d),d.forEach(h),r=P(f),D(s.$$.fragment,f),f.forEach(h),this.h()},h(){$(l,"class","d-flex justify-content-end align-items-center"),$(t,"class","d-flex flex-column gap-3")},m(i,f){S(e,i,f),F(i,n,f),F(i,t,f),v(t,l),S(o,l,null),v(t,r),S(s,t,null),c=!0},p(i,[f]){const d={};f&2&&(d.title=i[1]),f&2053&&(d.$$scope={dirty:f,ctx:i}),e.$set(d);const m={};f&2048&&(m.$$scope={dirty:f,ctx:i}),o.$set(m);const b={};f&8&&(b.data=i[3]),s.$set(b)},i(i){c||(w(e.$$.fragment,i),w(o.$$.fragment,i),w(s.$$.fragment,i),c=!0)},o(i){I(e.$$.fragment,i),I(o.$$.fragment,i),I(s.$$.fragment,i),c=!1},d(i){i&&(h(n),h(t)),L(e,i),L(o),L(s)}}}const z="account-form";function dt(a,e,n){let t,l,o,r;const{stores:{data:s,targetAccount:c,loading:i},actions:{reload:f}}=X();re(a,s,A=>n(3,r=A)),re(a,c,A=>n(0,l=A)),re(a,i,A=>n(2,o=A));const d={name:"",type:"credit-card",sort_index:1},m=()=>{i.set(!0),setTimeout(()=>{c.set(d),i.set(!1)},1500)};Ne(f),Fe(He);function b(A){o=A,i.set(o)}return a.$$.update=()=>{a.$$.dirty&1&&n(1,t=l?.id?"Edit Account":"Create Account")},[l,t,o,r,s,c,i,m,b]}class gt extends U{constructor(e){super(),q(this,e,dt,ft,Y,{})}}function mt(a){let e,n;return e=new gt({}),{c(){y(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,l){S(e,t,l),n=!0},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function _t(a){let e,n;return e=new Oe({props:{pageTitle:"Accounts",$$slots:{default:[mt]},$$scope:{ctx:a}}}),{c(){y(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,l){S(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}class Ct extends U{constructor(e){super(),q(this,e,null,_t,Y,{})}}export{Ct as component,kt as universal};
