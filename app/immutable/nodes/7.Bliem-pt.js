import{s as W,F as ie,a2 as se,a0 as me,z as G,n as R,v as ce,d as v,e as B,t as H,b as N,i as T,j as M,l as K,f as F,m as I,o as p,p as te,L as Pe,k as ae,H as re,x as Ae,q as pe,r as Re}from"../chunks/scheduler.CWeZ8IE-.js";import{S as X,i as Z,f as oe,c as V,b as O,m as P,t as h,a as k,d as L,g as x,e as ee}from"../chunks/index._HyQwHiQ.js";import{P as Ue}from"../chunks/PageLayout.DhBI5v9J.js";import{b as ke,B as Ye,R as ze,f as de,d as we,g as ge,c as He,D as Ke,F as Ge}from"../chunks/FormSkeleton.9aXHAgY0.js";import{S as Le,D as qe,a as Je,b as Qe,A as We,B as Xe}from"../chunks/BillTypeBadge.GHw47la6.js";import{e as _e}from"../chunks/Header.Bevg-Z3T.js";import{t as Ze,f as Ce}from"../chunks/app.state.BfTudu3J.js";function xe(r,e){const l=Ze(r);if(isNaN(e))return ke(r,NaN);const t=l.getDate(),n=ke(r,l.getTime());n.setMonth(l.getMonth()+e+1,0);const s=n.getDate();return t>=s?n:(l.setFullYear(n.getFullYear(),n.getMonth(),t),l)}const et=!0,Lt=Object.freeze(Object.defineProperty({__proto__:null,prerender:et},Symbol.toStringTag,{value:"Module"}));function tt(r){let e,l,t;function n(a){r[4](a)}let s={label:"Type",name:"repeat-type",helperText:"",loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(s.value=r[0]),e=new Le({props:s}),ie.push(()=>oe(e,"value",n)),e.$on("change",r[2]),{c(){V(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,o){P(e,a,o),t=!0},p(a,[o]){const i={};o&2&&(i.loading=a[1]),!l&&o&1&&(l=!0,i.value=a[0],se(()=>l=!1)),e.$set(i)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){L(e,a)}}}function lt(r,e,l){let{value:t}=e,{loading:n}=e;const s=me(),a=()=>{s("valueChanged",{value:t})},o=Ye;function i(u){t=u,l(0,t)}return r.$$set=u=>{"value"in u&&l(0,t=u.value),"loading"in u&&l(1,n=u.loading)},[t,n,a,o,i]}class nt extends X{constructor(e){super(),Z(this,e,lt,tt,W,{value:0,loading:1})}}function at(r){let e,l,t;function n(a){r[4](a)}let s={label:"Repeat type",name:"repeat-type",helperText:"",loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(s.value=r[0]),e=new Le({props:s}),ie.push(()=>oe(e,"value",n)),e.$on("change",r[2]),{c(){V(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,o){P(e,a,o),t=!0},p(a,[o]){const i={};o&2&&(i.loading=a[1]),!l&&o&1&&(l=!0,i.value=a[0],se(()=>l=!1)),e.$set(i)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){L(e,a)}}}function rt(r,e,l){let{value:t}=e,{loading:n}=e;const s=me(),a=()=>{s("valueChanged",{value:t})},o=ze;function i(u){t=u,l(0,t)}return r.$$set=u=>{"value"in u&&l(0,t=u.value),"loading"in u&&l(1,n=u.loading)},[t,n,a,o,i]}class it extends X{constructor(e){super(),Z(this,e,rt,at,W,{value:0,loading:1})}}function st(r){let e,l,t;function n(a){r[3](a)}let s={label:"Date",name:"repeat-start-date",placeholder:"",helperText:"",loading:r[1],required:!0,isInvalid:!1};return r[0]!==void 0&&(s.value=r[0]),e=new qe({props:s}),ie.push(()=>oe(e,"value",n)),e.$on("valueChanged",r[2]),{c(){V(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,o){P(e,a,o),t=!0},p(a,[o]){const i={};o&2&&(i.loading=a[1]),!l&&o&1&&(l=!0,i.value=a[0],se(()=>l=!1)),e.$set(i)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){L(e,a)}}}function ot(r,e,l){let{value:t}=e,{loading:n}=e;const s=me(),a=()=>{s("valueChanged",{value:t})};function o(i){t=i,l(0,t)}return r.$$set=i=>{"value"in i&&l(0,t=i.value),"loading"in i&&l(1,n=i.loading)},[t,n,a,o]}class ft extends X{constructor(e){super(),Z(this,e,ot,st,W,{value:0,loading:1})}}function ut(r){let e,l,t;function n(a){r[3](a)}let s={label:"Until",name:"repeat-end-date",placeholder:"",helperText:"",loading:r[1],required:!0,isInvalid:!1};return r[0]!==void 0&&(s.value=r[0]),e=new qe({props:s}),ie.push(()=>oe(e,"value",n)),e.$on("valueChanged",r[2]),{c(){V(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,o){P(e,a,o),t=!0},p(a,[o]){const i={};o&2&&(i.loading=a[1]),!l&&o&1&&(l=!0,i.value=a[0],se(()=>l=!1)),e.$set(i)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){L(e,a)}}}function ct(r,e,l){let{value:t}=e,{loading:n}=e;const s=me(),a=()=>{s("valueChanged",{value:t})};function o(i){t=i,l(0,t)}return r.$$set=i=>{"value"in i&&l(0,t=i.value),"loading"in i&&l(1,n=i.loading)},[t,n,a,o]}class dt extends X{constructor(e){super(),Z(this,e,ct,ut,W,{value:0,loading:1})}}function ye(r,e,l){const t=r.slice();return t[2]=e[l],t[4]=l,t}function De(r){let e,l,t,n=r[0].length+"",s,a,o,i,u,c=_e(r[0]),d=[];for(let f=0;f<c.length;f+=1)d[f]=Ee(ye(r,c,f));return{c(){e=B("div"),l=B("div"),t=H("Dates Preview ("),s=H(n),a=H(" entries)"),o=N(),i=B("div"),u=B("ul");for(let f=0;f<d.length;f+=1)d[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0});var m=M(e);l=T(m,"DIV",{});var _=M(l);t=K(_,"Dates Preview ("),s=K(_,n),a=K(_," entries)"),_.forEach(v),o=F(m),i=T(m,"DIV",{class:!0});var S=M(i);u=T(S,"UL",{class:!0});var $=M(u);for(let w=0;w<d.length;w+=1)d[w].l($);$.forEach(v),S.forEach(v),m.forEach(v),this.h()},h(){I(u,"class","list-group list-group-flush"),I(i,"class","preview border border-light-subtle svelte-1qbwz3y"),I(e,"class","d-flex flex-column gap-1")},m(f,m){R(f,e,m),p(e,l),p(l,t),p(l,s),p(l,a),p(e,o),p(e,i),p(i,u);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(u,null)},p(f,m){if(m&1&&n!==(n=f[0].length+"")&&te(s,n),m&1){c=_e(f[0]);let _;for(_=0;_<c.length;_+=1){const S=ye(f,c,_);d[_]?d[_].p(S,m):(d[_]=Ee(S),d[_].c(),d[_].m(u,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=c.length}},d(f){f&&v(e),Pe(d,f)}}}function Ee(r){let e,l=r[4]+1+"",t,n,s=de(r[2],"EEE - dd MMM yyyy")+"",a,o;return{c(){e=B("li"),t=H(l),n=H(". "),a=H(s),o=N(),this.h()},l(i){e=T(i,"LI",{class:!0});var u=M(e);t=K(u,l),n=K(u,". "),a=K(u,s),o=F(u),u.forEach(v),this.h()},h(){I(e,"class","list-group-item")},m(i,u){R(i,e,u),p(e,t),p(e,n),p(e,a),p(e,o)},p(i,u){u&1&&s!==(s=de(i[2],"EEE - dd MMM yyyy")+"")&&te(a,s)},d(i){i&&v(e)}}}function gt(r){let e,l=r[0].length>0&&De(r);return{c(){l&&l.c(),e=G()},l(t){l&&l.l(t),e=G()},m(t,n){l&&l.m(t,n),R(t,e,n)},p(t,[n]){t[0].length>0?l?l.p(t,n):(l=De(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:ce,o:ce,d(t){t&&v(e),l&&l.d(t)}}}function _t(r,e,l){let{dates:t}=e,{loading:n}=e;return console.log("### loading",n),r.$$set=s=>{"dates"in s&&l(0,t=s.dates),"loading"in s&&l(1,n=s.loading)},[t,n]}class mt extends X{constructor(e){super(),Z(this,e,_t,gt,W,{dates:0,loading:1})}}function Ie(r){let e,l,t,n,s,a,o,i,u,c,d,f,m,_,S="Cancel",$,w,q="Save",U,Y,j;l=new Je({props:{loading:r[0],value:r[1].description}}),l.$on("valueChanged",r[10]),n=new Qe({props:{loading:r[0],value:r[1].source}}),n.$on("valueChanged",r[11]),a=new We({props:{loading:r[0],value:r[1].amount}}),a.$on("valueChanged",r[12]);let g=r[1]?.meta_data?.transaction?.type&&Be(r),C=r[1].recurrence&&Te(r),y=r[1].id&&Me(r);return{c(){e=B("div"),V(l.$$.fragment),t=N(),V(n.$$.fragment),s=N(),V(a.$$.fragment),o=N(),g&&g.c(),i=N(),C&&C.c(),u=N(),c=B("div"),d=B("div"),y&&y.c(),f=N(),m=B("div"),_=B("button"),_.textContent=S,$=N(),w=B("button"),w.textContent=q,this.h()},l(D){e=T(D,"DIV",{class:!0});var b=M(e);O(l.$$.fragment,b),t=F(b),O(n.$$.fragment,b),s=F(b),O(a.$$.fragment,b),o=F(b),g&&g.l(b),i=F(b),C&&C.l(b),u=F(b),c=T(b,"DIV",{class:!0});var z=M(c);d=T(z,"DIV",{});var J=M(d);y&&y.l(J),J.forEach(v),f=F(z),m=T(z,"DIV",{});var E=M(m);_=T(E,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(_)!=="svelte-1ujapj6"&&(_.textContent=S),$=F(E),w=T(E,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(w)!=="svelte-1av7h0z"&&(w.textContent=q),E.forEach(v),z.forEach(v),b.forEach(v),this.h()},h(){I(_,"class","btn btn-sm btn-secondary"),I(w,"class","btn btn-sm btn-primary"),I(c,"class","d-flex justify-content-between"),I(e,"class","d-flex flex-column gap-3")},m(D,b){R(D,e,b),P(l,e,null),p(e,t),P(n,e,null),p(e,s),P(a,e,null),p(e,o),g&&g.m(e,null),p(e,i),C&&C.m(e,null),p(e,u),p(e,c),p(c,d),y&&y.m(d,null),p(c,f),p(c,m),p(m,_),p(m,$),p(m,w),U=!0,Y||(j=[re(_,"click",r[4]),re(w,"click",r[5])],Y=!0)},p(D,b){const z={};b&1&&(z.loading=D[0]),b&2&&(z.value=D[1].description),l.$set(z);const J={};b&1&&(J.loading=D[0]),b&2&&(J.value=D[1].source),n.$set(J);const E={};b&1&&(E.loading=D[0]),b&2&&(E.value=D[1].amount),a.$set(E),D[1]?.meta_data?.transaction?.type?g?(g.p(D,b),b&2&&h(g,1)):(g=Be(D),g.c(),h(g,1),g.m(e,i)):g&&(x(),k(g,1,1,()=>{g=null}),ee()),D[1].recurrence?C?(C.p(D,b),b&2&&h(C,1)):(C=Te(D),C.c(),h(C,1),C.m(e,u)):C&&(x(),k(C,1,1,()=>{C=null}),ee()),D[1].id?y?y.p(D,b):(y=Me(D),y.c(),y.m(d,null)):y&&(y.d(1),y=null)},i(D){U||(h(l.$$.fragment,D),h(n.$$.fragment,D),h(a.$$.fragment,D),h(g),h(C),U=!0)},o(D){k(l.$$.fragment,D),k(n.$$.fragment,D),k(a.$$.fragment,D),k(g),k(C),U=!1},d(D){D&&v(e),L(l),L(n),L(a),g&&g.d(),C&&C.d(),y&&y.d(),Y=!1,Ae(j)}}}function Be(r){let e,l;return e=new nt({props:{loading:r[0],value:r[1].meta_data.transaction.type}}),e.$on("valueChanged",r[13]),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.loading=t[0]),n&2&&(s.value=t[1].meta_data.transaction.type),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Te(r){let e,l="Repeats",t,n,s,a,o,i,u,c;n=new it({props:{loading:r[0],value:r[1].recurrence.type}}),n.$on("valueChanged",r[14]),a=new ft({props:{loading:r[0],value:r[1].recurrence.start_date}}),a.$on("valueChanged",r[15]);let d=r[1].recurrence.until&&Se(r);return u=new mt({props:{loading:r[0],dates:r[2]}}),{c(){e=B("h5"),e.textContent=l,t=N(),V(n.$$.fragment),s=N(),V(a.$$.fragment),o=N(),d&&d.c(),i=N(),V(u.$$.fragment)},l(f){e=T(f,"H5",{"data-svelte-h":!0}),ae(e)!=="svelte-13f0n3i"&&(e.textContent=l),t=F(f),O(n.$$.fragment,f),s=F(f),O(a.$$.fragment,f),o=F(f),d&&d.l(f),i=F(f),O(u.$$.fragment,f)},m(f,m){R(f,e,m),R(f,t,m),P(n,f,m),R(f,s,m),P(a,f,m),R(f,o,m),d&&d.m(f,m),R(f,i,m),P(u,f,m),c=!0},p(f,m){const _={};m&1&&(_.loading=f[0]),m&2&&(_.value=f[1].recurrence.type),n.$set(_);const S={};m&1&&(S.loading=f[0]),m&2&&(S.value=f[1].recurrence.start_date),a.$set(S),f[1].recurrence.until?d?(d.p(f,m),m&2&&h(d,1)):(d=Se(f),d.c(),h(d,1),d.m(i.parentNode,i)):d&&(x(),k(d,1,1,()=>{d=null}),ee());const $={};m&1&&($.loading=f[0]),m&4&&($.dates=f[2]),u.$set($)},i(f){c||(h(n.$$.fragment,f),h(a.$$.fragment,f),h(d),h(u.$$.fragment,f),c=!0)},o(f){k(n.$$.fragment,f),k(a.$$.fragment,f),k(d),k(u.$$.fragment,f),c=!1},d(f){f&&(v(e),v(t),v(s),v(o),v(i)),L(n,f),L(a,f),d&&d.d(f),L(u,f)}}}function Se(r){let e,l;return e=new dt({props:{loading:r[0],value:r[1].recurrence.until}}),e.$on("valueChanged",r[16]),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.loading=t[0]),n&2&&(s.value=t[1].recurrence.until),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Me(r){let e,l="Delete",t,n;return{c(){e=B("button"),e.textContent=l,this.h()},l(s){e=T(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1a2qbe2"&&(e.textContent=l),this.h()},h(){I(e,"class","btn btn-sm btn-danger")},m(s,a){R(s,e,a),t||(n=re(e,"click",r[6]),t=!0)},p:ce,d(s){s&&v(e),t=!1,n()}}}function pt(r){let e,l,t=r[1]&&Ie(r);return{c(){t&&t.c(),e=G()},l(n){t&&t.l(n),e=G()},m(n,s){t&&t.m(n,s),R(n,e,s),l=!0},p(n,[s]){n[1]?t?(t.p(n,s),s&2&&h(t,1)):(t=Ie(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(x(),k(t,1,1,()=>{t=null}),ee())},i(n){l||(h(t),l=!0)},o(n){k(t),l=!1},d(n){n&&v(e),t&&t.d(n)}}}function ht(r,e,l){let{loading:t=!1}=e,{bill:n}=e,{drawerId:s}=e,a=[],o=0,i={type:"monthly",start_date:de(new Date,"yyyy-MM-dd"),until:de(xe(new Date,12),"yyyy-MM-dd")},u={transaction:{paid:"scheduled",type:"fixed",from_bill:!0}},c={source:"",amount:10,description:"",recurrence:i,meta_data:u};const d=(g,C)=>{const{value:y}=g.detail;if(c&&c.recurrence){switch(C){case"description":l(1,c.description=y,c);break;case"source":l(1,c.source=y,c);break;case"amount":l(1,c.amount=y,c);break;case"repeat-type":l(1,c.recurrence.type=y,c);break;case"repeat-start-date":l(1,c.recurrence.start_date=y,c);break;case"repeat-until-date":l(1,c.recurrence.until=y,c);break;case"meta-data-transaction-type":c?.meta_data?.transaction?.type&&l(1,c.meta_data.transaction.type=y,c);break}l(2,a=we(c.recurrence))}},f=()=>{const g=`[data-bs-target="#${s}"]`,C=document.querySelector(g);C&&(C.click(),l(7,n=void 0),l(9,o=void 0),l(1,c={source:"",amount:10,description:"",recurrence:i}))},m=async()=>{const{actions:{reload:g,createBill:C,updateBill:y}}=ge();c.id?await y(c.id,c):await C(c),await g(),f()},_=async()=>{if(!c?.id)return;const{actions:{reload:g,deleteBill:C}}=ge();He({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async y=>{c?.id&&(y&&await C(c.id),await g(),f())}})},S=g=>d(g,"description"),$=g=>d(g,"source"),w=g=>d(g,"amount"),q=g=>d(g,"meta-data-transaction-type"),U=g=>d(g,"repeat-type"),Y=g=>d(g,"repeat-start-date"),j=g=>d(g,"repeat-until-date");return r.$$set=g=>{"loading"in g&&l(0,t=g.loading),"bill"in g&&l(7,n=g.bill),"drawerId"in g&&l(8,s=g.drawerId)},r.$$.update=()=>{if(r.$$.dirty&642&&(!n||o!==n?.id)){l(1,c=n?{...c,...n,recurrence:{...i,...n.recurrence},meta_data:{...u,...n.meta_data}}:c);const{recurrence:g}=c;l(2,a=g?we(g):[]),l(9,o=n?.id)}},[t,c,a,d,f,m,_,n,s,o,S,$,w,q,U,Y,j]}class vt extends X{constructor(e){super(),Z(this,e,ht,pt,W,{loading:0,bill:7,drawerId:8})}}function Ne(r,e,l){const t=r.slice();return t[6]=e[l],t}function Fe(r){let e,l,t=_e(r[0]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Oe(Ne(r,t,a));const s=a=>k(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=G()},l(a){for(let o=0;o<n.length;o+=1)n[o].l(a);e=G()},m(a,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,o);R(a,e,o),l=!0},p(a,o){if(o&7){t=_e(a[0]);let i;for(i=0;i<t.length;i+=1){const u=Ne(a,t,i);n[i]?(n[i].p(u,o),h(n[i],1)):(n[i]=Oe(u),n[i].c(),h(n[i],1),n[i].m(e.parentNode,e))}for(x(),i=t.length;i<n.length;i+=1)s(i);ee()}},i(a){if(!l){for(let o=0;o<t.length;o+=1)h(n[o]);l=!0}},o(a){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)k(n[o]);l=!1},d(a){a&&v(e),Pe(n,a)}}}function Ve(r){let e,l;return e=new Xe({props:{type:r[6].meta_data.transaction.type}}),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.type=t[6].meta_data.transaction.type),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Oe(r){let e,l,t=r[6].description+"",n,s,a,o,i,u=r[6].source+"",c,d,f,m,_=r[6]?.recurrence?.type+"",S,$,w=r[6]?.recurrence?.start_date+"",q,U,Y,j,g=Ce(r[6].amount)+"",C,y,D,b,z,J,E=r[6]?.meta_data?.transaction&&Ve(r);function je(){return r[3](r[6])}return{c(){e=B("div"),l=B("div"),n=H(t),s=N(),a=B("div"),o=B("div"),i=B("div"),c=H(u),d=N(),f=B("div"),m=B("span"),S=H(_),$=H(`
						Bill starting `),q=H(w),U=N(),E&&E.c(),Y=N(),j=B("button"),C=H(g),D=N(),this.h()},l(Q){e=T(Q,"DIV",{});var A=M(e);l=T(A,"DIV",{class:!0});var he=M(l);n=K(he,t),he.forEach(v),s=F(A),a=T(A,"DIV",{class:!0});var fe=M(a);o=T(fe,"DIV",{class:!0});var le=M(o);i=T(le,"DIV",{class:!0});var ve=M(i);c=K(ve,u),ve.forEach(v),d=F(le),f=T(le,"DIV",{class:!0});var ue=M(f);m=T(ue,"SPAN",{class:!0});var be=M(m);S=K(be,_),be.forEach(v),$=K(ue,`
						Bill starting `),q=K(ue,w),ue.forEach(v),U=F(le),E&&E.l(le),le.forEach(v),Y=F(fe),j=T(fe,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var $e=M(j);C=K($e,g),$e.forEach(v),fe.forEach(v),D=F(A),A.forEach(v),this.h()},h(){I(l,"class","fw-bold"),I(i,"class","fw-light"),I(m,"class","text-capitalize"),I(f,"class","fw-lighter text-muted small"),I(o,"class","small"),I(j,"class","btn btn-sm btn-link ps-0"),I(j,"data-bs-toggle","offcanvas"),I(j,"data-bs-target",y="#"+r[1]),I(j,"aria-controls",r[1]),I(a,"class","d-flex justify-content-between")},m(Q,A){R(Q,e,A),p(e,l),p(l,n),p(e,s),p(e,a),p(a,o),p(o,i),p(i,c),p(o,d),p(o,f),p(f,m),p(m,S),p(f,$),p(f,q),p(o,U),E&&E.m(o,null),p(a,Y),p(a,j),p(j,C),p(e,D),b=!0,z||(J=re(j,"click",je),z=!0)},p(Q,A){r=Q,(!b||A&1)&&t!==(t=r[6].description+"")&&te(n,t),(!b||A&1)&&u!==(u=r[6].source+"")&&te(c,u),(!b||A&1)&&_!==(_=r[6]?.recurrence?.type+"")&&te(S,_),(!b||A&1)&&w!==(w=r[6]?.recurrence?.start_date+"")&&te(q,w),r[6]?.meta_data?.transaction?E?(E.p(r,A),A&1&&h(E,1)):(E=Ve(r),E.c(),h(E,1),E.m(o,null)):E&&(x(),k(E,1,1,()=>{E=null}),ee()),(!b||A&1)&&g!==(g=Ce(r[6].amount)+"")&&te(C,g),(!b||A&2&&y!==(y="#"+r[1]))&&I(j,"data-bs-target",y),(!b||A&2)&&I(j,"aria-controls",r[1])},i(Q){b||(h(E),b=!0)},o(Q){k(E),b=!1},d(Q){Q&&v(e),E&&E.d(),z=!1,J()}}}function bt(r){let e,l,t=r[0].length&&Fe(r);return{c(){t&&t.c(),e=G()},l(n){t&&t.l(n),e=G()},m(n,s){t&&t.m(n,s),R(n,e,s),l=!0},p(n,[s]){n[0].length?t?(t.p(n,s),s&1&&h(t,1)):(t=Fe(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(x(),k(t,1,1,()=>{t=null}),ee())},i(n){l||(h(t),l=!0)},o(n){k(t),l=!1},d(n){n&&v(e),t&&t.d(n)}}}function $t(r,e,l){let{data:t=[]}=e,{drawerId:n=""}=e;const{stores:{targetBill:s,loading:a}}=ge(),o=u=>{a.set(!0),setTimeout(()=>{s.set(u),a.set(!1)},800)},i=u=>o(u);return r.$$set=u=>{"data"in u&&l(0,t=u.data),"drawerId"in u&&l(1,n=u.drawerId)},[t,n,o,i]}class kt extends X{constructor(e){super(),Z(this,e,$t,bt,W,{data:0,drawerId:1})}}function wt(r){let e,l;return e=new Ge({}),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p:ce,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ct(r){let e,l,t;function n(a){r[8](a)}let s={bill:r[0],drawerId:ne};return r[2]!==void 0&&(s.loading=r[2]),e=new vt({props:s}),ie.push(()=>oe(e,"loading",n)),{c(){V(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,o){P(e,a,o),t=!0},p(a,o){const i={};o&1&&(i.bill=a[0]),!l&&o&4&&(l=!0,i.loading=a[2],se(()=>l=!1)),e.$set(i)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){L(e,a)}}}function yt(r){let e,l,t,n;const s=[Ct,wt],a=[];function o(i,u){return i[2]?1:0}return e=o(r),l=a[e]=s[e](r),{c(){l.c(),t=G()},l(i){l.l(i),t=G()},m(i,u){a[e].m(i,u),R(i,t,u),n=!0},p(i,u){let c=e;e=o(i),e===c?a[e].p(i,u):(x(),k(a[c],1,1,()=>{a[c]=null}),ee(),l=a[e],l?l.p(i,u):(l=a[e]=s[e](i),l.c()),h(l,1),l.m(t.parentNode,t))},i(i){n||(h(l),n=!0)},o(i){k(l),n=!1},d(i){i&&v(t),a[e].d(i)}}}function Dt(r){let e,l,t,n,s,a="Bills",o,i,u,c,d,f,m,_,S;return e=new Ke({props:{title:r[1],id:ne,$$slots:{default:[yt]},$$scope:{ctx:r}}}),f=new kt({props:{drawerId:ne,data:r[3]}}),{c(){V(e.$$.fragment),l=N(),t=B("div"),n=B("div"),s=B("h2"),s.textContent=a,o=N(),i=B("div"),u=B("button"),c=B("i"),d=N(),V(f.$$.fragment),this.h()},l($){O(e.$$.fragment,$),l=F($),t=T($,"DIV",{class:!0});var w=M(t);n=T(w,"DIV",{class:!0});var q=M(n);s=T(q,"H2",{"data-svelte-h":!0}),ae(s)!=="svelte-14q1s24"&&(s.textContent=a),o=F(q),i=T(q,"DIV",{});var U=M(i);u=T(U,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var Y=M(u);c=T(Y,"I",{class:!0}),M(c).forEach(v),Y.forEach(v),U.forEach(v),q.forEach(v),d=F(w),O(f.$$.fragment,w),w.forEach(v),this.h()},h(){I(c,"class","bi bi-plus"),I(u,"class","btn btn-sm btn-secondary"),I(u,"data-bs-toggle","offcanvas"),I(u,"data-bs-target","#"+ne),I(u,"aria-controls",ne),I(n,"class","d-flex justify-content-between align-items-center"),I(t,"class","d-flex flex-column gap-3")},m($,w){P(e,$,w),R($,l,w),R($,t,w),p(t,n),p(n,s),p(n,o),p(n,i),p(i,u),p(u,c),p(t,d),P(f,t,null),m=!0,_||(S=re(u,"click",r[7]),_=!0)},p($,[w]){const q={};w&2&&(q.title=$[1]),w&2053&&(q.$$scope={dirty:w,ctx:$}),e.$set(q);const U={};w&8&&(U.data=$[3]),f.$set(U)},i($){m||(h(e.$$.fragment,$),h(f.$$.fragment,$),m=!0)},o($){k(e.$$.fragment,$),k(f.$$.fragment,$),m=!1},d($){$&&(v(l),v(t)),L(e,$),L(f),_=!1,S()}}}const ne="bill-form";function Et(r,e,l){let t,n,s,a;const{stores:{data:o,targetBill:i,loading:u},actions:{reload:c}}=ge();pe(r,o,_=>l(3,a=_)),pe(r,i,_=>l(0,n=_)),pe(r,u,_=>l(2,s=_));const d={description:"",source:"",amount:0};Re(()=>c());const f=()=>{u.set(!0),setTimeout(()=>{i.set(d),u.set(!1)},1500)};function m(_){s=_,u.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=n?.id?"Edit Bill":"Create Bill")},[n,t,s,a,o,i,u,f,m]}class It extends X{constructor(e){super(),Z(this,e,Et,Dt,W,{})}}function Bt(r){let e,l;return e=new It({}),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Tt(r){let e,l;return e=new Ue({props:{pageTitle:"Bills",$$slots:{default:[Bt]},$$scope:{ctx:r}}}),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}class qt extends X{constructor(e){super(),Z(this,e,null,Tt,W,{})}}export{qt as component,Lt as universal};
