import{s as W,F as ee,X as ae,E as ce,z as G,n as A,v as me,d as w,e as S,t as U,b as R,i as T,j as O,l as H,f as q,m as j,o as v,p as te,N as Te,k as Fe,D as Pe,q as ge,r as Le,a7 as Re}from"../chunks/scheduler.Ban6yQD2.js";import{S as Z,i as x,f as re,c as F,b as M,m as N,t as h,a as b,d as V,g as J,e as Q}from"../chunks/index.B0J71FU7.js";import{P as Oe}from"../chunks/PageLayout.DnCy_7av.js";import{B as se,c as qe,D as Ae,F as je}from"../chunks/FormSkeleton.BCqY7h9s.js";import{a as _e,B as Ye,R as ze,D as Me,f as oe,b as pe,g as fe,d as Ue}from"../chunks/DateField.CnMEFLMI.js";import{D as He,S as Ke,A as Xe,B as Ge}from"../chunks/BillTypeBadge.DL_6D9j3.js";import{S as Ne}from"../chunks/SelectField.DZAFnXve.js";import{e as ue}from"../chunks/Header.M_CdKss6.js";import{t as Je,f as he}from"../chunks/app.state.FCPSyn6H.js";function Qe(a,e){const n=Je(a);if(isNaN(e))return _e(a,NaN);const t=n.getDate(),l=_e(a,n.getTime());l.setMonth(n.getMonth()+e+1,0);const s=l.getDate();return t>=s?l:(n.setFullYear(l.getFullYear(),l.getMonth(),t),n)}const We=!0,At=Object.freeze(Object.defineProperty({__proto__:null,prerender:We},Symbol.toStringTag,{value:"Module"}));function Ze(a){let e,n,t;function l(r){a[4](r)}let s={label:"Type",name:"repeat-type",helperText:"",loading:a[1],required:!0,isInvalid:!1,disabled:!1,options:a[3]};return a[0]!==void 0&&(s.value=a[0]),e=new Ne({props:s}),ee.push(()=>re(e,"value",l)),e.$on("change",a[2]),{c(){F(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,o){N(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!n&&o&1&&(n=!0,i.value=r[0],ae(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function xe(a,e,n){let{value:t}=e,{loading:l}=e;const s=ce(),r=()=>{s("valueChanged",{value:t})},o=Ye;function i(u){t=u,n(0,t)}return a.$$set=u=>{"value"in u&&n(0,t=u.value),"loading"in u&&n(1,l=u.loading)},[t,l,r,o,i]}class et extends Z{constructor(e){super(),x(this,e,xe,Ze,W,{value:0,loading:1})}}function tt(a){let e,n,t;function l(r){a[4](r)}let s={label:"Repeat type",name:"repeat-type",helperText:"",loading:a[1],required:!0,isInvalid:!1,disabled:!1,options:a[3]};return a[0]!==void 0&&(s.value=a[0]),e=new Ne({props:s}),ee.push(()=>re(e,"value",l)),e.$on("change",a[2]),{c(){F(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,o){N(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!n&&o&1&&(n=!0,i.value=r[0],ae(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function nt(a,e,n){let{value:t}=e,{loading:l}=e;const s=ce(),r=()=>{s("valueChanged",{value:t})},o=ze;function i(u){t=u,n(0,t)}return a.$$set=u=>{"value"in u&&n(0,t=u.value),"loading"in u&&n(1,l=u.loading)},[t,l,r,o,i]}class lt extends Z{constructor(e){super(),x(this,e,nt,tt,W,{value:0,loading:1})}}function at(a){let e,n,t;function l(r){a[3](r)}let s={label:"Date",name:"repeat-start-date",placeholder:"",helperText:"",loading:a[1],required:!0,isInvalid:!1};return a[0]!==void 0&&(s.value=a[0]),e=new Me({props:s}),ee.push(()=>re(e,"value",l)),e.$on("valueChanged",a[2]),{c(){F(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,o){N(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!n&&o&1&&(n=!0,i.value=r[0],ae(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function rt(a,e,n){let{value:t}=e,{loading:l}=e;const s=ce(),r=()=>{s("valueChanged",{value:t})};function o(i){t=i,n(0,t)}return a.$$set=i=>{"value"in i&&n(0,t=i.value),"loading"in i&&n(1,l=i.loading)},[t,l,r,o]}class it extends Z{constructor(e){super(),x(this,e,rt,at,W,{value:0,loading:1})}}function st(a){let e,n,t;function l(r){a[3](r)}let s={label:"Until",name:"repeat-end-date",placeholder:"",helperText:"",loading:a[1],required:!0,isInvalid:!1};return a[0]!==void 0&&(s.value=a[0]),e=new Me({props:s}),ee.push(()=>re(e,"value",l)),e.$on("valueChanged",a[2]),{c(){F(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,o){N(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!n&&o&1&&(n=!0,i.value=r[0],ae(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function ot(a,e,n){let{value:t}=e,{loading:l}=e;const s=ce(),r=()=>{s("valueChanged",{value:t})};function o(i){t=i,n(0,t)}return a.$$set=i=>{"value"in i&&n(0,t=i.value),"loading"in i&&n(1,l=i.loading)},[t,l,r,o]}class ft extends Z{constructor(e){super(),x(this,e,ot,st,W,{value:0,loading:1})}}function ve(a,e,n){const t=a.slice();return t[1]=e[n],t[3]=n,t}function $e(a){let e,n,t,l=a[0].length+"",s,r,o,i,u,c=ue(a[0]),g=[];for(let f=0;f<c.length;f+=1)g[f]=be(ve(a,c,f));return{c(){e=S("div"),n=S("div"),t=U("Dates Preview ("),s=U(l),r=U(" entries)"),o=R(),i=S("div"),u=S("ul");for(let f=0;f<g.length;f+=1)g[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0});var p=O(e);n=T(p,"DIV",{});var d=O(n);t=H(d,"Dates Preview ("),s=H(d,l),r=H(d," entries)"),d.forEach(w),o=q(p),i=T(p,"DIV",{class:!0});var B=O(i);u=T(B,"UL",{class:!0});var $=O(u);for(let C=0;C<g.length;C+=1)g[C].l($);$.forEach(w),B.forEach(w),p.forEach(w),this.h()},h(){j(u,"class","list-group list-group-flush"),j(i,"class","preview border border-light-subtle svelte-1qbwz3y"),j(e,"class","d-flex flex-column gap-1")},m(f,p){A(f,e,p),v(e,n),v(n,t),v(n,s),v(n,r),v(e,o),v(e,i),v(i,u);for(let d=0;d<g.length;d+=1)g[d]&&g[d].m(u,null)},p(f,p){if(p&1&&l!==(l=f[0].length+"")&&te(s,l),p&1){c=ue(f[0]);let d;for(d=0;d<c.length;d+=1){const B=ve(f,c,d);g[d]?g[d].p(B,p):(g[d]=be(B),g[d].c(),g[d].m(u,null))}for(;d<g.length;d+=1)g[d].d(1);g.length=c.length}},d(f){f&&w(e),Te(g,f)}}}function be(a){let e,n=a[3]+1+"",t,l,s=oe(a[1],"EEE - dd MMM yyyy")+"",r,o;return{c(){e=S("li"),t=U(n),l=U(". "),r=U(s),o=R(),this.h()},l(i){e=T(i,"LI",{class:!0});var u=O(e);t=H(u,n),l=H(u,". "),r=H(u,s),o=q(u),u.forEach(w),this.h()},h(){j(e,"class","list-group-item")},m(i,u){A(i,e,u),v(e,t),v(e,l),v(e,r),v(e,o)},p(i,u){u&1&&s!==(s=oe(i[1],"EEE - dd MMM yyyy")+"")&&te(r,s)},d(i){i&&w(e)}}}function ut(a){let e,n=a[0].length>0&&$e(a);return{c(){n&&n.c(),e=G()},l(t){n&&n.l(t),e=G()},m(t,l){n&&n.m(t,l),A(t,e,l)},p(t,[l]){t[0].length>0?n?n.p(t,l):(n=$e(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:me,o:me,d(t){t&&w(e),n&&n.d(t)}}}function ct(a,e,n){let{dates:t}=e;return a.$$set=l=>{"dates"in l&&n(0,t=l.dates)},[t]}class dt extends Z{constructor(e){super(),x(this,e,ct,ut,W,{dates:0})}}function we(a){let e,n,t,l,s,r,o,i,u,c,g,f,p,d,B,$,C,Y={loading:a[0],value:a[1].description};n=new He({props:Y}),a[13](n),n.$on("valueChanged",a[14]);let K={loading:a[0],value:a[1].source};l=new Ke({props:K}),a[15](l),l.$on("valueChanged",a[16]);let X={loading:a[0],value:a[1].amount};r=new Xe({props:X}),a[17](r),r.$on("valueChanged",a[18]);let I=a[1]?.meta_data?.transaction?.type&&ke(a),y=a[1].recurrence&&Ie(a),D=a[1].id&&Ce(a);return d=new se({props:{loading:a[0],variant:"secondary",$$slots:{default:[mt]},$$scope:{ctx:a}}}),d.$on("click",a[7]),$=new se({props:{loading:a[0],variant:"primary",$$slots:{default:[_t]},$$scope:{ctx:a}}}),$.$on("click",a[8]),{c(){e=S("div"),F(n.$$.fragment),t=R(),F(l.$$.fragment),s=R(),F(r.$$.fragment),o=R(),I&&I.c(),i=R(),y&&y.c(),u=R(),c=S("div"),g=S("div"),D&&D.c(),f=R(),p=S("div"),F(d.$$.fragment),B=R(),F($.$$.fragment),this.h()},l(m){e=T(m,"DIV",{class:!0});var k=O(e);M(n.$$.fragment,k),t=q(k),M(l.$$.fragment,k),s=q(k),M(r.$$.fragment,k),o=q(k),I&&I.l(k),i=q(k),y&&y.l(k),u=q(k),c=T(k,"DIV",{class:!0});var P=O(c);g=T(P,"DIV",{});var E=O(g);D&&D.l(E),E.forEach(w),f=q(P),p=T(P,"DIV",{});var _=O(p);M(d.$$.fragment,_),B=q(_),M($.$$.fragment,_),_.forEach(w),P.forEach(w),k.forEach(w),this.h()},h(){j(c,"class","d-flex justify-content-between"),j(e,"class","d-flex flex-column gap-3")},m(m,k){A(m,e,k),N(n,e,null),v(e,t),N(l,e,null),v(e,s),N(r,e,null),v(e,o),I&&I.m(e,null),v(e,i),y&&y.m(e,null),v(e,u),v(e,c),v(c,g),D&&D.m(g,null),v(c,f),v(c,p),N(d,p,null),v(p,B),N($,p,null),C=!0},p(m,k){const P={};k&1&&(P.loading=m[0]),k&2&&(P.value=m[1].description),n.$set(P);const E={};k&1&&(E.loading=m[0]),k&2&&(E.value=m[1].source),l.$set(E);const _={};k&1&&(_.loading=m[0]),k&2&&(_.value=m[1].amount),r.$set(_),m[1]?.meta_data?.transaction?.type?I?(I.p(m,k),k&2&&h(I,1)):(I=ke(m),I.c(),h(I,1),I.m(e,i)):I&&(J(),b(I,1,1,()=>{I=null}),Q()),m[1].recurrence?y?(y.p(m,k),k&2&&h(y,1)):(y=Ie(m),y.c(),h(y,1),y.m(e,u)):y&&(J(),b(y,1,1,()=>{y=null}),Q()),m[1].id?D?(D.p(m,k),k&2&&h(D,1)):(D=Ce(m),D.c(),h(D,1),D.m(g,null)):D&&(J(),b(D,1,1,()=>{D=null}),Q());const z={};k&1&&(z.loading=m[0]),k&33554432&&(z.$$scope={dirty:k,ctx:m}),d.$set(z);const L={};k&1&&(L.loading=m[0]),k&33554432&&(L.$$scope={dirty:k,ctx:m}),$.$set(L)},i(m){C||(h(n.$$.fragment,m),h(l.$$.fragment,m),h(r.$$.fragment,m),h(I),h(y),h(D),h(d.$$.fragment,m),h($.$$.fragment,m),C=!0)},o(m){b(n.$$.fragment,m),b(l.$$.fragment,m),b(r.$$.fragment,m),b(I),b(y),b(D),b(d.$$.fragment,m),b($.$$.fragment,m),C=!1},d(m){m&&w(e),a[13](null),V(n),a[15](null),V(l),a[17](null),V(r),I&&I.d(),y&&y.d(),D&&D.d(),V(d),V($)}}}function ke(a){let e,n;return e=new et({props:{loading:a[0],value:a[1].meta_data.transaction.type}}),e.$on("valueChanged",a[19]),{c(){F(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){N(e,t,l),n=!0},p(t,l){const s={};l&1&&(s.loading=t[0]),l&2&&(s.value=t[1].meta_data.transaction.type),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ie(a){let e,n="Repeats",t,l,s,r,o,i,u,c;l=new lt({props:{loading:a[0],value:a[1].recurrence.type}}),l.$on("valueChanged",a[20]),r=new it({props:{loading:a[0],value:a[1].recurrence.start_date}}),r.$on("valueChanged",a[21]);let g=a[1].recurrence.until&&De(a);return u=new dt({props:{dates:a[2]}}),{c(){e=S("h5"),e.textContent=n,t=R(),F(l.$$.fragment),s=R(),F(r.$$.fragment),o=R(),g&&g.c(),i=R(),F(u.$$.fragment)},l(f){e=T(f,"H5",{"data-svelte-h":!0}),Fe(e)!=="svelte-13f0n3i"&&(e.textContent=n),t=q(f),M(l.$$.fragment,f),s=q(f),M(r.$$.fragment,f),o=q(f),g&&g.l(f),i=q(f),M(u.$$.fragment,f)},m(f,p){A(f,e,p),A(f,t,p),N(l,f,p),A(f,s,p),N(r,f,p),A(f,o,p),g&&g.m(f,p),A(f,i,p),N(u,f,p),c=!0},p(f,p){const d={};p&1&&(d.loading=f[0]),p&2&&(d.value=f[1].recurrence.type),l.$set(d);const B={};p&1&&(B.loading=f[0]),p&2&&(B.value=f[1].recurrence.start_date),r.$set(B),f[1].recurrence.until?g?(g.p(f,p),p&2&&h(g,1)):(g=De(f),g.c(),h(g,1),g.m(i.parentNode,i)):g&&(J(),b(g,1,1,()=>{g=null}),Q());const $={};p&4&&($.dates=f[2]),u.$set($)},i(f){c||(h(l.$$.fragment,f),h(r.$$.fragment,f),h(g),h(u.$$.fragment,f),c=!0)},o(f){b(l.$$.fragment,f),b(r.$$.fragment,f),b(g),b(u.$$.fragment,f),c=!1},d(f){f&&(w(e),w(t),w(s),w(o),w(i)),V(l,f),V(r,f),g&&g.d(f),V(u,f)}}}function De(a){let e,n;return e=new ft({props:{loading:a[0],value:a[1].recurrence.until}}),e.$on("valueChanged",a[22]),{c(){F(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){N(e,t,l),n=!0},p(t,l){const s={};l&1&&(s.loading=t[0]),l&2&&(s.value=t[1].recurrence.until),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ce(a){let e,n;return e=new se({props:{loading:a[0],variant:"danger",$$slots:{default:[gt]},$$scope:{ctx:a}}}),e.$on("click",a[9]),{c(){F(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){N(e,t,l),n=!0},p(t,l){const s={};l&1&&(s.loading=t[0]),l&33554432&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function gt(a){let e;return{c(){e=U("Delete")},l(n){e=H(n,"Delete")},m(n,t){A(n,e,t)},d(n){n&&w(e)}}}function mt(a){let e;return{c(){e=U("Cancel")},l(n){e=H(n,"Cancel")},m(n,t){A(n,e,t)},d(n){n&&w(e)}}}function _t(a){let e;return{c(){e=U("Save")},l(n){e=H(n,"Save")},m(n,t){A(n,e,t)},d(n){n&&w(e)}}}function pt(a){let e,n,t=a[1]&&we(a);return{c(){t&&t.c(),e=G()},l(l){t&&t.l(l),e=G()},m(l,s){t&&t.m(l,s),A(l,e,s),n=!0},p(l,[s]){l[1]?t?(t.p(l,s),s&2&&h(t,1)):(t=we(l),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(J(),b(t,1,1,()=>{t=null}),Q())},i(l){n||(h(t),n=!0)},o(l){b(t),n=!1},d(l){l&&w(e),t&&t.d(l)}}}function ht(a,e,n){let{loading:t=!1}=e,{bill:l}=e,{drawerId:s}=e,r=[],o=0,i={type:"monthly",start_date:oe(new Date,"yyyy-MM-dd"),until:oe(Qe(new Date,12),"yyyy-MM-dd")},u={transaction:{paid:"scheduled",type:"fixed",from_bill:!0}},c={source:"",amount:10,description:"",recurrence:i,meta_data:u},g,f,p;const d=(_,z)=>{const{value:L}=_.detail;if(c&&c.recurrence){switch(z){case"description":n(1,c.description=L,c);break;case"source":n(1,c.source=L,c);break;case"amount":n(1,c.amount=L,c);break;case"repeat-type":n(1,c.recurrence.type=L,c);break;case"repeat-start-date":n(1,c.recurrence.start_date=L,c);break;case"repeat-until-date":n(1,c.recurrence.until=L,c);break;case"meta-data-transaction-type":c?.meta_data?.transaction?.type&&n(1,c.meta_data.transaction.type=L,c);break}n(2,r=pe(c.recurrence))}},B=()=>{const _=`[data-bs-target="#${s}"]`,z=document.querySelector(_);z&&(z.click(),n(10,l=void 0),n(12,o=void 0),n(1,c={source:"",amount:10,description:"",recurrence:i}))},$=async()=>{const _=await g.validateFieldIsInvalid(),z=await f.validateFieldIsInvalid(),L=await p.validateFieldIsInvalid();if(_||z||L)return;const{actions:{reload:ne,createBill:ie,updateBill:Ve}}=fe();c.id?await Ve(c.id,c):await ie(c),await ne(),B()},C=async()=>{if(!c?.id)return;const{actions:{reload:_,deleteBill:z}}=fe();qe({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async L=>{c?.id&&(L&&await z(c.id),await _(),B())}})};function Y(_){ee[_?"unshift":"push"](()=>{g=_,n(3,g)})}const K=_=>d(_,"description");function X(_){ee[_?"unshift":"push"](()=>{f=_,n(4,f)})}const I=_=>d(_,"source");function y(_){ee[_?"unshift":"push"](()=>{p=_,n(5,p)})}const D=_=>d(_,"amount"),m=_=>d(_,"meta-data-transaction-type"),k=_=>d(_,"repeat-type"),P=_=>d(_,"repeat-start-date"),E=_=>d(_,"repeat-until-date");return a.$$set=_=>{"loading"in _&&n(0,t=_.loading),"bill"in _&&n(10,l=_.bill),"drawerId"in _&&n(11,s=_.drawerId)},a.$$.update=()=>{if(a.$$.dirty&5122&&(!l||o!==l?.id)){n(1,c=l?{...c,...l,recurrence:{...i,...l.recurrence},meta_data:{...u,...l.meta_data}}:c);const{recurrence:_}=c;n(2,r=_?pe(_):[]),n(12,o=l?.id)}},[t,c,r,g,f,p,d,B,$,C,l,s,o,Y,K,X,I,y,D,m,k,P,E]}class vt extends Z{constructor(e){super(),x(this,e,ht,pt,W,{loading:0,bill:10,drawerId:11})}}function Ee(a,e,n){const t=a.slice();return t[6]=e[n],t}function ye(a){let e,n,t=ue(a[0]),l=[];for(let r=0;r<t.length;r+=1)l[r]=Se(Ee(a,t,r));const s=r=>b(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=G()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=G()},m(r,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(r,o);A(r,e,o),n=!0},p(r,o){if(o&7){t=ue(r[0]);let i;for(i=0;i<t.length;i+=1){const u=Ee(r,t,i);l[i]?(l[i].p(u,o),h(l[i],1)):(l[i]=Se(u),l[i].c(),h(l[i],1),l[i].m(e.parentNode,e))}for(J(),i=t.length;i<l.length;i+=1)s(i);Q()}},i(r){if(!n){for(let o=0;o<t.length;o+=1)h(l[o]);n=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)b(l[o]);n=!1},d(r){r&&w(e),Te(l,r)}}}function Be(a){let e,n;return e=new Ge({props:{type:a[6].meta_data.transaction.type}}),{c(){F(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){N(e,t,l),n=!0},p(t,l){const s={};l&1&&(s.type=t[6].meta_data.transaction.type),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function $t(a){let e=he(a[6].amount)+"",n;return{c(){n=U(e)},l(t){n=H(t,e)},m(t,l){A(t,n,l)},p(t,l){l&1&&e!==(e=he(t[6].amount)+"")&&te(n,e)},d(t){t&&w(n)}}}function Se(a){let e,n,t=a[6].description+"",l,s,r,o,i,u=a[6].source+"",c,g,f,p,d=a[6]?.recurrence?.type+"",B,$,C=a[6]?.recurrence?.start_date+"",Y,K,X,I,y,D,m=a[6]?.meta_data?.transaction&&Be(a);function k(){return a[3](a[6])}return I=new se({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+a[1],"aria-controls":a[1],$$slots:{default:[$t]},$$scope:{ctx:a}}}),I.$on("click",k),{c(){e=S("div"),n=S("div"),l=U(t),s=R(),r=S("div"),o=S("div"),i=S("div"),c=U(u),g=R(),f=S("div"),p=S("span"),B=U(d),$=U(`
						Bill starting `),Y=U(C),K=R(),m&&m.c(),X=R(),F(I.$$.fragment),y=R(),this.h()},l(P){e=T(P,"DIV",{});var E=O(e);n=T(E,"DIV",{class:!0});var _=O(n);l=H(_,t),_.forEach(w),s=q(E),r=T(E,"DIV",{class:!0});var z=O(r);o=T(z,"DIV",{class:!0});var L=O(o);i=T(L,"DIV",{class:!0});var de=O(i);c=H(de,u),de.forEach(w),g=q(L),f=T(L,"DIV",{class:!0});var ne=O(f);p=T(ne,"SPAN",{class:!0});var ie=O(p);B=H(ie,d),ie.forEach(w),$=H(ne,`
						Bill starting `),Y=H(ne,C),ne.forEach(w),K=q(L),m&&m.l(L),L.forEach(w),X=q(z),M(I.$$.fragment,z),z.forEach(w),y=q(E),E.forEach(w),this.h()},h(){j(n,"class","fw-bold"),j(i,"class","fw-light"),j(p,"class","text-capitalize"),j(f,"class","fw-lighter text-muted small"),j(o,"class","small"),j(r,"class","d-flex justify-content-between")},m(P,E){A(P,e,E),v(e,n),v(n,l),v(e,s),v(e,r),v(r,o),v(o,i),v(i,c),v(o,g),v(o,f),v(f,p),v(p,B),v(f,$),v(f,Y),v(o,K),m&&m.m(o,null),v(r,X),N(I,r,null),v(e,y),D=!0},p(P,E){a=P,(!D||E&1)&&t!==(t=a[6].description+"")&&te(l,t),(!D||E&1)&&u!==(u=a[6].source+"")&&te(c,u),(!D||E&1)&&d!==(d=a[6]?.recurrence?.type+"")&&te(B,d),(!D||E&1)&&C!==(C=a[6]?.recurrence?.start_date+"")&&te(Y,C),a[6]?.meta_data?.transaction?m?(m.p(a,E),E&1&&h(m,1)):(m=Be(a),m.c(),h(m,1),m.m(o,null)):m&&(J(),b(m,1,1,()=>{m=null}),Q());const _={};E&2&&(_["data-bs-target"]="#"+a[1]),E&2&&(_["aria-controls"]=a[1]),E&513&&(_.$$scope={dirty:E,ctx:a}),I.$set(_)},i(P){D||(h(m),h(I.$$.fragment,P),D=!0)},o(P){b(m),b(I.$$.fragment,P),D=!1},d(P){P&&w(e),m&&m.d(),V(I)}}}function bt(a){let e,n,t=a[0].length&&ye(a);return{c(){t&&t.c(),e=G()},l(l){t&&t.l(l),e=G()},m(l,s){t&&t.m(l,s),A(l,e,s),n=!0},p(l,[s]){l[0].length?t?(t.p(l,s),s&1&&h(t,1)):(t=ye(l),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(J(),b(t,1,1,()=>{t=null}),Q())},i(l){n||(h(t),n=!0)},o(l){b(t),n=!1},d(l){l&&w(e),t&&t.d(l)}}}function wt(a,e,n){let{data:t=[]}=e,{drawerId:l=""}=e;const{stores:{targetBill:s,loading:r}}=fe(),o=u=>{r.set(!0),setTimeout(()=>{s.set(u),r.set(!1)},800)},i=u=>o(u);return a.$$set=u=>{"data"in u&&n(0,t=u.data),"drawerId"in u&&n(1,l=u.drawerId)},[t,l,o,i]}class kt extends Z{constructor(e){super(),x(this,e,wt,bt,W,{data:0,drawerId:1})}}function It(a){let e,n;return e=new je({}),{c(){F(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){N(e,t,l),n=!0},p:me,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Dt(a){let e,n,t;function l(r){a[8](r)}let s={bill:a[0],drawerId:le};return a[2]!==void 0&&(s.loading=a[2]),e=new vt({props:s}),ee.push(()=>re(e,"loading",l)),{c(){F(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,o){N(e,r,o),t=!0},p(r,o){const i={};o&1&&(i.bill=r[0]),!n&&o&4&&(n=!0,i.loading=r[2],ae(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Ct(a){let e,n,t,l;const s=[Dt,It],r=[];function o(i,u){return i[2]?1:0}return e=o(a),n=r[e]=s[e](a),{c(){n.c(),t=G()},l(i){n.l(i),t=G()},m(i,u){r[e].m(i,u),A(i,t,u),l=!0},p(i,u){let c=e;e=o(i),e===c?r[e].p(i,u):(J(),b(r[c],1,1,()=>{r[c]=null}),Q(),n=r[e],n?n.p(i,u):(n=r[e]=s[e](i),n.c()),h(n,1),n.m(t.parentNode,t))},i(i){l||(h(n),l=!0)},o(i){b(n),l=!1},d(i){i&&w(t),r[e].d(i)}}}function Et(a){let e,n,t,l,s,r="Bills",o,i,u,c,g,f,p,d,B;return e=new Ae({props:{title:a[1],id:le,$$slots:{default:[Ct]},$$scope:{ctx:a}}}),f=new kt({props:{drawerId:le,data:a[3]}}),{c(){F(e.$$.fragment),n=R(),t=S("div"),l=S("div"),s=S("h2"),s.textContent=r,o=R(),i=S("div"),u=S("button"),c=S("i"),g=R(),F(f.$$.fragment),this.h()},l($){M(e.$$.fragment,$),n=q($),t=T($,"DIV",{class:!0});var C=O(t);l=T(C,"DIV",{class:!0});var Y=O(l);s=T(Y,"H2",{"data-svelte-h":!0}),Fe(s)!=="svelte-14q1s24"&&(s.textContent=r),o=q(Y),i=T(Y,"DIV",{});var K=O(i);u=T(K,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var X=O(u);c=T(X,"I",{class:!0}),O(c).forEach(w),X.forEach(w),K.forEach(w),Y.forEach(w),g=q(C),M(f.$$.fragment,C),C.forEach(w),this.h()},h(){j(c,"class","bi bi-plus"),j(u,"class","btn btn-sm btn-secondary"),j(u,"data-bs-toggle","offcanvas"),j(u,"data-bs-target","#"+le),j(u,"aria-controls",le),j(l,"class","d-flex justify-content-between align-items-center"),j(t,"class","d-flex flex-column gap-3")},m($,C){N(e,$,C),A($,n,C),A($,t,C),v(t,l),v(l,s),v(l,o),v(l,i),v(i,u),v(u,c),v(t,g),N(f,t,null),p=!0,d||(B=Pe(u,"click",a[7]),d=!0)},p($,[C]){const Y={};C&2&&(Y.title=$[1]),C&2053&&(Y.$$scope={dirty:C,ctx:$}),e.$set(Y);const K={};C&8&&(K.data=$[3]),f.$set(K)},i($){p||(h(e.$$.fragment,$),h(f.$$.fragment,$),p=!0)},o($){b(e.$$.fragment,$),b(f.$$.fragment,$),p=!1},d($){$&&(w(n),w(t)),V(e,$),V(f),d=!1,B()}}}const le="bill-form";function yt(a,e,n){let t,l,s,r;const{stores:{data:o,targetBill:i,loading:u},actions:{reload:c}}=fe();ge(a,o,d=>n(3,r=d)),ge(a,i,d=>n(0,l=d)),ge(a,u,d=>n(2,s=d));const g={description:"",source:"",amount:0},f=()=>{u.set(!0),setTimeout(()=>{i.set(g),u.set(!1)},1500)};Le(c),Re(Ue);function p(d){s=d,u.set(s)}return a.$$.update=()=>{a.$$.dirty&1&&n(1,t=l?.id?"Edit Bill":"Create Bill")},[l,t,s,r,o,i,u,f,p]}class Bt extends Z{constructor(e){super(),x(this,e,yt,Et,W,{})}}function St(a){let e,n;return e=new Bt({}),{c(){F(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){N(e,t,l),n=!0},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Tt(a){let e,n;return e=new Oe({props:{pageTitle:"Bills",$$slots:{default:[St]},$$scope:{ctx:a}}}),{c(){F(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){N(e,t,l),n=!0},p(t,[l]){const s={};l&1&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}class jt extends Z{constructor(e){super(),x(this,e,null,Tt,W,{})}}export{jt as component,At as universal};
