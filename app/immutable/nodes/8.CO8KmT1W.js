import{s as G,F as ne,Y as ae,Z as de,z as Z,n as A,v as se,d as b,e as B,t as H,b as M,i as I,j as N,l as K,f as F,m as S,o as h,p as x,L as Me,k as le,H as oe,x as Ve,q as ge,r as Pe}from"../chunks/scheduler.BNdSUW5B.js";import{S as J,i as Q,f as re,c as V,b as P,m as L,t as v,a as C,d as O,g as W,e as X}from"../chunks/index.DgZhV9VX.js";import{P as Le}from"../chunks/PageLayout.fAonMX8n.js";import{c as Oe,D as qe,F as Ae}from"../chunks/FormSkeleton.D9rGZDAv.js";import{a as pe,B as je,R as Re,f as fe,b as he,g as ue}from"../chunks/bills.state.DL1OMz0-.js";import{D as Ne,a as Ye,S as ze,A as Ue,B as He}from"../chunks/BillTypeBadge.CQj3KbMw.js";import{S as Fe,B as Ke}from"../chunks/Button.Dmsu7E5i.js";import{e as ce}from"../chunks/Header.DJXLweNK.js";import{t as Ze,f as ve}from"../chunks/app.state.4AFWKtKk.js";function Ge(r,e){const l=Ze(r);if(isNaN(e))return pe(r,NaN);const t=l.getDate(),n=pe(r,l.getTime());n.setMonth(l.getMonth()+e+1,0);const s=n.getDate();return t>=s?n:(l.setFullYear(n.getFullYear(),n.getMonth(),t),l)}const Je=!0,Pt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Je},Symbol.toStringTag,{value:"Module"}));function Qe(r){let e,l,t;function n(a){r[4](a)}let s={label:"Type",name:"repeat-type",helperText:"",loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(s.value=r[0]),e=new Fe({props:s}),ne.push(()=>re(e,"value",n)),e.$on("change",r[2]),{c(){V(e.$$.fragment)},l(a){P(e.$$.fragment,a)},m(a,o){L(e,a,o),t=!0},p(a,[o]){const i={};o&2&&(i.loading=a[1]),!l&&o&1&&(l=!0,i.value=a[0],ae(()=>l=!1)),e.$set(i)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function We(r,e,l){let{value:t}=e,{loading:n}=e;const s=de(),a=()=>{s("valueChanged",{value:t})},o=je;function i(f){t=f,l(0,t)}return r.$$set=f=>{"value"in f&&l(0,t=f.value),"loading"in f&&l(1,n=f.loading)},[t,n,a,o,i]}class Xe extends J{constructor(e){super(),Q(this,e,We,Qe,G,{value:0,loading:1})}}function xe(r){let e,l,t;function n(a){r[4](a)}let s={label:"Repeat type",name:"repeat-type",helperText:"",loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(s.value=r[0]),e=new Fe({props:s}),ne.push(()=>re(e,"value",n)),e.$on("change",r[2]),{c(){V(e.$$.fragment)},l(a){P(e.$$.fragment,a)},m(a,o){L(e,a,o),t=!0},p(a,[o]){const i={};o&2&&(i.loading=a[1]),!l&&o&1&&(l=!0,i.value=a[0],ae(()=>l=!1)),e.$set(i)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function et(r,e,l){let{value:t}=e,{loading:n}=e;const s=de(),a=()=>{s("valueChanged",{value:t})},o=Re;function i(f){t=f,l(0,t)}return r.$$set=f=>{"value"in f&&l(0,t=f.value),"loading"in f&&l(1,n=f.loading)},[t,n,a,o,i]}class tt extends J{constructor(e){super(),Q(this,e,et,xe,G,{value:0,loading:1})}}function lt(r){let e,l,t;function n(a){r[3](a)}let s={label:"Date",name:"repeat-start-date",placeholder:"",helperText:"",loading:r[1],required:!0,isInvalid:!1};return r[0]!==void 0&&(s.value=r[0]),e=new Ne({props:s}),ne.push(()=>re(e,"value",n)),e.$on("valueChanged",r[2]),{c(){V(e.$$.fragment)},l(a){P(e.$$.fragment,a)},m(a,o){L(e,a,o),t=!0},p(a,[o]){const i={};o&2&&(i.loading=a[1]),!l&&o&1&&(l=!0,i.value=a[0],ae(()=>l=!1)),e.$set(i)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function nt(r,e,l){let{value:t}=e,{loading:n}=e;const s=de(),a=()=>{s("valueChanged",{value:t})};function o(i){t=i,l(0,t)}return r.$$set=i=>{"value"in i&&l(0,t=i.value),"loading"in i&&l(1,n=i.loading)},[t,n,a,o]}class at extends J{constructor(e){super(),Q(this,e,nt,lt,G,{value:0,loading:1})}}function rt(r){let e,l,t;function n(a){r[3](a)}let s={label:"Until",name:"repeat-end-date",placeholder:"",helperText:"",loading:r[1],required:!0,isInvalid:!1};return r[0]!==void 0&&(s.value=r[0]),e=new Ne({props:s}),ne.push(()=>re(e,"value",n)),e.$on("valueChanged",r[2]),{c(){V(e.$$.fragment)},l(a){P(e.$$.fragment,a)},m(a,o){L(e,a,o),t=!0},p(a,[o]){const i={};o&2&&(i.loading=a[1]),!l&&o&1&&(l=!0,i.value=a[0],ae(()=>l=!1)),e.$set(i)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function it(r,e,l){let{value:t}=e,{loading:n}=e;const s=de(),a=()=>{s("valueChanged",{value:t})};function o(i){t=i,l(0,t)}return r.$$set=i=>{"value"in i&&l(0,t=i.value),"loading"in i&&l(1,n=i.loading)},[t,n,a,o]}class st extends J{constructor(e){super(),Q(this,e,it,rt,G,{value:0,loading:1})}}function be(r,e,l){const t=r.slice();return t[1]=e[l],t[3]=l,t}function $e(r){let e,l,t,n=r[0].length+"",s,a,o,i,f,c=ce(r[0]),d=[];for(let u=0;u<c.length;u+=1)d[u]=ke(be(r,c,u));return{c(){e=B("div"),l=B("div"),t=H("Dates Preview ("),s=H(n),a=H(" entries)"),o=M(),i=B("div"),f=B("ul");for(let u=0;u<d.length;u+=1)d[u].c();this.h()},l(u){e=I(u,"DIV",{class:!0});var _=N(e);l=I(_,"DIV",{});var m=N(l);t=K(m,"Dates Preview ("),s=K(m,n),a=K(m," entries)"),m.forEach(b),o=F(_),i=I(_,"DIV",{class:!0});var T=N(i);f=I(T,"UL",{class:!0});var w=N(f);for(let y=0;y<d.length;y+=1)d[y].l(w);w.forEach(b),T.forEach(b),_.forEach(b),this.h()},h(){S(f,"class","list-group list-group-flush"),S(i,"class","preview border border-light-subtle svelte-1qbwz3y"),S(e,"class","d-flex flex-column gap-1")},m(u,_){A(u,e,_),h(e,l),h(l,t),h(l,s),h(l,a),h(e,o),h(e,i),h(i,f);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(f,null)},p(u,_){if(_&1&&n!==(n=u[0].length+"")&&x(s,n),_&1){c=ce(u[0]);let m;for(m=0;m<c.length;m+=1){const T=be(u,c,m);d[m]?d[m].p(T,_):(d[m]=ke(T),d[m].c(),d[m].m(f,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}},d(u){u&&b(e),Me(d,u)}}}function ke(r){let e,l=r[3]+1+"",t,n,s=fe(r[1],"EEE - dd MMM yyyy")+"",a,o;return{c(){e=B("li"),t=H(l),n=H(". "),a=H(s),o=M(),this.h()},l(i){e=I(i,"LI",{class:!0});var f=N(e);t=K(f,l),n=K(f,". "),a=K(f,s),o=F(f),f.forEach(b),this.h()},h(){S(e,"class","list-group-item")},m(i,f){A(i,e,f),h(e,t),h(e,n),h(e,a),h(e,o)},p(i,f){f&1&&s!==(s=fe(i[1],"EEE - dd MMM yyyy")+"")&&x(a,s)},d(i){i&&b(e)}}}function ot(r){let e,l=r[0].length>0&&$e(r);return{c(){l&&l.c(),e=Z()},l(t){l&&l.l(t),e=Z()},m(t,n){l&&l.m(t,n),A(t,e,n)},p(t,[n]){t[0].length>0?l?l.p(t,n):(l=$e(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:se,o:se,d(t){t&&b(e),l&&l.d(t)}}}function ft(r,e,l){let{dates:t}=e;return r.$$set=n=>{"dates"in n&&l(0,t=n.dates)},[t]}class ut extends J{constructor(e){super(),Q(this,e,ft,ot,G,{dates:0})}}function we(r){let e,l,t,n,s,a,o,i,f,c,d,u,_,m,T="Cancel",w,y,q="Save",j,U,R;l=new Ye({props:{loading:r[0],value:r[1].description}}),l.$on("valueChanged",r[10]),n=new ze({props:{loading:r[0],value:r[1].source}}),n.$on("valueChanged",r[11]),a=new Ue({props:{loading:r[0],value:r[1].amount}}),a.$on("valueChanged",r[12]);let g=r[1]?.meta_data?.transaction?.type&&Ce(r),$=r[1].recurrence&&ye(r),p=r[1].id&&Ee(r);return{c(){e=B("div"),V(l.$$.fragment),t=M(),V(n.$$.fragment),s=M(),V(a.$$.fragment),o=M(),g&&g.c(),i=M(),$&&$.c(),f=M(),c=B("div"),d=B("div"),p&&p.c(),u=M(),_=B("div"),m=B("button"),m.textContent=T,w=M(),y=B("button"),y.textContent=q,this.h()},l(D){e=I(D,"DIV",{class:!0});var k=N(e);P(l.$$.fragment,k),t=F(k),P(n.$$.fragment,k),s=F(k),P(a.$$.fragment,k),o=F(k),g&&g.l(k),i=F(k),$&&$.l(k),f=F(k),c=I(k,"DIV",{class:!0});var E=N(c);d=I(E,"DIV",{});var Y=N(d);p&&p.l(Y),Y.forEach(b),u=F(E),_=I(E,"DIV",{});var z=N(_);m=I(z,"BUTTON",{class:!0,"data-svelte-h":!0}),le(m)!=="svelte-1ujapj6"&&(m.textContent=T),w=F(z),y=I(z,"BUTTON",{class:!0,"data-svelte-h":!0}),le(y)!=="svelte-1av7h0z"&&(y.textContent=q),z.forEach(b),E.forEach(b),k.forEach(b),this.h()},h(){S(m,"class","btn btn-sm btn-secondary"),S(y,"class","btn btn-sm btn-primary"),S(c,"class","d-flex justify-content-between"),S(e,"class","d-flex flex-column gap-3")},m(D,k){A(D,e,k),L(l,e,null),h(e,t),L(n,e,null),h(e,s),L(a,e,null),h(e,o),g&&g.m(e,null),h(e,i),$&&$.m(e,null),h(e,f),h(e,c),h(c,d),p&&p.m(d,null),h(c,u),h(c,_),h(_,m),h(_,w),h(_,y),j=!0,U||(R=[oe(m,"click",r[4]),oe(y,"click",r[5])],U=!0)},p(D,k){const E={};k&1&&(E.loading=D[0]),k&2&&(E.value=D[1].description),l.$set(E);const Y={};k&1&&(Y.loading=D[0]),k&2&&(Y.value=D[1].source),n.$set(Y);const z={};k&1&&(z.loading=D[0]),k&2&&(z.value=D[1].amount),a.$set(z),D[1]?.meta_data?.transaction?.type?g?(g.p(D,k),k&2&&v(g,1)):(g=Ce(D),g.c(),v(g,1),g.m(e,i)):g&&(W(),C(g,1,1,()=>{g=null}),X()),D[1].recurrence?$?($.p(D,k),k&2&&v($,1)):($=ye(D),$.c(),v($,1),$.m(e,f)):$&&(W(),C($,1,1,()=>{$=null}),X()),D[1].id?p?p.p(D,k):(p=Ee(D),p.c(),p.m(d,null)):p&&(p.d(1),p=null)},i(D){j||(v(l.$$.fragment,D),v(n.$$.fragment,D),v(a.$$.fragment,D),v(g),v($),j=!0)},o(D){C(l.$$.fragment,D),C(n.$$.fragment,D),C(a.$$.fragment,D),C(g),C($),j=!1},d(D){D&&b(e),O(l),O(n),O(a),g&&g.d(),$&&$.d(),p&&p.d(),U=!1,Ve(R)}}}function Ce(r){let e,l;return e=new Xe({props:{loading:r[0],value:r[1].meta_data.transaction.type}}),e.$on("valueChanged",r[13]),{c(){V(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.loading=t[0]),n&2&&(s.value=t[1].meta_data.transaction.type),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function ye(r){let e,l="Repeats",t,n,s,a,o,i,f,c;n=new tt({props:{loading:r[0],value:r[1].recurrence.type}}),n.$on("valueChanged",r[14]),a=new at({props:{loading:r[0],value:r[1].recurrence.start_date}}),a.$on("valueChanged",r[15]);let d=r[1].recurrence.until&&De(r);return f=new ut({props:{dates:r[2]}}),{c(){e=B("h5"),e.textContent=l,t=M(),V(n.$$.fragment),s=M(),V(a.$$.fragment),o=M(),d&&d.c(),i=M(),V(f.$$.fragment)},l(u){e=I(u,"H5",{"data-svelte-h":!0}),le(e)!=="svelte-13f0n3i"&&(e.textContent=l),t=F(u),P(n.$$.fragment,u),s=F(u),P(a.$$.fragment,u),o=F(u),d&&d.l(u),i=F(u),P(f.$$.fragment,u)},m(u,_){A(u,e,_),A(u,t,_),L(n,u,_),A(u,s,_),L(a,u,_),A(u,o,_),d&&d.m(u,_),A(u,i,_),L(f,u,_),c=!0},p(u,_){const m={};_&1&&(m.loading=u[0]),_&2&&(m.value=u[1].recurrence.type),n.$set(m);const T={};_&1&&(T.loading=u[0]),_&2&&(T.value=u[1].recurrence.start_date),a.$set(T),u[1].recurrence.until?d?(d.p(u,_),_&2&&v(d,1)):(d=De(u),d.c(),v(d,1),d.m(i.parentNode,i)):d&&(W(),C(d,1,1,()=>{d=null}),X());const w={};_&4&&(w.dates=u[2]),f.$set(w)},i(u){c||(v(n.$$.fragment,u),v(a.$$.fragment,u),v(d),v(f.$$.fragment,u),c=!0)},o(u){C(n.$$.fragment,u),C(a.$$.fragment,u),C(d),C(f.$$.fragment,u),c=!1},d(u){u&&(b(e),b(t),b(s),b(o),b(i)),O(n,u),O(a,u),d&&d.d(u),O(f,u)}}}function De(r){let e,l;return e=new st({props:{loading:r[0],value:r[1].recurrence.until}}),e.$on("valueChanged",r[16]),{c(){V(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.loading=t[0]),n&2&&(s.value=t[1].recurrence.until),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Ee(r){let e,l="Delete",t,n;return{c(){e=B("button"),e.textContent=l,this.h()},l(s){e=I(s,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1a2qbe2"&&(e.textContent=l),this.h()},h(){S(e,"class","btn btn-sm btn-danger")},m(s,a){A(s,e,a),t||(n=oe(e,"click",r[6]),t=!0)},p:se,d(s){s&&b(e),t=!1,n()}}}function ct(r){let e,l,t=r[1]&&we(r);return{c(){t&&t.c(),e=Z()},l(n){t&&t.l(n),e=Z()},m(n,s){t&&t.m(n,s),A(n,e,s),l=!0},p(n,[s]){n[1]?t?(t.p(n,s),s&2&&v(t,1)):(t=we(n),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(W(),C(t,1,1,()=>{t=null}),X())},i(n){l||(v(t),l=!0)},o(n){C(t),l=!1},d(n){n&&b(e),t&&t.d(n)}}}function dt(r,e,l){let{loading:t=!1}=e,{bill:n}=e,{drawerId:s}=e,a=[],o=0,i={type:"monthly",start_date:fe(new Date,"yyyy-MM-dd"),until:fe(Ge(new Date,12),"yyyy-MM-dd")},f={transaction:{paid:"scheduled",type:"fixed",from_bill:!0}},c={source:"",amount:10,description:"",recurrence:i,meta_data:f};const d=(g,$)=>{const{value:p}=g.detail;if(c&&c.recurrence){switch($){case"description":l(1,c.description=p,c);break;case"source":l(1,c.source=p,c);break;case"amount":l(1,c.amount=p,c);break;case"repeat-type":l(1,c.recurrence.type=p,c);break;case"repeat-start-date":l(1,c.recurrence.start_date=p,c);break;case"repeat-until-date":l(1,c.recurrence.until=p,c);break;case"meta-data-transaction-type":c?.meta_data?.transaction?.type&&l(1,c.meta_data.transaction.type=p,c);break}l(2,a=he(c.recurrence))}},u=()=>{const g=`[data-bs-target="#${s}"]`,$=document.querySelector(g);$&&($.click(),l(7,n=void 0),l(9,o=void 0),l(1,c={source:"",amount:10,description:"",recurrence:i}))},_=async()=>{const{actions:{reload:g,createBill:$,updateBill:p}}=ue();c.id?await p(c.id,c):await $(c),await g(),u()},m=async()=>{if(!c?.id)return;const{actions:{reload:g,deleteBill:$}}=ue();Oe({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async p=>{c?.id&&(p&&await $(c.id),await g(),u())}})},T=g=>d(g,"description"),w=g=>d(g,"source"),y=g=>d(g,"amount"),q=g=>d(g,"meta-data-transaction-type"),j=g=>d(g,"repeat-type"),U=g=>d(g,"repeat-start-date"),R=g=>d(g,"repeat-until-date");return r.$$set=g=>{"loading"in g&&l(0,t=g.loading),"bill"in g&&l(7,n=g.bill),"drawerId"in g&&l(8,s=g.drawerId)},r.$$.update=()=>{if(r.$$.dirty&642&&(!n||o!==n?.id)){l(1,c=n?{...c,...n,recurrence:{...i,...n.recurrence},meta_data:{...f,...n.meta_data}}:c);const{recurrence:g}=c;l(2,a=g?he(g):[]),l(9,o=n?.id)}},[t,c,a,d,u,_,m,n,s,o,T,w,y,q,j,U,R]}class gt extends J{constructor(e){super(),Q(this,e,dt,ct,G,{loading:0,bill:7,drawerId:8})}}function Be(r,e,l){const t=r.slice();return t[6]=e[l],t}function Ie(r){let e,l,t=ce(r[0]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Se(Be(r,t,a));const s=a=>C(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Z()},l(a){for(let o=0;o<n.length;o+=1)n[o].l(a);e=Z()},m(a,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,o);A(a,e,o),l=!0},p(a,o){if(o&7){t=ce(a[0]);let i;for(i=0;i<t.length;i+=1){const f=Be(a,t,i);n[i]?(n[i].p(f,o),v(n[i],1)):(n[i]=Se(f),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(W(),i=t.length;i<n.length;i+=1)s(i);X()}},i(a){if(!l){for(let o=0;o<t.length;o+=1)v(n[o]);l=!0}},o(a){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)C(n[o]);l=!1},d(a){a&&b(e),Me(n,a)}}}function Te(r){let e,l;return e=new He({props:{type:r[6].meta_data.transaction.type}}),{c(){V(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.type=t[6].meta_data.transaction.type),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function mt(r){let e=ve(r[6].amount)+"",l;return{c(){l=H(e)},l(t){l=K(t,e)},m(t,n){A(t,l,n)},p(t,n){n&1&&e!==(e=ve(t[6].amount)+"")&&x(l,e)},d(t){t&&b(l)}}}function Se(r){let e,l,t=r[6].description+"",n,s,a,o,i,f=r[6].source+"",c,d,u,_,m=r[6]?.recurrence?.type+"",T,w,y=r[6]?.recurrence?.start_date+"",q,j,U,R,g,$,p=r[6]?.meta_data?.transaction&&Te(r);function D(){return r[3](r[6])}return R=new Ke({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+r[1],"aria-controls":r[1],$$slots:{default:[mt]},$$scope:{ctx:r}}}),R.$on("click",D),{c(){e=B("div"),l=B("div"),n=H(t),s=M(),a=B("div"),o=B("div"),i=B("div"),c=H(f),d=M(),u=B("div"),_=B("span"),T=H(m),w=H(`
						Bill starting `),q=H(y),j=M(),p&&p.c(),U=M(),V(R.$$.fragment),g=M(),this.h()},l(k){e=I(k,"DIV",{});var E=N(e);l=I(E,"DIV",{class:!0});var Y=N(l);n=K(Y,t),Y.forEach(b),s=F(E),a=I(E,"DIV",{class:!0});var z=N(a);o=I(z,"DIV",{class:!0});var ee=N(o);i=I(ee,"DIV",{class:!0});var me=N(i);c=K(me,f),me.forEach(b),d=F(ee),u=I(ee,"DIV",{class:!0});var ie=N(u);_=I(ie,"SPAN",{class:!0});var _e=N(_);T=K(_e,m),_e.forEach(b),w=K(ie,`
						Bill starting `),q=K(ie,y),ie.forEach(b),j=F(ee),p&&p.l(ee),ee.forEach(b),U=F(z),P(R.$$.fragment,z),z.forEach(b),g=F(E),E.forEach(b),this.h()},h(){S(l,"class","fw-bold"),S(i,"class","fw-light"),S(_,"class","text-capitalize"),S(u,"class","fw-lighter text-muted small"),S(o,"class","small"),S(a,"class","d-flex justify-content-between")},m(k,E){A(k,e,E),h(e,l),h(l,n),h(e,s),h(e,a),h(a,o),h(o,i),h(i,c),h(o,d),h(o,u),h(u,_),h(_,T),h(u,w),h(u,q),h(o,j),p&&p.m(o,null),h(a,U),L(R,a,null),h(e,g),$=!0},p(k,E){r=k,(!$||E&1)&&t!==(t=r[6].description+"")&&x(n,t),(!$||E&1)&&f!==(f=r[6].source+"")&&x(c,f),(!$||E&1)&&m!==(m=r[6]?.recurrence?.type+"")&&x(T,m),(!$||E&1)&&y!==(y=r[6]?.recurrence?.start_date+"")&&x(q,y),r[6]?.meta_data?.transaction?p?(p.p(r,E),E&1&&v(p,1)):(p=Te(r),p.c(),v(p,1),p.m(o,null)):p&&(W(),C(p,1,1,()=>{p=null}),X());const Y={};E&2&&(Y["data-bs-target"]="#"+r[1]),E&2&&(Y["aria-controls"]=r[1]),E&513&&(Y.$$scope={dirty:E,ctx:r}),R.$set(Y)},i(k){$||(v(p),v(R.$$.fragment,k),$=!0)},o(k){C(p),C(R.$$.fragment,k),$=!1},d(k){k&&b(e),p&&p.d(),O(R)}}}function _t(r){let e,l,t=r[0].length&&Ie(r);return{c(){t&&t.c(),e=Z()},l(n){t&&t.l(n),e=Z()},m(n,s){t&&t.m(n,s),A(n,e,s),l=!0},p(n,[s]){n[0].length?t?(t.p(n,s),s&1&&v(t,1)):(t=Ie(n),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(W(),C(t,1,1,()=>{t=null}),X())},i(n){l||(v(t),l=!0)},o(n){C(t),l=!1},d(n){n&&b(e),t&&t.d(n)}}}function pt(r,e,l){let{data:t=[]}=e,{drawerId:n=""}=e;const{stores:{targetBill:s,loading:a}}=ue(),o=f=>{a.set(!0),setTimeout(()=>{s.set(f),a.set(!1)},800)},i=f=>o(f);return r.$$set=f=>{"data"in f&&l(0,t=f.data),"drawerId"in f&&l(1,n=f.drawerId)},[t,n,o,i]}class ht extends J{constructor(e){super(),Q(this,e,pt,_t,G,{data:0,drawerId:1})}}function vt(r){let e,l;return e=new Ae({}),{c(){V(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},p:se,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function bt(r){let e,l,t;function n(a){r[8](a)}let s={bill:r[0],drawerId:te};return r[2]!==void 0&&(s.loading=r[2]),e=new gt({props:s}),ne.push(()=>re(e,"loading",n)),{c(){V(e.$$.fragment)},l(a){P(e.$$.fragment,a)},m(a,o){L(e,a,o),t=!0},p(a,o){const i={};o&1&&(i.bill=a[0]),!l&&o&4&&(l=!0,i.loading=a[2],ae(()=>l=!1)),e.$set(i)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function $t(r){let e,l,t,n;const s=[bt,vt],a=[];function o(i,f){return i[2]?1:0}return e=o(r),l=a[e]=s[e](r),{c(){l.c(),t=Z()},l(i){l.l(i),t=Z()},m(i,f){a[e].m(i,f),A(i,t,f),n=!0},p(i,f){let c=e;e=o(i),e===c?a[e].p(i,f):(W(),C(a[c],1,1,()=>{a[c]=null}),X(),l=a[e],l?l.p(i,f):(l=a[e]=s[e](i),l.c()),v(l,1),l.m(t.parentNode,t))},i(i){n||(v(l),n=!0)},o(i){C(l),n=!1},d(i){i&&b(t),a[e].d(i)}}}function kt(r){let e,l,t,n,s,a="Bills",o,i,f,c,d,u,_,m,T;return e=new qe({props:{title:r[1],id:te,$$slots:{default:[$t]},$$scope:{ctx:r}}}),u=new ht({props:{drawerId:te,data:r[3]}}),{c(){V(e.$$.fragment),l=M(),t=B("div"),n=B("div"),s=B("h2"),s.textContent=a,o=M(),i=B("div"),f=B("button"),c=B("i"),d=M(),V(u.$$.fragment),this.h()},l(w){P(e.$$.fragment,w),l=F(w),t=I(w,"DIV",{class:!0});var y=N(t);n=I(y,"DIV",{class:!0});var q=N(n);s=I(q,"H2",{"data-svelte-h":!0}),le(s)!=="svelte-14q1s24"&&(s.textContent=a),o=F(q),i=I(q,"DIV",{});var j=N(i);f=I(j,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var U=N(f);c=I(U,"I",{class:!0}),N(c).forEach(b),U.forEach(b),j.forEach(b),q.forEach(b),d=F(y),P(u.$$.fragment,y),y.forEach(b),this.h()},h(){S(c,"class","bi bi-plus"),S(f,"class","btn btn-sm btn-secondary"),S(f,"data-bs-toggle","offcanvas"),S(f,"data-bs-target","#"+te),S(f,"aria-controls",te),S(n,"class","d-flex justify-content-between align-items-center"),S(t,"class","d-flex flex-column gap-3")},m(w,y){L(e,w,y),A(w,l,y),A(w,t,y),h(t,n),h(n,s),h(n,o),h(n,i),h(i,f),h(f,c),h(t,d),L(u,t,null),_=!0,m||(T=oe(f,"click",r[7]),m=!0)},p(w,[y]){const q={};y&2&&(q.title=w[1]),y&2053&&(q.$$scope={dirty:y,ctx:w}),e.$set(q);const j={};y&8&&(j.data=w[3]),u.$set(j)},i(w){_||(v(e.$$.fragment,w),v(u.$$.fragment,w),_=!0)},o(w){C(e.$$.fragment,w),C(u.$$.fragment,w),_=!1},d(w){w&&(b(l),b(t)),O(e,w),O(u),m=!1,T()}}}const te="bill-form";function wt(r,e,l){let t,n,s,a;const{stores:{data:o,targetBill:i,loading:f},actions:{reload:c}}=ue();ge(r,o,m=>l(3,a=m)),ge(r,i,m=>l(0,n=m)),ge(r,f,m=>l(2,s=m));const d={description:"",source:"",amount:0};Pe(()=>c());const u=()=>{f.set(!0),setTimeout(()=>{i.set(d),f.set(!1)},1500)};function _(m){s=m,f.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=n?.id?"Edit Bill":"Create Bill")},[n,t,s,a,o,i,f,u,_]}class Ct extends J{constructor(e){super(),Q(this,e,wt,kt,G,{})}}function yt(r){let e,l;return e=new Ct({}),{c(){V(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Dt(r){let e,l;return e=new Le({props:{pageTitle:"Bills",$$slots:{default:[yt]},$$scope:{ctx:r}}}),{c(){V(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}class Lt extends J{constructor(e){super(),Q(this,e,null,Dt,G,{})}}export{Lt as component,Pt as universal};
