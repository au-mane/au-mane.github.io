import{s as Q,G as x,Y as ie,Z as me,z as J,n as A,v as fe,d as b,e as D,t as G,b as F,i as E,j as N,l as K,f as V,m as M,o as p,p as ne,L as Me,k as re,I as ue,x as Pe,q as _e,r as Le}from"../chunks/scheduler.C4kY8riC.js";import{S as W,i as X,f as se,c as P,b as L,m as O,t as h,a as k,d as R,g as ee,e as te}from"../chunks/index.DQNbkBmu.js";import{P as Oe}from"../chunks/PageLayout.BpZ6L2h5.js";import{c as Re,D as qe,F as Ae}from"../chunks/FormSkeleton.l4ArI2-e.js";import{a as pe,B as je,R as Ye,f as ce,b as he,g as de}from"../chunks/bills.state.CSOLRuxv.js";import{D as Fe,a as ze,S as Ue,A as He,B as Ge}from"../chunks/BillTypeBadge.rQqpl3PL.js";import{S as Ne,B as Ke}from"../chunks/Button.DjLxTdvl.js";import{e as ge}from"../chunks/Header.BwQV1-mq.js";import{t as Ze,f as ve}from"../chunks/app.state.B-eiuzT1.js";function Je(a,e){const l=Ze(a);if(isNaN(e))return pe(a,NaN);const t=l.getDate(),n=pe(a,l.getTime());n.setMonth(l.getMonth()+e+1,0);const s=n.getDate();return t>=s?n:(l.setFullYear(n.getFullYear(),n.getMonth(),t),l)}const Qe=!0,Lt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Qe},Symbol.toStringTag,{value:"Module"}));function We(a){let e,l,t;function n(r){a[4](r)}let s={label:"Type",name:"repeat-type",helperText:"",loading:a[1],required:!0,isInvalid:!1,disabled:!1,options:a[3]};return a[0]!==void 0&&(s.value=a[0]),e=new Ne({props:s}),x.push(()=>se(e,"value",n)),e.$on("change",a[2]),{c(){P(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,o){O(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!l&&o&1&&(l=!0,i.value=r[0],ie(()=>l=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){k(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function Xe(a,e,l){let{value:t}=e,{loading:n}=e;const s=me(),r=()=>{s("valueChanged",{value:t})},o=je;function i(u){t=u,l(0,t)}return a.$$set=u=>{"value"in u&&l(0,t=u.value),"loading"in u&&l(1,n=u.loading)},[t,n,r,o,i]}class xe extends W{constructor(e){super(),X(this,e,Xe,We,Q,{value:0,loading:1})}}function et(a){let e,l,t;function n(r){a[4](r)}let s={label:"Repeat type",name:"repeat-type",helperText:"",loading:a[1],required:!0,isInvalid:!1,disabled:!1,options:a[3]};return a[0]!==void 0&&(s.value=a[0]),e=new Ne({props:s}),x.push(()=>se(e,"value",n)),e.$on("change",a[2]),{c(){P(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,o){O(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!l&&o&1&&(l=!0,i.value=r[0],ie(()=>l=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){k(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function tt(a,e,l){let{value:t}=e,{loading:n}=e;const s=me(),r=()=>{s("valueChanged",{value:t})},o=Ye;function i(u){t=u,l(0,t)}return a.$$set=u=>{"value"in u&&l(0,t=u.value),"loading"in u&&l(1,n=u.loading)},[t,n,r,o,i]}class lt extends W{constructor(e){super(),X(this,e,tt,et,Q,{value:0,loading:1})}}function nt(a){let e,l,t;function n(r){a[3](r)}let s={label:"Date",name:"repeat-start-date",placeholder:"",helperText:"",loading:a[1],required:!0,isInvalid:!1};return a[0]!==void 0&&(s.value=a[0]),e=new Fe({props:s}),x.push(()=>se(e,"value",n)),e.$on("valueChanged",a[2]),{c(){P(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,o){O(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!l&&o&1&&(l=!0,i.value=r[0],ie(()=>l=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){k(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function at(a,e,l){let{value:t}=e,{loading:n}=e;const s=me(),r=()=>{s("valueChanged",{value:t})};function o(i){t=i,l(0,t)}return a.$$set=i=>{"value"in i&&l(0,t=i.value),"loading"in i&&l(1,n=i.loading)},[t,n,r,o]}class rt extends W{constructor(e){super(),X(this,e,at,nt,Q,{value:0,loading:1})}}function it(a){let e,l,t;function n(r){a[3](r)}let s={label:"Until",name:"repeat-end-date",placeholder:"",helperText:"",loading:a[1],required:!0,isInvalid:!1};return a[0]!==void 0&&(s.value=a[0]),e=new Fe({props:s}),x.push(()=>se(e,"value",n)),e.$on("valueChanged",a[2]),{c(){P(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,o){O(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!l&&o&1&&(l=!0,i.value=r[0],ie(()=>l=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){k(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function st(a,e,l){let{value:t}=e,{loading:n}=e;const s=me(),r=()=>{s("valueChanged",{value:t})};function o(i){t=i,l(0,t)}return a.$$set=i=>{"value"in i&&l(0,t=i.value),"loading"in i&&l(1,n=i.loading)},[t,n,r,o]}class ot extends W{constructor(e){super(),X(this,e,st,it,Q,{value:0,loading:1})}}function be(a,e,l){const t=a.slice();return t[1]=e[l],t[3]=l,t}function $e(a){let e,l,t,n=a[0].length+"",s,r,o,i,u,d=ge(a[0]),m=[];for(let f=0;f<d.length;f+=1)m[f]=we(be(a,d,f));return{c(){e=D("div"),l=D("div"),t=G("Dates Preview ("),s=G(n),r=G(" entries)"),o=F(),i=D("div"),u=D("ul");for(let f=0;f<m.length;f+=1)m[f].c();this.h()},l(f){e=E(f,"DIV",{class:!0});var _=N(e);l=E(_,"DIV",{});var g=N(l);t=K(g,"Dates Preview ("),s=K(g,n),r=K(g," entries)"),g.forEach(b),o=V(_),i=E(_,"DIV",{class:!0});var B=N(i);u=E(B,"UL",{class:!0});var w=N(u);for(let I=0;I<m.length;I+=1)m[I].l(w);w.forEach(b),B.forEach(b),_.forEach(b),this.h()},h(){M(u,"class","list-group list-group-flush"),M(i,"class","preview border border-light-subtle svelte-1qbwz3y"),M(e,"class","d-flex flex-column gap-1")},m(f,_){A(f,e,_),p(e,l),p(l,t),p(l,s),p(l,r),p(e,o),p(e,i),p(i,u);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(u,null)},p(f,_){if(_&1&&n!==(n=f[0].length+"")&&ne(s,n),_&1){d=ge(f[0]);let g;for(g=0;g<d.length;g+=1){const B=be(f,d,g);m[g]?m[g].p(B,_):(m[g]=we(B),m[g].c(),m[g].m(u,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=d.length}},d(f){f&&b(e),Me(m,f)}}}function we(a){let e,l=a[3]+1+"",t,n,s=ce(a[1],"EEE - dd MMM yyyy")+"",r,o;return{c(){e=D("li"),t=G(l),n=G(". "),r=G(s),o=F(),this.h()},l(i){e=E(i,"LI",{class:!0});var u=N(e);t=K(u,l),n=K(u,". "),r=K(u,s),o=V(u),u.forEach(b),this.h()},h(){M(e,"class","list-group-item")},m(i,u){A(i,e,u),p(e,t),p(e,n),p(e,r),p(e,o)},p(i,u){u&1&&s!==(s=ce(i[1],"EEE - dd MMM yyyy")+"")&&ne(r,s)},d(i){i&&b(e)}}}function ft(a){let e,l=a[0].length>0&&$e(a);return{c(){l&&l.c(),e=J()},l(t){l&&l.l(t),e=J()},m(t,n){l&&l.m(t,n),A(t,e,n)},p(t,[n]){t[0].length>0?l?l.p(t,n):(l=$e(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:fe,o:fe,d(t){t&&b(e),l&&l.d(t)}}}function ut(a,e,l){let{dates:t}=e;return a.$$set=n=>{"dates"in n&&l(0,t=n.dates)},[t]}class ct extends W{constructor(e){super(),X(this,e,ut,ft,Q,{dates:0})}}function ke(a){let e,l,t,n,s,r,o,i,u,d,m,f,_,g,B="Cancel",w,I,q="Save",j,U,z,le={loading:a[0],value:a[1].description};l=new ze({props:le}),a[13](l),l.$on("valueChanged",a[14]);let H={loading:a[0],value:a[1].source};n=new Ue({props:H}),a[15](n),n.$on("valueChanged",a[16]);let T={loading:a[0],value:a[1].amount};r=new He({props:T}),a[17](r),r.$on("valueChanged",a[18]);let S=a[1]?.meta_data?.transaction?.type&&Ie(a),C=a[1].recurrence&&Ce(a),$=a[1].id&&De(a);return{c(){e=D("div"),P(l.$$.fragment),t=F(),P(n.$$.fragment),s=F(),P(r.$$.fragment),o=F(),S&&S.c(),i=F(),C&&C.c(),u=F(),d=D("div"),m=D("div"),$&&$.c(),f=F(),_=D("div"),g=D("button"),g.textContent=B,w=F(),I=D("button"),I.textContent=q,this.h()},l(c){e=E(c,"DIV",{class:!0});var v=N(e);L(l.$$.fragment,v),t=V(v),L(n.$$.fragment,v),s=V(v),L(r.$$.fragment,v),o=V(v),S&&S.l(v),i=V(v),C&&C.l(v),u=V(v),d=E(v,"DIV",{class:!0});var y=N(d);m=E(y,"DIV",{});var Z=N(m);$&&$.l(Z),Z.forEach(b),f=V(y),_=E(y,"DIV",{});var Y=N(_);g=E(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),re(g)!=="svelte-1ujapj6"&&(g.textContent=B),w=V(Y),I=E(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),re(I)!=="svelte-1av7h0z"&&(I.textContent=q),Y.forEach(b),y.forEach(b),v.forEach(b),this.h()},h(){M(g,"class","btn btn-sm btn-secondary"),M(I,"class","btn btn-sm btn-primary"),M(d,"class","d-flex justify-content-between"),M(e,"class","d-flex flex-column gap-3")},m(c,v){A(c,e,v),O(l,e,null),p(e,t),O(n,e,null),p(e,s),O(r,e,null),p(e,o),S&&S.m(e,null),p(e,i),C&&C.m(e,null),p(e,u),p(e,d),p(d,m),$&&$.m(m,null),p(d,f),p(d,_),p(_,g),p(_,w),p(_,I),j=!0,U||(z=[ue(g,"click",a[7]),ue(I,"click",a[8])],U=!0)},p(c,v){const y={};v&1&&(y.loading=c[0]),v&2&&(y.value=c[1].description),l.$set(y);const Z={};v&1&&(Z.loading=c[0]),v&2&&(Z.value=c[1].source),n.$set(Z);const Y={};v&1&&(Y.loading=c[0]),v&2&&(Y.value=c[1].amount),r.$set(Y),c[1]?.meta_data?.transaction?.type?S?(S.p(c,v),v&2&&h(S,1)):(S=Ie(c),S.c(),h(S,1),S.m(e,i)):S&&(ee(),k(S,1,1,()=>{S=null}),te()),c[1].recurrence?C?(C.p(c,v),v&2&&h(C,1)):(C=Ce(c),C.c(),h(C,1),C.m(e,u)):C&&(ee(),k(C,1,1,()=>{C=null}),te()),c[1].id?$?$.p(c,v):($=De(c),$.c(),$.m(m,null)):$&&($.d(1),$=null)},i(c){j||(h(l.$$.fragment,c),h(n.$$.fragment,c),h(r.$$.fragment,c),h(S),h(C),j=!0)},o(c){k(l.$$.fragment,c),k(n.$$.fragment,c),k(r.$$.fragment,c),k(S),k(C),j=!1},d(c){c&&b(e),a[13](null),R(l),a[15](null),R(n),a[17](null),R(r),S&&S.d(),C&&C.d(),$&&$.d(),U=!1,Pe(z)}}}function Ie(a){let e,l;return e=new xe({props:{loading:a[0],value:a[1].meta_data.transaction.type}}),e.$on("valueChanged",a[19]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.loading=t[0]),n&2&&(s.value=t[1].meta_data.transaction.type),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ce(a){let e,l="Repeats",t,n,s,r,o,i,u,d;n=new lt({props:{loading:a[0],value:a[1].recurrence.type}}),n.$on("valueChanged",a[20]),r=new rt({props:{loading:a[0],value:a[1].recurrence.start_date}}),r.$on("valueChanged",a[21]);let m=a[1].recurrence.until&&ye(a);return u=new ct({props:{dates:a[2]}}),{c(){e=D("h5"),e.textContent=l,t=F(),P(n.$$.fragment),s=F(),P(r.$$.fragment),o=F(),m&&m.c(),i=F(),P(u.$$.fragment)},l(f){e=E(f,"H5",{"data-svelte-h":!0}),re(e)!=="svelte-13f0n3i"&&(e.textContent=l),t=V(f),L(n.$$.fragment,f),s=V(f),L(r.$$.fragment,f),o=V(f),m&&m.l(f),i=V(f),L(u.$$.fragment,f)},m(f,_){A(f,e,_),A(f,t,_),O(n,f,_),A(f,s,_),O(r,f,_),A(f,o,_),m&&m.m(f,_),A(f,i,_),O(u,f,_),d=!0},p(f,_){const g={};_&1&&(g.loading=f[0]),_&2&&(g.value=f[1].recurrence.type),n.$set(g);const B={};_&1&&(B.loading=f[0]),_&2&&(B.value=f[1].recurrence.start_date),r.$set(B),f[1].recurrence.until?m?(m.p(f,_),_&2&&h(m,1)):(m=ye(f),m.c(),h(m,1),m.m(i.parentNode,i)):m&&(ee(),k(m,1,1,()=>{m=null}),te());const w={};_&4&&(w.dates=f[2]),u.$set(w)},i(f){d||(h(n.$$.fragment,f),h(r.$$.fragment,f),h(m),h(u.$$.fragment,f),d=!0)},o(f){k(n.$$.fragment,f),k(r.$$.fragment,f),k(m),k(u.$$.fragment,f),d=!1},d(f){f&&(b(e),b(t),b(s),b(o),b(i)),R(n,f),R(r,f),m&&m.d(f),R(u,f)}}}function ye(a){let e,l;return e=new ot({props:{loading:a[0],value:a[1].recurrence.until}}),e.$on("valueChanged",a[22]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.loading=t[0]),n&2&&(s.value=t[1].recurrence.until),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function De(a){let e,l="Delete",t,n;return{c(){e=D("button"),e.textContent=l,this.h()},l(s){e=E(s,"BUTTON",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-1a2qbe2"&&(e.textContent=l),this.h()},h(){M(e,"class","btn btn-sm btn-danger")},m(s,r){A(s,e,r),t||(n=ue(e,"click",a[9]),t=!0)},p:fe,d(s){s&&b(e),t=!1,n()}}}function dt(a){let e,l,t=a[1]&&ke(a);return{c(){t&&t.c(),e=J()},l(n){t&&t.l(n),e=J()},m(n,s){t&&t.m(n,s),A(n,e,s),l=!0},p(n,[s]){n[1]?t?(t.p(n,s),s&2&&h(t,1)):(t=ke(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(ee(),k(t,1,1,()=>{t=null}),te())},i(n){l||(h(t),l=!0)},o(n){k(t),l=!1},d(n){n&&b(e),t&&t.d(n)}}}function gt(a,e,l){let{loading:t=!1}=e,{bill:n}=e,{drawerId:s}=e,r=[],o=0,i={type:"monthly",start_date:ce(new Date,"yyyy-MM-dd"),until:ce(Je(new Date,12),"yyyy-MM-dd")},u={transaction:{paid:"scheduled",type:"fixed",from_bill:!0}},d={source:"",amount:10,description:"",recurrence:i,meta_data:u},m,f,_;const g=(c,v)=>{const{value:y}=c.detail;if(d&&d.recurrence){switch(v){case"description":l(1,d.description=y,d);break;case"source":l(1,d.source=y,d);break;case"amount":l(1,d.amount=y,d);break;case"repeat-type":l(1,d.recurrence.type=y,d);break;case"repeat-start-date":l(1,d.recurrence.start_date=y,d);break;case"repeat-until-date":l(1,d.recurrence.until=y,d);break;case"meta-data-transaction-type":d?.meta_data?.transaction?.type&&l(1,d.meta_data.transaction.type=y,d);break}l(2,r=he(d.recurrence))}},B=()=>{const c=`[data-bs-target="#${s}"]`,v=document.querySelector(c);v&&(v.click(),l(10,n=void 0),l(12,o=void 0),l(1,d={source:"",amount:10,description:"",recurrence:i}))},w=async()=>{const c=await m.validateFieldIsInvalid(),v=await f.validateFieldIsInvalid(),y=await _.validateFieldIsInvalid();if(c||v||y)return;const{actions:{reload:Y,createBill:oe,updateBill:Ve}}=de();d.id?await Ve(d.id,d):await oe(d),await Y(),B()},I=async()=>{if(!d?.id)return;const{actions:{reload:c,deleteBill:v}}=de();Re({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async y=>{d?.id&&(y&&await v(d.id),await c(),B())}})};function q(c){x[c?"unshift":"push"](()=>{m=c,l(3,m)})}const j=c=>g(c,"description");function U(c){x[c?"unshift":"push"](()=>{f=c,l(4,f)})}const z=c=>g(c,"source");function le(c){x[c?"unshift":"push"](()=>{_=c,l(5,_)})}const H=c=>g(c,"amount"),T=c=>g(c,"meta-data-transaction-type"),S=c=>g(c,"repeat-type"),C=c=>g(c,"repeat-start-date"),$=c=>g(c,"repeat-until-date");return a.$$set=c=>{"loading"in c&&l(0,t=c.loading),"bill"in c&&l(10,n=c.bill),"drawerId"in c&&l(11,s=c.drawerId)},a.$$.update=()=>{if(a.$$.dirty&5122&&(!n||o!==n?.id)){l(1,d=n?{...d,...n,recurrence:{...i,...n.recurrence},meta_data:{...u,...n.meta_data}}:d);const{recurrence:c}=d;l(2,r=c?he(c):[]),l(12,o=n?.id)}},[t,d,r,m,f,_,g,B,w,I,n,s,o,q,j,U,z,le,H,T,S,C,$]}class mt extends W{constructor(e){super(),X(this,e,gt,dt,Q,{loading:0,bill:10,drawerId:11})}}function Ee(a,e,l){const t=a.slice();return t[6]=e[l],t}function Be(a){let e,l,t=ge(a[0]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Se(Ee(a,t,r));const s=r=>k(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=J()},l(r){for(let o=0;o<n.length;o+=1)n[o].l(r);e=J()},m(r,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(r,o);A(r,e,o),l=!0},p(r,o){if(o&7){t=ge(r[0]);let i;for(i=0;i<t.length;i+=1){const u=Ee(r,t,i);n[i]?(n[i].p(u,o),h(n[i],1)):(n[i]=Se(u),n[i].c(),h(n[i],1),n[i].m(e.parentNode,e))}for(ee(),i=t.length;i<n.length;i+=1)s(i);te()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)h(n[o]);l=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)k(n[o]);l=!1},d(r){r&&b(e),Me(n,r)}}}function Te(a){let e,l;return e=new Ge({props:{type:a[6].meta_data.transaction.type}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.type=t[6].meta_data.transaction.type),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function _t(a){let e=ve(a[6].amount)+"",l;return{c(){l=G(e)},l(t){l=K(t,e)},m(t,n){A(t,l,n)},p(t,n){n&1&&e!==(e=ve(t[6].amount)+"")&&ne(l,e)},d(t){t&&b(l)}}}function Se(a){let e,l,t=a[6].description+"",n,s,r,o,i,u=a[6].source+"",d,m,f,_,g=a[6]?.recurrence?.type+"",B,w,I=a[6]?.recurrence?.start_date+"",q,j,U,z,le,H,T=a[6]?.meta_data?.transaction&&Te(a);function S(){return a[3](a[6])}return z=new Ke({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+a[1],"aria-controls":a[1],$$slots:{default:[_t]},$$scope:{ctx:a}}}),z.$on("click",S),{c(){e=D("div"),l=D("div"),n=G(t),s=F(),r=D("div"),o=D("div"),i=D("div"),d=G(u),m=F(),f=D("div"),_=D("span"),B=G(g),w=G(`
						Bill starting `),q=G(I),j=F(),T&&T.c(),U=F(),P(z.$$.fragment),le=F(),this.h()},l(C){e=E(C,"DIV",{});var $=N(e);l=E($,"DIV",{class:!0});var c=N(l);n=K(c,t),c.forEach(b),s=V($),r=E($,"DIV",{class:!0});var v=N(r);o=E(v,"DIV",{class:!0});var y=N(o);i=E(y,"DIV",{class:!0});var Z=N(i);d=K(Z,u),Z.forEach(b),m=V(y),f=E(y,"DIV",{class:!0});var Y=N(f);_=E(Y,"SPAN",{class:!0});var oe=N(_);B=K(oe,g),oe.forEach(b),w=K(Y,`
						Bill starting `),q=K(Y,I),Y.forEach(b),j=V(y),T&&T.l(y),y.forEach(b),U=V(v),L(z.$$.fragment,v),v.forEach(b),le=V($),$.forEach(b),this.h()},h(){M(l,"class","fw-bold"),M(i,"class","fw-light"),M(_,"class","text-capitalize"),M(f,"class","fw-lighter text-muted small"),M(o,"class","small"),M(r,"class","d-flex justify-content-between")},m(C,$){A(C,e,$),p(e,l),p(l,n),p(e,s),p(e,r),p(r,o),p(o,i),p(i,d),p(o,m),p(o,f),p(f,_),p(_,B),p(f,w),p(f,q),p(o,j),T&&T.m(o,null),p(r,U),O(z,r,null),p(e,le),H=!0},p(C,$){a=C,(!H||$&1)&&t!==(t=a[6].description+"")&&ne(n,t),(!H||$&1)&&u!==(u=a[6].source+"")&&ne(d,u),(!H||$&1)&&g!==(g=a[6]?.recurrence?.type+"")&&ne(B,g),(!H||$&1)&&I!==(I=a[6]?.recurrence?.start_date+"")&&ne(q,I),a[6]?.meta_data?.transaction?T?(T.p(a,$),$&1&&h(T,1)):(T=Te(a),T.c(),h(T,1),T.m(o,null)):T&&(ee(),k(T,1,1,()=>{T=null}),te());const c={};$&2&&(c["data-bs-target"]="#"+a[1]),$&2&&(c["aria-controls"]=a[1]),$&513&&(c.$$scope={dirty:$,ctx:a}),z.$set(c)},i(C){H||(h(T),h(z.$$.fragment,C),H=!0)},o(C){k(T),k(z.$$.fragment,C),H=!1},d(C){C&&b(e),T&&T.d(),R(z)}}}function pt(a){let e,l,t=a[0].length&&Be(a);return{c(){t&&t.c(),e=J()},l(n){t&&t.l(n),e=J()},m(n,s){t&&t.m(n,s),A(n,e,s),l=!0},p(n,[s]){n[0].length?t?(t.p(n,s),s&1&&h(t,1)):(t=Be(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(ee(),k(t,1,1,()=>{t=null}),te())},i(n){l||(h(t),l=!0)},o(n){k(t),l=!1},d(n){n&&b(e),t&&t.d(n)}}}function ht(a,e,l){let{data:t=[]}=e,{drawerId:n=""}=e;const{stores:{targetBill:s,loading:r}}=de(),o=u=>{r.set(!0),setTimeout(()=>{s.set(u),r.set(!1)},800)},i=u=>o(u);return a.$$set=u=>{"data"in u&&l(0,t=u.data),"drawerId"in u&&l(1,n=u.drawerId)},[t,n,o,i]}class vt extends W{constructor(e){super(),X(this,e,ht,pt,Q,{data:0,drawerId:1})}}function bt(a){let e,l;return e=new Ae({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p:fe,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function $t(a){let e,l,t;function n(r){a[8](r)}let s={bill:a[0],drawerId:ae};return a[2]!==void 0&&(s.loading=a[2]),e=new mt({props:s}),x.push(()=>se(e,"loading",n)),{c(){P(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,o){O(e,r,o),t=!0},p(r,o){const i={};o&1&&(i.bill=r[0]),!l&&o&4&&(l=!0,i.loading=r[2],ie(()=>l=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){k(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function wt(a){let e,l,t,n;const s=[$t,bt],r=[];function o(i,u){return i[2]?1:0}return e=o(a),l=r[e]=s[e](a),{c(){l.c(),t=J()},l(i){l.l(i),t=J()},m(i,u){r[e].m(i,u),A(i,t,u),n=!0},p(i,u){let d=e;e=o(i),e===d?r[e].p(i,u):(ee(),k(r[d],1,1,()=>{r[d]=null}),te(),l=r[e],l?l.p(i,u):(l=r[e]=s[e](i),l.c()),h(l,1),l.m(t.parentNode,t))},i(i){n||(h(l),n=!0)},o(i){k(l),n=!1},d(i){i&&b(t),r[e].d(i)}}}function kt(a){let e,l,t,n,s,r="Bills",o,i,u,d,m,f,_,g,B;return e=new qe({props:{title:a[1],id:ae,$$slots:{default:[wt]},$$scope:{ctx:a}}}),f=new vt({props:{drawerId:ae,data:a[3]}}),{c(){P(e.$$.fragment),l=F(),t=D("div"),n=D("div"),s=D("h2"),s.textContent=r,o=F(),i=D("div"),u=D("button"),d=D("i"),m=F(),P(f.$$.fragment),this.h()},l(w){L(e.$$.fragment,w),l=V(w),t=E(w,"DIV",{class:!0});var I=N(t);n=E(I,"DIV",{class:!0});var q=N(n);s=E(q,"H2",{"data-svelte-h":!0}),re(s)!=="svelte-14q1s24"&&(s.textContent=r),o=V(q),i=E(q,"DIV",{});var j=N(i);u=E(j,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var U=N(u);d=E(U,"I",{class:!0}),N(d).forEach(b),U.forEach(b),j.forEach(b),q.forEach(b),m=V(I),L(f.$$.fragment,I),I.forEach(b),this.h()},h(){M(d,"class","bi bi-plus"),M(u,"class","btn btn-sm btn-secondary"),M(u,"data-bs-toggle","offcanvas"),M(u,"data-bs-target","#"+ae),M(u,"aria-controls",ae),M(n,"class","d-flex justify-content-between align-items-center"),M(t,"class","d-flex flex-column gap-3")},m(w,I){O(e,w,I),A(w,l,I),A(w,t,I),p(t,n),p(n,s),p(n,o),p(n,i),p(i,u),p(u,d),p(t,m),O(f,t,null),_=!0,g||(B=ue(u,"click",a[7]),g=!0)},p(w,[I]){const q={};I&2&&(q.title=w[1]),I&2053&&(q.$$scope={dirty:I,ctx:w}),e.$set(q);const j={};I&8&&(j.data=w[3]),f.$set(j)},i(w){_||(h(e.$$.fragment,w),h(f.$$.fragment,w),_=!0)},o(w){k(e.$$.fragment,w),k(f.$$.fragment,w),_=!1},d(w){w&&(b(l),b(t)),R(e,w),R(f),g=!1,B()}}}const ae="bill-form";function It(a,e,l){let t,n,s,r;const{stores:{data:o,targetBill:i,loading:u},actions:{reload:d}}=de();_e(a,o,g=>l(3,r=g)),_e(a,i,g=>l(0,n=g)),_e(a,u,g=>l(2,s=g));const m={description:"",source:"",amount:0};Le(()=>d());const f=()=>{u.set(!0),setTimeout(()=>{i.set(m),u.set(!1)},1500)};function _(g){s=g,u.set(s)}return a.$$.update=()=>{a.$$.dirty&1&&l(1,t=n?.id?"Edit Bill":"Create Bill")},[n,t,s,r,o,i,u,f,_]}class Ct extends W{constructor(e){super(),X(this,e,It,kt,Q,{})}}function yt(a){let e,l;return e=new Ct({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Dt(a){let e,l;return e=new Oe({props:{pageTitle:"Bills",$$slots:{default:[yt]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}class Ot extends W{constructor(e){super(),X(this,e,null,Dt,Q,{})}}export{Ot as component,Lt as universal};
