import{s as X,F as ee,a6 as ie,Y as de,A as J,o as A,w as me,f as w,e as F,t as z,d as N,j as M,k as L,m as H,i as P,n as R,p as v,q as le,K as Te,l as Re,H as Oe,r as ge,v as qe,a7 as Ye}from"../chunks/scheduler.BFgUDm8F.js";import{S as Z,i as x,f as se,c as y,b as B,m as S,t as h,a as b,d as T,g as Q,e as W}from"../chunks/index.C_nnBD4N.js";import{P as je}from"../chunks/PageLayout.BDbRnaxs.js";import{B as oe,c as ze,D as He,F as Ke}from"../chunks/FormSkeleton.DZ_7keFb.js";import{c as _e,D as Fe,f as fe}from"../chunks/DateField.BHbtMblR.js";import{B as Ue,R as Ge,g as pe,A as Je,D as Qe,S as We,a as Xe,b as ue,c as Ze,d as xe}from"../chunks/BillTypeBadge.Bbh4z_6k.js";import{S as Me}from"../chunks/SelectField.GE3cR6Sf.js";import{e as ce}from"../chunks/Header.b0Pgc6OE.js";import{t as et,f as he}from"../chunks/app.state.D003hJMz.js";function tt(l,e){const n=et(l);if(isNaN(e))return _e(l,NaN);const t=n.getDate(),a=_e(l,n.getTime());a.setMonth(n.getMonth()+e+1,0);const s=a.getDate();return t>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),t),n)}const nt=!0,Kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:nt},Symbol.toStringTag,{value:"Module"}));function at(l){let e,n,t;function a(r){l[4](r)}let s={label:"Type",name:"repeat-type",helperText:"",loading:l[1],required:!0,isInvalid:!1,disabled:!1,options:l[3]};return l[0]!==void 0&&(s.value=l[0]),e=new Me({props:s}),ee.push(()=>se(e,"value",a)),e.$on("change",l[2]),{c(){y(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){S(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!n&&o&1&&(n=!0,i.value=r[0],ie(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function lt(l,e,n){let{value:t}=e,{loading:a}=e;const s=de(),r=()=>{s("valueChanged",{value:t})},o=Ue;function i(f){t=f,n(0,t)}return l.$$set=f=>{"value"in f&&n(0,t=f.value),"loading"in f&&n(1,a=f.loading)},[t,a,r,o,i]}class rt extends Z{constructor(e){super(),x(this,e,lt,at,X,{value:0,loading:1})}}function it(l){let e,n,t;function a(r){l[4](r)}let s={label:"Repeat type",name:"repeat-type",helperText:"",loading:l[1],required:!0,isInvalid:!1,disabled:!1,options:l[3]};return l[0]!==void 0&&(s.value=l[0]),e=new Me({props:s}),ee.push(()=>se(e,"value",a)),e.$on("change",l[2]),{c(){y(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){S(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!n&&o&1&&(n=!0,i.value=r[0],ie(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function st(l,e,n){let{value:t}=e,{loading:a}=e;const s=de(),r=()=>{s("valueChanged",{value:t})},o=Ge;function i(f){t=f,n(0,t)}return l.$$set=f=>{"value"in f&&n(0,t=f.value),"loading"in f&&n(1,a=f.loading)},[t,a,r,o,i]}class ot extends Z{constructor(e){super(),x(this,e,st,it,X,{value:0,loading:1})}}function ft(l){let e,n,t;function a(r){l[3](r)}let s={label:"Date",name:"repeat-start-date",placeholder:"",helperText:"",loading:l[1],required:!0,isInvalid:!1};return l[0]!==void 0&&(s.value=l[0]),e=new Fe({props:s}),ee.push(()=>se(e,"value",a)),e.$on("valueChanged",l[2]),{c(){y(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){S(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!n&&o&1&&(n=!0,i.value=r[0],ie(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function ut(l,e,n){let{value:t}=e,{loading:a}=e;const s=de(),r=()=>{s("valueChanged",{value:t})};function o(i){t=i,n(0,t)}return l.$$set=i=>{"value"in i&&n(0,t=i.value),"loading"in i&&n(1,a=i.loading)},[t,a,r,o]}class ct extends Z{constructor(e){super(),x(this,e,ut,ft,X,{value:0,loading:1})}}function dt(l){let e,n,t;function a(r){l[3](r)}let s={label:"End date",name:"repeat-end-date",placeholder:"",helperText:"",loading:l[1],required:!0,isInvalid:!1};return l[0]!==void 0&&(s.value=l[0]),e=new Fe({props:s}),ee.push(()=>se(e,"value",a)),e.$on("valueChanged",l[2]),{c(){y(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){S(e,r,o),t=!0},p(r,[o]){const i={};o&2&&(i.loading=r[1]),!n&&o&1&&(n=!0,i.value=r[0],ie(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function gt(l,e,n){let{value:t}=e,{loading:a}=e;const s=de(),r=()=>{s("valueChanged",{value:t})};function o(i){t=i,n(0,t)}return l.$$set=i=>{"value"in i&&n(0,t=i.value),"loading"in i&&n(1,a=i.loading)},[t,a,r,o]}class mt extends Z{constructor(e){super(),x(this,e,gt,dt,X,{value:0,loading:1})}}function $e(l,e,n){const t=l.slice();return t[1]=e[n],t[3]=n,t}function ve(l){let e,n,t,a=l[0].length+"",s,r,o,i,f,I=ce(l[0]),c=[];for(let u=0;u<I.length;u+=1)c[u]=be($e(l,I,u));return{c(){e=F("div"),n=F("div"),t=z("Dates Preview ("),s=z(a),r=z(" entries)"),o=N(),i=F("div"),f=F("ul");for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){e=M(u,"DIV",{class:!0});var d=L(e);n=M(d,"DIV",{});var g=L(n);t=H(g,"Dates Preview ("),s=H(g,a),r=H(g," entries)"),g.forEach(w),o=P(d),i=M(d,"DIV",{class:!0});var k=L(i);f=M(k,"UL",{class:!0});var C=L(f);for(let O=0;O<c.length;O+=1)c[O].l(C);C.forEach(w),k.forEach(w),d.forEach(w),this.h()},h(){R(f,"class","list-group list-group-flush"),R(i,"class","preview border border-light-subtle svelte-1qbwz3y"),R(e,"class","d-flex flex-column gap-1")},m(u,d){A(u,e,d),v(e,n),v(n,t),v(n,s),v(n,r),v(e,o),v(e,i),v(i,f);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(f,null)},p(u,d){if(d&1&&a!==(a=u[0].length+"")&&le(s,a),d&1){I=ce(u[0]);let g;for(g=0;g<I.length;g+=1){const k=$e(u,I,g);c[g]?c[g].p(k,d):(c[g]=be(k),c[g].c(),c[g].m(f,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=I.length}},d(u){u&&w(e),Te(c,u)}}}function be(l){let e,n=l[3]+1+"",t,a,s=fe(l[1],"EEE - dd MMM yyyy")+"",r,o;return{c(){e=F("li"),t=z(n),a=z(". "),r=z(s),o=N(),this.h()},l(i){e=M(i,"LI",{class:!0});var f=L(e);t=H(f,n),a=H(f,". "),r=H(f,s),o=P(f),f.forEach(w),this.h()},h(){R(e,"class","list-group-item")},m(i,f){A(i,e,f),v(e,t),v(e,a),v(e,r),v(e,o)},p(i,f){f&1&&s!==(s=fe(i[1],"EEE - dd MMM yyyy")+"")&&le(r,s)},d(i){i&&w(e)}}}function _t(l){let e,n=l[0].length>0&&ve(l);return{c(){n&&n.c(),e=J()},l(t){n&&n.l(t),e=J()},m(t,a){n&&n.m(t,a),A(t,e,a)},p(t,[a]){t[0].length>0?n?n.p(t,a):(n=ve(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:me,o:me,d(t){t&&w(e),n&&n.d(t)}}}function pt(l,e,n){let{dates:t}=e;return l.$$set=a=>{"dates"in a&&n(0,t=a.dates)},[t]}class ht extends Z{constructor(e){super(),x(this,e,pt,_t,X,{dates:0})}}function we(l){let e,n,t,a,s,r,o,i,f,I,c,u,d,g,k,C,O,Y,G,te={loading:l[0],value:l[1].amount};n=new Je({props:te}),l[14](n),n.$on("valueChanged",l[15]);let K={loading:l[0],value:l[1].description};a=new Qe({props:K}),l[16](a),a.$on("valueChanged",l[17]);let ne={loading:l[0],value:l[1].source};r=new We({props:ne}),l[18](r),r.$on("valueChanged",l[19]),i=new Xe({props:{loading:l[0],value:l[3].account_id}}),i.$on("valueChanged",l[20]);let D=l[1]?.meta_data?.transaction?.type&&ke(l),$=l[1].recurrence&&Ie(l),E=l[1].id&&Ce(l);return C=new oe({props:{loading:l[0],variant:"secondary",$$slots:{default:[vt]},$$scope:{ctx:l}}}),C.$on("click",l[8]),Y=new oe({props:{loading:l[0],variant:"primary",$$slots:{default:[bt]},$$scope:{ctx:l}}}),Y.$on("click",l[9]),{c(){e=F("div"),y(n.$$.fragment),t=N(),y(a.$$.fragment),s=N(),y(r.$$.fragment),o=N(),y(i.$$.fragment),f=N(),D&&D.c(),I=N(),$&&$.c(),c=N(),u=F("div"),d=F("div"),E&&E.c(),g=N(),k=F("div"),y(C.$$.fragment),O=N(),y(Y.$$.fragment),this.h()},l(p){e=M(p,"DIV",{class:!0});var m=L(e);B(n.$$.fragment,m),t=P(m),B(a.$$.fragment,m),s=P(m),B(r.$$.fragment,m),o=P(m),B(i.$$.fragment,m),f=P(m),D&&D.l(m),I=P(m),$&&$.l(m),c=P(m),u=M(m,"DIV",{class:!0});var q=L(u);d=M(q,"DIV",{});var U=L(d);E&&E.l(U),U.forEach(w),g=P(q),k=M(q,"DIV",{});var _=L(k);B(C.$$.fragment,_),O=P(_),B(Y.$$.fragment,_),_.forEach(w),q.forEach(w),m.forEach(w),this.h()},h(){R(u,"class","d-flex justify-content-between"),R(e,"class","d-flex flex-column gap-3")},m(p,m){A(p,e,m),S(n,e,null),v(e,t),S(a,e,null),v(e,s),S(r,e,null),v(e,o),S(i,e,null),v(e,f),D&&D.m(e,null),v(e,I),$&&$.m(e,null),v(e,c),v(e,u),v(u,d),E&&E.m(d,null),v(u,g),v(u,k),S(C,k,null),v(k,O),S(Y,k,null),G=!0},p(p,m){const q={};m&1&&(q.loading=p[0]),m&2&&(q.value=p[1].amount),n.$set(q);const U={};m&1&&(U.loading=p[0]),m&2&&(U.value=p[1].description),a.$set(U);const _={};m&1&&(_.loading=p[0]),m&2&&(_.value=p[1].source),r.$set(_);const j={};m&1&&(j.loading=p[0]),m&8&&(j.value=p[3].account_id),i.$set(j),p[1]?.meta_data?.transaction?.type?D?(D.p(p,m),m&2&&h(D,1)):(D=ke(p),D.c(),h(D,1),D.m(e,I)):D&&(Q(),b(D,1,1,()=>{D=null}),W()),p[1].recurrence?$?($.p(p,m),m&2&&h($,1)):($=Ie(p),$.c(),h($,1),$.m(e,c)):$&&(Q(),b($,1,1,()=>{$=null}),W()),p[1].id?E?(E.p(p,m),m&2&&h(E,1)):(E=Ce(p),E.c(),h(E,1),E.m(d,null)):E&&(Q(),b(E,1,1,()=>{E=null}),W());const V={};m&1&&(V.loading=p[0]),m&134217728&&(V.$$scope={dirty:m,ctx:p}),C.$set(V);const ae={};m&1&&(ae.loading=p[0]),m&134217728&&(ae.$$scope={dirty:m,ctx:p}),Y.$set(ae)},i(p){G||(h(n.$$.fragment,p),h(a.$$.fragment,p),h(r.$$.fragment,p),h(i.$$.fragment,p),h(D),h($),h(E),h(C.$$.fragment,p),h(Y.$$.fragment,p),G=!0)},o(p){b(n.$$.fragment,p),b(a.$$.fragment,p),b(r.$$.fragment,p),b(i.$$.fragment,p),b(D),b($),b(E),b(C.$$.fragment,p),b(Y.$$.fragment,p),G=!1},d(p){p&&w(e),l[14](null),T(n),l[16](null),T(a),l[18](null),T(r),T(i),D&&D.d(),$&&$.d(),E&&E.d(),T(C),T(Y)}}}function ke(l){let e,n;return e=new rt({props:{loading:l[0],value:l[1].meta_data.transaction.type}}),e.$on("valueChanged",l[21]),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p(t,a){const s={};a&1&&(s.loading=t[0]),a&2&&(s.value=t[1].meta_data.transaction.type),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Ie(l){let e,n="Repeats",t,a,s,r,o,i,f,I;a=new ot({props:{loading:l[0],value:l[1].recurrence.type}}),a.$on("valueChanged",l[22]),r=new ct({props:{loading:l[0],value:l[1].recurrence.start_date}}),r.$on("valueChanged",l[23]);let c=l[1].recurrence.until&&De(l);return f=new ht({props:{dates:l[2]}}),{c(){e=F("h5"),e.textContent=n,t=N(),y(a.$$.fragment),s=N(),y(r.$$.fragment),o=N(),c&&c.c(),i=N(),y(f.$$.fragment)},l(u){e=M(u,"H5",{"data-svelte-h":!0}),Re(e)!=="svelte-13f0n3i"&&(e.textContent=n),t=P(u),B(a.$$.fragment,u),s=P(u),B(r.$$.fragment,u),o=P(u),c&&c.l(u),i=P(u),B(f.$$.fragment,u)},m(u,d){A(u,e,d),A(u,t,d),S(a,u,d),A(u,s,d),S(r,u,d),A(u,o,d),c&&c.m(u,d),A(u,i,d),S(f,u,d),I=!0},p(u,d){const g={};d&1&&(g.loading=u[0]),d&2&&(g.value=u[1].recurrence.type),a.$set(g);const k={};d&1&&(k.loading=u[0]),d&2&&(k.value=u[1].recurrence.start_date),r.$set(k),u[1].recurrence.until?c?(c.p(u,d),d&2&&h(c,1)):(c=De(u),c.c(),h(c,1),c.m(i.parentNode,i)):c&&(Q(),b(c,1,1,()=>{c=null}),W());const C={};d&4&&(C.dates=u[2]),f.$set(C)},i(u){I||(h(a.$$.fragment,u),h(r.$$.fragment,u),h(c),h(f.$$.fragment,u),I=!0)},o(u){b(a.$$.fragment,u),b(r.$$.fragment,u),b(c),b(f.$$.fragment,u),I=!1},d(u){u&&(w(e),w(t),w(s),w(o),w(i)),T(a,u),T(r,u),c&&c.d(u),T(f,u)}}}function De(l){let e,n;return e=new mt({props:{loading:l[0],value:l[1].recurrence.until}}),e.$on("valueChanged",l[24]),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p(t,a){const s={};a&1&&(s.loading=t[0]),a&2&&(s.value=t[1].recurrence.until),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Ce(l){let e,n;return e=new oe({props:{loading:l[0],variant:"danger",$$slots:{default:[$t]},$$scope:{ctx:l}}}),e.$on("click",l[10]),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p(t,a){const s={};a&1&&(s.loading=t[0]),a&134217728&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function $t(l){let e;return{c(){e=z("Delete")},l(n){e=H(n,"Delete")},m(n,t){A(n,e,t)},d(n){n&&w(e)}}}function vt(l){let e;return{c(){e=z("Cancel")},l(n){e=H(n,"Cancel")},m(n,t){A(n,e,t)},d(n){n&&w(e)}}}function bt(l){let e;return{c(){e=z("Save")},l(n){e=H(n,"Save")},m(n,t){A(n,e,t)},d(n){n&&w(e)}}}function wt(l){let e,n,t=l[1]&&we(l);return{c(){t&&t.c(),e=J()},l(a){t&&t.l(a),e=J()},m(a,s){t&&t.m(a,s),A(a,e,s),n=!0},p(a,[s]){a[1]?t?(t.p(a,s),s&2&&h(t,1)):(t=we(a),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),W())},i(a){n||(h(t),n=!0)},o(a){b(t),n=!1},d(a){a&&w(e),t&&t.d(a)}}}function kt(l,e,n){let{loading:t=!1}=e,{bill:a}=e,{drawerId:s}=e,r=[],o=0,i={type:"monthly",start_date:fe(new Date,"yyyy-MM-dd"),until:fe(tt(new Date,12),"yyyy-MM-dd")},f={paid:"scheduled",type:"unknown",from_bill:!0,account_id:0},I={transaction:f},c={source:"",amount:10,description:"",recurrence:i,meta_data:I},u,d,g;const k=(_,j)=>{const{value:V}=_.detail;if(c&&c.recurrence){switch(j){case"description":n(1,c.description=V,c);break;case"source":n(1,c.source=V,c);break;case"amount":n(1,c.amount=V,c);break;case"repeat-type":n(1,c.recurrence.type=V,c);break;case"repeat-start-date":n(1,c.recurrence.start_date=V,c);break;case"repeat-until-date":n(1,c.recurrence.until=V,c);break;case"meta-data-transaction-type":c?.meta_data?.transaction?.type&&n(1,c.meta_data.transaction.type=V,c);break;case"meta-data-transaction-account-id":n(3,f.account_id=V,f);break}n(2,r=pe(c.recurrence))}},C=()=>{const _=`[data-bs-target="#${s}"]`,j=document.querySelector(_);j&&(j.click(),n(11,a=void 0),n(13,o=void 0),n(1,c={source:"",amount:10,description:"",recurrence:i}))},O=async()=>{const _=await u.validateFieldIsInvalid(),j=await d.validateFieldIsInvalid(),V=await g.validateFieldIsInvalid();if(_||j||V)return;const{actions:{reload:Ve,createBill:Ne,updateBill:Pe}}=ue();if(f?.account_id){const{meta_data:Le}=c,{transaction:Ae}=Le;Ae.account_id=f.account_id}c.id?await Pe(c.id,c):await Ne(c),await Ve(),C()},Y=async()=>{if(!c?.id)return;const{actions:{reload:_,deleteBill:j}}=ue();ze({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async V=>{c?.id&&(V&&await j(c.id),await _(),C())}})};function G(_){ee[_?"unshift":"push"](()=>{g=_,n(6,g)})}const te=_=>k(_,"amount");function K(_){ee[_?"unshift":"push"](()=>{u=_,n(4,u)})}const ne=_=>k(_,"description");function D(_){ee[_?"unshift":"push"](()=>{d=_,n(5,d)})}const $=_=>k(_,"source"),E=_=>k(_,"meta-data-transaction-account-id"),p=_=>k(_,"meta-data-transaction-type"),m=_=>k(_,"repeat-type"),q=_=>k(_,"repeat-start-date"),U=_=>k(_,"repeat-until-date");return l.$$set=_=>{"loading"in _&&n(0,t=_.loading),"bill"in _&&n(11,a=_.bill),"drawerId"in _&&n(12,s=_.drawerId)},l.$$.update=()=>{if(l.$$.dirty&10242&&(!a||o!==a?.id)){n(1,c=a?{...c,...a,recurrence:{...i,...a.recurrence},meta_data:{...I,...a.meta_data}}:c);const{recurrence:_}=c;n(2,r=_?pe(_):[]),n(3,f.account_id=a?.meta_data?.transaction?.account_id,f),n(13,o=a?.id)}},[t,c,r,f,u,d,g,k,C,O,Y,a,s,o,G,te,K,ne,D,$,E,p,m,q,U]}class It extends Z{constructor(e){super(),x(this,e,kt,wt,X,{loading:0,bill:11,drawerId:12})}}function Ee(l,e,n){const t=l.slice();return t[6]=e[n],t}function ye(l){let e,n,t=ce(l[0]),a=[];for(let r=0;r<t.length;r+=1)a[r]=Se(Ee(l,t,r));const s=r=>b(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=J()},l(r){for(let o=0;o<a.length;o+=1)a[o].l(r);e=J()},m(r,o){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,o);A(r,e,o),n=!0},p(r,o){if(o&7){t=ce(r[0]);let i;for(i=0;i<t.length;i+=1){const f=Ee(r,t,i);a[i]?(a[i].p(f,o),h(a[i],1)):(a[i]=Se(f),a[i].c(),h(a[i],1),a[i].m(e.parentNode,e))}for(Q(),i=t.length;i<a.length;i+=1)s(i);W()}},i(r){if(!n){for(let o=0;o<t.length;o+=1)h(a[o]);n=!0}},o(r){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)b(a[o]);n=!1},d(r){r&&w(e),Te(a,r)}}}function Be(l){let e,n;return e=new Ze({props:{type:l[6].meta_data.transaction.type}}),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p(t,a){const s={};a&1&&(s.type=t[6].meta_data.transaction.type),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Dt(l){let e=he(l[6].amount)+"",n;return{c(){n=z(e)},l(t){n=H(t,e)},m(t,a){A(t,n,a)},p(t,a){a&1&&e!==(e=he(t[6].amount)+"")&&le(n,e)},d(t){t&&w(n)}}}function Se(l){let e,n,t=l[6].description+"",a,s,r,o,i,f=l[6].source+"",I,c,u,d,g=l[6]?.recurrence?.type+"",k,C,O=l[6]?.recurrence?.start_date+"",Y,G,te,K,ne,D,$=l[6]?.meta_data?.transaction&&Be(l);function E(){return l[3](l[6])}return K=new oe({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+l[1],"aria-controls":l[1],$$slots:{default:[Dt]},$$scope:{ctx:l}}}),K.$on("click",E),{c(){e=F("div"),n=F("div"),a=z(t),s=N(),r=F("div"),o=F("div"),i=F("div"),I=z(f),c=N(),u=F("div"),d=F("span"),k=z(g),C=z(`
						Bill starting `),Y=z(O),G=N(),$&&$.c(),te=N(),y(K.$$.fragment),ne=N(),this.h()},l(p){e=M(p,"DIV",{});var m=L(e);n=M(m,"DIV",{class:!0});var q=L(n);a=H(q,t),q.forEach(w),s=P(m),r=M(m,"DIV",{class:!0});var U=L(r);o=M(U,"DIV",{class:!0});var _=L(o);i=M(_,"DIV",{class:!0});var j=L(i);I=H(j,f),j.forEach(w),c=P(_),u=M(_,"DIV",{class:!0});var V=L(u);d=M(V,"SPAN",{class:!0});var ae=L(d);k=H(ae,g),ae.forEach(w),C=H(V,`
						Bill starting `),Y=H(V,O),V.forEach(w),G=P(_),$&&$.l(_),_.forEach(w),te=P(U),B(K.$$.fragment,U),U.forEach(w),ne=P(m),m.forEach(w),this.h()},h(){R(n,"class","fw-bold"),R(i,"class","fw-light"),R(d,"class","text-capitalize"),R(u,"class","fw-lighter text-muted small"),R(o,"class","small"),R(r,"class","d-flex justify-content-between")},m(p,m){A(p,e,m),v(e,n),v(n,a),v(e,s),v(e,r),v(r,o),v(o,i),v(i,I),v(o,c),v(o,u),v(u,d),v(d,k),v(u,C),v(u,Y),v(o,G),$&&$.m(o,null),v(r,te),S(K,r,null),v(e,ne),D=!0},p(p,m){l=p,(!D||m&1)&&t!==(t=l[6].description+"")&&le(a,t),(!D||m&1)&&f!==(f=l[6].source+"")&&le(I,f),(!D||m&1)&&g!==(g=l[6]?.recurrence?.type+"")&&le(k,g),(!D||m&1)&&O!==(O=l[6]?.recurrence?.start_date+"")&&le(Y,O),l[6]?.meta_data?.transaction?$?($.p(l,m),m&1&&h($,1)):($=Be(l),$.c(),h($,1),$.m(o,null)):$&&(Q(),b($,1,1,()=>{$=null}),W());const q={};m&2&&(q["data-bs-target"]="#"+l[1]),m&2&&(q["aria-controls"]=l[1]),m&513&&(q.$$scope={dirty:m,ctx:l}),K.$set(q)},i(p){D||(h($),h(K.$$.fragment,p),D=!0)},o(p){b($),b(K.$$.fragment,p),D=!1},d(p){p&&w(e),$&&$.d(),T(K)}}}function Ct(l){let e,n,t=l[0].length&&ye(l);return{c(){t&&t.c(),e=J()},l(a){t&&t.l(a),e=J()},m(a,s){t&&t.m(a,s),A(a,e,s),n=!0},p(a,[s]){a[0].length?t?(t.p(a,s),s&1&&h(t,1)):(t=ye(a),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),W())},i(a){n||(h(t),n=!0)},o(a){b(t),n=!1},d(a){a&&w(e),t&&t.d(a)}}}function Et(l,e,n){let{data:t=[]}=e,{drawerId:a=""}=e;const{stores:{targetBill:s,loading:r}}=ue(),o=f=>{r.set(!0),setTimeout(()=>{s.set(f),r.set(!1)},800)},i=f=>o(f);return l.$$set=f=>{"data"in f&&n(0,t=f.data),"drawerId"in f&&n(1,a=f.drawerId)},[t,a,o,i]}class yt extends Z{constructor(e){super(),x(this,e,Et,Ct,X,{data:0,drawerId:1})}}function Bt(l){let e,n;return e=new Ke({}),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p:me,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function St(l){let e,n,t;function a(r){l[8](r)}let s={bill:l[0],drawerId:re};return l[2]!==void 0&&(s.loading=l[2]),e=new It({props:s}),ee.push(()=>se(e,"loading",a)),{c(){y(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){S(e,r,o),t=!0},p(r,o){const i={};o&1&&(i.bill=r[0]),!n&&o&4&&(n=!0,i.loading=r[2],ie(()=>n=!1)),e.$set(i)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function Tt(l){let e,n,t,a;const s=[St,Bt],r=[];function o(i,f){return i[2]?1:0}return e=o(l),n=r[e]=s[e](l),{c(){n.c(),t=J()},l(i){n.l(i),t=J()},m(i,f){r[e].m(i,f),A(i,t,f),a=!0},p(i,f){let I=e;e=o(i),e===I?r[e].p(i,f):(Q(),b(r[I],1,1,()=>{r[I]=null}),W(),n=r[e],n?n.p(i,f):(n=r[e]=s[e](i),n.c()),h(n,1),n.m(t.parentNode,t))},i(i){a||(h(n),a=!0)},o(i){b(n),a=!1},d(i){i&&w(t),r[e].d(i)}}}function Ft(l){let e,n,t,a,s,r,o,i,f,I,c,u;return e=new He({props:{title:l[1],id:re,$$slots:{default:[Tt]},$$scope:{ctx:l}}}),f=new yt({props:{drawerId:re,data:l[3]}}),{c(){y(e.$$.fragment),n=N(),t=F("div"),a=F("div"),s=F("div"),r=F("button"),o=F("i"),i=N(),y(f.$$.fragment),this.h()},l(d){B(e.$$.fragment,d),n=P(d),t=M(d,"DIV",{class:!0});var g=L(t);a=M(g,"DIV",{class:!0});var k=L(a);s=M(k,"DIV",{});var C=L(s);r=M(C,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var O=L(r);o=M(O,"I",{class:!0}),L(o).forEach(w),O.forEach(w),C.forEach(w),k.forEach(w),i=P(g),B(f.$$.fragment,g),g.forEach(w),this.h()},h(){R(o,"class","bi bi-plus"),R(r,"class","btn btn-sm btn-secondary"),R(r,"data-bs-toggle","offcanvas"),R(r,"data-bs-target","#"+re),R(r,"aria-controls",re),R(a,"class","d-flex justify-content-end align-items-center"),R(t,"class","d-flex flex-column gap-3")},m(d,g){S(e,d,g),A(d,n,g),A(d,t,g),v(t,a),v(a,s),v(s,r),v(r,o),v(t,i),S(f,t,null),I=!0,c||(u=Oe(r,"click",l[7]),c=!0)},p(d,[g]){const k={};g&2&&(k.title=d[1]),g&2053&&(k.$$scope={dirty:g,ctx:d}),e.$set(k);const C={};g&8&&(C.data=d[3]),f.$set(C)},i(d){I||(h(e.$$.fragment,d),h(f.$$.fragment,d),I=!0)},o(d){b(e.$$.fragment,d),b(f.$$.fragment,d),I=!1},d(d){d&&(w(n),w(t)),T(e,d),T(f),c=!1,u()}}}const re="bill-form";function Mt(l,e,n){let t,a,s,r;const{stores:{data:o,targetBill:i,loading:f},actions:{reload:I}}=ue();ge(l,o,g=>n(3,r=g)),ge(l,i,g=>n(0,a=g)),ge(l,f,g=>n(2,s=g));const c={description:"",source:"",amount:0},u=()=>{f.set(!0),setTimeout(()=>{i.set(c),f.set(!1)},1500)};qe(I),Ye(xe);function d(g){s=g,f.set(s)}return l.$$.update=()=>{l.$$.dirty&1&&n(1,t=a?.id?"Edit Bill":"Create Bill")},[a,t,s,r,o,i,f,u,d]}class Vt extends Z{constructor(e){super(),x(this,e,Mt,Ft,X,{})}}function Nt(l){let e,n;return e=new Vt({}),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Pt(l){let e,n;return e=new je({props:{pageTitle:"Bills",$$slots:{default:[Nt]},$$scope:{ctx:l}}}),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){S(e,t,a),n=!0},p(t,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}class Ut extends Z{constructor(e){super(),x(this,e,null,Pt,X,{})}}export{Ut as component,Kt as universal};
