import{s as W,F as ie,a7 as se,M as _e,z as G,n as R,v as ce,d as v,e as B,t as H,b as N,i as T,j as M,l as K,f as F,m as I,o as p,p as te,L as Pe,k as ne,H as re,x as Ae,q as pe,r as Re}from"../chunks/scheduler.DhhAuCu-.js";import{S as X,i as Z,f as oe,c as V,b as O,m as P,t as h,a as k,d as L,g as x,e as ee}from"../chunks/index.u5q9Pbhc.js";import{P as Ue}from"../chunks/PageLayout.Cm1Q0z2H.js";import{c as Ye,D as ze,F as He}from"../chunks/FormSkeleton.BsYJ32fv.js";import{a as ke,B as Ke,R as Ge,f as de,b as we,g as ge}from"../chunks/bills.state.CL2U8rjS.js";import{D as Le,a as Je,S as Qe,A as We,B as Xe}from"../chunks/BillTypeBadge.eigXzJgE.js";import{S as qe}from"../chunks/SelectField.Bx6iKZRJ.js";import{e as me}from"../chunks/Header.CQ7buZto.js";import{t as Ze,f as Ce}from"../chunks/app.state.CWlOyVV8.js";function xe(r,e){const l=Ze(r);if(isNaN(e))return ke(r,NaN);const t=l.getDate(),a=ke(r,l.getTime());a.setMonth(l.getMonth()+e+1,0);const s=a.getDate();return t>=s?a:(l.setFullYear(a.getFullYear(),a.getMonth(),t),l)}const et=!0,jt=Object.freeze(Object.defineProperty({__proto__:null,prerender:et},Symbol.toStringTag,{value:"Module"}));function tt(r){let e,l,t;function a(n){r[4](n)}let s={label:"Type",name:"repeat-type",helperText:"",loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(s.value=r[0]),e=new qe({props:s}),ie.push(()=>oe(e,"value",a)),e.$on("change",r[2]),{c(){V(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){P(e,n,o),t=!0},p(n,[o]){const i={};o&2&&(i.loading=n[1]),!l&&o&1&&(l=!0,i.value=n[0],se(()=>l=!1)),e.$set(i)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function lt(r,e,l){let{value:t}=e,{loading:a}=e;const s=_e(),n=()=>{s("valueChanged",{value:t})},o=Ke;function i(f){t=f,l(0,t)}return r.$$set=f=>{"value"in f&&l(0,t=f.value),"loading"in f&&l(1,a=f.loading)},[t,a,n,o,i]}class at extends X{constructor(e){super(),Z(this,e,lt,tt,W,{value:0,loading:1})}}function nt(r){let e,l,t;function a(n){r[4](n)}let s={label:"Repeat type",name:"repeat-type",helperText:"",loading:r[1],required:!0,isInvalid:!1,disabled:!1,options:r[3]};return r[0]!==void 0&&(s.value=r[0]),e=new qe({props:s}),ie.push(()=>oe(e,"value",a)),e.$on("change",r[2]),{c(){V(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){P(e,n,o),t=!0},p(n,[o]){const i={};o&2&&(i.loading=n[1]),!l&&o&1&&(l=!0,i.value=n[0],se(()=>l=!1)),e.$set(i)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function rt(r,e,l){let{value:t}=e,{loading:a}=e;const s=_e(),n=()=>{s("valueChanged",{value:t})},o=Ge;function i(f){t=f,l(0,t)}return r.$$set=f=>{"value"in f&&l(0,t=f.value),"loading"in f&&l(1,a=f.loading)},[t,a,n,o,i]}class it extends X{constructor(e){super(),Z(this,e,rt,nt,W,{value:0,loading:1})}}function st(r){let e,l,t;function a(n){r[3](n)}let s={label:"Date",name:"repeat-start-date",placeholder:"",helperText:"",loading:r[1],required:!0,isInvalid:!1};return r[0]!==void 0&&(s.value=r[0]),e=new Le({props:s}),ie.push(()=>oe(e,"value",a)),e.$on("valueChanged",r[2]),{c(){V(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){P(e,n,o),t=!0},p(n,[o]){const i={};o&2&&(i.loading=n[1]),!l&&o&1&&(l=!0,i.value=n[0],se(()=>l=!1)),e.$set(i)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function ot(r,e,l){let{value:t}=e,{loading:a}=e;const s=_e(),n=()=>{s("valueChanged",{value:t})};function o(i){t=i,l(0,t)}return r.$$set=i=>{"value"in i&&l(0,t=i.value),"loading"in i&&l(1,a=i.loading)},[t,a,n,o]}class ft extends X{constructor(e){super(),Z(this,e,ot,st,W,{value:0,loading:1})}}function ut(r){let e,l,t;function a(n){r[3](n)}let s={label:"Until",name:"repeat-end-date",placeholder:"",helperText:"",loading:r[1],required:!0,isInvalid:!1};return r[0]!==void 0&&(s.value=r[0]),e=new Le({props:s}),ie.push(()=>oe(e,"value",a)),e.$on("valueChanged",r[2]),{c(){V(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){P(e,n,o),t=!0},p(n,[o]){const i={};o&2&&(i.loading=n[1]),!l&&o&1&&(l=!0,i.value=n[0],se(()=>l=!1)),e.$set(i)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function ct(r,e,l){let{value:t}=e,{loading:a}=e;const s=_e(),n=()=>{s("valueChanged",{value:t})};function o(i){t=i,l(0,t)}return r.$$set=i=>{"value"in i&&l(0,t=i.value),"loading"in i&&l(1,a=i.loading)},[t,a,n,o]}class dt extends X{constructor(e){super(),Z(this,e,ct,ut,W,{value:0,loading:1})}}function ye(r,e,l){const t=r.slice();return t[1]=e[l],t[3]=l,t}function De(r){let e,l,t,a=r[0].length+"",s,n,o,i,f,c=me(r[0]),d=[];for(let u=0;u<c.length;u+=1)d[u]=Ee(ye(r,c,u));return{c(){e=B("div"),l=B("div"),t=H("Dates Preview ("),s=H(a),n=H(" entries)"),o=N(),i=B("div"),f=B("ul");for(let u=0;u<d.length;u+=1)d[u].c();this.h()},l(u){e=T(u,"DIV",{class:!0});var _=M(e);l=T(_,"DIV",{});var m=M(l);t=K(m,"Dates Preview ("),s=K(m,a),n=K(m," entries)"),m.forEach(v),o=F(_),i=T(_,"DIV",{class:!0});var S=M(i);f=T(S,"UL",{class:!0});var $=M(f);for(let w=0;w<d.length;w+=1)d[w].l($);$.forEach(v),S.forEach(v),_.forEach(v),this.h()},h(){I(f,"class","list-group list-group-flush"),I(i,"class","preview border border-light-subtle svelte-1qbwz3y"),I(e,"class","d-flex flex-column gap-1")},m(u,_){R(u,e,_),p(e,l),p(l,t),p(l,s),p(l,n),p(e,o),p(e,i),p(i,f);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(f,null)},p(u,_){if(_&1&&a!==(a=u[0].length+"")&&te(s,a),_&1){c=me(u[0]);let m;for(m=0;m<c.length;m+=1){const S=ye(u,c,m);d[m]?d[m].p(S,_):(d[m]=Ee(S),d[m].c(),d[m].m(f,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}},d(u){u&&v(e),Pe(d,u)}}}function Ee(r){let e,l=r[3]+1+"",t,a,s=de(r[1],"EEE - dd MMM yyyy")+"",n,o;return{c(){e=B("li"),t=H(l),a=H(". "),n=H(s),o=N(),this.h()},l(i){e=T(i,"LI",{class:!0});var f=M(e);t=K(f,l),a=K(f,". "),n=K(f,s),o=F(f),f.forEach(v),this.h()},h(){I(e,"class","list-group-item")},m(i,f){R(i,e,f),p(e,t),p(e,a),p(e,n),p(e,o)},p(i,f){f&1&&s!==(s=de(i[1],"EEE - dd MMM yyyy")+"")&&te(n,s)},d(i){i&&v(e)}}}function gt(r){let e,l=r[0].length>0&&De(r);return{c(){l&&l.c(),e=G()},l(t){l&&l.l(t),e=G()},m(t,a){l&&l.m(t,a),R(t,e,a)},p(t,[a]){t[0].length>0?l?l.p(t,a):(l=De(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:ce,o:ce,d(t){t&&v(e),l&&l.d(t)}}}function mt(r,e,l){let{dates:t}=e;return r.$$set=a=>{"dates"in a&&l(0,t=a.dates)},[t]}class _t extends X{constructor(e){super(),Z(this,e,mt,gt,W,{dates:0})}}function Ie(r){let e,l,t,a,s,n,o,i,f,c,d,u,_,m,S="Cancel",$,w,q="Save",U,Y,j;l=new Je({props:{loading:r[0],value:r[1].description}}),l.$on("valueChanged",r[10]),a=new Qe({props:{loading:r[0],value:r[1].source}}),a.$on("valueChanged",r[11]),n=new We({props:{loading:r[0],value:r[1].amount}}),n.$on("valueChanged",r[12]);let g=r[1]?.meta_data?.transaction?.type&&Be(r),C=r[1].recurrence&&Te(r),y=r[1].id&&Me(r);return{c(){e=B("div"),V(l.$$.fragment),t=N(),V(a.$$.fragment),s=N(),V(n.$$.fragment),o=N(),g&&g.c(),i=N(),C&&C.c(),f=N(),c=B("div"),d=B("div"),y&&y.c(),u=N(),_=B("div"),m=B("button"),m.textContent=S,$=N(),w=B("button"),w.textContent=q,this.h()},l(D){e=T(D,"DIV",{class:!0});var b=M(e);O(l.$$.fragment,b),t=F(b),O(a.$$.fragment,b),s=F(b),O(n.$$.fragment,b),o=F(b),g&&g.l(b),i=F(b),C&&C.l(b),f=F(b),c=T(b,"DIV",{class:!0});var z=M(c);d=T(z,"DIV",{});var J=M(d);y&&y.l(J),J.forEach(v),u=F(z),_=T(z,"DIV",{});var E=M(_);m=T(E,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(m)!=="svelte-1ujapj6"&&(m.textContent=S),$=F(E),w=T(E,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(w)!=="svelte-1av7h0z"&&(w.textContent=q),E.forEach(v),z.forEach(v),b.forEach(v),this.h()},h(){I(m,"class","btn btn-sm btn-secondary"),I(w,"class","btn btn-sm btn-primary"),I(c,"class","d-flex justify-content-between"),I(e,"class","d-flex flex-column gap-3")},m(D,b){R(D,e,b),P(l,e,null),p(e,t),P(a,e,null),p(e,s),P(n,e,null),p(e,o),g&&g.m(e,null),p(e,i),C&&C.m(e,null),p(e,f),p(e,c),p(c,d),y&&y.m(d,null),p(c,u),p(c,_),p(_,m),p(_,$),p(_,w),U=!0,Y||(j=[re(m,"click",r[4]),re(w,"click",r[5])],Y=!0)},p(D,b){const z={};b&1&&(z.loading=D[0]),b&2&&(z.value=D[1].description),l.$set(z);const J={};b&1&&(J.loading=D[0]),b&2&&(J.value=D[1].source),a.$set(J);const E={};b&1&&(E.loading=D[0]),b&2&&(E.value=D[1].amount),n.$set(E),D[1]?.meta_data?.transaction?.type?g?(g.p(D,b),b&2&&h(g,1)):(g=Be(D),g.c(),h(g,1),g.m(e,i)):g&&(x(),k(g,1,1,()=>{g=null}),ee()),D[1].recurrence?C?(C.p(D,b),b&2&&h(C,1)):(C=Te(D),C.c(),h(C,1),C.m(e,f)):C&&(x(),k(C,1,1,()=>{C=null}),ee()),D[1].id?y?y.p(D,b):(y=Me(D),y.c(),y.m(d,null)):y&&(y.d(1),y=null)},i(D){U||(h(l.$$.fragment,D),h(a.$$.fragment,D),h(n.$$.fragment,D),h(g),h(C),U=!0)},o(D){k(l.$$.fragment,D),k(a.$$.fragment,D),k(n.$$.fragment,D),k(g),k(C),U=!1},d(D){D&&v(e),L(l),L(a),L(n),g&&g.d(),C&&C.d(),y&&y.d(),Y=!1,Ae(j)}}}function Be(r){let e,l;return e=new at({props:{loading:r[0],value:r[1].meta_data.transaction.type}}),e.$on("valueChanged",r[13]),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,a){P(e,t,a),l=!0},p(t,a){const s={};a&1&&(s.loading=t[0]),a&2&&(s.value=t[1].meta_data.transaction.type),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Te(r){let e,l="Repeats",t,a,s,n,o,i,f,c;a=new it({props:{loading:r[0],value:r[1].recurrence.type}}),a.$on("valueChanged",r[14]),n=new ft({props:{loading:r[0],value:r[1].recurrence.start_date}}),n.$on("valueChanged",r[15]);let d=r[1].recurrence.until&&Se(r);return f=new _t({props:{dates:r[2]}}),{c(){e=B("h5"),e.textContent=l,t=N(),V(a.$$.fragment),s=N(),V(n.$$.fragment),o=N(),d&&d.c(),i=N(),V(f.$$.fragment)},l(u){e=T(u,"H5",{"data-svelte-h":!0}),ne(e)!=="svelte-13f0n3i"&&(e.textContent=l),t=F(u),O(a.$$.fragment,u),s=F(u),O(n.$$.fragment,u),o=F(u),d&&d.l(u),i=F(u),O(f.$$.fragment,u)},m(u,_){R(u,e,_),R(u,t,_),P(a,u,_),R(u,s,_),P(n,u,_),R(u,o,_),d&&d.m(u,_),R(u,i,_),P(f,u,_),c=!0},p(u,_){const m={};_&1&&(m.loading=u[0]),_&2&&(m.value=u[1].recurrence.type),a.$set(m);const S={};_&1&&(S.loading=u[0]),_&2&&(S.value=u[1].recurrence.start_date),n.$set(S),u[1].recurrence.until?d?(d.p(u,_),_&2&&h(d,1)):(d=Se(u),d.c(),h(d,1),d.m(i.parentNode,i)):d&&(x(),k(d,1,1,()=>{d=null}),ee());const $={};_&4&&($.dates=u[2]),f.$set($)},i(u){c||(h(a.$$.fragment,u),h(n.$$.fragment,u),h(d),h(f.$$.fragment,u),c=!0)},o(u){k(a.$$.fragment,u),k(n.$$.fragment,u),k(d),k(f.$$.fragment,u),c=!1},d(u){u&&(v(e),v(t),v(s),v(o),v(i)),L(a,u),L(n,u),d&&d.d(u),L(f,u)}}}function Se(r){let e,l;return e=new dt({props:{loading:r[0],value:r[1].recurrence.until}}),e.$on("valueChanged",r[16]),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,a){P(e,t,a),l=!0},p(t,a){const s={};a&1&&(s.loading=t[0]),a&2&&(s.value=t[1].recurrence.until),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Me(r){let e,l="Delete",t,a;return{c(){e=B("button"),e.textContent=l,this.h()},l(s){e=T(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1a2qbe2"&&(e.textContent=l),this.h()},h(){I(e,"class","btn btn-sm btn-danger")},m(s,n){R(s,e,n),t||(a=re(e,"click",r[6]),t=!0)},p:ce,d(s){s&&v(e),t=!1,a()}}}function pt(r){let e,l,t=r[1]&&Ie(r);return{c(){t&&t.c(),e=G()},l(a){t&&t.l(a),e=G()},m(a,s){t&&t.m(a,s),R(a,e,s),l=!0},p(a,[s]){a[1]?t?(t.p(a,s),s&2&&h(t,1)):(t=Ie(a),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(x(),k(t,1,1,()=>{t=null}),ee())},i(a){l||(h(t),l=!0)},o(a){k(t),l=!1},d(a){a&&v(e),t&&t.d(a)}}}function ht(r,e,l){let{loading:t=!1}=e,{bill:a}=e,{drawerId:s}=e,n=[],o=0,i={type:"monthly",start_date:de(new Date,"yyyy-MM-dd"),until:de(xe(new Date,12),"yyyy-MM-dd")},f={transaction:{paid:"scheduled",type:"fixed",from_bill:!0}},c={source:"",amount:10,description:"",recurrence:i,meta_data:f};const d=(g,C)=>{const{value:y}=g.detail;if(c&&c.recurrence){switch(C){case"description":l(1,c.description=y,c);break;case"source":l(1,c.source=y,c);break;case"amount":l(1,c.amount=y,c);break;case"repeat-type":l(1,c.recurrence.type=y,c);break;case"repeat-start-date":l(1,c.recurrence.start_date=y,c);break;case"repeat-until-date":l(1,c.recurrence.until=y,c);break;case"meta-data-transaction-type":c?.meta_data?.transaction?.type&&l(1,c.meta_data.transaction.type=y,c);break}l(2,n=we(c.recurrence))}},u=()=>{const g=`[data-bs-target="#${s}"]`,C=document.querySelector(g);C&&(C.click(),l(7,a=void 0),l(9,o=void 0),l(1,c={source:"",amount:10,description:"",recurrence:i}))},_=async()=>{const{actions:{reload:g,createBill:C,updateBill:y}}=ge();c.id?await y(c.id,c):await C(c),await g(),u()},m=async()=>{if(!c?.id)return;const{actions:{reload:g,deleteBill:C}}=ge();Ye({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async y=>{c?.id&&(y&&await C(c.id),await g(),u())}})},S=g=>d(g,"description"),$=g=>d(g,"source"),w=g=>d(g,"amount"),q=g=>d(g,"meta-data-transaction-type"),U=g=>d(g,"repeat-type"),Y=g=>d(g,"repeat-start-date"),j=g=>d(g,"repeat-until-date");return r.$$set=g=>{"loading"in g&&l(0,t=g.loading),"bill"in g&&l(7,a=g.bill),"drawerId"in g&&l(8,s=g.drawerId)},r.$$.update=()=>{if(r.$$.dirty&642&&(!a||o!==a?.id)){l(1,c=a?{...c,...a,recurrence:{...i,...a.recurrence},meta_data:{...f,...a.meta_data}}:c);const{recurrence:g}=c;l(2,n=g?we(g):[]),l(9,o=a?.id)}},[t,c,n,d,u,_,m,a,s,o,S,$,w,q,U,Y,j]}class vt extends X{constructor(e){super(),Z(this,e,ht,pt,W,{loading:0,bill:7,drawerId:8})}}function Ne(r,e,l){const t=r.slice();return t[6]=e[l],t}function Fe(r){let e,l,t=me(r[0]),a=[];for(let n=0;n<t.length;n+=1)a[n]=Oe(Ne(r,t,n));const s=n=>k(a[n],1,1,()=>{a[n]=null});return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=G()},l(n){for(let o=0;o<a.length;o+=1)a[o].l(n);e=G()},m(n,o){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(n,o);R(n,e,o),l=!0},p(n,o){if(o&7){t=me(n[0]);let i;for(i=0;i<t.length;i+=1){const f=Ne(n,t,i);a[i]?(a[i].p(f,o),h(a[i],1)):(a[i]=Oe(f),a[i].c(),h(a[i],1),a[i].m(e.parentNode,e))}for(x(),i=t.length;i<a.length;i+=1)s(i);ee()}},i(n){if(!l){for(let o=0;o<t.length;o+=1)h(a[o]);l=!0}},o(n){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)k(a[o]);l=!1},d(n){n&&v(e),Pe(a,n)}}}function Ve(r){let e,l;return e=new Xe({props:{type:r[6].meta_data.transaction.type}}),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,a){P(e,t,a),l=!0},p(t,a){const s={};a&1&&(s.type=t[6].meta_data.transaction.type),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Oe(r){let e,l,t=r[6].description+"",a,s,n,o,i,f=r[6].source+"",c,d,u,_,m=r[6]?.recurrence?.type+"",S,$,w=r[6]?.recurrence?.start_date+"",q,U,Y,j,g=Ce(r[6].amount)+"",C,y,D,b,z,J,E=r[6]?.meta_data?.transaction&&Ve(r);function je(){return r[3](r[6])}return{c(){e=B("div"),l=B("div"),a=H(t),s=N(),n=B("div"),o=B("div"),i=B("div"),c=H(f),d=N(),u=B("div"),_=B("span"),S=H(m),$=H(`
						Bill starting `),q=H(w),U=N(),E&&E.c(),Y=N(),j=B("button"),C=H(g),D=N(),this.h()},l(Q){e=T(Q,"DIV",{});var A=M(e);l=T(A,"DIV",{class:!0});var he=M(l);a=K(he,t),he.forEach(v),s=F(A),n=T(A,"DIV",{class:!0});var fe=M(n);o=T(fe,"DIV",{class:!0});var le=M(o);i=T(le,"DIV",{class:!0});var ve=M(i);c=K(ve,f),ve.forEach(v),d=F(le),u=T(le,"DIV",{class:!0});var ue=M(u);_=T(ue,"SPAN",{class:!0});var be=M(_);S=K(be,m),be.forEach(v),$=K(ue,`
						Bill starting `),q=K(ue,w),ue.forEach(v),U=F(le),E&&E.l(le),le.forEach(v),Y=F(fe),j=T(fe,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var $e=M(j);C=K($e,g),$e.forEach(v),fe.forEach(v),D=F(A),A.forEach(v),this.h()},h(){I(l,"class","fw-bold"),I(i,"class","fw-light"),I(_,"class","text-capitalize"),I(u,"class","fw-lighter text-muted small"),I(o,"class","small"),I(j,"class","btn btn-sm btn-link ps-0"),I(j,"data-bs-toggle","offcanvas"),I(j,"data-bs-target",y="#"+r[1]),I(j,"aria-controls",r[1]),I(n,"class","d-flex justify-content-between")},m(Q,A){R(Q,e,A),p(e,l),p(l,a),p(e,s),p(e,n),p(n,o),p(o,i),p(i,c),p(o,d),p(o,u),p(u,_),p(_,S),p(u,$),p(u,q),p(o,U),E&&E.m(o,null),p(n,Y),p(n,j),p(j,C),p(e,D),b=!0,z||(J=re(j,"click",je),z=!0)},p(Q,A){r=Q,(!b||A&1)&&t!==(t=r[6].description+"")&&te(a,t),(!b||A&1)&&f!==(f=r[6].source+"")&&te(c,f),(!b||A&1)&&m!==(m=r[6]?.recurrence?.type+"")&&te(S,m),(!b||A&1)&&w!==(w=r[6]?.recurrence?.start_date+"")&&te(q,w),r[6]?.meta_data?.transaction?E?(E.p(r,A),A&1&&h(E,1)):(E=Ve(r),E.c(),h(E,1),E.m(o,null)):E&&(x(),k(E,1,1,()=>{E=null}),ee()),(!b||A&1)&&g!==(g=Ce(r[6].amount)+"")&&te(C,g),(!b||A&2&&y!==(y="#"+r[1]))&&I(j,"data-bs-target",y),(!b||A&2)&&I(j,"aria-controls",r[1])},i(Q){b||(h(E),b=!0)},o(Q){k(E),b=!1},d(Q){Q&&v(e),E&&E.d(),z=!1,J()}}}function bt(r){let e,l,t=r[0].length&&Fe(r);return{c(){t&&t.c(),e=G()},l(a){t&&t.l(a),e=G()},m(a,s){t&&t.m(a,s),R(a,e,s),l=!0},p(a,[s]){a[0].length?t?(t.p(a,s),s&1&&h(t,1)):(t=Fe(a),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(x(),k(t,1,1,()=>{t=null}),ee())},i(a){l||(h(t),l=!0)},o(a){k(t),l=!1},d(a){a&&v(e),t&&t.d(a)}}}function $t(r,e,l){let{data:t=[]}=e,{drawerId:a=""}=e;const{stores:{targetBill:s,loading:n}}=ge(),o=f=>{n.set(!0),setTimeout(()=>{s.set(f),n.set(!1)},800)},i=f=>o(f);return r.$$set=f=>{"data"in f&&l(0,t=f.data),"drawerId"in f&&l(1,a=f.drawerId)},[t,a,o,i]}class kt extends X{constructor(e){super(),Z(this,e,$t,bt,W,{data:0,drawerId:1})}}function wt(r){let e,l;return e=new He({}),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,a){P(e,t,a),l=!0},p:ce,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ct(r){let e,l,t;function a(n){r[8](n)}let s={bill:r[0],drawerId:ae};return r[2]!==void 0&&(s.loading=r[2]),e=new vt({props:s}),ie.push(()=>oe(e,"loading",a)),{c(){V(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){P(e,n,o),t=!0},p(n,o){const i={};o&1&&(i.bill=n[0]),!l&&o&4&&(l=!0,i.loading=n[2],se(()=>l=!1)),e.$set(i)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function yt(r){let e,l,t,a;const s=[Ct,wt],n=[];function o(i,f){return i[2]?1:0}return e=o(r),l=n[e]=s[e](r),{c(){l.c(),t=G()},l(i){l.l(i),t=G()},m(i,f){n[e].m(i,f),R(i,t,f),a=!0},p(i,f){let c=e;e=o(i),e===c?n[e].p(i,f):(x(),k(n[c],1,1,()=>{n[c]=null}),ee(),l=n[e],l?l.p(i,f):(l=n[e]=s[e](i),l.c()),h(l,1),l.m(t.parentNode,t))},i(i){a||(h(l),a=!0)},o(i){k(l),a=!1},d(i){i&&v(t),n[e].d(i)}}}function Dt(r){let e,l,t,a,s,n="Bills",o,i,f,c,d,u,_,m,S;return e=new ze({props:{title:r[1],id:ae,$$slots:{default:[yt]},$$scope:{ctx:r}}}),u=new kt({props:{drawerId:ae,data:r[3]}}),{c(){V(e.$$.fragment),l=N(),t=B("div"),a=B("div"),s=B("h2"),s.textContent=n,o=N(),i=B("div"),f=B("button"),c=B("i"),d=N(),V(u.$$.fragment),this.h()},l($){O(e.$$.fragment,$),l=F($),t=T($,"DIV",{class:!0});var w=M(t);a=T(w,"DIV",{class:!0});var q=M(a);s=T(q,"H2",{"data-svelte-h":!0}),ne(s)!=="svelte-14q1s24"&&(s.textContent=n),o=F(q),i=T(q,"DIV",{});var U=M(i);f=T(U,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var Y=M(f);c=T(Y,"I",{class:!0}),M(c).forEach(v),Y.forEach(v),U.forEach(v),q.forEach(v),d=F(w),O(u.$$.fragment,w),w.forEach(v),this.h()},h(){I(c,"class","bi bi-plus"),I(f,"class","btn btn-sm btn-secondary"),I(f,"data-bs-toggle","offcanvas"),I(f,"data-bs-target","#"+ae),I(f,"aria-controls",ae),I(a,"class","d-flex justify-content-between align-items-center"),I(t,"class","d-flex flex-column gap-3")},m($,w){P(e,$,w),R($,l,w),R($,t,w),p(t,a),p(a,s),p(a,o),p(a,i),p(i,f),p(f,c),p(t,d),P(u,t,null),_=!0,m||(S=re(f,"click",r[7]),m=!0)},p($,[w]){const q={};w&2&&(q.title=$[1]),w&2053&&(q.$$scope={dirty:w,ctx:$}),e.$set(q);const U={};w&8&&(U.data=$[3]),u.$set(U)},i($){_||(h(e.$$.fragment,$),h(u.$$.fragment,$),_=!0)},o($){k(e.$$.fragment,$),k(u.$$.fragment,$),_=!1},d($){$&&(v(l),v(t)),L(e,$),L(u),m=!1,S()}}}const ae="bill-form";function Et(r,e,l){let t,a,s,n;const{stores:{data:o,targetBill:i,loading:f},actions:{reload:c}}=ge();pe(r,o,m=>l(3,n=m)),pe(r,i,m=>l(0,a=m)),pe(r,f,m=>l(2,s=m));const d={description:"",source:"",amount:0};Re(()=>c());const u=()=>{f.set(!0),setTimeout(()=>{i.set(d),f.set(!1)},1500)};function _(m){s=m,f.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=a?.id?"Edit Bill":"Create Bill")},[a,t,s,n,o,i,f,u,_]}class It extends X{constructor(e){super(),Z(this,e,Et,Dt,W,{})}}function Bt(r){let e,l;return e=new It({}),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,a){P(e,t,a),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Tt(r){let e,l;return e=new Ue({props:{pageTitle:"Bills",$$slots:{default:[Bt]},$$scope:{ctx:r}}}),{c(){V(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,a){P(e,t,a),l=!0},p(t,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}class At extends X{constructor(e){super(),Z(this,e,null,Tt,W,{})}}export{At as component,jt as universal};
