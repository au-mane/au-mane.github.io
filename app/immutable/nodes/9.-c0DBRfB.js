import{s as U,F as K,a6 as le,E as fe,A as H,o as j,f as k,e as B,d as N,j as M,k as V,i as P,n as T,p as w,t as W,m as X,M as ke,l as ce,q as de,D as De,r as se,v as Be,a7 as Me,w as Ce}from"../chunks/scheduler.CBku5hu2.js";import{S as G,i as J,f as re,c as C,b as F,m as E,t as h,a as $,d as S,g as Z,e as x}from"../chunks/index.EWtk3-rK.js";import{P as Fe}from"../chunks/PageLayout.XeaKgeIE.js";import{B as ne,c as Ee,D as Se,F as Te}from"../chunks/FormSkeleton.DWivrZgw.js";import{D as ye,N as Ve,f as Y,p as te}from"../chunks/DateField.kIEdPWrB.js";import{w as ie}from"../chunks/index.CCnsF9wr.js";import{g as Le,d as Ne,c as Pe,u as je}from"../chunks/budgets.api.DakJsCjE.js";import{t as Ie,f as ge}from"../chunks/app.state.B1fWZ-BN.js";import{e as me}from"../chunks/Header.CKuajO5K.js";function oe(l){const e=Ie(l),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function ue(l){const e=Ie(l);return e.setDate(1),e.setHours(0,0,0,0),e}const Ae=!0,wt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ae},Symbol.toStringTag,{value:"Module"}));let z=null;const Oe=()=>{const l=ie(!1),e=ie([]),n=ie();return z={stores:{loading:l,targetBudget:n,data:e},actions:{reload:async()=>{l.set(!0);const i=await Le();e.set(i),l.set(!1)},createBudget:async i=>{l.set(!0);try{await Pe(i)}catch(s){console.error(s)}finally{l.set(!1)}},updateBudget:async(i,s)=>{l.set(!0);try{await je(i,s)}catch(o){console.error(o)}finally{l.set(!1)}},deleteBudget:async i=>{l.set(!0);try{await Ne(i)}catch(s){console.error(s)}finally{l.set(!1)}}}},z},ae=()=>z?.stores&&Object.keys(z.stores).length>0&&z?.actions&&Object.keys(z.actions).length>0?z:Oe(),qe=()=>{z=null};function Ye(l){let e,n,t;function a(r){l[6](r)}let d={label:"Start Date",name:"budget-start-date",placeholder:"",helperText:"",loading:l[1],required:!0,isInvalid:l[2]};return l[0]!==void 0&&(d.value=l[0]),e=new ye({props:d}),K.push(()=>re(e,"value",a)),e.$on("valueChanged",l[3]),{c(){C(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,i){E(e,r,i),t=!0},p(r,[i]){const s={};i&2&&(s.loading=r[1]),i&4&&(s.isInvalid=r[2]),!n&&i&1&&(n=!0,s.value=r[0],le(()=>n=!1)),e.$set(s)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){S(e,r)}}}function Re(l,e,n){let t,{value:a}=e,{loading:d}=e;async function r(){return new Promise(c=>{setTimeout(()=>{n(5,i=!0),c(i&&(!a.trim()||a.trim()===""))})})}let i=!1;const s=fe(),o=()=>{s("valueChanged",{value:a})};function p(c){a=c,n(0,a)}return l.$$set=c=>{"value"in c&&n(0,a=c.value),"loading"in c&&n(1,d=c.loading)},l.$$.update=()=>{l.$$.dirty&33&&n(2,t=i&&(!a.trim()||a.trim()===""))},[a,d,t,o,r,i,p]}class ze extends G{constructor(e){super(),J(this,e,Re,Ye,U,{value:0,loading:1,validateFieldIsInvalid:4})}get validateFieldIsInvalid(){return this.$$.ctx[4]}}function He(l){let e,n,t;function a(r){l[6](r)}let d={label:"End Date",name:"budget-end-date",placeholder:"",helperText:"",loading:l[1],required:!0,isInvalid:l[2]};return l[0]!==void 0&&(d.value=l[0]),e=new ye({props:d}),K.push(()=>re(e,"value",a)),e.$on("valueChanged",l[3]),{c(){C(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,i){E(e,r,i),t=!0},p(r,[i]){const s={};i&2&&(s.loading=r[1]),i&4&&(s.isInvalid=r[2]),!n&&i&1&&(n=!0,s.value=r[0],le(()=>n=!1)),e.$set(s)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){S(e,r)}}}function Ke(l,e,n){let t,{value:a}=e,{loading:d}=e;async function r(){return new Promise(c=>{setTimeout(()=>{n(5,i=!0),c(i&&(!a.trim()||a.trim()===""))})})}let i=!1;const s=fe(),o=()=>{s("valueChanged",{value:a})};function p(c){a=c,n(0,a)}return l.$$set=c=>{"value"in c&&n(0,a=c.value),"loading"in c&&n(1,d=c.loading)},l.$$.update=()=>{l.$$.dirty&33&&n(2,t=i&&(!a.trim()||a.trim()===""))},[a,d,t,o,r,i,p]}class Ue extends G{constructor(e){super(),J(this,e,Ke,He,U,{value:0,loading:1,validateFieldIsInvalid:4})}get validateFieldIsInvalid(){return this.$$.ctx[4]}}function Ge(l){let e,n,t;function a(r){l[7](r)}let d={min:0,label:"Max Limit",name:"budget-max-limit",placeholder:"",helperText:l[3],loading:l[1],required:!0,isInvalid:l[2]};return l[0]!==void 0&&(d.value=l[0]),e=new Ve({props:d}),K.push(()=>re(e,"value",a)),e.$on("valueChanged",l[4]),{c(){C(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,i){E(e,r,i),t=!0},p(r,[i]){const s={};i&8&&(s.helperText=r[3]),i&2&&(s.loading=r[1]),i&4&&(s.isInvalid=r[2]),!n&&i&1&&(n=!0,s.value=r[0],le(()=>n=!1)),e.$set(s)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){S(e,r)}}}function Je(l,e,n){let t,a,{value:d}=e,{loading:r}=e;async function i(){return new Promise(u=>{setTimeout(()=>{n(6,p=!0),u(p&&(!d||d===0||d>1e12))})})}const s=fe(),o=()=>{s("valueChanged",{value:d}),n(6,p=!0)};let p=!1;function c(u){d=u,n(0,d)}return l.$$set=u=>{"value"in u&&n(0,d=u.value),"loading"in u&&n(1,r=u.loading)},l.$$.update=()=>{l.$$.dirty&65&&n(2,t=p&&(!d||d===0||d>1e12)),l.$$.dirty&4&&n(3,a=t?"Value should be greater 0":"")},[d,r,t,a,o,i,p,c]}class Qe extends G{constructor(e){super(),J(this,e,Je,Ge,U,{value:0,loading:1,validateFieldIsInvalid:5})}get validateFieldIsInvalid(){return this.$$.ctx[5]}}function _e(l){let e,n,t,a,d,r,i,s,o,p,c,u,_,m,D,A={loading:l[0],value:l[1].start_at};n=new ze({props:A}),l[13](n),n.$on("valueChanged",l[14]);let O={loading:l[0],value:l[1].end_at};a=new Ue({props:O}),l[15](a),a.$on("valueChanged",l[16]);let L={loading:l[0],value:l[2]};r=new Qe({props:L}),l[17](r),r.$on("valueChanged",l[18]);let y=l[1].id&&he(l);return u=new ne({props:{loading:l[0],variant:"secondary",$$slots:{default:[Xe]},$$scope:{ctx:l}}}),u.$on("click",l[7]),m=new ne({props:{loading:l[0],variant:"primary",$$slots:{default:[Ze]},$$scope:{ctx:l}}}),m.$on("click",l[8]),{c(){e=B("div"),C(n.$$.fragment),t=N(),C(a.$$.fragment),d=N(),C(r.$$.fragment),i=N(),s=B("div"),o=B("div"),y&&y.c(),p=N(),c=B("div"),C(u.$$.fragment),_=N(),C(m.$$.fragment),this.h()},l(g){e=M(g,"DIV",{class:!0});var v=V(e);F(n.$$.fragment,v),t=P(v),F(a.$$.fragment,v),d=P(v),F(r.$$.fragment,v),i=P(v),s=M(v,"DIV",{class:!0});var f=V(s);o=M(f,"DIV",{});var b=V(o);y&&y.l(b),b.forEach(k),p=P(f),c=M(f,"DIV",{});var I=V(c);F(u.$$.fragment,I),_=P(I),F(m.$$.fragment,I),I.forEach(k),f.forEach(k),v.forEach(k),this.h()},h(){T(s,"class","d-flex justify-content-between"),T(e,"class","d-flex flex-column gap-3")},m(g,v){j(g,e,v),E(n,e,null),w(e,t),E(a,e,null),w(e,d),E(r,e,null),w(e,i),w(e,s),w(s,o),y&&y.m(o,null),w(s,p),w(s,c),E(u,c,null),w(c,_),E(m,c,null),D=!0},p(g,v){const f={};v&1&&(f.loading=g[0]),v&2&&(f.value=g[1].start_at),n.$set(f);const b={};v&1&&(b.loading=g[0]),v&2&&(b.value=g[1].end_at),a.$set(b);const I={};v&1&&(I.loading=g[0]),v&4&&(I.value=g[2]),r.$set(I),g[1].id?y?(y.p(g,v),v&2&&h(y,1)):(y=he(g),y.c(),h(y,1),y.m(o,null)):y&&(Z(),$(y,1,1,()=>{y=null}),x());const R={};v&1&&(R.loading=g[0]),v&524288&&(R.$$scope={dirty:v,ctx:g}),u.$set(R);const q={};v&1&&(q.loading=g[0]),v&524288&&(q.$$scope={dirty:v,ctx:g}),m.$set(q)},i(g){D||(h(n.$$.fragment,g),h(a.$$.fragment,g),h(r.$$.fragment,g),h(y),h(u.$$.fragment,g),h(m.$$.fragment,g),D=!0)},o(g){$(n.$$.fragment,g),$(a.$$.fragment,g),$(r.$$.fragment,g),$(y),$(u.$$.fragment,g),$(m.$$.fragment,g),D=!1},d(g){g&&k(e),l[13](null),S(n),l[15](null),S(a),l[17](null),S(r),y&&y.d(),S(u),S(m)}}}function he(l){let e,n;return e=new ne({props:{loading:l[0],variant:"danger",$$slots:{default:[We]},$$scope:{ctx:l}}}),e.$on("click",l[9]),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){E(e,t,a),n=!0},p(t,a){const d={};a&1&&(d.loading=t[0]),a&524288&&(d.$$scope={dirty:a,ctx:t}),e.$set(d)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function We(l){let e;return{c(){e=W("Delete")},l(n){e=X(n,"Delete")},m(n,t){j(n,e,t)},d(n){n&&k(e)}}}function Xe(l){let e;return{c(){e=W("Cancel")},l(n){e=X(n,"Cancel")},m(n,t){j(n,e,t)},d(n){n&&k(e)}}}function Ze(l){let e;return{c(){e=W("Save")},l(n){e=X(n,"Save")},m(n,t){j(n,e,t)},d(n){n&&k(e)}}}function xe(l){let e,n,t=l[1]&&_e(l);return{c(){t&&t.c(),e=H()},l(a){t&&t.l(a),e=H()},m(a,d){t&&t.m(a,d),j(a,e,d),n=!0},p(a,[d]){a[1]?t?(t.p(a,d),d&2&&h(t,1)):(t=_e(a),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(Z(),$(t,1,1,()=>{t=null}),x())},i(a){n||(h(t),n=!0)},o(a){$(t),n=!1},d(a){a&&k(e),t&&t.d(a)}}}function et(l,e,n){let{loading:t=!1}=e,{budget:a}=e,{drawerId:d}=e,r=0,i=100,s={start_at:Y(ue(new Date),"yyyy-MM-dd"),end_at:Y(oe(new Date),"yyyy-MM-dd"),settings:{max_spend_limit:i}},o,p,c;const u=(f,b)=>{const{value:I}=f.detail;if(s)switch(b){case"start-date":n(1,s.start_at=I,s);break;case"end-date":n(1,s.end_at=I,s);break;case"max-settings-max-spend-limit":n(2,i=I),n(1,s={...s,settings:{max_spend_limit:i}});break}},_=()=>{const f=`[data-bs-target="#${d}"]`,b=document.querySelector(f);b&&(b.click(),n(10,a=void 0),n(12,r=void 0),n(1,s={start_at:Y(ue(new Date),"yyyy-MM-dd"),end_at:Y(oe(new Date),"yyyy-MM-dd"),settings:{max_spend_limit:0}}))},m=async()=>{const f=await o.validateFieldIsInvalid(),b=await p.validateFieldIsInvalid(),I=await c.validateFieldIsInvalid();if(f||b||I)return;const{actions:{reload:q,createBudget:Q,updateBudget:we}}=ae();s.id?await we(s.id,s):await Q(s),await q(),_()},D=async()=>{if(!s?.id)return;const{actions:{reload:f,deleteBudget:b}}=ae();Ee({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:async I=>{s?.id&&(I&&await b(s.id),await f(),_())}})};function A(f){K[f?"unshift":"push"](()=>{o=f,n(3,o)})}const O=f=>u(f,"start-date");function L(f){K[f?"unshift":"push"](()=>{p=f,n(4,p)})}const y=f=>u(f,"end-date");function g(f){K[f?"unshift":"push"](()=>{c=f,n(5,c)})}const v=f=>u(f,"max-settings-max-spend-limit");return l.$$set=f=>{"loading"in f&&n(0,t=f.loading),"budget"in f&&n(10,a=f.budget),"drawerId"in f&&n(11,d=f.drawerId)},l.$$.update=()=>{l.$$.dirty&5122&&(!a||r!==a?.id)&&(n(1,s=a?{...s,...a}:s),n(2,i=s?.settings?.max_spend_limit??0),n(12,r=a?.id))},[t,s,i,o,p,c,u,_,m,D,a,d,r,A,O,L,y,g,v]}class tt extends G{constructor(e){super(),J(this,e,et,xe,U,{loading:0,budget:10,drawerId:11})}}function pe(l,e,n){const t=l.slice();return t[6]=e[n],t}function ve(l){let e,n,t=me(l[0]),a=[];for(let r=0;r<t.length;r+=1)a[r]=be(pe(l,t,r));const d=r=>$(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=H()},l(r){for(let i=0;i<a.length;i+=1)a[i].l(r);e=H()},m(r,i){for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(r,i);j(r,e,i),n=!0},p(r,i){if(i&7){t=me(r[0]);let s;for(s=0;s<t.length;s+=1){const o=pe(r,t,s);a[s]?(a[s].p(o,i),h(a[s],1)):(a[s]=be(o),a[s].c(),h(a[s],1),a[s].m(e.parentNode,e))}for(Z(),s=t.length;s<a.length;s+=1)d(s);x()}},i(r){if(!n){for(let i=0;i<t.length;i+=1)h(a[i]);n=!0}},o(r){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)$(a[i]);n=!1},d(r){r&&k(e),ke(a,r)}}}function nt(l){let e=ge(l[6]?.settings?.max_spend_limit)+"",n;return{c(){n=W(e)},l(t){n=X(t,e)},m(t,a){j(t,n,a)},p(t,a){a&1&&e!==(e=ge(t[6]?.settings?.max_spend_limit)+"")&&de(n,e)},d(t){t&&k(n)}}}function be(l){let e,n,t,a,d,r="Start:",i,s=Y(te(l[6].start_at,"yyyy-MM-dd",new Date),"dd MMM yyyy")+"",o,p,c,u,_="End:",m,D=Y(te(l[6].end_at,"yyyy-MM-dd",new Date),"dd MMM yyyy")+"",A,O,L,y,g;function v(){return l[3](l[6])}return L=new ne({props:{cssClassArray:["pe-0"],variant:"link",size:"md","data-bs-toggle":"offcanvas","data-bs-target":"#"+l[1],"aria-controls":l[1],$$slots:{default:[nt]},$$scope:{ctx:l}}}),L.$on("click",v),{c(){e=B("div"),n=B("div"),t=B("div"),a=B("div"),d=B("span"),d.textContent=r,i=N(),o=W(s),p=N(),c=B("div"),u=B("span"),u.textContent=_,m=N(),A=W(D),O=N(),C(L.$$.fragment),y=N(),this.h()},l(f){e=M(f,"DIV",{});var b=V(e);n=M(b,"DIV",{class:!0});var I=V(n);t=M(I,"DIV",{class:!0});var R=V(t);a=M(R,"DIV",{class:!0});var q=V(a);d=M(q,"SPAN",{class:!0,"data-svelte-h":!0}),ce(d)!=="svelte-7dueie"&&(d.textContent=r),i=P(q),o=X(q,s),q.forEach(k),p=P(R),c=M(R,"DIV",{class:!0});var Q=V(c);u=M(Q,"SPAN",{class:!0,"data-svelte-h":!0}),ce(u)!=="svelte-1gnhobp"&&(u.textContent=_),m=P(Q),A=X(Q,D),Q.forEach(k),R.forEach(k),O=P(I),F(L.$$.fragment,I),I.forEach(k),y=P(b),b.forEach(k),this.h()},h(){T(d,"class","fw-bold"),T(a,"class","d-block d-md-inline d-lg-inline d-xl-inline"),T(u,"class","fw-bold"),T(c,"class","d-block d-md-inline d-lg-inline d-xl-inline"),T(t,"class","fw-lighter"),T(n,"class","d-flex justify-content-between")},m(f,b){j(f,e,b),w(e,n),w(n,t),w(t,a),w(a,d),w(a,i),w(a,o),w(t,p),w(t,c),w(c,u),w(c,m),w(c,A),w(n,O),E(L,n,null),w(e,y),g=!0},p(f,b){l=f,(!g||b&1)&&s!==(s=Y(te(l[6].start_at,"yyyy-MM-dd",new Date),"dd MMM yyyy")+"")&&de(o,s),(!g||b&1)&&D!==(D=Y(te(l[6].end_at,"yyyy-MM-dd",new Date),"dd MMM yyyy")+"")&&de(A,D);const I={};b&2&&(I["data-bs-target"]="#"+l[1]),b&2&&(I["aria-controls"]=l[1]),b&513&&(I.$$scope={dirty:b,ctx:l}),L.$set(I)},i(f){g||(h(L.$$.fragment,f),g=!0)},o(f){$(L.$$.fragment,f),g=!1},d(f){f&&k(e),S(L)}}}function at(l){let e,n,t=l[0].length&&ve(l);return{c(){t&&t.c(),e=H()},l(a){t&&t.l(a),e=H()},m(a,d){t&&t.m(a,d),j(a,e,d),n=!0},p(a,[d]){a[0].length?t?(t.p(a,d),d&1&&h(t,1)):(t=ve(a),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(Z(),$(t,1,1,()=>{t=null}),x())},i(a){n||(h(t),n=!0)},o(a){$(t),n=!1},d(a){a&&k(e),t&&t.d(a)}}}function lt(l,e,n){let{data:t=[]}=e,{drawerId:a=""}=e;const{stores:{targetBudget:d,loading:r}}=ae(),i=o=>{r.set(!0),setTimeout(()=>{d.set(o),r.set(!1)},800)},s=o=>i(o);return l.$$set=o=>{"data"in o&&n(0,t=o.data),"drawerId"in o&&n(1,a=o.drawerId)},[t,a,i,s]}class rt extends G{constructor(e){super(),J(this,e,lt,at,U,{data:0,drawerId:1})}}function st(l){let e,n;return e=new Te({}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){E(e,t,a),n=!0},p:Ce,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function it(l){let e,n,t;function a(r){l[8](r)}let d={budget:l[0],drawerId:ee};return l[2]!==void 0&&(d.loading=l[2]),e=new tt({props:d}),K.push(()=>re(e,"loading",a)),{c(){C(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,i){E(e,r,i),t=!0},p(r,i){const s={};i&1&&(s.budget=r[0]),!n&&i&4&&(n=!0,s.loading=r[2],le(()=>n=!1)),e.$set(s)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){S(e,r)}}}function dt(l){let e,n,t,a;const d=[it,st],r=[];function i(s,o){return s[2]?1:0}return e=i(l),n=r[e]=d[e](l),{c(){n.c(),t=H()},l(s){n.l(s),t=H()},m(s,o){r[e].m(s,o),j(s,t,o),a=!0},p(s,o){let p=e;e=i(s),e===p?r[e].p(s,o):(Z(),$(r[p],1,1,()=>{r[p]=null}),x(),n=r[e],n?n.p(s,o):(n=r[e]=d[e](s),n.c()),h(n,1),n.m(t.parentNode,t))},i(s){a||(h(n),a=!0)},o(s){$(n),a=!1},d(s){s&&k(t),r[e].d(s)}}}function $e(l){let e,n;return e=new rt({props:{drawerId:ee,data:l[3]}}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){E(e,t,a),n=!0},p(t,a){const d={};a&8&&(d.data=t[3]),e.$set(d)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function ot(l){let e,n,t,a,d,r,i,s,o,p,c;e=new Se({props:{title:l[1],id:ee,$$slots:{default:[dt]},$$scope:{ctx:l}}});let u=l[3].length>0&&$e(l);return{c(){C(e.$$.fragment),n=N(),t=B("div"),a=B("div"),d=B("div"),r=B("button"),i=B("i"),s=N(),u&&u.c(),this.h()},l(_){F(e.$$.fragment,_),n=P(_),t=M(_,"DIV",{class:!0});var m=V(t);a=M(m,"DIV",{class:!0});var D=V(a);d=M(D,"DIV",{});var A=V(d);r=M(A,"BUTTON",{class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var O=V(r);i=M(O,"I",{class:!0}),V(i).forEach(k),O.forEach(k),A.forEach(k),D.forEach(k),s=P(m),u&&u.l(m),m.forEach(k),this.h()},h(){T(i,"class","bi bi-plus"),T(r,"class","btn btn-sm btn-secondary"),T(r,"data-bs-toggle","offcanvas"),T(r,"data-bs-target","#"+ee),T(r,"aria-controls",ee),T(a,"class","d-flex justify-content-end align-items-center"),T(t,"class","d-flex flex-column gap-3")},m(_,m){E(e,_,m),j(_,n,m),j(_,t,m),w(t,a),w(a,d),w(d,r),w(r,i),w(t,s),u&&u.m(t,null),o=!0,p||(c=De(r,"click",l[7]),p=!0)},p(_,[m]){const D={};m&2&&(D.title=_[1]),m&2053&&(D.$$scope={dirty:m,ctx:_}),e.$set(D),_[3].length>0?u?(u.p(_,m),m&8&&h(u,1)):(u=$e(_),u.c(),h(u,1),u.m(t,null)):u&&(Z(),$(u,1,1,()=>{u=null}),x())},i(_){o||(h(e.$$.fragment,_),h(u),o=!0)},o(_){$(e.$$.fragment,_),$(u),o=!1},d(_){_&&(k(n),k(t)),S(e,_),u&&u.d(),p=!1,c()}}}const ee="budget-form";function ut(l,e,n){let t,a,d,r;const{stores:{data:i,targetBudget:s,loading:o},actions:{reload:p}}=ae();se(l,i,m=>n(3,r=m)),se(l,s,m=>n(0,a=m)),se(l,o,m=>n(2,d=m));const c={start_at:Y(ue(new Date),"yyyy-MM-dd"),end_at:Y(oe(new Date),"yyyy-MM-dd"),settings:{max_spend_limit:100}},u=()=>{o.set(!0),setTimeout(()=>{s.set(c),o.set(!1)},1500)};Be(p),Me(qe);function _(m){d=m,o.set(d)}return l.$$.update=()=>{l.$$.dirty&1&&n(1,t=a?.id?"Edit Budget":"Create Budget")},[a,t,d,r,i,s,o,u,_]}class ft extends G{constructor(e){super(),J(this,e,ut,ot,U,{})}}function ct(l){let e,n;return e=new ft({}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){E(e,t,a),n=!0},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function gt(l){let e,n;return e=new Fe({props:{pageTitle:"Budgets",$$slots:{default:[ct]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){E(e,t,a),n=!0},p(t,[a]){const d={};a&1&&(d.$$scope={dirty:a,ctx:t}),e.$set(d)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}class kt extends G{constructor(e){super(),J(this,e,null,gt,U,{})}}export{kt as component,wt as universal};
